(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{497:function(t,e,r){var content=r(616);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(3).default)("65756665",content,!0,{sourceMap:!1})},614:function(t,e,r){t.exports=r.p+"img/phone.d17cbca.png"},615:function(t,e,r){"use strict";r(497)},616:function(t,e,r){var o=r(2)(!1);o.push([t.i,".wxPay .header[data-v-8fb51a04]{color:#999;height:60px;line-height:60px}.wxPay .header .home[data-v-8fb51a04]{color:#282828}.wxPay .wrapper[data-v-8fb51a04]{padding:26px 30px;background-color:#fff}.wxPay .wrapper .title[data-v-8fb51a04]{margin-bottom:51px;font-size:20px}.wxPay .wrapper .title .amount[data-v-8fb51a04]{font-size:14px;color:#969696}.wxPay .wrapper .title .amount .num[data-v-8fb51a04]{font-size:22px;font-weight:700}.wxPay .wrapper .wx[data-v-8fb51a04]{width:310px}.wxPay .wrapper .wx .pictrue[data-v-8fb51a04]{width:100%;height:310px;border:1px solid #ccc}.wxPay .wrapper .wx .pictrue img[data-v-8fb51a04]{width:100%;height:100%}.wxPay .wrapper .wx .text[data-v-8fb51a04]{width:100%;height:72px;background-color:#eb5e4a;color:#fff;font-size:14px;margin-top:16px}.wxPay .wrapper .wx .text .iconfont[data-v-8fb51a04]{font-size:50px;margin-right:30px}.wxPay .wrapper .wx .text .tip[data-v-8fb51a04]{margin-top:4px}.wxPay .wrapper .phone[data-v-8fb51a04]{margin-left:144px;width:262px;height:399px}.wxPay .wrapper .phone img[data-v-8fb51a04]{width:100%;height:100%}.wxPay .wrapper .selectPay[data-v-8fb51a04]{font-size:16px;color:#236fe9;margin-top:68px;cursor:pointer}.wxPay .wrapper .selectPay .iconfont[data-v-8fb51a04]{margin-right:16px;font-size:15px}",""]),t.exports=o},661:function(t,e,r){"use strict";r.r(e);var o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"text acea-row row-center-wrapper"},[e("div",{staticClass:"iconfont icon-saoyisao"}),t._v(" "),e("div",[e("div",[t._v("请使用微信扫一扫")]),t._v(" "),e("div",{staticClass:"tip"},[t._v("扫描二维码支付")])])])},function(){var t=this._self._c;return t("div",{staticClass:"phone"},[t("img",{attrs:{src:r(614)}})])}],n=(r(22),{name:"wxPay",auth:"guest",data:function(){return{orderId:0,totalPrice:0,codeUrl:"",logo:"",invalid:0,endTime:"",timeName:null}},watch:{endTime:function(t){0===t&&clearInterval(this.timeName)}},fetch:function(t){var e=t.store;e.commit("isHeader",!0),e.commit("isFooter",!0)},head:function(){return{title:"微信支付-"+this.$store.state.titleCon}},created:function(){this.orderId=this.$route.query.orderId,this.totalPrice=this.$route.query.totalPrice,this.goWx()},mounted:function(){var t=this;this.timeName=setInterval((function(){setTimeout(t.wxSuccess(),0)}),2e3)},beforeDestroy:function(){clearInterval(this.timeName)},methods:{wxSuccess:function(){var t=this;t.$axios.get("/pc/check_order_status/"+t.orderId+"/"+t.invalid).then((function(e){t.endTime=e.data.time,e.data.status&&(clearInterval(t.timeName),t.$message.success("支付成功"),t.$store.commit("cartNum",0),t.getOrderCoupon(t.orderId),setTimeout((function(){t.$router.replace({path:"/order_detail",query:{orderId:t.orderId}})}),1e3))})).catch((function(e){t.$message.error(e),setTimeout((function(){t.$router.replace({path:"/"})}),1e3)}))},getOrderCoupon:function(t){this.$axios.post("/v2/order/product_coupon/"+t).then((function(t){}))},Return:function(){this.$router.go(-1)},goWx:function(){var t=this;t.$axios.post("/order/pay",{uni:t.orderId,paytype:"weixin",from:"pc"}).then((function(e){t.codeUrl=e.data.result.jsConfig.code_url,t.invalid=e.data.result.jsConfig.invalid})).catch((function(e){t.$message.error(e)}))}}}),c=(r(615),r(16)),component=Object(c.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"wxPay wrapper_1200"},[e("div",{staticClass:"header"},[e("span",{staticClass:"home"},[e("nuxt-link",{attrs:{to:"/"}},[t._v("首页")]),t._v(" > 确认订单 >")],1),t._v(" 订单号："+t._s(t.orderId)+"\n  ")]),t._v(" "),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"title acea-row row-between-wrapper"},[e("div",[t._v("微信支付")]),t._v(" "),e("div",{staticClass:"amount"},[t._v("应付金额："),e("span",{staticClass:"num font-color"},[t._v(t._s(t.totalPrice))]),t._v("元")])]),t._v(" "),e("div",{staticClass:"acea-row row-center-wrapper"},[e("div",{staticClass:"wx"},[e("div",{staticClass:"pictrue"},[e("client-only",[e("vue-qr",{staticClass:"bicode",attrs:{logoSrc:t.logo,text:t.codeUrl,size:310}})],1)],1),t._v(" "),t._m(0)]),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticClass:"selectPay",on:{click:t.Return}},[e("span",{staticClass:"iconfont icon-fanhui"}),t._v("选择其他支付方式")])])])}),o,!1,null,"8fb51a04",null);e.default=component.exports}}]);