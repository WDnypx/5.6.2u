(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{455:function(t,e,r){t.exports=r.p+"img/refund.45a1288.png"},485:function(t,e,r){var content=r(579);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(3).default)("cb2f6356",content,!0,{sourceMap:!1})},578:function(t,e,r){"use strict";r(485)},579:function(t,e,r){var o=r(2)(!1);o.push([t.i,".header[data-v-827c6632]{height:60px;line-height:60px;color:#999}.header .home[data-v-827c6632]{color:#282828}.refund[data-v-827c6632]{padding:40px 20px 46px;background:#fff}.refund .el-icon-plus[data-v-827c6632]{margin-top:20px}.refund .table[data-v-827c6632]{width:100%;border:1px solid #efefef;border-collapse:collapse}.refund .table thead[data-v-827c6632]{background:#efefef}.refund .table thead td[data-v-827c6632]{height:40px;font-size:14px;text-align:center;color:#282828}.refund .table tbody .td[data-v-827c6632]{width:219px;border:1px solid #efefef;font-size:14px;text-align:center;color:#282828}.refund .table tbody .td[data-v-827c6632]:first-child{width:auto;padding:20px 50px;text-align:left}.refund .table tbody .td:first-child span[data-v-827c6632]{margin-left:10px;font-size:12px;color:#b1b1b1}.refund .table img[data-v-827c6632]{float:left;width:70px;height:70px}.refund .table img+div[data-v-827c6632]{margin-left:90px}.refund .table .name[data-v-827c6632]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;margin-bottom:13px;overflow:hidden}.refund .el-form[data-v-827c6632]{margin-top:20px}.refund .el-form .cont[data-v-827c6632]{padding-right:25px;padding-left:25px;border:1px solid #efefef}.refund .el-form .cont .el-form-item[data-v-827c6632]{padding-top:25px;padding-bottom:25px;margin-bottom:0}.refund .el-form .cont .el-form-item~.el-form-item[data-v-827c6632]{border-top:1px solid #efefef}.refund .el-form>.el-form-item[data-v-827c6632]{margin-top:25px;margin-bottom:0;text-align:right}.refund .el-form .el-textarea[data-v-827c6632]{width:820px}.refund .el-form[data-v-827c6632].el-textarea__inner{border:none;background:#f7f7f7}.refund .el-form[data-v-827c6632].el-upload--picture-card{width:70px;height:70px;border-style:solid;line-height:68px}.refund .el-form[data-v-827c6632].el-upload-list--picture-card .el-upload-list__item{width:70px;height:70px}.refund-box[data-v-827c6632]{display:flex;flex-direction:column;align-items:center}.refund-box .title[data-v-827c6632]{color:#e93323;font-size:20px;margin-top:20px}.refund-box span[data-v-827c6632]{margin:10px 0 40px;color:#939393;font-size:14px}.refund-box button[data-v-827c6632]{width:150px}.img-box-wrapper[data-v-827c6632]{display:flex;flex-wrap:wrap}.img-box-wrapper .img-item[data-v-827c6632]{position:relative;width:70px;height:70px;margin-right:20px;margin-bottom:12px;border:1px solid #c0ccda;border-radius:6px}.img-box-wrapper .img-item img[data-v-827c6632]{width:100%;height:100%;border-radius:6px}.img-box-wrapper .img-item .icon[data-v-827c6632]{position:absolute;right:-10px;top:-8px;font-size:20px;cursor:pointer;color:#e93323}",""]),t.exports=o},649:function(t,e,r){"use strict";r.r(e);r(238),r(7);var o=r(111),n=r.n(o),d=r(12),c=r(4),l=(r(34),r(35),r(10),r(36),r(29),r(237),r(22),r(87),r(48)),f={auth:"guest",data:function(){return{form:{region:"",desc:""},upLoadUrl:l.a.apiBaseURL+"/upload/image",pics:[],refundArray:[],refund_type:"1",returnGoodsData:[{label:"仅退款",value:"1"},{label:"退货并退款",value:"2"}],orderData:{},myHeaders:{},isDialog:!1,one_price:0,refund_num:0}},asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,o,n,c,data,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.app,o=t.query,e.next=1,Promise.all([r.$axios.get("/order/refund_detail/".concat(o.orderId).concat(o.cart_id?"/".concat(o.cart_id):"")),r.$axios.get("/order/refund/reason")]);case 1:return n=e.sent,c=Object(d.a)(n,2),data=c[0],l=c[1],data.data.cartInfo.map((function(t){t.refund_cart_num=t.cart_num})),e.abrupt("return",{one_price:1e4*(data.data.cartInfo[0].truePrice+Number(data.data.cartInfo[0].one_postage_price)),refund_num:data.data.total_num,orderData:data.data,refundArray:l.data});case 2:case"end":return e.stop()}}),e)})))()},fetch:function(t){var e=t.store;e.commit("isHeader",!0),e.commit("isFooter",!0)},head:function(){return{title:"申请退款-"+this.$store.state.titleCon}},created:function(){var t=this.$cookies.get("auth.strategy");this.myHeaders={Authorization:this.$cookies.get("auth._token.".concat(t))}},methods:{handleClose:function(){this.isDialog=!1},subBtn:function(){return this.isDialog=!1,this.$router.replace({path:"/user/orderList",query:{page_type:1}})},onSubmit:function(){var t=this,e=this;if(""===e.form.region)return n.a.error("请选择退款原因");var r=[];this.orderData.cartInfo.map((function(i){r.push({cart_id:i.id,cart_num:i.refund_cart_num})})),e.$axios.post("/order/refund/apply/".concat(e.orderData.id),{text:e.form.region||"",refund_reason_wap_explain:e.form.desc,refund_reason_wap_img:e.pics.join(","),uni:e.orderData.order_id,refund_type:e.refund_type,cart_ids:r}).then((function(e){t.isDialog=!0})).catch((function(t){return n.a.error(t)}))},handleExceed:function(){this.$message.warning("最多上传3张图片")},handleSuccess:function(t){200===t.status?this.pics.push(t.data.url):400===t.status&&this.$message.error(t.msg)},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;return e||this.$message.error("上传图片只能是 JPG、PNG 格式!"),e},handleRemove:function(t,e){var r=this;this.pics=[],e.forEach((function(t){r.pics.push(t.response.data.url)}))},inputNumber:function(t,e){var r=this,o=t+"";o.indexOf(".")>-1&&(o=o.split(".")[0]),o>this.orderData.total_num?this.$nextTick((function(){e.refund_cart_num=r.orderData.total_num})):this.$nextTick((function(){e.refund_cart_num=o}))}}},m=(r(578),r(16)),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"refund wrapper_1200"},[e("table",{staticClass:"table"},[t._m(1),t._v(" "),e("tbody",t._l(t.orderData.cartInfo,(function(r,o){return e("tr",{key:o},[e("td",{staticClass:"td"},[e("table",[e("tr",[e("td",[e("img",{attrs:{src:r.productInfo.image}}),t._v(" "),e("div",[e("div",{staticClass:"name"},[t._v("\n                      "+t._s(r.productInfo.store_name)),r.productInfo.attrInfo?[t._v("\n                        "+t._s(r.productInfo.attrInfo.suk))]:t._e()],2),t._v(" "),r.productInfo.attrInfo?e("div",[t._v("\n                      ￥"+t._s(r.productInfo.attrInfo.price)),e("span",[t._v("x"+t._s(r.cart_num))])]):e("div",[t._v("\n                      ￥"+t._s(r.productInfo.price)),e("span",[t._v("x"+t._s(r.cart_num))])])])])])])]),t._v(" "),e("td",{staticClass:"td"},[1==t.orderData.total_num&&1==t.orderData.cartInfo.length?e("div",{staticClass:"num"},[t._v("\n              "+t._s(r.cart_num)+"\n            ")]):e("el-input-number",{attrs:{min:1,max:r.surplus_refund_num,label:"描述文字"},model:{value:r.refund_cart_num,callback:function(e){t.$set(r,"refund_cart_num",e)},expression:"item.refund_cart_num"}})],1)])})),0)]),t._v(" "),e("client-only",[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("div",{staticClass:"cont"},[t.orderData._status&&1!==t.orderData._status._type&&"fictitious"!==t.orderData.delivery_type?e("el-form-item",{attrs:{label:"退款类型"}},[e("el-radio-group",{model:{value:t.refund_type,callback:function(e){t.refund_type=e},expression:"refund_type"}},t._l(t.returnGoodsData,(function(r,o){return e("el-radio",{key:o,attrs:{label:r.value}},[t._v(t._s(r.label))])})),1)],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"退款原因"}},[e("el-select",{attrs:{placeholder:"请选择退款原因"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.refundArray,(function(t,r){return e("el-option",{key:r,attrs:{label:t,value:t}})})),1)],1),t._v(" "),e("el-form-item",{attrs:{label:"备注说明"}},[e("el-input",{attrs:{type:"textarea",placeholder:"填写备注信息，100字以内",autosize:{minRows:4},maxlength:"100"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"上传凭证"}},[e("div",{staticClass:"img-box-wrapper"},[e("el-upload",{attrs:{"list-type":"picture-card",action:t.upLoadUrl,headers:t.myHeaders,limit:3,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"before-upload":t.beforeUpload}},[e("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),e("p",{staticStyle:{color:"#999"}},[t._v("最多上传3张图片")])])],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("申请退款")])],1)],1)],1)],1),t._v(" "),e("client-only",[e("el-dialog",{attrs:{modal:!0,visible:t.isDialog,width:"370px","show-close":!1},on:{"update:visible":function(e){t.isDialog=e}}},[e("div",{staticClass:"refund-box"},[e("img",{attrs:{src:r(455),alt:""}}),t._v(" "),e("p",{staticClass:"title"},[t._v("退款申请提交成功")]),t._v(" "),e("span",[t._v("我们会继续为您提供更优质的商品及服务")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.subBtn}},[t._v("确认")])],1)])],1)],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header wrapper_1200"},[e("span",{staticClass:"home"},[t._v("首页 > 订单详情 > ")]),t._v("申请退款\n  ")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("td",[t._v("商品信息")]),t._v(" "),e("td",[t._v("退货件数")])])])}],!1,null,"827c6632",null);e.default=component.exports}}]);