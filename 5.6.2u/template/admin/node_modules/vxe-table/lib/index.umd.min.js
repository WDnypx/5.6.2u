((e,t)=>{"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vue"),require("@vxe-ui/core"),require("xe-utils")):"function"==typeof define&&define.amd?define([,"@vxe-ui/core","xe-utils"],t):"object"==typeof exports?exports.VxeUITable=t(require("vue"),require("@vxe-ui/core"),require("xe-utils")):e.VxeUITable=t(e.Vue,e.VxeUI,e.XEUtils)})("undefined"!=typeof self?self:this,function(zr,Nr,jr){{var Ur={9274:function(e){e.exports=zr},4345:function(e){e.exports=Nr},8871:function(e){e.exports=jr},9306:function(e,t,r){var l=r(4901),o=r(6823),i=TypeError;e.exports=function(e){if(l(e))return e;throw new i(o(e)+" is not a function")}},8551:function(e,t,r){var l=r(34),o=String,i=TypeError;e.exports=function(e){if(l(e))return e;throw new i(o(e)+" is not an object")}},9617:function(e,t,r){function l(a){return function(e,t,r){var l=s(e),o=d(l);if(0!==o){var i,n=c(r,o);if(a&&t!=t){for(;n<o;)if((i=l[n++])!=i)return!0}else for(;n<o;n++)if((a||n in l)&&l[n]===t)return a||n||0}return!a&&-1}}var s=r(5397),c=r(5610),d=r(6198);e.exports={includes:l(!0),indexOf:l(!1)}},4527:function(e,t,r){var l=r(3724),o=r(4376),i=TypeError,n=Object.getOwnPropertyDescriptor,r=l&&!function(){if(void 0!==this)return 1;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=r?function(e,t){if(o(e)&&!n(e,"length").writable)throw new i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},2195:function(e,t,r){var r=r(9504),l=r({}.toString),o=r("".slice);e.exports=function(e){return o(l(e),8,-1)}},7740:function(e,t,r){var s=r(9297),c=r(5031),d=r(7347),u=r(4913);e.exports=function(e,t,r){for(var l=c(t),o=u.f,i=d.f,n=0;n<l.length;n++){var a=l[n];s(e,a)||r&&s(r,a)||o(e,a,i(t,a))}}},6699:function(e,t,r){var l=r(3724),o=r(4913),i=r(6980);e.exports=l?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},6980:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6840:function(e,t,r){var n=r(4901),a=r(4913),s=r(283),c=r(9433);e.exports=function(e,t,r,l){var o=(l=l||{}).enumerable,i=void 0!==l.name?l.name:t;if(n(r)&&s(r,i,l),l.global)o?e[t]=r:c(t,r);else{try{l.unsafe?e[t]&&(o=!0):delete e[t]}catch(e){}o?e[t]=r:a.f(e,t,{value:r,enumerable:!1,configurable:!l.nonConfigurable,writable:!l.nonWritable})}return e}},9433:function(e,t,r){var l=r(4576),o=Object.defineProperty;e.exports=function(t,r){try{o(l,t,{value:r,configurable:!0,writable:!0})}catch(e){l[t]=r}return r}},3724:function(e,t,r){r=r(9039);e.exports=!r(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},4055:function(e,t,r){var l=r(4576),r=r(34),o=l.document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},6837:function(e){var t=TypeError;e.exports=function(e){if(9007199254740991<e)throw t("Maximum allowed index exceeded");return e}},8727:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2839:function(e,t,r){r=r(4576).navigator,r=r&&r.userAgent;e.exports=r?String(r):""},9519:function(e,t,r){var l,o,i=r(4576),r=r(2839),n=i.process,i=i.Deno,n=n&&n.versions||i&&i.version,i=n&&n.v8;!(o=i?0<(l=i.split("."))[0]&&l[0]<4?1:+(l[0]+l[1]):o)&&r&&(!(l=r.match(/Edge\/(\d+)/))||74<=l[1])&&(l=r.match(/Chrome\/(\d+)/))&&(o=+l[1]),e.exports=o},6518:function(e,t,r){var c=r(4576),d=r(7347).f,u=r(6699),p=r(6840),h=r(9433),m=r(7740),g=r(2796);e.exports=function(e,t){var r,l,o,i=e.target,n=e.global,a=e.stat,s=n?c:a?c[i]||h(i,{}):c[i]&&c[i].prototype;if(s)for(r in t){if(l=t[r],o=e.dontCallGetSet?(o=d(s,r))&&o.value:s[r],!g(n?r:i+(a?".":"#")+r,e.forced)&&void 0!==o){if(typeof l==typeof o)continue;m(l,o)}(e.sham||o&&o.sham)&&u(l,"sham",!0),p(s,r,l,e)}}},9039:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},616:function(e,t,r){r=r(9039);e.exports=!r(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},9565:function(e,t,r){var r=r(616),l=Function.prototype.call;e.exports=r?l.bind(l):function(){return l.apply(l,arguments)}},350:function(e,t,r){var l=r(3724),r=r(9297),o=Function.prototype,i=l&&Object.getOwnPropertyDescriptor,r=r(o,"name"),n=r&&"something"===function(){}.name,l=r&&(!l||i(o,"name").configurable);e.exports={EXISTS:r,PROPER:n,CONFIGURABLE:l}},9504:function(e,t,r){var r=r(616),l=Function.prototype,o=l.call,l=r&&l.bind.bind(o,o);e.exports=r?l:function(e){return function(){return o.apply(e,arguments)}}},7751:function(e,t,r){var l=r(4576),o=r(4901);e.exports=function(e,t){return arguments.length<2?(r=l[e],o(r)?r:void 0):l[e]&&l[e][t];var r}},5966:function(e,t,r){var l=r(9306),o=r(4117);e.exports=function(e,t){e=e[t];return o(e)?void 0:l(e)}},4576:function(e,t,r){function l(e){return e&&e.Math===Math&&e}e.exports=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof r.g&&r.g)||l("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:function(e,t,r){var l=r(9504),o=r(8981),i=l({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},421:function(e){e.exports={}},5917:function(e,t,r){var l=r(3724),o=r(9039),i=r(4055);e.exports=!l&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},7055:function(e,t,r){var l=r(9504),o=r(9039),i=r(2195),n=Object,a=l("".split);e.exports=o(function(){return!n("z").propertyIsEnumerable(0)})?function(e){return"String"===i(e)?a(e,""):n(e)}:n},3706:function(e,t,r){var l=r(9504),o=r(4901),r=r(7629),i=l(Function.toString);o(r.inspectSource)||(r.inspectSource=function(e){return i(e)}),e.exports=r.inspectSource},1181:function(e,t,r){var l,o,i,n,a=r(8622),s=r(4576),c=r(34),d=r(6699),u=r(9297),p=r(7629),h=r(6119),r=r(421),m="Object already initialized",g=s.TypeError,s=s.WeakMap,f=a||p.state?((i=p.state||(p.state=new s)).get=i.get,i.has=i.has,i.set=i.set,l=function(e,t){if(i.has(e))throw new g(m);return t.facade=e,i.set(e,t),t},o=function(e){return i.get(e)||{}},function(e){return i.has(e)}):(r[n=h("state")]=!0,l=function(e,t){if(u(e,n))throw new g(m);return t.facade=e,d(e,n,t),t},o=function(e){return u(e,n)?e[n]:{}},function(e){return u(e,n)});e.exports={set:l,get:o,has:f,enforce:function(e){return f(e)?o(e):l(e,{})},getterFor:function(t){return function(e){if(c(e)&&(e=o(e)).type===t)return e;throw new g("Incompatible receiver, "+t+" required")}}}},4376:function(e,t,r){var l=r(2195);e.exports=Array.isArray||function(e){return"Array"===l(e)}},4901:function(e){var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},2796:function(e,t,r){function l(e,t){return(e=s[a(e)])===d||e!==c&&(i(t)?o(t):!!t)}var o=r(9039),i=r(4901),n=/#|\.prototype\./,a=l.normalize=function(e){return String(e).replace(n,".").toLowerCase()},s=l.data={},c=l.NATIVE="N",d=l.POLYFILL="P";e.exports=l},4117:function(e){e.exports=function(e){return null==e}},34:function(e,t,r){var l=r(4901);e.exports=function(e){return"object"==typeof e?null!==e:l(e)}},6395:function(e){e.exports=!1},757:function(e,t,r){var l=r(7751),o=r(4901),i=r(1625),r=r(7040),n=Object;e.exports=r?function(e){return"symbol"==typeof e}:function(e){var t=l("Symbol");return o(t)&&i(t.prototype,n(e))}},6198:function(e,t,r){var l=r(8014);e.exports=function(e){return l(e.length)}},283:function(e,t,r){var l=r(9504),o=r(9039),i=r(4901),n=r(9297),a=r(3724),s=r(350).CONFIGURABLE,c=r(3706),r=r(1181),d=r.enforce,u=r.get,p=String,h=Object.defineProperty,m=l("".slice),g=l("".replace),f=l([].join),v=a&&!o(function(){return 8!==h(function(){},"length",{value:8}).length}),x=String(String).split("String"),r=e.exports=function(e,t,r){"Symbol("===m(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!n(e,"name")||s&&e.name!==t)&&(a?h(e,"name",{value:t,configurable:!0}):e.name=t),v&&r&&n(r,"arity")&&e.length!==r.arity&&h(e,"length",{value:r.arity});try{r&&n(r,"constructor")&&r.constructor?a&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}r=d(e);return n(r,"source")||(r.source=f(x,"string"==typeof t?t:"")),e};Function.prototype.toString=r(function(){return i(this)&&u(this).source||c(this)},"toString")},741:function(e){var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){e=+e;return(0<e?r:t)(e)}},4913:function(e,t,r){var l=r(3724),o=r(5917),i=r(8686),n=r(8551),a=r(6969),s=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",p="configurable",h="writable";t.f=l?i?function(e,t,r){var l;return n(e),t=a(t),n(r),"function"==typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]&&(l=d(e,t))&&l[h]&&(e[t]=r.value,r={configurable:(p in r?r:l)[p],enumerable:(u in r?r:l)[u],writable:!1}),c(e,t,r)}:c:function(e,t,r){if(n(e),t=a(t),n(r),o)try{return c(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new s("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7347:function(e,t,r){var l=r(3724),o=r(9565),i=r(8773),n=r(6980),a=r(5397),s=r(6969),c=r(9297),d=r(5917),u=Object.getOwnPropertyDescriptor;t.f=l?u:function(e,t){if(e=a(e),t=s(t),d)try{return u(e,t)}catch(e){}if(c(e,t))return n(!o(i.f,e,t),e[t])}},8480:function(e,t,r){var l=r(1828),o=r(8727).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return l(e,o)}},3717:function(e,t){t.f=Object.getOwnPropertySymbols},1625:function(e,t,r){r=r(9504);e.exports=r({}.isPrototypeOf)},1828:function(e,t,r){var l=r(9504),n=r(9297),a=r(5397),s=r(9617).indexOf,c=r(421),d=l([].push);e.exports=function(e,t){var r,l=a(e),o=0,i=[];for(r in l)!n(c,r)&&n(l,r)&&d(i,r);for(;t.length>o;)!n(l,r=t[o++])||~s(i,r)||d(i,r);return i}},8773:function(e,t){var r={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,o=l&&!r.call({1:2},1);t.f=o?function(e){e=l(this,e);return!!e&&e.enumerable}:r},4270:function(e,t,r){var o=r(9565),i=r(4901),n=r(34),a=TypeError;e.exports=function(e,t){var r,l;if("string"===t&&i(r=e.toString)&&!n(l=o(r,e)))return l;if(i(r=e.valueOf)&&!n(l=o(r,e)))return l;if("string"!==t&&i(r=e.toString)&&!n(l=o(r,e)))return l;throw new a("Can't convert object to primitive value")}},5031:function(e,t,r){var l=r(7751),o=r(9504),i=r(8480),n=r(3717),a=r(8551),s=o([].concat);e.exports=l("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=n.f;return r?s(t,r(e)):t}},7750:function(e,t,r){var l=r(4117),o=TypeError;e.exports=function(e){if(l(e))throw new o("Can't call method on "+e);return e}},6119:function(e,t,r){var l=r(5745),o=r(3392),i=l("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},7629:function(e,t,r){var l=r(6395),o=r(4576),r=r(9433),i="__core-js_shared__",e=e.exports=o[i]||r(i,{});(e.versions||(e.versions=[])).push({version:"3.38.1",mode:l?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:function(e,t,r){var l=r(7629);e.exports=function(e,t){return l[e]||(l[e]=t||{})}},4495:function(e,t,r){var l=r(9519),o=r(9039),i=r(4576).String;e.exports=!!Object.getOwnPropertySymbols&&!o(function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&l&&l<41})},5610:function(e,t,r){var l=r(1291),o=Math.max,i=Math.min;e.exports=function(e,t){e=l(e);return e<0?o(e+t,0):i(e,t)}},5397:function(e,t,r){var l=r(7055),o=r(7750);e.exports=function(e){return l(o(e))}},1291:function(e,t,r){var l=r(741);e.exports=function(e){e=+e;return e!=e||0==e?0:l(e)}},8014:function(e,t,r){var l=r(1291),o=Math.min;e.exports=function(e){e=l(e);return 0<e?o(e,9007199254740991):0}},8981:function(e,t,r){var l=r(7750),o=Object;e.exports=function(e){return o(l(e))}},2777:function(e,t,r){var l=r(9565),o=r(34),i=r(757),n=r(5966),a=r(4270),r=r(8227),s=TypeError,c=r("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r=n(e,c);if(r){if(r=l(r,e,t=void 0===t?"default":t),!o(r)||i(r))return r;throw new s("Can't convert object to primitive value")}return a(e,t=void 0===t?"number":t)}},6969:function(e,t,r){var l=r(2777),o=r(757);e.exports=function(e){e=l(e,"string");return o(e)?e:e+""}},6823:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},3392:function(e,t,r){var r=r(9504),l=0,o=Math.random(),i=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++l+o,36)}},7040:function(e,t,r){r=r(4495);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:function(e,t,r){var l=r(3724),r=r(9039);e.exports=l&&r(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8622:function(e,t,r){var l=r(4576),r=r(4901),l=l.WeakMap;e.exports=r(l)&&/native code/.test(String(l))},8227:function(e,t,r){var l=r(4576),o=r(5745),i=r(9297),n=r(3392),a=r(4495),r=r(7040),s=l.Symbol,c=o("wks"),d=r?s.for||s:s&&s.withoutSetter||n;e.exports=function(e){return i(c,e)||(c[e]=a&&i(s,e)?s[e]:d("Symbol."+e)),c[e]}},4114:function(e,t,r){var l=r(6518),i=r(8981),n=r(6198),a=r(4527),s=r(6837);l({target:"Array",proto:!0,arity:1,forced:r(9039)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!(()=>{try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}})()},{push:function(e){var t=i(this),r=n(t),l=arguments.length;s(r+l);for(var o=0;o<l;o++)t[r]=arguments[o],r++;return a(t,r),r}})}},Wr={};function ir(e){var t=Wr[e];return void 0!==t||(t=Wr[e]={exports:{}},Ur[e].call(t.exports,t,t.exports,ir)),t.exports}ir.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return ir.d(t,{a:t}),t},ir.d=function(e,t){for(var r in t)ir.o(t,r)&&!ir.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},ir.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),ir.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ir.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},ir.p="";var Gr={},qr=(ir.r(Gr),ir.d(Gr,{Colgroup:function(){return Ee},Column:function(){return we},Grid:function(){return Wt},Table:function(){return tr},Toolbar:function(){return lr},VXETable:function(){return ne},VxeColgroup:function(){return ye},VxeColumn:function(){return Ce},VxeGrid:function(){return Ut},VxeTable:function(){return er},VxeToolbar:function(){return rr},VxeUI:function(){return nr.VxeUI},_t:function(){return ie},clipboard:function(){return J},commands:function(){return Y},config:function(){return le},default:function(){return xa},formats:function(){return X},getConfig:function(){return v},getI18n:function(){return H},getIcon:function(){return T},getTheme:function(){return s},globalEvents:function(){return B},globalResize:function(){return P},install:function(){return va},interceptor:function(){return Q},log:function(){return ee},menus:function(){return q},modal:function(){return de},print:function(){return ce},readFile:function(){return se},renderer:function(){return W},saveFile:function(){return ae},setConfig:function(){return c},setI18n:function(){return $},setIcon:function(){return E},setLanguage:function(){return I},setTheme:function(){return o},setup:function(){return re},t:function(){return oe},use:function(){return te},validators:function(){return G},version:function(){return e}}),{}),nr=(ir.r(qr),ir.d(qr,{Colgroup:function(){return Ee},Column:function(){return we},Grid:function(){return Wt},Table:function(){return tr},Toolbar:function(){return lr},VXETable:function(){return ne},VxeColgroup:function(){return ye},VxeColumn:function(){return Ce},VxeGrid:function(){return Ut},VxeTable:function(){return er},VxeToolbar:function(){return rr},VxeUI:function(){return nr.VxeUI},_t:function(){return ie},clipboard:function(){return J},commands:function(){return Y},config:function(){return le},formats:function(){return X},getConfig:function(){return v},getI18n:function(){return H},getIcon:function(){return T},getTheme:function(){return s},globalEvents:function(){return B},globalResize:function(){return P},install:function(){return va},interceptor:function(){return Q},log:function(){return ee},menus:function(){return q},modal:function(){return de},print:function(){return ce},readFile:function(){return se},renderer:function(){return W},saveFile:function(){return ae},setConfig:function(){return c},setI18n:function(){return $},setIcon:function(){return E},setLanguage:function(){return I},setTheme:function(){return o},setup:function(){return re},t:function(){return oe},use:function(){return te},validators:function(){return G},version:function(){return e}}),"undefined"!=typeof window&&(ar=(ar=window.document.currentScript)&&ar.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(ir.p=ar[1]),ir(4345)),ar=ir(8871),sr=ir.n(ar),Xr=null,Yr=null,Kr=null,Zr="z-index-manage",Qr=null,Jr="z-index-style",el={m:1e3,s:1e3};function tl(){return Xr||"undefined"!=typeof document&&(Xr=document),Xr}function rl(){return Yr=Xr&&!Yr?Xr.body||Xr.getElementsByTagName("body")[0]:Yr}function ll(){var e;Qr||!(e=tl())||(Qr=e.getElementById(Jr))||((Qr=e.createElement("style")).id=Jr,e.getElementsByTagName("head")[0].appendChild(Qr)),Qr&&(Qr.innerHTML=":root{--dom-main"+(e="-z-index")+":"+sl()+";--dom-sub"+e+":"+pl()+"}")}function ol(){var e,t;return Kr||(e=tl())&&!(Kr=e.getElementById(Zr))&&(t=rl())&&((Kr=e.createElement("div")).id=Zr,Kr.style.display="none",t.appendChild(Kr),nl(el.m),dl(el.s)),Kr}function il(r){return function(e){var t;return e&&(e=Number(e),el[r]=e,t=ol())&&(t.dataset?t.dataset[r]=e+"":t.setAttribute("data-"+r,e+"")),ll(),el[r]}}var nl=il("m");function al(l,o){return function(e){var t=ol(),r=(r=t&&(t=t.dataset?t.dataset[l]:t.getAttribute("data-"+l))?Number(t):r)||el[l];return e?Number(e)<r?o():e:r}}var sl=al("m",cl);function cl(){return nl(sl()+1)}var dl=il("s"),ul=al("s",hl);function pl(){return sl()+ul()}function hl(){return dl(ul()+1),pl()}var ar={setCurrent:nl,getCurrent:sl,getNext:cl,setSubCurrent:dl,getSubCurrent:pl,getSubNext:hl,getMax:function(){var e=0;if(tl()){var t=rl();if(t)for(var r=t.getElementsByTagName("*"),l=0;l<r.length;l++){var o=r[l];o&&o.style&&1===o.nodeType&&(o=o.style.zIndex)&&/^\d+$/.test(o)&&(e=Math.max(e,Number(o)))}}return e}},ml=(ll(),ar);function cr(e){return e&&!1!==e.enabled}function gl(e){return null==e||""===e}function fl(e){var e=e.name,t=sr().lastIndexOf(e,"."),r=e.substring(t+1,e.length).toLowerCase();return{filename:e.substring(0,t),type:r}}function vl(){return ml.getNext()}function xl(){return ml.getCurrent()}function bl(e){return e&&e.children&&0<e.children.length}function dr(e,t){var r;return e?(r=nr.VxeUI.getConfig().translate,sr().toValueString(r?r(""+e,t):e)):""}function ur(e,t){return""+(gl(e)?t?nr.VxeUI.getConfig().emptyCell:"":e)}function pr(e){return""===e||sr().eqNull(e)}function hr(e,t){return e?sr().isFunction(e)?e(t):e:""}let e="3.15.37",o=(nr.VxeUI.version=e,nr.VxeUI.tableVersion=e,nr.VxeUI.setConfig({emptyCell:"　",table:{fit:!0,showHeader:!0,animat:!0,delayHover:250,autoResize:!0,padding:!0,minHeight:144,resizeConfig:{},resizableConfig:{dragMode:"auto",showDragTip:!0,isSyncAutoHeight:!0,isSyncAutoWidth:!0,minHeight:18},radioConfig:{strict:!0},rowDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0,showDragTip:!0},columnDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0,showDragTip:!0},checkboxConfig:{strict:!0},tooltipConfig:{enterable:!0},validConfig:{showMessage:!0,autoClear:!0,autoPos:!0,message:"inline",msgMode:"single",theme:"beautify"},columnConfig:{maxFixedSize:4},cellConfig:{padding:!0},headerCellConfig:{height:"unset"},footerCellConfig:{height:"unset"},customConfig:{allowVisible:!0,allowResizable:!0,allowFixed:!0,allowSort:!0,showFooter:!0,placement:"top-right",modalOptions:{showMaximize:!0,mask:!0,lockView:!0,resize:!0,escClosable:!0},drawerOptions:{mask:!0,lockView:!0,escClosable:!0,resize:!0}},sortConfig:{showIcon:!0,allowClear:!0,allowBtn:!0,iconLayout:"vertical"},filterConfig:{showIcon:!0},aggregateConfig:{padding:!0,rowField:"id",parentField:"_X_ROW_PARENT_KEY",childrenField:"_X_ROW_CHILDREN",mapChildrenField:"_X_ROW_CHILD_LIST",indent:20,showIcon:!0},treeConfig:{padding:!0,rowField:"id",parentField:"parentId",childrenField:"children",hasChildField:"hasChild",mapChildrenField:"_X_ROW_CHILD",indent:20,showIcon:!0},expandConfig:{showIcon:!0,mode:"fixed"},editConfig:{showIcon:!0,showAsterisk:!0,autoFocus:!0},importConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},exportConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},printConfig:{},mouseConfig:{extension:!0},keyboardConfig:{isEsc:!0},areaConfig:{autoClear:!0,selectCellByHeader:!0,selectCellByBody:!0,extendDirection:{top:!0,left:!0,bottom:!0,right:!0}},clipConfig:{isCopy:!0,isCut:!0,isPaste:!0},fnrConfig:{isFind:!0,isReplace:!0},virtualXConfig:{gt:24,preSize:0,oSize:0},virtualYConfig:{gt:100,preSize:1,oSize:0},scrollbarConfig:{}},grid:{formConfig:{enabled:!0},pagerConfig:{enabled:!0},toolbarConfig:{enabled:!0},proxyConfig:{enabled:!0,autoLoad:!0,showResponseMsg:!0,showActiveMsg:!0,props:{list:null,result:"result",total:"page.total",message:"message"}}},toolbar:{}}),ar="vxe-table-icon-",nr.VxeUI.setIcon({TABLE_SORT_ASC:ar+"caret-up",TABLE_SORT_DESC:ar+"caret-down",TABLE_FILTER_NONE:ar+"funnel",TABLE_FILTER_MATCH:ar+"funnel",TABLE_EDIT:ar+"edit",TABLE_TITLE_PREFIX:ar+"question-circle-fill",TABLE_TITLE_SUFFIX:ar+"question-circle-fill",TABLE_TREE_LOADED:ar+"spinner roll",TABLE_TREE_OPEN:ar+"caret-right rotate90",TABLE_TREE_CLOSE:ar+"caret-right",TABLE_EXPAND_LOADED:ar+"spinner roll",TABLE_EXPAND_OPEN:ar+"arrow-right rotate90",TABLE_EXPAND_CLOSE:ar+"arrow-right",TABLE_CHECKBOX_CHECKED:ar+"checkbox-checked-fill",TABLE_CHECKBOX_UNCHECKED:ar+"checkbox-unchecked",TABLE_CHECKBOX_INDETERMINATE:ar+"checkbox-indeterminate-fill",TABLE_RADIO_CHECKED:ar+"radio-checked-fill",TABLE_RADIO_UNCHECKED:ar+"radio-unchecked",TABLE_CUSTOM_SORT:ar+"drag-handle",TABLE_MENU_OPTIONS:ar+"arrow-right",TABLE_DRAG_ROW:ar+"drag-handle",TABLE_DRAG_COLUMN:ar+"drag-handle",TABLE_DRAG_STATUS_ROW:ar+"sort",TABLE_DRAG_STATUS_SUB_ROW:ar+"add-sub",TABLE_DRAG_STATUS_COLUMN:ar+"swap",TABLE_DRAG_DISABLED:ar+"no-drop",TABLE_ROW_GROUP_OPEN:ar+"arrow-right rotate90",TABLE_ROW_GROUP_CLOSE:ar+"arrow-right",TOOLBAR_TOOLS_REFRESH:ar+"repeat",TOOLBAR_TOOLS_REFRESH_LOADING:ar+"repeat roll",TOOLBAR_TOOLS_IMPORT:ar+"upload",TOOLBAR_TOOLS_EXPORT:ar+"download",TOOLBAR_TOOLS_PRINT:ar+"print",TOOLBAR_TOOLS_FULLSCREEN:ar+"fullscreen",TOOLBAR_TOOLS_MINIMIZE:ar+"minimize",TOOLBAR_TOOLS_CUSTOM:ar+"custom-column",TOOLBAR_TOOLS_FIXED_LEFT:ar+"fixed-left",TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:ar+"fixed-left-fill",TOOLBAR_TOOLS_FIXED_RIGHT:ar+"fixed-right",TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:ar+"fixed-right-fill"}),nr.VxeUI.setTheme),s=nr.VxeUI.getTheme,c=nr.VxeUI.setConfig,v=nr.VxeUI.getConfig,E=nr.VxeUI.setIcon,T=nr.VxeUI.getIcon,I=nr.VxeUI.setLanguage,$=nr.VxeUI.setI18n,H=nr.VxeUI.getI18n,B=nr.VxeUI.globalEvents,P=nr.VxeUI.globalResize,W=nr.VxeUI.renderer,G=nr.VxeUI.validators,q=nr.VxeUI.menus,X=nr.VxeUI.formats,Y=nr.VxeUI.commands,Q=nr.VxeUI.interceptor,J=nr.VxeUI.clipboard,ee=nr.VxeUI.log,te=nr.VxeUI.use,re=e=>nr.VxeUI.setConfig(e),le=(nr.VxeUI.setup=re,e=>nr.VxeUI.setConfig(e)),oe=(nr.VxeUI.config=le,(e,t)=>nr.VxeUI.getI18n(e,t)),ie=(nr.VxeUI.t=oe,(e,t)=>dr(e,t)),ne=(nr.VxeUI._t=ie,nr.VxeUI),ae=e=>nr.VxeUI.saveFile(e),se=e=>nr.VxeUI.readFile(e),ce=e=>nr.VxeUI.print(e),de={get(e){return nr.VxeUI.modal.get(e)},close(e){return nr.VxeUI.modal.close(e)},open(e){return nr.VxeUI.modal.open(e)},alert(e,t,r){return nr.VxeUI.modal.alert(e,t,r)},confirm(e,t,r){return nr.VxeUI.modal.confirm(e,t,r)},message(e,t){return nr.VxeUI.modal.message(e,t)},notification(e,t,r){return nr.VxeUI.modal.notification(e,t,r)}},ue=(ir(4114),{}),t;function Cl(){return t||((t=new Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),t}function wl(){return t||Cl()}function yl(e){return ue[e]||(ue[e]=new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g")),ue[e]}function El(e){return e&&/^\d+(px)?$/.test(e)}function Tl(e){return e&&/^\d+%$/.test(e)}function mr(e,t){return!!(e&&e.className&&e.className.match&&e.className.match(yl(t)))}function gr(e,t){e&&mr(e,t)&&(e.className=e.className.replace(yl(t),""))}function fr(e,t){e&&!mr(e,t)&&(gr(e,t),e.className=e.className+" "+t)}function Rl(e){return e.ctrlKey||e.metaKey}function Sl(e,t="px"){return sr().isNumber(e)||/^\d+$/.test(""+e)?""+e+t:""+(e||"")}function vr(e,t){return e?e.querySelector(t):null}function Ol(){var e=document.documentElement,t=document.body;return{scrollTop:e.scrollTop||t.scrollTop,scrollLeft:e.scrollLeft||t.scrollLeft,visibleHeight:e.clientHeight||t.clientHeight,visibleWidth:e.clientWidth||t.clientWidth}}function Fl(e){return e?e.offsetHeight:0}function Dl(e){return e?(e=getComputedStyle(e),sr().toNumber(e.paddingTop)+sr().toNumber(e.paddingBottom)):0}function xr(e,t){e&&(e.scrollTop=t)}function br(e,t){e&&(e.scrollLeft=t)}function Il(e,t){t="html"===t.type?e.innerText:e.textContent;e.getAttribute("title")!==t&&e.setAttribute("title",t)}function Cr(e,t,r,l){let o,i=e.target.shadowRoot&&e.composed&&e.composedPath()[0]||e.target;for(;i&&i.nodeType&&i!==document;){if(r&&mr(i,r)&&(!l||l(i)))o=i;else if(i===t)return{flag:!r||!!o,container:t,targetElem:o};i=i.parentNode}return{flag:!1}}function $l(e){var e=e.getBoundingClientRect(),t=e.top,e=e.left,{scrollTop:r,scrollLeft:l,visibleHeight:o,visibleWidth:i}=Ol();return{boundingTop:t,top:r+t,boundingLeft:e,left:l+e,visibleHeight:o,visibleWidth:i}}let pe="scrollIntoViewIfNeeded",he="scrollIntoView";var ar=nr.VxeUI.log,wr="table v3.15.37";let M=ar.create("warn",wr),A=ar.create("error",wr),{getI18n:me,formats:ge}=nr.VxeUI;class ba{constructor(e,t,{renderHeader:r,renderCell:l,renderFooter:o,renderData:i}={}){var n=e,a=e.$xeGrid,s=a?a.proxyOpts:null,c=t.formatter,d=!sr().isBoolean(t.visible)||t.visible,u=["seq","checkbox","radio","expand","html"];t.type&&-1===u.indexOf(t.type)&&M("vxe.error.errProp",["type="+t.type,u.join(", ")]),(sr().isBoolean(t.cellRender)||t.cellRender&&!sr().isObject(t.cellRender))&&M("vxe.error.errProp",["column.cell-render="+t.cellRender,"column.cell-render={}"]),(sr().isBoolean(t.editRender)||t.editRender&&!sr().isObject(t.editRender))&&M("vxe.error.errProp",["column.edit-render="+t.editRender,"column.edit-render={}"]),"expand"===t.type&&(u=n.treeConfig,u)&&(e.treeOpts.showLine||e.treeOpts.line)&&A("vxe.error.errConflicts",["tree-config.line","column.type=expand"]),t.remoteSort&&M("vxe.error.delProp",["column.remote-sort","sort-config.remote"]),t.sortMethod&&M("vxe.error.delProp",["column.sort-method","sort-config.sortMethod"]),c&&(sr().isString(c)?(n=ge.get(c)||sr()[c])&&sr().isFunction(n.tableCellFormatMethod||n.cellFormatMethod)||A("vxe.error.notFormats",[c]):!sr().isArray(c)||(u=ge.get(c[0])||sr()[c[0]])&&sr().isFunction(u.tableCellFormatMethod||u.cellFormatMethod)||A("vxe.error.notFormats",[c[0]])),Object.assign(this,{type:t.type,property:t.field,field:t.field,title:t.title,width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth,resizable:t.resizable,fixed:t.fixed,align:t.align,headerAlign:t.headerAlign,footerAlign:t.footerAlign,showOverflow:t.showOverflow,showHeaderOverflow:t.showHeaderOverflow,showFooterOverflow:t.showFooterOverflow,className:t.className,headerClassName:t.headerClassName,footerClassName:t.footerClassName,formatter:c,footerFormatter:t.footerFormatter,padding:t.padding,verticalAlign:t.verticalAlign,sortable:t.sortable,sortBy:t.sortBy,sortType:t.sortType,sortMethod:t.sortMethod,remoteSort:t.remoteSort,filters:Yl(t.filters),filterMultiple:!sr().isBoolean(t.filterMultiple)||t.filterMultiple,filterMethod:t.filterMethod,filterResetMethod:t.filterResetMethod,filterRecoverMethod:t.filterRecoverMethod,filterRender:t.filterRender,rowGroupNode:t.rowGroupNode,treeNode:t.treeNode,dragSort:t.dragSort,rowResize:t.rowResize,cellType:t.cellType,cellRender:t.cellRender,editRender:t.editRender,contentRender:t.contentRender,headerExportMethod:t.headerExportMethod,exportMethod:t.exportMethod,footerExportMethod:t.footerExportMethod,titleHelp:t.titleHelp,titlePrefix:t.titlePrefix,titleSuffix:t.titleSuffix,aggFunc:t.aggFunc,params:t.params,id:t.colId||sr().uniqueId("col_"),parentId:null,visible:d,halfVisible:!1,defaultVisible:d,defaultFixed:t.fixed,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,sortNumber:0,renderSortNumber:0,renderAggFn:"",renderFixed:"",renderVisible:!1,renderWidth:0,renderHeight:0,renderResizeWidth:0,renderAutoWidth:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:r||t.renderHeader,renderCell:l||t.renderCell,renderFooter:o||t.renderFooter,renderData:i,slots:t.slots}),s&&s.beforeColumn&&s.beforeColumn({$grid:a,column:this})}getTitle(){return dr(this.title||("seq"===this.type?me("vxe.table.seqTitle"):""))}getKey(){var e=this.type;return this.field||(e?"type="+e:null)}update(e,t){"filters"!==e&&("field"===e&&(this.property=t),this[e]=t)}}let fe=(e,t)=>{let r=[];return e.forEach(e=>{e.parentId=t?t.id:null,e.visible&&(e.children&&e.children.length&&e.children.some(e=>e.visible)?(r.push(e),r.push(...fe(e.children,e))):r.push(e))}),r};function kl(e,t,r){var l=e;return t||r?(l.intoRunScroll=!1,l.inVirtualScroll=!1,l.inWheelScroll=!1,l.inHeaderScroll=!1,l.inBodyScroll=!1,l.inFooterScroll=!1,l.scrollRenderType="",e.scrollTo(t,r)):e.clearScroll()}function Ml(e){return e.map((e,t)=>t%2==0?Number(e)+1:".").join("")}function Al(){return sr().uniqueId("row_")}function Ll(e){e=e.currKeyField;return e}function yr(e,t){var{isCurrDeepKey:e,currKeyField:r}=e;return t?Vl((e?Hl:Pl)(t,r)):""}function _l(e){let{isCurrDeepKey:t,currKeyField:r}=e,l=t?Bl:zl;return{rowKey:r,handleUpdateRowId(e){return e?l(e,r):""}}}function Er(e){let{isCurrDeepKey:t,currKeyField:r}=e,l=t?Hl:Pl;return{rowKey:r,handleGetRowId(e){return e?Vl(l(e,r)):""}}}function Vl(e){return sr().eqNull(e)?"":encodeURIComponent(e)}function Hl(e,t){return sr().get(e,t)}function Bl(e,t){let r=Vl(Hl(e,t));return pr(r)&&(r=Al(),sr().set(e,t,r)),r}function Pl(e,t){return e[t]}function zl(e,t){let r=Vl(e[t]);return pr(r)&&(r=Al(),e[t]=r),r}function Nl(e){return e?(e=getComputedStyle(e),sr().toNumber(e.paddingLeft)+sr().toNumber(e.paddingRight)):0}function Tr(e){var t,r;return e?(r=getComputedStyle(e),t=sr().toNumber(r.marginLeft),r=sr().toNumber(r.marginRight),e.offsetWidth+t+r):0}function jl(e){return"unset"!==e&&e||0}function Rr(e,t){return t?sr().isString(t)||sr().isNumber(t)?e.getColumnByField(""+t):t:null}function Ul(e,t){return t?(t=sr().isString(t)||sr().isNumber(t)?t:yr(e,t),e.getRowById(t)):null}function Wl(e,t,r,l){return e.resizeHeight||t.height||r.height||e.height||l}function Gl(e){var t=e.$xeTable,r=t.staticColumns,{$el:e,$xeColumn:l,columnConfig:o}=e,i=l?l.columnConfig:null;i?("vxe-table-column"===l.$options._componentTag?A("vxe.error.groupTag",[`<vxe-table-colgroup title=${l.title} ...>`,`<vxe-table-column title=${l.title} ...>`]):"vxe-column"===l.$options._componentTag&&M("vxe.error.groupTag",[`<vxe-colgroup title=${l.title} ...>`,`<vxe-column title=${l.title} ...>`]),i.children||(i.children=[]),i.children.splice(sr().arrayIndexOf(l.$el.children,e),0,o)):r.splice(sr().arrayIndexOf(t.$refs.hideColumn.children,e),0,o)}function ql(e){var t=e.$xeTable.staticColumns;let r=e.columnConfig;e=sr().findTree(t,e=>e===r);e&&e.items.splice(e.index,1)}function Xl(e,t){var r=e.fullColumnIdData;if(!t)return null;let l=t.parentId;for(;r[l];){let e=r[l].column;if(!(l=e.parentId))return e}return t}function Yl(e){return e&&sr().isArray(e)?e.map(({label:e,value:t,data:r,resetValue:l,checked:o})=>({label:e,value:t,data:r,resetValue:l,checked:!!o,_checked:!!o})):e}function Kl(e){var{$table:t,column:r,cell:l}=e,o=t,{showHeaderOverflow:t,resizableOpts:i}=t,i=i.minWidth;if(i){e=sr().isFunction(i)?i(e):i;if("auto"!==e)return Math.max(1,sr().toNumber(e))}var n,a,s,c,i=o.elemStore,{showHeaderOverflow:e,minWidth:o}=r,r=sr().isUndefined(e)||sr().isNull(e)?t:e,t="title"===r||(!0===r||"tooltip"===r)||"ellipsis"===r;let d=sr().floor(1.8*(sr().toNumber(getComputedStyle(l).fontSize)||14))+(Nl(l)+Nl(vr(l,".vxe-cell")));if(t&&(e=Tr(vr(l,".vxe-cell--drag-handle")),r=Tr(vr(l,".vxe-cell--checkbox")),t=Tr(vr(l,".vxe-cell--required-icon")),n=Tr(vr(l,".vxe-cell--edit-icon")),a=Tr(vr(l,".vxe-cell-title-prefix-icon")),s=Tr(vr(l,".vxe-cell-title-suffix-icon")),c=Tr(vr(l,".vxe-cell--sort")),l=Tr(vr(l,".vxe-cell--filter")),d+=e+r+t+n+a+s+l+c),o){e=Fr(i["main-body-scroll"]);if(e){if(Tl(o))return r=(e.clientWidth-1)/100,Math.max(d,Math.floor(sr().toInteger(o)*r));if(El(o))return Math.max(d,sr().toInteger(o))}}return d}let ve={mini:3,small:2,medium:1,large:0};function Zl(e){e=e.computeSize;return e&&ve[e]||0}function Ql(e,t){var{$table:r,row:l}=e,o=r.showOverflow,i=r.scrollYLoad,n=r.fullAllDataRowIdData,a=r.computeRowOpts,s=r.computeCellOpts,c=r.computeDefaultRowHeight,n=n[yr(r,l)],l=n.resizeHeight||s.height||a.height||n.height||c;let d=1,u=(t&&(d=function t(e,r){let l=1;if(e){var o=r.$table,{transform:i,mapChildrenField:n}=a=o.computeTreeOpts,a=a.children||a.childrenField,s=e[i?n:a];if(s&&o.isTreeExpandByRow(e))for(let e=0;e<s.length;e++)l+=t(s[e],r)}return l}(t,e)),l);return(u=i&&!o?n.height||l:u)*d-(t?1:12-Zl(r))}function Sr(e,t){return sr().get(e,t.field)}function Or(e,t,r){sr().set(e,t.field,r)}function Fr(e){return e?e.$el||e:null}function Jl(e){return e instanceof ba}function eo(r,l){var e=r.showOverflow,{scrollYLoad:t,scrollYTop:o}=r,{elemStore:i,afterFullData:n,fullAllDataRowIdData:a,isResizeCellHeight:s}=r,c=r.computeRowOpts,d=r.computeCellOpts,u=r.computeDefaultRowHeight,p=r.computeLeftFixedWidth,h=r.computeRightFixedWidth,i=Fr(i["main-body-scroll"]),m=yr(r,l);if(i){var g=i.clientHeight,f=i.scrollTop,i=i.querySelector(`[rowid="${m}"]`);if(i){o=i.offsetTop+(t?o:0),i=i.clientHeight;if(o<f||f+g<o)return r.scrollTo(null,o);if(g+f<=o+i)return r.scrollTo(null,f+i)}else if(t){if(!(s||d.height||c.height)&&e)return r.scrollTo(null,(r.findRowIndexOf(n,l)-1)*u);let t=0;o=a[m],i=o.resizeHeight||d.height||c.height||o.height||u;for(let e=0;e<n.length;e++){var v=n[e],x=yr(r,v);if(v===l||x===m)break;v=a[x];t+=v.resizeHeight||d.height||c.height||v.height||u}return t<f?r.scrollTo(null,t-p-1):r.scrollTo(null,t+i-(g-h-1))}}return Promise.resolve()}function to(e){return sr().kebabCase(e)}function ro(e){switch(e.name){case"input":case"textarea":return"input";case"select":return"change"}return"modelValue"}function lo(e){switch(e.name){case"input":case"textarea":case"VxeInput":case"VxeNumberInput":case"VxeTextarea":case"$input":case"$textarea":return"input"}return"change"}function Dr(e){return null==e?[]:sr().isArray(e)?e:[e]}let{getI18n:w,getIcon:O,renderer:y,formats:xe,renderEmptyElement:C}=nr.VxeUI;function oo(e,t){let r=t.$table;var l=r.$scopedSlots,o=r.dragConfig,{icon:i,trigger:n,disabledMethod:a}=r.computeRowDragOpts,a=a||(o?o.rowDisabledMethod:null);let s=a&&a(t);a=l.rowDragIcon||l["row-drag-icon"],l={};return"cell"!==n&&(l.mousedown=e=>{s||r.handleCellDragMousedownEvent(e,t)},l.mouseup=r.handleCellDragMouseupEvent),e("span",{key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":s}],on:l},a?r.callSlot(a,t,e):[e("i",{class:i||(o?o.rowIcon:"")||O().TABLE_DRAG_ROW})])}function Ir(e,t,r){var{$table:l,column:o,level:i}=t,o=o.dragSort,{treeConfig:n,dragConfig:a}=l,s=l.computeRowOpts,c=l.computeTreeOpts,{showIcon:l,isPeerDrag:d,isCrossDrag:u,visibleMethod:p}=l.computeRowDragOpts,p=p||(a?a.rowVisibleMethod:null),h=[];return o&&s.drag&&(l||a&&a.showRowIcon)&&(!p||p(t))&&(!n||c.transform&&(d||u||!i))&&h.unshift(oo(e,t)),h.concat(sr().isArray(r)?r:[r])}function io(e,t,r){return[((e,t)=>{let{$table:r,column:l}=t,o=l.titlePrefix||l.titleHelp;return o?e("i",{class:["vxe-cell-title-prefix-icon",o.iconStatus?"theme--"+o.iconStatus:""],on:{mouseenter(e){r.triggerHeaderTitleEvent(e,o,t)},mouseleave(e){r.handleTargetLeaveEvent(e)}}},[e("i",{class:o.icon||O().TABLE_TITLE_PREFIX})]):C(r)})(e,t),((e,r)=>{let{$table:l,column:t}=r;var o=l.$scopedSlots,i=t.slots,n=l.computeColumnOpts,{showIcon:a,icon:s,trigger:c,isPeerDrag:d,isCrossDrag:u,visibleMethod:p,disabledMethod:h}=l.computeColumnDragOpts;if(!n.drag||!a||p&&!p(r)||t.fixed||!d&&!u&&t.parentId)return C(l);{let t=h&&h(r);n=(i?i.columnDragIcon||i["column-drag-icon"]:null)||o.columnDragIcon||o["column-drag-icon"],a={};return"cell"!==c&&(a.mousedown=e=>{t||l.handleHeaderCellDragMousedownEvent(e,r)},a.mouseup=l.handleHeaderCellDragMouseupEvent),e("span",{key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":t}],on:a},n?l.callSlot(n,r,e):[e("i",{class:s||O().TABLE_DRAG_COLUMN})])}})(e,t),...sr().isArray(r)?r:[r],((e,t)=>{let{$table:r,column:l}=t,o=l.titleSuffix;return o?e("i",{class:["vxe-cell-title-suffix-icon",o.iconStatus?"theme--"+o.iconStatus:""],on:{mouseenter(e){r.triggerHeaderTitleEvent(e,o,t)},mouseleave(e){r.handleTargetLeaveEvent(e)}}},[e("i",{class:o.icon||O().TABLE_TITLE_SUFFIX})]):C(r)})(e,t)]}function no(e,t,r){let{$table:l,column:o}=t;var{type:i,showHeaderOverflow:n}=o,a=l;let s=l;a=a.showHeaderOverflow;let c=l.computeTooltipOpts.showAll;a=sr().isUndefined(n)||sr().isNull(n)?a:n;let d="title"===a,u=!0===a||"tooltip"===a;n={};return(d||u||c)&&(n.mouseenter=e=>{s.isDragResize||(d?Il(e.currentTarget,o):(u||c)&&l.triggerHeaderTooltipEvent(e,t))}),(u||c)&&(n.mouseleave=e=>{s.isDragResize||(u||c)&&l.handleTargetLeaveEvent(e)}),["html"===i&&sr().isString(r)?e("span",{class:"vxe-cell--title",domProps:{innerHTML:r},on:n}):e("span",{class:"vxe-cell--title",on:n},Dr(r))]}function ao(e){var{$table:e,row:t,column:r}=e;return ur(e.getCellLabel(t,r),1)}function so(e,t){var{column:r,row:l,$table:o}=t,i=o.editConfig,n=o.isRowGroupStatus,{type:a,treeNode:s,rowGroupNode:c,editRender:d}=r,u=o.computeAggregateOpts.mode,p=o.computeCheckboxOpts,o=o.computeEditOpts,h=s||n&&("column"===u?r.field===l.groupField:c);switch(a){case"seq":return h?m.renderDeepIndexCell(e,t):m.renderSeqCell(e,t);case"radio":return h?m.renderDeepRadioCell(e,t):m.renderRadioCell(e,t);case"checkbox":return p.checkField?h?m.renderDeepSelectionCellByProp(e,t):m.renderCheckboxCellByProp(e,t):h?m.renderDeepSelectionCell(e,t):m.renderCheckboxCell(e,t);case"expand":return m.renderExpandCell(e,t);case"html":return h?m.renderDeepHTMLCell(e,t):m.renderHTMLCell(e,t)}return cr(i)&&d?"cell"===o.mode?h?m.renderDeepCellEdit(e,t):m.renderCellEdit(e,t):h?m.renderDeepRowEdit(e,t):m.renderRowEdit(e,t):h?m.renderDeepCell(e,t):m.renderDefaultCell(e,t)}function co(e,t){var{column:r,$table:l}=t,l=l.editConfig,{type:r,filters:o,sortable:i,editRender:n}=r;switch(r){case"seq":return m.renderSeqHeader(e,t);case"radio":return m.renderRadioHeader(e,t);case"checkbox":return m.renderCheckboxHeader(e,t);case"html":if(o&&i)return m.renderSortAndFilterHeader(e,t);if(i)return m.renderSortHeader(e,t);if(o)return m.renderFilterHeader(e,t)}return l&&n?m.renderEditHeader(e,t):o&&i?m.renderSortAndFilterHeader(e,t):i?m.renderSortHeader(e,t):o?m.renderFilterHeader(e,t):m.renderDefaultHeader(e,t)}function uo(e,t){return m.renderDefaultFooter(e,t)}let m={createColumn(e,t){var r=t.type,l={renderHeader:co,renderCell:so,renderFooter:uo};return"expand"===r&&(l.renderData=m.renderExpandData),r=e,e=l,Jl(l=t)?l:new ba(r,l,e)},renderHeaderTitle(e,t){var{$table:r,column:l}=t,{slots:o,editRender:i,cellRender:n}=l,i=i||n;if(o&&o.header)return no(e,t,r.callSlot(o.header,t,e));if(i){n=y.get(i.name),o=n?n.renderTableHeader||n.renderHeader:null;if(o)return Dr(no(e,t,o.call(r,e,i,t)))}return no(e,t,ur(l.getTitle(),1))},renderDefaultHeader(e,t){return io(e,t,m.renderHeaderTitle(e,t))},renderDefaultCell(e,t){var r,l,o,i,n,a,{$table:s,row:c,column:d}=t,u=s,p=s.isRowGroupStatus,{field:h,slots:m,editRender:g,cellRender:f,rowGroupNode:v,aggFunc:x}=d,f=g||f;if(m&&m.default)return Ir(e,t,s.callSlot(m.default,t,e));if(f){var m=y.get(f.name),b=m?m.renderTableDefault||m.renderDefault:null,m=m?m.renderTableCell||m.renderCell:null,m=g?m:b;if(m)return Ir(e,t,Dr(m.call(s,e,f,Object.assign({$type:g?"edit":"cell"},t))))}let C="";p&&h&&c.isAggregate?(b=u.fullColumnFieldData,{mode:f,showTotal:p,totalMethod:u,countFields:r,contentMethod:l,mapChildrenField:i}=m=s.computeAggregateOpts,m=m.aggregateMethod||m.countMethod,a=c.groupField,o=c.groupContent,i=i&&c[i]||[],n=c.childCount,a={$table:s,groupField:a,groupColumn:(b=b[a]||{})?b.column:null,column:d,groupValue:o,children:i,childCount:n,aggValue:null,totalValue:n},("column"===f?h===c.groupField:v)?(C=o,l&&(C=""+l(a)),p&&(C=w("vxe.table.rowGroupContentTotal",[C,u?u(a):n,n]))):s.getPivotTableAggregateCellAggValue?C=s.getPivotTableAggregateCellAggValue(t):(!0===x||r&&r.includes(h))&&m&&(a.aggValue=n,C=""+m(a))):C=s.getCellLabel(c,d);b=g?g.placeholder:"";return Ir(e,t,[e("span",{class:"vxe-cell--label"},[g&&pr(C)?e("span",{class:"vxe-cell--placeholder"},ur(dr(b),1)):e("span",ur(C,1))])])},renderDeepCell(e,t){return m.renderDeepNodeBtn(e,t,m.renderDefaultCell.call(this,e,t))},renderDefaultFooter(t,r){{var{$table:l,column:o,_columnIndex:i,row:n,items:a}=r,{slots:s,editRender:c,cellRender:d,footerFormatter:u}=o,c=c||d;if(s&&s.footer)return l.callSlot(s.footer,r,t);let e="";if(e=sr().isArray(a)?a[i]:sr().get(n,o.field),d=Object.assign(r,{itemValue:e}),u)return sr().isFunction(u)?""+u(d):(i=(a=(s=sr().isArray(u))?xe.get(u[0]):xe.get(u))?a.tableFooterCellFormatMethod:null)?""+(s?i(d,...u.slice(1)):i(d)):"";if(c){n=y.get(c.name),o=n?n.renderTableFooter||n.renderFooter:null;if(o)return Dr(o.call(l,t,c,d))}return[ur(e,1)]}},renderRowGroupBtn(e,t,r){let l=t.$table;var o=l,i=l,{row:n,level:a}=t,o=o.rowGroupExpandedFlag,i=i.rowGroupExpandedMaps,{padding:s,indent:c}=l.computeAggregateOpts,d=yr(l,n),o=!!o&&!!i[d];return e("div",{class:["vxe-row-group--tree-node",{"is--expanded":o}],style:s&&c?{paddingLeft:a*c+"px"}:void 0},[n.isAggregate?e("span",{class:"vxe-row-group--node-btn",on:{click(e){l.triggerRowGroupExpandEvent(e,t)}}},[e("i",{class:o?O().TABLE_ROW_GROUP_OPEN:O().TABLE_ROW_GROUP_CLOSE})]):C(l),e("div",{class:"vxe-row-group-cell"},r)])},renderTreeNodeBtn(e,t,r){let{$table:l,isHidden:o}=t;var i=l.treeExpandedFlag,{fullAllDataRowIdData:n,treeExpandedMaps:a,treeExpandLazyLoadedMaps:s}=l,c=l.computeTreeOpts,{row:d,column:u,level:p}=t,u=u.slots,{padding:h,indent:m,lazy:g,trigger:f,iconLoaded:v,showIcon:x,iconOpen:b,iconClose:C}=c,w=c.children||c.childrenField,c=c.hasChild||c.hasChildField,w=d[w],w=w&&w.length,u=u?u.icon:null;let y=!1,E=!1,T=!1,R=!1;var S={};return u?l.callSlot(u,t,e):(o||(u=yr(l,d),E=!!i&&!!a[u],g&&(i=n[u],T=!!s[u],y=d[c],R=!!i.treeLoaded)),f&&"default"!==f||(S.click=e=>{l.triggerTreeExpandEvent(e,t)}),[e("div",{class:["vxe-cell--tree-node",{"is--active":E}],style:h&&m?{paddingLeft:p*m+"px"}:void 0},[x&&(!g||R?w:w||y)?[e("div",{class:"vxe-cell--tree-btn",on:S},[e("i",{class:T?v||O().TABLE_TREE_LOADED:E?b||O().TABLE_TREE_OPEN:C||O().TABLE_TREE_CLOSE})])]:null,e("div",{class:"vxe-tree-cell"},r)])])},renderDeepNodeBtn(e,t,r){var{$table:l,row:o,column:i}=t,n=i.rowGroupNode,a=l.rowGroupList;if(a.length){a=l.computeAggregateOpts.mode;if("column"===a?i.field===o.groupField:n)return[m.renderRowGroupBtn(e,t,r)]}return[m.renderTreeNodeBtn(e,t,r)]},renderSeqHeader(e,t){var{$table:r,column:l}=t,o=l.slots;return io(e,t,no(e,t,o&&o.header?r.callSlot(o.header,t,e):ur(l.getTitle(),1)))},renderSeqCell(e,t){var{$table:r,column:l}=t,o=r.treeConfig,i=r.computeSeqOpts,l=l.slots;return l&&l.default?Ir(e,t,r.callSlot(l.default,t,e)):(r=t.seq,Ir(e,t,[e("span",""+ur((l=i.seqMethod)?l(t):o?r:(i.startIndex||0)+r,1))]))},renderDeepIndexCell(e,t){return m.renderDeepNodeBtn(e,t,m.renderSeqCell(e,t))},renderRadioHeader(e,t){var{$table:r,column:l}=t,o=l.slots,i=o?o.header:null,o=o?o.title:null;return io(e,t,no(e,t,i?r.callSlot(i,t,e):[e("span",{class:"vxe-radio--label"},o?r.callSlot(o,t,e):ur(l.getTitle(),1))]))},renderRadioCell(e,t){let{$table:r,column:l,isHidden:o}=t;var i=r.selectRadioRow,n=l.slots,{labelField:a,checkMethod:s,visibleMethod:c}=r.computeRadioOpts,d=t.row,u=n?n.default:null,n=n?n.radio:null,i=d===i;let p=!c||c({$table:r,row:d}),h=!!s,m;o||(m={click(e){!h&&p&&r.triggerRadioRowEvent(e,t)}},s&&(h=!s({$table:r,row:d})));c={...t,checked:i,disabled:h,visible:p};return n?Ir(e,t,r.callSlot(n,c,e)):(s=[],p&&s.push(e("span",{class:["vxe-radio--icon",i?O().TABLE_RADIO_CHECKED:O().TABLE_RADIO_UNCHECKED]})),(u||a)&&s.push(e("span",{class:"vxe-radio--label"},u?r.callSlot(u,c,e):sr().get(d,a))),Ir(e,t,[e("span",{class:["vxe-cell--radio",{"is--checked":i,"is--disabled":h}],on:m},s)]))},renderDeepRadioCell(e,t){return m.renderDeepNodeBtn(e,t,m.renderRadioCell(e,t))},renderCheckboxHeader(e,t){let{$table:r,column:l,isHidden:o}=t;let{isAllSelected:i,isIndeterminate:n}=r,a=r.computeIsAllCheckboxDisabled;var s=l.slots,c=s?s.header:null,s=s?s.title:null,{checkStrictly:d,showHeader:u,headerTitle:p}=r.computeCheckboxOpts,h=l.getTitle(),m={},g=(o||(m.click=e=>{a||r.triggerCheckAllEvent(e,!i)}),{...t,checked:i,disabled:a,indeterminate:n});return io(e,t,no(e,g,c?r.callSlot(c,g,e):(d?u:!1!==u)?[e("span",{class:["vxe-cell--checkbox",{"is--checked":i,"is--disabled":a,"is--indeterminate":n}],attrs:{title:sr().eqNull(p)?w("vxe.table.allTitle"):""+(p||"")},on:m},[e("span",{class:["vxe-checkbox--icon",n?O().TABLE_CHECKBOX_INDETERMINATE:i?O().TABLE_CHECKBOX_CHECKED:O().TABLE_CHECKBOX_UNCHECKED]})].concat(s||h?[e("span",{class:"vxe-checkbox--label"},s?r.callSlot(s,g,e):h)]:[]))]:[e("span",{class:"vxe-checkbox--label"},s?r.callSlot(s,g,e):h)]))},renderCheckboxCell(e,t){let{$table:r,row:l,column:o,isHidden:i}=t;var n=r.treeConfig,{updateCheckboxFlag:a,isRowGroupStatus:s}=r,{selectCheckboxMaps:c,treeIndeterminateRowMaps:d}=r,{labelField:u,checkMethod:p,visibleMethod:h}=r.computeCheckboxOpts,m=o.slots,g=m?m.default:null,m=m?m.checkbox:null;let f=!1,v=!1,x=!h||h({$table:r,row:l}),b=!!p;var C,h={},a=(!i&&(C=yr(r,l),v=!!a&&!!c[C],h.click=e=>{!b&&x&&r.triggerCheckRowEvent(e,t,!v)},p&&(b=!p({$table:r,row:l})),n||s)&&(f=!!d[C]),{...t,checked:v,disabled:b,visible:x,indeterminate:f});return m?Ir(e,t,r.callSlot(m,a,e)):(c=[],x&&c.push(e("span",{class:["vxe-checkbox--icon",f?O().TABLE_CHECKBOX_INDETERMINATE:v?O().TABLE_CHECKBOX_CHECKED:O().TABLE_CHECKBOX_UNCHECKED]})),(g||u)&&c.push(e("span",{class:"vxe-checkbox--label"},g?r.callSlot(g,a,e):sr().get(l,u))),Ir(e,t,[e("span",{class:["vxe-cell--checkbox",{"is--checked":v,"is--disabled":b,"is--indeterminate":f,"is--hidden":!x}],on:h},c)]))},renderDeepSelectionCell(e,t){return m.renderDeepNodeBtn(e,t,m.renderCheckboxCell(e,t))},renderCheckboxCellByProp(e,t){let{$table:r,row:l,column:o,isHidden:i}=t;var n=r.treeConfig,{updateCheckboxFlag:a,isRowGroupStatus:s}=r,c=r.treeIndeterminateRowMaps,d=r.computeCheckboxOpts,{labelField:u,checkField:p,checkMethod:h,visibleMethod:m}=d,d=d.indeterminateField||d.halfField,g=o.slots,f=g?g.default:null,g=g?g.checkbox:null;let v=!1,x=!1,b=!m||m({$table:r,row:l}),C=!!h;var w,m={},a=(!i&&(w=yr(r,l),x=!!a&&sr().get(l,p),m.click=e=>{!C&&b&&r.triggerCheckRowEvent(e,t,!x)},h&&(C=!h({$table:r,row:l})),n||s)&&(v=!!c[w]),{...t,checked:x,disabled:C,visible:b,indeterminate:v});return g?Ir(e,t,r.callSlot(g,a,e)):(p=[],b&&p.push(e("span",{class:["vxe-checkbox--icon",v?O().TABLE_CHECKBOX_INDETERMINATE:x?O().TABLE_CHECKBOX_CHECKED:O().TABLE_CHECKBOX_UNCHECKED]})),(f||u)&&p.push(e("span",{class:"vxe-checkbox--label"},f?r.callSlot(f,a,e):sr().get(l,u))),Ir(e,t,[e("span",{class:["vxe-cell--checkbox",{"is--checked":x,"is--disabled":C,"is--indeterminate":d&&!x?l[d]:v,"is--hidden":!b}],on:m},p)]))},renderDeepSelectionCellByProp(e,t){return m.renderDeepNodeBtn(e,t,m.renderCheckboxCellByProp(e,t))},renderExpandCell(e,t){let{$table:r,isHidden:l,row:o,column:i}=t;var n=r.isRowGroupStatus,{rowExpandedMaps:a,rowExpandLazyLoadedMaps:s}=r,{lazy:c,labelField:d,iconLoaded:u,showIcon:p,iconOpen:h,iconClose:m,visibleMethod:g}=r.computeExpandOpts,f=i.slots,v=f?f.default:null,f=f?f.icon:null;let x=!1,b=!1;return n&&o.isAggregate?Ir(e,t,[]):f?Ir(e,t,r.callSlot(f,t,e)):(l||(n=yr(r,o),x=!!a[n],c&&(b=!!s[n])),Ir(e,t,[!p||g&&!g(t)?C(r):e("span",{class:["vxe-table--expanded",{"is--active":x}],on:{mousedown(e){e.stopPropagation()},click(e){r.triggerRowExpandEvent(e,t)}}},[e("i",{class:["vxe-table--expand-btn",b?u||O().TABLE_EXPAND_LOADED:x?h||O().TABLE_EXPAND_OPEN:m||O().TABLE_EXPAND_CLOSE]})]),v||d?e("span",{class:"vxe-table--expand-label"},v?r.callSlot(v,t,e):sr().get(o,d)):C(r)]))},renderExpandData(e,t){var{$table:r,column:l}=t,{slots:l,contentRender:o}=l;if(l&&l.content)return r.callSlot(l.content,t,e);if(o){l=y.get(o.name),l=l?l.renderTableExpand||l.renderExpand:null;if(l)return Dr(l.call(r,e,o,t))}return[]},renderHTMLCell(e,t){var{$table:r,column:l}=t,l=l.slots;return l&&l.default?Ir(e,t,r.callSlot(l.default,t,e)):Ir(e,t,[e("span",{class:"vxe-cell--html",domProps:{innerHTML:ao(t)}})])},renderDeepHTMLCell(e,t){return m.renderDeepNodeBtn(e,t,m.renderHTMLCell(e,t))},renderSortAndFilterHeader(e,t){return io(e,t,m.renderHeaderTitle(e,t).concat(m.renderSortIcon(e,t).concat(m.renderFilterIcon(e,t))))},renderSortHeader(e,t){return io(e,t,m.renderHeaderTitle(e,t).concat(m.renderSortIcon(e,t)))},renderSortIcon(e,t){let{$table:r,column:l}=t;var{showIcon:o,allowBtn:i,ascTitle:n,descTitle:a,iconLayout:s,iconAsc:c,iconDesc:d,iconVisibleMethod:u}=r.computeSortOpts;return!o||u&&!u(t)?[]:[e("span",{class:["vxe-cell--sort",`vxe-cell--sort-${s}-layout`]},[e("i",{class:["vxe-sort--asc-btn",c||O().TABLE_SORT_ASC,{"sort--active":"asc"===l.order}],attrs:{title:sr().eqNull(n)?w("vxe.table.sortAsc"):""+(n||"")},on:i?{click(e){e.stopPropagation(),r.triggerSortEvent(e,l,"asc")}}:void 0}),e("i",{class:["vxe-sort--desc-btn",d||O().TABLE_SORT_DESC,{"sort--active":"desc"===l.order}],attrs:{title:sr().eqNull(a)?w("vxe.table.sortDesc"):""+(a||"")},on:i?{click(e){e.stopPropagation(),r.triggerSortEvent(e,l,"desc")}}:void 0})])]},renderFilterHeader(e,t){return io(e,t,m.renderHeaderTitle(e,t).concat(m.renderFilterIcon(e,t)))},renderFilterIcon(e,t){let{$table:r,column:l,hasFilter:o}=t;var i=r.filterStore,{showIcon:n,iconNone:a,iconMatch:s,iconVisibleMethod:c}=r.computeFilterOpts;return!n||c&&!c(t)?[]:[e("span",{class:["vxe-cell--filter",{"is--active":i.visible&&i.column===l}],on:{click(e){r.triggerFilterEvent&&r.triggerFilterEvent(e,t.column,t)}}},[e("i",{class:["vxe-filter--btn",o?s||O().TABLE_FILTER_MATCH:a||O().TABLE_FILTER_NONE],attrs:{title:w("vxe.table.filter")}})])]},renderEditHeader(e,t){var{$table:r,column:l}=t,{editConfig:o,editRules:i}=r,n=r.computeEditOpts,{sortable:a,filters:s,editRender:c}=l;let d=!1,u=(i&&(i=sr().get(i,l.field))&&(d=i.some(e=>e.required)),[]);return cr(o)&&(u=[d&&n.showAsterisk?e("i",{class:"vxe-cell--required-icon"},[e("i",{class:"vxe-cell--required-icon"})]):C(r),cr(c)&&n.showIcon?e("i",{class:"vxe-cell--edit-icon"},[e("i",{class:n.icon||O().TABLE_EDIT})]):C(r)]),io(e,t,u.concat(m.renderHeaderTitle(e,t)).concat(a?m.renderSortIcon(e,t):[]).concat(s?m.renderFilterIcon(e,t):[]))},renderRowEdit(e,t){var{$table:r,column:l}=t,r=r.editStore,r=r.actived,l=l.editRender;return m.runRenderer(e,t,this,cr(l)&&r&&r.row===t.row)},renderDeepRowEdit(e,t){return m.renderDeepNodeBtn(e,t,m.renderRowEdit(e,t))},renderCellEdit(e,t){var{$table:r,column:l}=t,r=r.editStore,r=r.actived,l=l.editRender;return m.runRenderer(e,t,this,cr(l)&&r&&r.row===t.row&&r.column===t.column)},renderDeepCellEdit(e,t){return m.renderDeepNodeBtn(e,t,m.renderCellEdit(e,t))},runRenderer(e,t,r,l){var{$table:o,column:i}=t,{slots:i,editRender:n,formatter:a}=i,s=y.get(n.name),s=s?s.renderTableEdit||s.renderEdit:null,c=Object.assign({$type:"",isEdit:l},t);return l?i&&i.edit?o.callSlot(i.edit,c,e):s?Dr(s.call(o,e,n,c)):[]:i&&i.default?Ir(e,t,o.callSlot(i.default,c,e)):a?Ir(e,t,[e("span",{class:"vxe-cell--label"},[ao(c)])]):m.renderDefaultCell.call(r,e,c)}};var po=m,ar={colId:[String,Number],type:String,field:String,title:String,width:[Number,String],minWidth:[Number,String],maxWidth:[Number,String],resizable:{type:Boolean,default:null},fixed:String,align:String,headerAlign:String,footerAlign:String,showOverflow:{type:[Boolean,String],default:null},showHeaderOverflow:{type:[Boolean,String],default:null},showFooterOverflow:{type:[Boolean,String],default:null},className:[String,Function],headerClassName:[String,Function],footerClassName:[String,Function],formatter:[Function,Array,String],footerFormatter:[Function,Array,String],padding:{type:Boolean,default:null},verticalAlign:{type:String,default:null},sortable:Boolean,remoteSort:{type:Boolean,default:null},sortBy:[String,Function],sortType:String,sortMethod:Function,filters:{type:Array,default:null},filterMultiple:{type:Boolean,default:!0},filterMethod:Function,filterResetMethod:Function,filterRecoverMethod:Function,filterRender:Object,rowGroupNode:Boolean,treeNode:Boolean,dragSort:Boolean,rowResize:Boolean,visible:{type:Boolean,default:null},headerExportMethod:Function,exportMethod:Function,footerExportMethod:Function,titleHelp:Object,titlePrefix:Object,titleSuffix:Object,cellType:String,cellRender:Object,editRender:Object,contentRender:Object,aggFunc:[String,Boolean],params:Object};let be={};Object.keys(ar).forEach(r=>{be[r]=function(e){var t=this.$xeTable;this.columnConfig.update(r,e),t&&("filters"===r?(t.setFilter(this.columnConfig,e),t.handleUpdateDataQueue()):["visible","fixed","width","minWidth","maxWidth"].includes(r)&&t.handleRefreshColumnQueue())}});var ho={name:"VxeColumn",props:ar,provide(){return{$xeColumn:this,$xeGrid:null}},inject:{$xeTable:{default:null},$xeColumn:{default:null}},watch:be,created(){var e=this.$xeTable;this.columnConfig=this.createColumn(e,this)},mounted(){this.columnConfig.slots=this.$scopedSlots,Gl(this)},destroyed(){ql(this)},render(e){return e("div",this.$slots.default)},methods:po};let Ce=Object.assign({},ho,{install(e){e.component(ho.name,ho),e.component("VxeTableColumn",ho)}}),we=(nr.VxeUI.dynamicApp&&(nr.VxeUI.dynamicApp.component(ho.name,ho),nr.VxeUI.dynamicApp.component("VxeTableColumn",ho)),nr.VxeUI.component(ho),Ce);var mo={name:"VxeColgroup",props:ar,provide(){return{$xeColumn:this,$xeGrid:null}},inject:{$xeTable:{default:null},$xeColumn:{default:null}},watch:be,created(){var e=this.$xeTable;this.columnConfig=this.createColumn(e,this)},mounted(){var e=this.$scopedSlots,t={};e.header&&(t.header=e.header),this.columnConfig.slots=t,Gl(this)},destroyed(){ql(this)},render(e){return e("div",this.$slots.default)},methods:po};let ye=Object.assign({},mo,{install(e){e.component(mo.name,mo),e.component("VxeTableColgroup",mo)}}),Ee=(nr.VxeUI.dynamicApp&&(nr.VxeUI.dynamicApp.component(mo.name,mo),nr.VxeUI.dynamicApp.component("VxeTableColgroup",mo)),nr.VxeUI.component(mo),ye),{getConfig:Te,getI18n:_,renderer:Re,formats:Se,interceptor:Oe,createEvent:Fe}=nr.VxeUI,z=sr().browse(),De="VXE_CUSTOM_STORE",F=5e6,b=5e6;function go(e,t,r){e=sr().get(e,r),t=sr().get(t,r);return pr(e)&&pr(t)||(sr().isString(e)||sr().isNumber(e)?""+e==""+t:sr().isEqual(e,t))}function fo(e,t){var{orders:e=[]}=e.computeSortOpts,t=t.order||null,t=e.indexOf(t)+1;return e[t<e.length?t:0]}let Ie=e=>{var t=Te().version,r=sr().toStringJSON(localStorage.getItem(De)||""),r=r&&r._v===t?r:{_v:t};return(e?r[e]:r)||{}},$e=(e,t)=>{let r=e.fullAllDataRowIdData,l={};return sr().each(t,(e,t)=>{r[t]&&(l[t]=e)}),l};function vo(e,t){let r=e.fullDataRowIdData,l=[];return sr().each(t,(e,t)=>{r[t]&&-1===l.indexOf(r[t].row)&&l.push(r[t].row)}),l}function xo(o){var{isScrollXBig:i,scrollXWidth:n}=o,{elemStore:a,visibleColumn:s,fullColumnIdData:c}=o,d=o.computeLeftFixedWidth,o=o.computeRightFixedWidth,a=Fr(a["main-body-scroll"]);if(a){var u=a.clientWidth;let e=a.scrollLeft;var p=(e=i?Math.ceil((n-u)*Math.min(1,e/(b-u))):e)+d,h=e+u-o;let t=0,r=s.length;for(;t<r;){var m=Math.floor((t+r)/2);(c[s[m].id]||{}).oLeft<=p?t=m+1:r=m}let l=0;a=t===s.length?t:Math.max(0,t<s.length?t-2:0);for(let e=a,t=s.length;e<t;e++){var g=c[s[e].id]||{};if(l++,g.oLeft>h||60<=l)break}return{toVisibleIndex:Math.max(0,a),visibleSize:Math.max(1,l)}}return{toVisibleIndex:0,visibleSize:6}}function bo(e,t){var r=e,l=e.collectColumn;let{resizableData:n,sortData:a,visibleData:s,fixedData:c}=t,d=!1;n||a||s||c?(sr().eachTree(l,(e,t,r,l,o)=>{var i=e.getKey();o||(c&&void 0!==c[i]&&(e.fixed=c[i]),a&&sr().isNumber(a[i])&&(d=!0,e.renderSortNumber=a[i])),n&&sr().isNumber(n[i])&&(e.resizeWidth=n[i]),s&&sr().isBoolean(s[i])&&(e.visible=s[i])}),d&&(l=sr().orderBy(l,"renderSortNumber"),e.collectColumn=l,e.tableFullColumn=ii(l)),r.isCustomStatus=!0):r.isCustomStatus=!1}function Co(e){var t=e,r=e,l=e,{tableFullColumn:o,collectColumn:i}=l;let u=l.fullColumnIdData={},p=l.fullColumnFieldData={};var l=e.computeMouseOpts,n=e.computeExpandOpts;let h=e.computeColumnOpts,{isCrossDrag:m,isSelfToChildDrag:g}=e.computeColumnDragOpts,f=e.computeCustomOpts.storage;var e=e.computeRowOpts,a=i.some(bl);let v=!!t.showOverflow,x,b,C,w,y,E,T,s=(e,t,r,l,o)=>{var{id:i,field:n,fixed:a,type:s,treeNode:c,rowGroupNode:d}=e,t={$index:-1,_index:-1,column:e,colid:i,index:t,items:r,parent:o||null,width:0,oLeft:0};n?(p[n]&&A("vxe.error.colRepet",["field",n]),p[n]=t):(f&&!s||h.drag&&(m||g))&&A("vxe.error.reqProp",[`${e.getTitle()||s||""} -> column.field=?`]),!T&&a&&(T=a),E||"html"!==s||(E=e),c&&(C&&M("vxe.error.colRepet",["tree-node",c]),C=C||e),d&&(C&&M("vxe.error.colRepet",["row-group-node",d]),x=x||e),"expand"===s&&(b&&M("vxe.error.colRepet",["type",s]),b=b||e),"checkbox"===s?(w&&M("vxe.error.colRepet",["type",s]),w=w||e):"radio"===s&&(y&&M("vxe.error.colRepet",["type",s]),y=y||e),v&&!1===e.showOverflow&&(v=!1),u[i]&&A("vxe.error.colRepet",["colId",i]),u[i]=t};a?sr().eachTree(i,(e,t,r,l,o,i)=>{e.level=i.length,s(e,t,r,0,o)}):o.forEach(s),b&&"fixed"!==n.mode&&l.area&&A("vxe.error.errConflicts",["mouse-config.area","column.type=expand"]),E&&(h.useKey||A("vxe.error.reqProp",["column-config.useKey & column.type=html"]),e.useKey||A("vxe.error.reqProp",["row-config.useKey & column.type=html"])),r.isGroup=a,r.rowGroupColumn=x,r.treeNodeColumn=C,r.expandColumn=b,r.isAllOverflow=v}function wo(e,t){var r=e,l=e.treeConfig,o=e.computeVirtualYOpts,i=e.computeTreeOpts.transform,t=t||e.tableFullData,e=(i||!l)&&!!o.enabled&&-1<o.gt&&(0===o.gt||o.gt<t.length);return r.scrollYLoad=e}function yo(l,e,t){var r=l;let o=r.treeNodeColumn,{fullAllDataRowIdData:i,tableFullTreeData:n,treeExpandedMaps:a,treeExpandLazyLoadedMaps:s}=l;var c=l.computeTreeOpts;let{reserve:d,lazy:u,accordion:p,toggleMethod:h}=c,m=c.children||c.childrenField,g=c.hasChild||c.hasChildField,f=[],v=l.getColumnIndex(o),x=l.getVMColumnIndex(o),b=Er(l).handleGetRowId,C=h?e.filter(e=>h({$table:l,expanded:t,column:o,columnIndex:v,$columnIndex:x,row:e})):e;return p&&(C=C.length?[C[C.length-1]]:[],c=sr().findTree(n,e=>e===C[0],{children:m}))&&c.items.forEach(e=>{e=b(e);a[e]&&delete a[e]}),t?C.forEach(e=>{var t,r=b(e);a[r]||(t=i[r])&&(u&&e[g]&&!t.treeLoaded&&!s[r]?f.push(ke(l,e)):e[m]&&e[m].length&&(a[r]=e))}):C.forEach(e=>{e=b(e);a[e]&&delete a[e]}),d&&C.forEach(e=>Me(l,e,t)),r.treeExpandedFlag++,Promise.all(f).then(()=>l.recalculate())}function Eo(e,t,r){let l=e;return((t,e,r)=>{var l=t;let{fullAllDataRowIdData:o,tableFullGroupData:i,rowGroupExpandedMaps:n}=t,{mapChildrenField:a,accordion:s}=t.computeAggregateOpts,c=Er(t).handleGetRowId,d=e;return a&&(s&&(d=d.length?[d[d.length-1]]:[],e=sr().findTree(i,e=>yr(t,e)===yr(t,d[0]),{children:a}))&&e.items.forEach(e=>{e=c(e);n[e]&&delete n[e]}),r?d.forEach(e=>{var t=c(e);n[t]||o[t]&&e[a]&&e[a].length&&(n[t]=e)}):d.forEach(e=>{e=c(e);n[e]&&delete n[e]})),l.rowGroupExpandedFlag++,t.recalculate()})(e,t,r).then(()=>($r(e),e.handleTableData(),l.rowGroupExpandedFlag++,To(e),e.$nextTick())).then(()=>e.recalculate(!0)).then(()=>{setTimeout(()=>{e.updateCellAreas()},30)})}function To(t){var e=t;let l=t.treeConfig,{fullDataRowIdData:a,fullAllDataRowIdData:s,afterFullData:r,afterTreeFullData:o}=e;var d=t.computeTreeOpts,i=d.transform,u=d.children||d.childrenField;let c={};if(l){let n=Er(t).handleGetRowId;sr().eachTree(o,(e,t,r,l)=>{var o=n(e),i=s[o],l=l.map((e,t)=>t%2==0?Number(e)+1:".").join("");i?(i.seq=l,i.treeIndex=t):(i={row:e,rowid:o,seq:l,index:-1,$index:-1,_index:-1,treeIndex:-1,items:[],parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0},s[o]=i,a[o]=i),c[o]=e},{children:i?d.mapChildrenField:u}),i&&r.forEach((e,t)=>{var e=n(e),e=s[e],r=t+1;e&&(l||(e.seq=r),e._index=t)}),e.afterFullRowMaps=c}else{d=t;u=d;let i=d.treeConfig,{afterFullData:e,fullDataRowIdData:n,fullAllDataRowIdData:a}=u,s=Er(d).handleGetRowId,c={};e.forEach((e,t)=>{var r=s(e),l=a[r],o=t+1;l?(i||(l.seq=o),l._index=t):(l={row:e,rowid:r,seq:o,index:-1,$index:-1,_index:t,treeIndex:-1,items:[],parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0},a[r]=l,n[r]=l),c[r]=e}),u.afterFullRowMaps=c}}function $r(e){var t=e,r=e.treeConfig,l=e.isRowGroupStatus;let{fullAllDataRowIdData:a,treeExpandedMaps:s,rowGroupExpandedMaps:c}=t;var o=e.computeAggregateOpts,i=e.computeTreeOpts;let d=Er(e).handleGetRowId,u=[],p={};return r&&i.transform?(r=i.children||i.childrenField,sr().eachTree(t.afterTreeFullData,(e,t,r,l,o)=>{var i=d(e),n=d(o);(!o||p[n]&&s[n])&&((o=a[i])&&(o._index=u.length),p[i]=1,u.push(e))},{children:r}),wo(e,t.afterFullData=u),u):l?(i=o.childrenField,sr().eachTree(t.afterGroupFullData,(e,t,r,l,o)=>{var i=d(e),n=d(o);(!o||p[n]&&c[n])&&((o=a[i])&&(o._index=u.length),p[i]=1,u.push(e))},{children:i}),wo(e,t.afterFullData=u),u):t.afterFullData}function kr(t){let{showHeaderOverflow:x,showFooterOverflow:b,mouseConfig:e,spanMethod:C,footerSpanMethod:w}=t,{isGroup:y,currentRow:r,tableColumn:E,scrollXLoad:T,scrollYLoad:R,overflowX:S,scrollbarWidth:l,overflowY:o,scrollbarHeight:i,scrollXWidth:O,columnStore:n,editStore:a,isAllOverflow:F,expandColumn:D,isColLoading:I}=t,{visibleColumn:$,tableHeight:k,headerHeight:M,footerHeight:A,elemStore:L,customHeight:_,customMinHeight:s,customMaxHeight:V}=t;var c=t.$refs.refElem;if(c){let p=o?l:0,h=S?i:0;var d=t.$refs.refEmptyPlaceholder,u=t.computeMouseOpts;let m=t.computeExpandOpts;var H=Fr(L["main-body-wrapper"]),B=Fr(L["main-body-table"]);d&&(d.style.top=M+"px",d.style.height=H?H.offsetHeight-h+"px":"");let g=0,f=0,v=s-M-A-h;V&&(f=Math.max(v,V-M-A-h)),(g=_?_-M-A-h:g)||B&&(g=B.clientHeight),g&&(f&&(g=Math.min(f,g)),g=Math.max(v,g));var d=t.$refs.computeScrollbarXToTop,H=t.$refs.refScrollXLeftCornerElem,B=t.$refs.refScrollXRightCornerElem,P=t.$refs.refScrollXVirtualElem,P=(P&&(P.style.height=h+"px",P.style.visibility=S?"visible":"hidden"),t.$refs.refScrollXWrapperElem),P=(P&&(P.style.left=d?p+"px":"",P.style.width=c.clientWidth-p+"px"),H&&(H.style.width=d?p+"px":"",H.style.display=d&&S&&h?"block":""),B&&(B.style.width=d?"":p+"px",B.style.display=!d&&S&&h?"block":""),t.$refs.refScrollYVirtualElem),c=(P&&(P.style.width=p+"px",P.style.height=g+M+A+"px",P.style.visibility=o?"visible":"hidden"),t.$refs.refScrollYTopCornerElem),H=(c&&(c.style.height=M+"px",c.style.display=o&&M?"block":""),t.$refs.refScrollYWrapperElem),B=(H&&(H.style.height=g+"px",H.style.top=M+"px"),t.$refs.refScrollYBottomCornerElem),d=(B&&(B.style.height=A+"px",B.style.top=M+g+"px",B.style.display=o&&A?"block":""),t.$refs.refRowExpandElem);return d&&(d.style.height=g+"px",d.style.top=M+"px"),["main","left","right"].forEach((s,e)=>{let c=0<e?s:"";e="left"===c;let d=[],u;c&&(d=e?n.leftList:n.rightList,u=e?t.$refs.refLeftContainer:t.$refs.refRightContainer),["header","body","footer"].forEach(r=>{var l=Fr(L[s+`-${r}-wrapper`]),o=Fr(L[s+`-${r}-scroll`]),i=Fr(L[s+`-${r}-table`]);if("header"===r){let e=E,t=!1;y?e=$:(T&&x&&(C||w||(t=!0)),t&&(I||!c&&S)||(e=$),c&&t&&(e=d||[]));var n=e.reduce((e,t)=>e+t.renderWidth,0);c&&(!y&&t?l&&(l.style.width=n?n+"px":""):l&&(l.style.width=O?O+"px":"")),o&&(o.style.height=M+"px"),i&&(i.style.width=n?n+"px":"")}else if("body"===r){o&&(o.style.maxHeight=V?f+"px":"",o.style.height=_?g+"px":"",o.style.minHeight=v+"px"),u&&(l&&(l.style.top=M+"px"),u.style.height=`${0<_?_:k+M+A+h}px`,u.style.width=d.reduce((e,t)=>e+t.renderWidth,0)+"px");let e=E,t=!1;!(T||R||F)||D&&"fixed"!==m.mode||C||w||(t=!0);var n=(e=c&&(e=$,t)?d||[]:e).reduce((e,t)=>e+t.renderWidth,0),a=(c&&(t?l&&(l.style.width=n?n+"px":""):l&&(l.style.width=O?O+"px":"")),i&&(i.style.width=n?n+"px":"",i.style.paddingRight=p&&c&&(z.firefox||z.safari)?p+"px":""),Fr(L[s+`-${r}-emptyBlock`]));a&&(a.style.width=n?n+"px":"")}else if("footer"===r){let e=E,t=!1;T&&b&&(C||w||(t=!0)),t&&(I||!c&&S)||(e=$);a=(e=c&&t?d||[]:e).reduce((e,t)=>e+t.renderWidth,0);c&&(t?l&&(l.style.width=a?a+"px":""):l&&(l.style.width=O?O+"px":"")),o&&(o.style.height=A+"px",u)&&l&&(l.style.top=`${0<_?_-A-h:k+M}px`),i&&(i.style.width=a?a+"px":"")}})}),r&&t.setCurrentRow(r),e&&u.selected&&a.selected.row&&a.selected.column&&t.addCellSelectedClass(),t.$nextTick()}}function Ro(e,t){return e.triggerValidate?e.triggerValidate(t):e.$nextTick()}function So(e,t,r){Ro(e,"blur").catch(e=>e).then(()=>{e.handleEdit(r,t).then(()=>Ro(e,"change")).catch(e=>e)})}function Oo(e,t,r){var l=e.checkboxReserveRowMap;e.computeCheckboxOpts.reserve&&(e=yr(e,t),r?l[e]=t:l[e]&&delete l[e])}function Fo(e,t,r){var l=e,o=e.computeRadioOpts.checkMethod;return t&&(r||!o||o({$table:e,row:t}))&&(l.selectRadioRow=t,r=t,(o=e).computeRadioOpts.reserve)&&(o.radioReserveRow=r),e.$nextTick()}function Do(e,t,r,l){return t&&!sr().isArray(t)&&(t=[t]),e.handleBatchSelectRows(t,!!r,l),e.checkSelectionStatus(),e.$nextTick()}function Io(r,t,l){var e=r,o=r;let i=r.treeConfig,n=e.isRowGroupStatus,{afterFullData:a,afterTreeFullData:s,afterGroupFullData:c,checkboxReserveRowMap:d,selectCheckboxMaps:u}=o;var p=r.computeTreeOpts,h=r.computeAggregateOpts,p=p.children||p.childrenField,m=r.computeCheckboxOpts;let{checkField:g,reserve:f,checkMethod:v}=m,x=Er(r).handleGetRowId,b=m.indeterminateField||m.halfField,C={};return g?(m=e=>{!l&&v&&!v({$table:r,row:e})||(t&&(C[x(e)]=e),sr().set(e,g,t)),(i||n)&&b&&sr().set(e,b,!1)},i||n?sr().eachTree(a,m,{children:p}):a.forEach(m)):n?t?sr().eachTree(c,e=>{var t;!l&&v&&!v({$table:r,row:e})||(t=x(e),C[t]=e)},{children:h.mapChildrenField}):!l&&v&&sr().eachTree(c,e=>{var t=x(e);!v({$table:r,row:e})&&u[t]&&(C[t]=e)},{children:h.mapChildrenField}):i?t?sr().eachTree(s,e=>{var t;!l&&v&&!v({$table:r,row:e})||(t=x(e),C[t]=e)},{children:p}):!l&&v&&sr().eachTree(s,e=>{var t=x(e);!v({$table:r,row:e})&&u[t]&&(C[t]=e)},{children:p}):t?!l&&v?a.forEach(e=>{var t=x(e);(u[t]||v({$table:r,row:e}))&&(C[t]=e)}):a.forEach(e=>{var t=x(e);C[t]=e}):!l&&v&&a.forEach(e=>{var t=x(e);!v({$table:r,row:e})&&u[t]&&(C[t]=e)}),f&&(t?sr().each(C,(e,t)=>{d[t]=e}):a.forEach(e=>Oo(r,e,!1))),e.updateCheckboxFlag++,o.selectCheckboxMaps=g?{}:C,e.isAllSelected=t,e.isIndeterminate=!1,o.treeIndeterminateRowMaps={},r.checkSelectionStatus(),r.$nextTick()}let ke=(i,n)=>{let a=i,s=i;let{transform:c,loadMethod:d}=i.computeTreeOpts,u=i.computeCheckboxOpts.checkStrictly;return new Promise(o=>{if(d){let{fullAllDataRowIdData:e,treeExpandLazyLoadedMaps:t}=s,r=yr(i,n),l=e[r];t[r]=n,Promise.resolve(d({$table:i,row:n})).then(e=>{if(l&&(l.treeLoaded=!0),t[r]&&delete t[r],e=sr().isArray(e)?e:[])return i.loadTreeChildren(n,e).then(e=>{var t=s.treeExpandedMaps;return e.length&&!t[r]&&(t[r]=n),a.treeExpandedFlag++,!u&&i.isCheckedByCheckboxRow(n)&&Do(i,e,!0),i.$nextTick().then(()=>{if(c)return i.handleTableData(),To(i),i.$nextTick()})})}).catch(()=>{var e=s.treeExpandLazyLoadedMaps;l&&(l.treeLoaded=!1),e[r]&&delete e[r]}).finally(()=>{a.treeExpandedFlag++,i.$nextTick().then(()=>i.recalculate()).then(()=>o())})}else o()})},Me=(e,t,r)=>{var l=e.treeExpandedReserveRowMap;e.computeTreeOpts.reserve&&(e=yr(e,t),r?l[e]=t:l[e]&&delete l[e])},Ae=(n,a)=>{let s=n,c=n;return new Promise(l=>{var e=n.computeExpandOpts.loadMethod;if(e){var{fullAllDataRowIdData:o,rowExpandLazyLoadedMaps:i}=c;let t=yr(n,a),r=o[t];i[t]=a,e({$table:n,row:a,rowIndex:n.getRowIndex(a),$rowIndex:n.getVMRowIndex(a)}).then(()=>{var e=c.rowExpandedMaps;r&&(r.expandLoaded=!0),e[t]=a,s.rowExpandedFlag++}).catch(()=>{r&&(r.expandLoaded=!1)}).finally(()=>{var e=c.rowExpandLazyLoadedMaps;e[t]&&delete e[t],s.rowExpandedFlag++,n.$nextTick().then(()=>n.recalculate()).then(()=>n.updateCellAreas()).then(()=>l())})}else l()})};function $o(e,t,r){e=e.rowHeightStore;r&&r.clientHeight&&(e[t]=r.clientHeight)}function ko(t){var{isAllOverflow:r,expandColumn:i,isScrollYBig:n,scrollYHeight:a}=t,{elemStore:s,isResizeCellHeight:c,afterFullData:d,fullAllDataRowIdData:u}=t,p=t.computeRowOpts,h=t.computeCellOpts,m=t.computeDefaultRowHeight,s=Fr(s["main-body-scroll"]);if(s){var g=s.clientHeight;let e=s.scrollTop;var f=e=n?Math.ceil((a-g)*Math.min(1,e/(F-g))):e,v=e+g;let l=-1,o=0;if(c||h.height||p.height||i||!r){var x=Er(t).handleGetRowId;let r=0,e=d.length;for(;r<e;){var b=Math.floor((r+e)/2);(u[x(d[b])]||{}).oTop<=f?r=b+1:e=b}for(let e=l=r===d.length?r:Math.max(0,r<d.length?r-2:0),t=d.length;e<t;e++){var C=u[x(d[e])]||{};if(o++,C.oTop>v||100<=o)break}}else l=Math.floor(f/m)-1,o=Math.ceil(g/m)+1;return{toVisibleIndex:Math.max(0,l),visibleSize:Math.max(6,o)}}return{toVisibleIndex:0,visibleSize:6}}function Mo(r,l,o){for(let e=0,t=r.length;e<t;e++){var i=r[e],{startIndex:n,endIndex:a}=l,s=i[o],i=s+i[o+"span"];s<n&&n<i&&(l.startIndex=s),s<a&&a<i&&(l.endIndex=i),l.startIndex===n&&l.endIndex===a||(e=-1)}}function Ao(t){var r={};if(t&&t.length)for(let e=0;e<t.length;e++){var{row:l,col:o,rowspan:i,colspan:n}=t[e];for(let t=0;t<i;t++)for(let e=0;e<n;e++)r[l+t+":"+(o+e)]=t||e?{rowspan:0,colspan:0}:{rowspan:i,colspan:n}}return r}function Lo(n,e,t,r){let{multiple:l,remote:o,orders:a}=n.computeSortOpts;if((t=sr().isArray(t)?t:[t])&&t.length){l||(t=[t[0]],_o(n));let i=null;return t.forEach((e,t)=>{let{field:r,order:l}=e,o=r;sr().isString(r)&&(o=n.getColumnByField(r)),i=i||o,o&&o.sortable&&(a&&-1===a.indexOf(l)&&(l=fo(n,o)),o.order!==l&&(o.order=l),o.sortTime=Date.now()+t)}),r&&!o&&n.handleTableData(!0),e&&n.handleColumnSortEvent(e,i),n.$nextTick().then(()=>(Mr(n),n.updateCellAreas(),kr(n)))}return n.$nextTick()}function _o(e){e=e.tableFullColumn;e.forEach(e=>{e.order=null})}function Vo(e,t){var r=e.parentHeight,t=e[t];let l=0;return l=t?"100%"===t||"auto"===t?r:(e=e.getExcludeHeight(),l=Tl(t)?Math.floor((sr().toInteger(t)||1)/100*r):sr().toNumber(t),Math.max(40,l-e)):l}function Ho(e){var t=e,o=e,i=e.elemStore,i=Fr(i["main-body-wrapper"]);if(i){var n=e.$refs.refScrollYHandleElem;if(n)if(e.$refs.refScrollXHandleElem){let r=0;n=i.clientWidth,i=n;let l=i/100;var t=t.fit,a=o.columnStore,{resizeList:a,pxMinList:s,autoMinList:c,pxList:d,scaleList:u,scaleMinList:p,autoList:h,remainList:m}=a;if(s.forEach(e=>{var t=sr().toInteger(e.minWidth);r+=t,e.renderWidth=t}),c.forEach(e=>{var t=Math.max(60,sr().toInteger(e.renderAutoWidth));r+=t,e.renderWidth=t}),p.forEach(e=>{var t=Math.floor(sr().toInteger(e.minWidth)*l);r+=t,e.renderWidth=t}),u.forEach(e=>{var t=Math.floor(sr().toInteger(e.width)*l);r+=t,e.renderWidth=t}),d.forEach(e=>{var t=sr().toInteger(e.width);r+=t,e.renderWidth=t}),h.forEach(e=>{var t=Math.max(60,sr().toInteger(e.renderAutoWidth));r+=t,e.renderWidth=t}),a.forEach(e=>{var t=sr().toInteger(e.resizeWidth);r+=t,e.renderWidth=t}),i-=r,l=0<i?Math.floor(i/(p.length+s.length+c.length+m.length)):0,t?0<i&&p.concat(s).concat(c).forEach(e=>{r+=l,e.renderWidth+=l}):l=40,m.forEach(e=>{var t=Math.max(l,40);e.renderWidth=t,r+=t}),t){var g=u.concat(p).concat(s).concat(c).concat(m);let t=g.length-1;if(0<t){let e=n-r;if(0<e){for(;0<e&&0<=t;)e--,g[t--].renderWidth++;r=n}}}o.scrollXWidth=r,o.resizeWidthFlag++,mi(e),ci(e)}}}let Le=(e,t)=>{var r=t.querySelectorAll(`.vxe-cell--wrapper[rowid="${e.rowid}"]`);let l=e.height;for(let e=0;e<r.length;e++){var o=r[e],i=o.parentElement,i=Math.ceil(sr().toNumber(i.style.paddingTop)+sr().toNumber(i.style.paddingBottom)),o=o?o.clientHeight:0;l=Math.max(l-i,Math.ceil(o))}return l},k=e=>{var t=e;let{tableData:l,isAllOverflow:r,scrollYLoad:o,scrollXLoad:i}=t,n=e.fullAllDataRowIdData,a=e.computeDefaultRowHeight,s=e.$refs.refElem;if(!r&&o&&s){let r=Er(e).handleGetRowId;l.forEach(e=>{var t,e=r(e),e=n[e];e&&(t=Le(e,s),e.height=Math.max(a,i?Math.max(e.height,t):t))}),t.calcCellHeightFlag++}};function Bo(r,l){let{sortBy:o,sortType:i}=l;return e=>{let t;return t=o?sr().isFunction(o)?o({row:e,column:l}):sr().get(e,o):r.getCellLabel(e,l),i&&"auto"!==i?"number"===i?sr().toNumber(t):"string"===i?sr().toValueString(t):t:isNaN(t)?t:sr().toNumber(t)}}function Po(e,t){var r=e.$refs.refTooltip;clearTimeout(e.tooltipTimeout),t?e.closeTooltip():r&&r.setActived&&r.setActived(!0)}function zo(e){var t=e,{dragRow:r,dragCol:l}=t;(r||l)&&(jo(e),No(e),Wo(e),t.dragRow=null,t.dragCol=null,t.isDragColMove=!1,t.isDragRowMove=!1)}function No(e){e=e.$el;if(e){let t="row--drag-origin";sr().arrayEach(e.querySelectorAll("."+t),e=>{e.draggable=!1,gr(e,t)})}}function jo(e){e=e.$el;if(e){let t="col--drag-origin";sr().arrayEach(e.querySelectorAll("."+t),e=>{e.draggable=!1,gr(e,t)})}}function Uo(r,e,l,o,t,i){var n=r,a=r,s=r.$refs.refElem;if(s){var{overflowX:n,scrollbarWidth:c,overflowY:d,scrollbarHeight:u}=n,a=a.prevDragToChild,p=s.getBoundingClientRect(),d=d?c:0,c=n?u:0,n=s.clientWidth,u=s.clientHeight;if(l){var h=r.$refs.refDragRowLineElem;if(h)if(t){var m=r.computeScrollbarYToLeft,g=l.getBoundingClientRect();let e=l.clientHeight;l=Math.max(1,g.y-p.y);l+e>u-c&&(e=u-l-c),h.style.display="block",h.style.left=`${m?d:0}px`,h.style.top=l+"px",h.style.height=e+"px",h.style.width=n-d+"px",h.setAttribute("drag-pos",i),h.setAttribute("drag-to-child",a?"y":"n")}else h.style.display=""}else if(o){g=r.$refs.refDragColLineElem;if(g)if(t){var m=r.computeScrollbarXToTop,l=r.$refs.refLeftContainer,h=l?l.clientWidth:0,l=r.$refs.refRightContainer,l=l?l.clientWidth:0,f=o.getBoundingClientRect();let e=o.clientWidth;o=Math.max(0,f.y-p.y);let t=f.x-p.x;t<h&&(e-=h-t,t=h);h=n-l-(l?0:d);t+e>h&&(e=h-t),g.style.display="block",g.style.top=o+"px",g.style.left=t+"px",g.style.width=e+"px",g.style.height=a?f.height+"px":u-o-(m?0:c)+"px",g.setAttribute("drag-pos",i),g.setAttribute("drag-to-child",a?"y":"n")}else g.style.display=""}n=r.$refs.refDragTipElem;n&&(n.style.display="block",n.style.top=Math.min(s.clientHeight-s.scrollTop-n.clientHeight,e.clientY-p.y)+"px",n.style.left=Math.min(s.clientWidth-s.scrollLeft-n.clientWidth-16,e.clientX-p.x)+"px",n.setAttribute("drag-status",t?a?"sub":"normal":"disabled"))}}function Wo(e){var t=e.$refs.refDragTipElem,r=e.$refs.refDragRowLineElem,e=e.$refs.refDragColLineElem;t&&(t.style.display=""),r&&(r.style.display=""),e&&(e.style.display="")}function Go(t,e,r,l,o,i){var n=t;let a=l||r;if(!a)return t.$nextTick();i.cell=r;var l=n.tooltipStore,{column:r,row:n}=i,{showAll:s,contentMethod:c}=t.computeTooltipOpts,i=c?c(i):null,c=c&&!sr().eqNull(i);let d=c?i:sr().toString("html"===r.type?a.innerText:a.textContent).trim(),u=a.scrollWidth>a.clientWidth;d&&(s||c||u)&&(Object.assign(l,{row:n,column:r,visible:!0,currOpts:{}}),t.$nextTick(()=>{var e=t.$refs.refTooltip;e&&e.open&&e.open(u?a:o,ur(d))})),t.$nextTick()}function qo(e,t,r){var l=e.fullColumnIdData,t=Rr(e,t);if(t&&l[t.id]){var l=e,o=t,t=r,{scrollXLoad:r,scrollXLeft:i}=l,{elemStore:n,visibleColumn:a}=l,s=l.computeLeftFixedWidth,c=l.computeRightFixedWidth,n=Fr(n["main-body-scroll"]);if(!o.fixed&&n){var d=n.clientWidth,u=n.scrollLeft;let e=null;if(t&&(t=yr(l,t),e=n.querySelector(`[rowid="${t}"] .`+o.id)),e=e||n.querySelector("."+o.id)){t=e.offsetLeft+(r?i:0),n=e.clientWidth;if(t<u+s)return l.scrollTo(t-s-1);if(d-c<t+n-u)return l.scrollTo(t+n-(d-c-1))}else if(r){let t=0;i=o.renderWidth;for(let e=0;e<a.length;e++){var p=a[e];if(p===o||p.id===o.id)break;t+=p.renderWidth}return t<u?l.scrollTo(t-s-1):l.scrollTo(t+i-(d-c-1))}}return Promise.resolve()}return e.$nextTick()}function Xo(e,t,r){var l=e.rowExpandedReserveRowMap;e.computeExpandOpts.reserve&&(e=yr(e,t),r?l[e]=t:l[e]&&delete l[e])}function Yo(s){let c=s,d=s;return s.$nextTick().then(()=>{var e,{scrollXLoad:t,scrollYLoad:r}=c,{scrollXStore:l,scrollYStore:o}=d,i=s.computeVirtualYOpts,n=s.computeVirtualXOpts,n=(t?({toVisibleIndex:t,visibleSize:e}=xo(s),a=Math.max(0,n.oSize?sr().toNumber(n.oSize):0),l.preloadSize=sr().toNumber(n.preSize),l.offsetSize=a,l.visibleSize=e,l.endIndex=Math.max(l.startIndex+l.visibleSize+a,l.endIndex),l.visibleStartIndex=Math.max(l.startIndex,t),l.visibleEndIndex=Math.min(l.endIndex,t+e),s.updateScrollXData().then(()=>{oi(s)})):s.updateScrollXSpace(),(e=>{var t=e.isAllOverflow,r=e.$refs.refTableHeader,l=(l=e.$refs.refTableBody)?l.$el:null,e=e.computeDefaultRowHeight;let o=0;if(t){if(l){t=r?r.$el:null;let e;(e=!(e=l.querySelector("tr"))&&t?t.querySelector("tr"):e)&&(o=e.clientHeight)}o=o||e}else o=e;return Math.max(18,o)})(s)),{toVisibleIndex:a,visibleSize:l}=(o.rowHeight=n,c.rowHeight=n,ko(s));r?(t=Math.max(0,i.oSize?sr().toNumber(i.oSize):0),o.preloadSize=sr().toNumber(i.preSize),o.offsetSize=t,o.visibleSize=l,o.endIndex=Math.max(o.startIndex+l+t,o.endIndex),o.visibleStartIndex=Math.max(o.startIndex,a),o.visibleEndIndex=Math.min(o.endIndex,a+l),s.updateScrollYData().then(()=>{si(s)})):s.updateScrollYSpace()})}function Ko(e){var t=e,r=e,{scrollXWidth:l,scrollYHeight:o}=t,i=r.elemStore,n=e.computeScrollbarOpts,a=Fr(i["main-body-wrapper"]),s=Fr(i["main-header-table"]),i=Fr(i["main-footer-table"]),c=e.$refs.refScrollXHandleElem,d=e.$refs.refScrollYHandleElem;let u=!1;a&&(o=o>a.clientHeight,d&&(t.scrollbarWidth=n.width||d.offsetWidth-d.clientWidth||14),t.overflowY=o,u=l>a.clientWidth,c&&(t.scrollbarHeight=n.height||c.offsetHeight-c.clientHeight||14),t.overflowX=u,d=s?s.clientHeight:0,o=i?i.clientHeight:0,r.tableHeight=a.offsetHeight,r.headerHeight=d,r.footerHeight=o,t.parentHeight=Math.max(r.headerHeight+o+20,e.getParentHeight())),u&&e.checkScrolling()}function Zo(e,t){var r,l,o=e,i=e.$refs.refElem;return o.rceRunTime=Date.now(),i&&i.clientWidth?((o=e.$refs.refVarElem)&&([i,o,r,l]=o.children,$o(e,"default",i),$o(e,"medium",o),$o(e,"small",r),$o(e,"mini",l)),ui(e),Ho(e),Ko(e),kr(e),gi(e),Yo(e).then(()=>{if(ui(e),t&&Ho(e),Ko(e),kr(e),t&&Mr(e),gi(e),t)return Yo(e)})):e.$nextTick()}let _e=(e,t)=>{e.rowGroupList=t?(sr().isArray(t)?t:[t]).map(e=>({field:e})):[]};function Qo(e,t){let r=e.computeAggregateOpts.mapChildrenField;r&&(sr().lastEach(t,e=>{let t=0;sr().each(e[r],e=>{e.isAggregate?t+=e.childCount||0:t++}),e.childCount=t}),e.handlePivotTableAggregateData)&&e.handlePivotTableAggregateData(t)}function Jo(v,e,t){let x=v,b=v;var r=v,{keepSource:l,treeConfig:o,aggregateConfig:i,rowGroupConfig:n}=x;let{rowGroupList:a,scrollYLoad:C}=b,{scrollYStore:w,scrollXStore:s,lastScrollLeft:y,lastScrollTop:E}=r;var c=v.computeRowOpts,d=v.computeTreeOpts;let T=v.computeExpandOpts;var u=d.transform,p=d.children||d.childrenField;let h=[],m=e?e.slice(0):[];if(5e6<m.length&&A("vxe.error.errMaxRow",[5e6]),o&&a.length)return A("vxe.error.noTree",["aggregate-config"]),v.$nextTick();if(c.drag&&a.length)return A("vxe.error.errConflicts",["row-config.drag","aggregate-config"]),v.$nextTick();let g=!1,R=(o?u?(d.rowField||A("vxe.error.reqProp",["tree-config.rowField"]),d.parentField||A("vxe.error.reqProp",["tree-config.parentField"]),p||A("vxe.error.reqProp",["tree-config.childrenField"]),d.mapChildrenField||A("vxe.error.reqProp",["tree-config.mapChildrenField"]),p===d.mapChildrenField&&A("vxe.error.errConflicts",["tree-config.childrenField","tree-config.mapChildrenField"]),h=sr().toArrayTree(m,{key:d.rowField,parentKey:d.parentField,children:p,mapChildren:d.mapChildrenField}),m=h.slice(0)):h=m.slice(0):(i||n)&&a.length&&(c=function m(g,e,f){let v=e,x=e;if(f){let{rowField:s,parentField:c,childrenField:d,mapChildrenField:u}=g.computeAggregateOpts;var t=g.computeCheckboxOpts;let p=t.checkField,h=t.indeterminateField||t.halfField;if((t=f[0])&&s&&c&&d&&u){v=[],x=[];let l=t.field,o=g.getColumnByField(l),i={},n=[],a=Ll(g);e.forEach(e=>{var t=o?g.getCellLabel(e,o):sr().get(e,l),t=sr().eqNull(t)?"":t;let r=i[t];r||(r=[],i[t]=r),e.isAggregate&&(e.isAggregate=void 0),r.push(e)}),sr().objectEach(i,(e,t)=>{var{fullData:e,treeData:r}=m(g,e,f.slice(1)),t={isAggregate:!0,aggData:{},groupContent:t,groupField:l,childCount:0,[s]:Al(),[c]:null,[a]:Al(),[d]:r,[u]:r};p&&(t[p]=!1),h&&(t[h]=!1),n.push(t),x.push(t),v.push(t),e.length&&v.push(...e)}),Qo(g,n)}}return{treeData:x,fullData:v}}(v,m,a),h=c.treeData,m=c.fullData,g=!0),b.isRowGroupStatus=g,w.startIndex=0,w.endIndex=1,s.startIndex=0,s.endIndex=1,r.cvCacheMaps={},b.isRowLoading=!0,b.scrollVMLoading=!1,r.treeExpandedMaps={},b.treeExpandedFlag++,r.rowExpandedMaps={},b.rowExpandedFlag++,r.insertRowMaps={},b.insertRowFlag++,r.removeRowMaps={},b.removeRowFlag++,wo(v,m));return b.isDragColMove=!1,b.isDragRowMove=!1,r.tableFullData=m,r.tableFullTreeData=g?[]:h,r.tableFullGroupData=g?h:[],v.cacheRowMap(t),r.tableSynchData=e,t&&(r.isResizeCellHeight=!1),l&&v.cacheSourceMap(m),v.clearCellAreas&&x.mouseConfig&&(v.clearCellAreas(),v.clearCopyCellArea()),v.clearMergeCells(),v.clearMergeFooterItems(),v.handleTableData(!0),v.updateFooter(),v.handleUpdateBodyMerge(),v.$nextTick().then(()=>{ci(v),kr(v)}).then(()=>{Yo(v)}).then(()=>{R&&(w.endIndex=w.visibleSize),R&&(b.expandColumn&&"fixed"!==T.mode&&A("vxe.error.notConflictProp",['column.type="expand','expand-config.mode="fixed"']),x.height||x.maxHeight||A("vxe.error.reqProp",["height | max-height | virtual-y-config={enabled: false}"]),x.spanMethod)&&A("vxe.error.scrollErrProp",["table.span-method"]);var e=v,t=e,r=e,l=e.treeConfig,{expandColumn:o,currentRow:i,selectRadioRow:n}=t,{fullDataRowIdData:a,fullAllDataRowIdData:s,radioReserveRow:c,selectCheckboxMaps:d,treeExpandedMaps:u,rowExpandedMaps:p}=r,h=e.computeExpandOpts,m=e.computeTreeOpts,g=e.computeRadioOpts,f=e.computeCheckboxOpts;return n&&!s[yr(e,n)]&&(t.selectRadioRow=null),g.reserve&&c&&a[n=yr(e,c)]&&Fo(e,a[n].row,!0),r.selectCheckboxMaps=$e(e,d),t.updateCheckboxFlag++,f.reserve&&Do(e,vo(e,r.checkboxReserveRowMap),!0,!0),i&&!s[yr(e,i)]&&(t.currentRow=null),r.rowExpandedMaps=o?$e(e,p):{},t.rowExpandedFlag++,o&&h.reserve&&e.setRowExpand(vo(e,r.rowExpandedReserveRowMap),!0),r.treeExpandedMaps=l?$e(e,u):{},t.treeExpandedFlag++,l&&m.reserve&&e.setTreeExpand(vo(e,r.treeExpandedReserveRowMap),!0),v.checkSelectionStatus(),new Promise(r=>{v.$nextTick().then(()=>Zo(v,!1)).then(()=>(k(v),Mr(v),Zo(v,!1))).then(()=>{let e=y,t=E;v.computeVirtualXOpts.scrollToLeftOnChange&&(e=0),v.computeVirtualYOpts.scrollToTopOnChange&&(t=0),b.isRowLoading=!1,Zo(v,!1),C===R?kl(v,e,t).then(()=>{k(v),Mr(v),r()}):setTimeout(()=>{kl(v,e,t).then(()=>{k(v),Mr(v),r()})})})})})}function ei(e){var t,l=e;if(o=l.checkboxConfig){let r=l.fullDataRowIdData;var{checkAll:o,checkRowKeys:i}=l.computeCheckboxOpts;if(o)Io(l,!0,!0);else if(i){let t=[];i.forEach(e=>{r[e]&&t.push(r[e].row)}),Do(l,t,!0,!0)}}(l=(i=o=e).radioConfig)&&(l=i.fullDataRowIdData,{checkRowKey:t,reserve:n}=o.computeRadioOpts,t)&&(l[t]&&Fo(l[t].row,!0),n)&&(l=Ll(o),i.radioReserveRow={[l]:t});var n=e;if(o=n.expandConfig){let r=n.fullDataRowIdData;var{expandAll:o,expandRowKeys:l}=n.computeExpandOpts;if(o)n.setAllRowExpand(!0);else if(l){let t=[];l.forEach(e=>{r[e]&&t.push(r[e].row)}),n.setRowExpand(t,!0)}}(e=>{var t=e.treeConfig;if(t){let o=e.tableFullData;var t=e.computeTreeOpts,{expandAll:r,expandRowKeys:n}=t;let i=t.children||t.childrenField;if(r)e.setAllTreeExpand(!0);else if(n){let r=[],l=Ll(e);n.forEach(t=>{var e=sr().findTree(o,e=>t===sr().get(e,l),{children:i});e&&r.push(e.item)}),e.setTreeExpand(r,!0)}}})(e),(o=(t=e).mergeCells)&&t.setMergeCells(o),(o=(l=e).mergeFooterItems)&&l.setMergeFooterItems(o),e.$nextTick(()=>setTimeout(()=>e.recalculate()))}function ti(t){var l=t,t=l.sortConfig;if(t){var r=l.computeSortOpts;let e=r.defaultSort;e&&(e=sr().isArray(e)?e:[e]).length&&((t.multiple?e:e.slice(0,1)).forEach((e,t)=>{var{field:e,order:r}=e;e&&r&&(e=l.getColumnByField(e))&&e.sortable&&(e.order=r,e.sortTime=Date.now()+t)}),r.remote||l.handleTableData(!0).then(kr))}}function ri(e){var t=e,r=t.scrollXLoad;let{visibleColumn:l,scrollXStore:o,fullColumnIdData:i}=e;e=r?l.slice(o.startIndex,o.endIndex):l.slice(0);e.forEach((e,t)=>{e=e.id,e=i[e];e&&(e.$index=t)}),t.tableColumn=e}function li(e){var t=e,r=sr().orderBy(t.collectColumn,"renderSortNumber"),r=ii(t.collectColumn=r);t.tableFullColumn=r,Co(e)}function oi(e){var t=e.isScrollXBig,{mergeBodyList:r,mergeFooterList:l,scrollXStore:o}=e,{preloadSize:i,startIndex:n,endIndex:a,offsetSize:s}=o,{toVisibleIndex:c,visibleSize:d}=xo(e),t={startIndex:Math.max(0,t?c-1:c-1-s-i),endIndex:t?c+d:c+d+s+i},{startIndex:s,endIndex:i}=(o.visibleStartIndex=c-1,o.visibleEndIndex=c+d+1,Mo(r.concat(l),t,"col"),t);!(c<=n||a-d-1<=c)||n===s&&a===i||(o.startIndex=s,o.endIndex=i,e.updateScrollXData()),e.closeTooltip()}function ii(e){let t=[];return e.forEach(e=>{t.push(...e.children&&e.children.length?ii(e.children):[e])}),t}function ni(e,t){var r=e,o=e,l=e;let n=[],a=[],s=[];var{isGroup:i,columnStore:c}=o;let{collectColumn:d,tableFullColumn:u,scrollXStore:p,fullColumnIdData:h}=l;if(i){let t=[],r=[],l=[];sr().eachTree(d,(e,t,r,l,o)=>{var i=bl(e);o&&o.fixed&&(e.fixed=o.fixed),o&&e.fixed!==o.fixed&&A("vxe.error.groupFixed"),i?e.visible=!!sr().findTree(e.children,e=>!bl(e)&&e.visible):e.visible&&("left"===e.fixed?n:"right"===e.fixed?s:a).push(e)}),d.forEach(e=>{e.visible&&("left"===e.fixed?t:"right"===e.fixed?l:r).push(e)}),o.tableGroupColumn=t.concat(r).concat(l)}else u.forEach(e=>{e.visible&&("left"===e.fixed?n:"right"===e.fixed?s:a).push(e)});let m=n.concat(a).concat(s);l.visibleColumn=m,mi(e);v=(g=i=e).computeVirtualXOpts,f=f||i.tableFullColumn,i=!!v.enabled&&-1<v.gt&&(0===v.gt||v.gt<f.length);var g,f,v=g.scrollXLoad=i;return o.hasFixedColumn=0<n.length||0<s.length,Object.assign(c,{leftList:n,centerList:a,rightList:s}),v&&(r.spanMethod&&M("vxe.error.scrollErrProp",["span-method"]),r.footerSpanMethod&&M("vxe.error.scrollErrProp",["footer-span-method"]),t)&&(f=xo(e).visibleSize,p.startIndex=0,p.endIndex=f,p.visibleSize=f,p.visibleStartIndex=0,p.visibleEndIndex=f),m.length===l.visibleColumn.length&&l.visibleColumn.every((e,t)=>e===m[t])||(e.clearMergeCells(),e.clearMergeFooterItems()),m.forEach((e,t)=>{e=e.id,e=h[e];e&&(e._index=t)}),ri(e),t?e.updateFooter().then(()=>e.recalculate()).then(()=>(e.updateCellAreas(),e.recalculate())):e.updateFooter()}function ai(l,e){let o=l.$refs.$xeToolbar,i=l,n=l,a=l.computeExpandOpts;e=ii(n.collectColumn=e);return n.tableFullColumn=e,i.isColLoading=!0,i.isDragColMove=!1,l.collectColumn.forEach((e,t)=>{t+=1;e.sortNumber=t,e.renderSortNumber=t}),Promise.resolve((t=>{var e=t.customConfig,r=t.computeTableId,l=t.computeCustomOpts,{storage:o,restoreStore:i}=l,o=(c=!0===o)?{}:Object.assign({},o||{}),n=c||o.resizable,a=c||o.visible,s=c||o.fixed,c=c||o.sort;if((e?cr(l):l.enabled)&&(n||a||s||c)){if(r)return o=Ie(r),i?Promise.resolve(i({$table:t,id:r,type:"restore",storeData:o})).then(e=>{if(e)return bo(t,e)}).catch(e=>e):bo(t,o);A("vxe.error.reqProp",["id"])}})(l)).then(()=>{var{scrollXLoad:e,scrollYLoad:t,expandColumn:r}=i;return Co(l),ni(l,!0).then(()=>{i.scrollXLoad&&oi(l)}),l.clearMergeCells(),l.clearMergeFooterItems(),l.handleTableData(!0),l.handleAggregateSummaryData(),(e||t)&&r&&"fixed"!==a.mode&&M("vxe.error.scrollErrProp",["column.type=expand"]),l.$nextTick().then(()=>(o&&o.syncUpdate({collectColumn:n.collectColumn,$table:l}),l.handleUpdateCustomColumn&&l.handleUpdateCustomColumn(),i.isColLoading=!1,l.recalculate()))})}function si(e){var{isAllOverflow:t,isScrollYBig:r}=e,{mergeBodyList:l,scrollYStore:o}=e,{preloadSize:i,startIndex:n,endIndex:a,offsetSize:s}=o,t=t?s:s+1,{toVisibleIndex:c,visibleSize:d}=ko(e),s={startIndex:Math.max(0,r?c-1:c-1-s-i),endIndex:r?c+d:c+d+t+i},{startIndex:r,endIndex:t}=(o.visibleStartIndex=c-1,o.visibleEndIndex=c+d+1,Mo(l,s,"row"),s);!(c<=n||a-d-1<=c)||n===r&&a===t||(o.startIndex=r,o.endIndex=t,e.updateScrollYData())}function ci(e){var t=e,r=e;r.customHeight=Vo(e,"height"),r.customMinHeight=Vo(e,"minHeight"),r.customMaxHeight=Vo(e,"maxHeight"),!t.scrollYLoad||r.customHeight||r.customMinHeight||(r.customHeight=300)}function di(e,t){var r=t.querySelectorAll(`.vxe-cell--wrapper[colid="${e.id}"]`);let l=0;var t=r[0];t&&t.parentElement&&(t=getComputedStyle(t.parentElement),l=Math.ceil(sr().toNumber(t.paddingLeft)+sr().toNumber(t.paddingRight)));let o=e.renderAutoWidth-l;for(let e=0;e<r.length;e++){var i=r[e];o=Math.max(o,i?Math.ceil(i.scrollWidth)+4:0)}return o+l}function ui(e){var t=e.computeAutoWidthColumnList;let l=e.fullColumnIdData,o=e.$refs.refElem;o&&(o.setAttribute("data-calc-col","Y"),t.forEach(e=>{var t=e.id,t=l[t],r=di(e,o);t&&(t.width=Math.max(r,t.width)),e.renderAutoWidth=r}),e.analyColumnWidth(),o.removeAttribute("data-calc-col"))}function pi(e,t,r){e.analyColumnWidth(),e.recalculate().then(()=>{e.saveCustomStore("update:width"),e.updateCellAreas(),e.dispatchEvent("column-resizable-change",r,t),e.dispatchEvent("resizable-change",r,t),setTimeout(()=>e.recalculate(!0),300)})}function hi(e,t,r){e.resizeHeightFlag++,e.recalculate().then(()=>{e.updateCellAreas(),e.dispatchEvent("row-resizable-change",r,t),setTimeout(()=>e.recalculate(!0),300)})}function mi(e){var{visibleColumn:r,fullColumnIdData:l}=e;let o=0;for(let e=0,t=r.length;e<t;e++){var i=r[e],n=l[i.id];n&&(n.oLeft=o),o+=i.renderWidth}}function Mr(e){var r=e.expandColumn,{afterFullData:l,fullAllDataRowIdData:o,rowExpandedMaps:i}=e,n=e.computeExpandOpts,a=e.computeRowOpts,s=e.computeCellOpts,c=e.computeDefaultRowHeight,d=Er(e).handleGetRowId;let u=0;for(let e=0,t=l.length;e<t;e++){var p=d(l[e]),h=o[p]||{};h.oTop=u,u+=h.resizeHeight||s.height||a.height||h.height||c,r&&i[p]&&(u+=h.expandHeight||n.height||0)}}function gi(t){var r=t;let{expandColumn:e,scrollYLoad:s,scrollYTop:c,isScrollYBig:d}=r;var l=t.computeExpandOpts;let u=t.computeRowOpts,p=t.computeCellOpts,h=t.computeDefaultRowHeight;l=l.mode;if(e&&"fixed"===l){let{elemStore:e,fullAllDataRowIdData:n}=t;l=t.$refs.refRowExpandElem;let a=Fr(e["main-body-scroll"]);if(l&&a){let i=!1;sr().arrayEach(l.children,t=>{var r=t.getAttribute("rowid")||"",l=n[r];if(l){var o=t.offsetHeight+1,r=a.querySelector(`.vxe-body--row[rowid="${r}"]`);let e=0;s?e=d&&r?r.offsetTop+r.offsetHeight:l.oTop+(l.resizeHeight||p.height||u.height||l.height||h):r&&(e=r.offsetTop+r.offsetHeight),d&&(e+=c),t.style.top=Sl(e),i||l.expandHeight!==o&&(i=!0),l.expandHeight=o}}),i&&(r.rowExpandHeightFlag++,t.$nextTick(()=>{Mr(t)}))}}}function fi(e){var t=e.elemStore,e=e.$refs.refRowExpandElem,t=Fr(t["main-body-scroll"]);e&&t&&(e.scrollTop=t.scrollTop)}let Ve={callSlot(e,t,r,l){var o=this.$xeGrid;if(e){if(o)return o.callSlot(e,t,r,l);if(sr().isFunction(e))return Dr(e.call(this,t,r,l))}return[]},getEl(){return this.$refs.refElem},getParentElem(){var e=this.$xeGrid,t=this.$el;return(e?e.$el:t).parentNode},getParentHeight(){var t=this.$xeGrid,r=this.height,l=this.$refs.refElem;if(l){l=l.parentNode,r="100%"===r||"auto"===r?Dl(l):0;let e=0;return l&&(e=t&&mr(l,"vxe-grid--table-wrapper")?t.getParentHeight():l.clientHeight),Math.floor(e-r)}return 0},getExcludeHeight(){var e=this.$xeGrid;return e?e.getExcludeHeight():0},clearAll(){return(e=this).clearFilter&&e.clearFilter(),(e=e).initStatus=!1,e.clearSort(),e.clearCurrentRow(),e.clearCurrentColumn(),e.clearRadioRow(),e.clearRadioReserve(),e.clearCheckboxRow(),e.clearCheckboxReserve(),e.clearRowExpand(),e.clearTreeExpand(),e.clearTreeExpandReserve(),e.clearEdit&&e.clearEdit(),e.clearSelected&&(e.keyboardConfig||e.mouseConfig)&&e.clearSelected(),e.clearCellAreas&&e.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearScroll();var e},handleUpdateRowGroup(e){_e(this,e)},syncData(){let e=this,t=e,r=e;return A("vxe.error.delFunc",["syncData","getData"]),e.$nextTick().then(()=>(t.tableData=[],e.$nextTick().then(()=>Jo(e,r.tableFullData,!0))))},updateData(){let e=this;let{scrollXLoad:t,scrollYLoad:r}=e;return e.handleTableData(!0).then(()=>{if(e.updateFooter(),t||r)return t&&e.updateScrollXSpace(),r&&e.updateScrollYSpace(),e.refreshScroll()}).then(()=>(e.updateCellAreas(),e.recalculate(!0))).then(()=>{setTimeout(()=>e.recalculate(),50)})},handleTableData(i){let n=this;var e=n,t=n,r=e.scrollYLoad;let{scrollYStore:l,fullDataRowIdData:o}=t,a=t.afterFullData;if(i){{var u=n;var i=u,p=u.treeConfig,h=u.isRowGroupStatus,{tableFullColumn:m,tableFullData:g,tableFullTreeData:f,tableFullGroupData:v}=i,x=u.computeFilterOpts,b=u.computeAggregateOpts,C=(w=u.computeTreeOpts).children||w.childrenField,{transform:w,rowField:y,parentField:E,mapChildrenField:T}=w;let{isEvery:e,remote:a,filterMethod:d}=x,{remote:s,sortMethod:t,multiple:r,chronological:l}=u.computeSortOpts,o=[],c=[];if(a&&s)h?(c=sr().searchTree(v,()=>!0,{original:!0,isEvery:!0,children:b.mapChildrenField,mapChildren:b.childrenField}),o=c):p&&w?(c=sr().searchTree(f,()=>!0,{original:!0,isEvery:e,children:T,mapChildren:C}),o=c):(o=(p?f:g).slice(0),c=o);else{let i=[],n=[];if(m.forEach(e=>{var{field:t,sortable:r,order:l,filters:o}=e;if(!a&&o&&o.length){let t=[],r=[];o.forEach(e=>{e.checked&&(r.push(e),t.push(e.value))}),r.length&&i.push({column:e,valueList:t,itemList:r})}!s&&r&&l&&n.push({column:e,field:t,property:t,order:l,sortTime:e.sortTime})}),r&&l&&1<n.length&&(n=sr().orderBy(n,"sortTime")),!a&&i.length?(x=c=>i.every(({column:t,valueList:e,itemList:r})=>{let{filterMethod:l,filterRender:o}=t;var i=cr(o)?Re.get(o.name):null;let n=i?i.tableFilterMethod||i.filterMethod:null,a=i?i.tableFilterDefaultMethod||i.defaultTableFilterMethod||i.defaultFilterMethod:null,s=Sr(c,t);return l?r.some(e=>l({value:e.value,option:e,cellValue:s,row:c,column:t,$table:u})):n?r.some(e=>n({value:e.value,option:e,cellValue:s,row:c,column:t,$table:u})):d?d({$table:u,options:r,values:e,cellValue:s,row:c,column:t}):a?r.some(e=>a({value:e.value,option:e,cellValue:s,row:c,column:t,$table:u})):-1<e.indexOf(sr().get(c,t.field))}),h?(c=sr().searchTree(v,x,{original:!0,isEvery:!0,children:b.mapChildrenField,mapChildren:b.childrenField}),o=c):p&&w?(c=sr().searchTree(f,x,{original:!0,isEvery:e,children:T,mapChildren:C}),o=c):(o=(p?f:g).filter(x),c=o)):h?(c=sr().searchTree(v,()=>!0,{original:!0,isEvery:!0,children:b.mapChildrenField,mapChildren:b.childrenField}),o=c):p&&w?(c=sr().searchTree(f,()=>!0,{original:!0,isEvery:e,children:T,mapChildren:C}),o=c):(o=(p?f:g).slice(0),c=o),!s&&n.length)if(h)c=t?(m=t({data:c,sortList:n,$table:u}),sr().isArray(m)?m:c):(x=sr().toTreeArray(c,{key:b.rowField,parentKey:b.parentField,children:b.mapChildrenField}),sr().toArrayTree(sr().orderBy(x,n.map(({column:e,order:t})=>[Bo(u,e),t])),{key:b.rowField,parentKey:b.parentField,children:b.childrenField,mapChildren:b.mapChildrenField})),o=c;else if(p&&w)c=t?(v=t({data:c,sortList:n,$table:u}),sr().isArray(v)?v:c):(f=sr().toTreeArray(c,{children:T}),sr().toArrayTree(sr().orderBy(f,n.map(({column:e,order:t})=>[Bo(u,e),t])),{key:y,parentKey:E,children:C,mapChildren:T})),o=c;else{if(t){g=t({data:o,sortList:n,$table:u});o=sr().isArray(g)?g:o}else{if(r)o=sr().orderBy(o,n.map(({column:e,order:t})=>[Bo(u,e),t]));else{let t=n[0],e;sr().isArray(t.sortBy)&&(e=t.sortBy.map(e=>[e,t.order])),o=sr().orderBy(o,e||[t].map(({column:e,order:t})=>[Bo(u,e),t]))}o=sr().orderBy(o,n.map(({column:e,order:t})=>[Bo(u,e),t]))}c=o}}i.afterFullData=o,i.afterTreeFullData=c,i.afterGroupFullData=c,To(u)}a=$r(n)}h=r?a.slice(l.startIndex,l.endIndex):a.slice(0);let s={};return h.forEach((e,t)=>{var r=yr(n,e),l=o[r];l&&(l.$index=t),s[r]=e}),e.tableData=h,t.visibleDataRowIdData=s,n.$nextTick()},loadTableData(e,t){return Jo(this,e,t)},loadData(e){let t=this,r=this.initStatus;return Jo(t,e,!1).then(()=>(this.inited=!0,this.initStatus=!0,r||ei(t),this.recalculate()))},reloadData(e){let t=this;return this.clearAll().then(()=>(this.inited=!0,this.initStatus=!0,Jo(t,e,!0))).then(()=>(ei(t),this.recalculate()))},setRow(t,r){if(r){let e=t;(e=sr().isArray(t)?e:[t]).forEach(e=>Object.assign(e,r))}return this.$nextTick()},reloadRow(e,t,r){var l=this,o=this.keepSource,i=l.tableData,n=this.sourceDataRowIdData;if(o){if(this.isAggregateRecord(e))return this.$nextTick();o=n[yr(this,e)];o&&e&&(r?(n=sr().clone(sr().get(t||e,r),!0),sr().set(e,r,n),sr().set(o,r,n)):(r=Ll(this),n=yr(this,e),t=sr().clone(Object.assign({},t),!0),sr().set(t,r,n),sr().destructuring(o,Object.assign(e,t)))),l.tableData=i.slice(0)}else A("vxe.error.reqProp",["keep-source"]);return this.$nextTick()},loadColumn(e){let o=this;let{lastScrollLeft:i,lastScrollTop:n}=o;e=sr().mapTree(e,e=>po.createColumn(o,e),{children:"children"});return ai(o,e).then(()=>{let e=i,t=n;var r=o.computeVirtualXOpts,l=o.computeVirtualYOpts;r.scrollToLeftOnChange&&(e=0),l.scrollToTopOnChange&&(t=0),kl(o,e,t)})},reloadColumn(e){return this.clearAll().then(()=>this.loadColumn(e))},handleColumn(e){return ai(this,e)},cacheRowMap(e){var t=this,r=this;let d=this.treeConfig;var l=t.isRowGroupStatus;let{fullAllDataRowIdData:o,tableFullData:i,tableFullTreeData:n,tableFullGroupData:a,treeExpandedMaps:u}=r,c=e?{}:{...o},p={},h=_l(this).handleUpdateRowId,m=(e,t,r,l,o,i,n,a)=>{let s=c[i];(s=s||{row:e,rowid:i,seq:a,index:-1,_index:-1,$index:-1,treeIndex:t,items:r,parent:o,level:n,height:0,resizeHeight:0,oTop:0,expandHeight:0}).treeLoaded=!1,s.expandLoaded=!1,s.row=e,s.items=r,s.parent=o,s.level=n,s.index=l,s.treeIndex=t,p[i]=s,c[i]=s};if(d){var e=this.computeTreeOpts;let a=e.lazy,s=e.children||e.childrenField,c=e.hasChild||e.hasChildField;sr().eachTree(n,(e,t,r,l,o,i)=>{var n=h(e);d&&a&&(e[c]&&void 0===e[s]&&(e[s]=null),!u[n]||e[s]&&e[s].length||delete u[n]),m(e,t,r,o?-1:t,o,n,i.length-1,Ml(l))},{children:s})}else l?(e=this.computeAggregateOpts.mapChildrenField,sr().eachTree(a,(e,t,r,l,o,i)=>{var n=h(e);m(e,t,r,o?-1:t,o,n,i.length-1,Ml(l))},{children:e})):i.forEach((e,t,r)=>{m(e,t,r,t,null,h(e),0,t+1)});r.fullDataRowIdData=p,r.fullAllDataRowIdData=c,t.treeExpandedFlag++},cacheSourceMap(e){var t=this,r=this.treeConfig,l=this.computeTreeOpts,e=sr().clone(e,!0);let o=_l(this).handleUpdateRowId,i={};var n=e=>{var t=o(e);i[t]=e};r?(r=l.children||l.childrenField,sr().eachTree(e,n,{children:l.transform?l.mapChildrenField:r})):e.forEach(n),t.sourceDataRowIdData=i,t.tableSourceData=e},getParams(){return this.params},loadTreeChildren(l,e){let a=this;var t=a,r=a;let o=t.keepSource,{tableSourceData:i,fullDataRowIdData:s,fullAllDataRowIdData:c,sourceDataRowIdData:n}=r;t=a.computeTreeOpts;let{transform:d,mapChildrenField:u}=t,p=t.children||t.childrenField,h=c[yr(a,l)],m=h?h.level:0;return this.createData(e).then(e=>{if(o){let t=yr(this,l);var r=sr().findTree(i,e=>t===yr(this,e),{children:p});r&&(r.item[p]=sr().clone(e,!0)),e.forEach(e=>{var t=yr(this,e);n[t]=sr().clone(e,!0)})}return sr().eachTree(e,(e,t,r,l,o,i)=>{var n=yr(a,e),e={row:e,rowid:n,seq:-1,index:t,_index:-1,$index:-1,treeIndex:-1,items:r,parent:o||h.row,level:m+i.length,height:0,resizeHeight:0,oTop:0,expandHeight:0};s[n]=e,c[n]=e},{children:p}),l[p]=e,d&&(l[u]=sr().clone(e,!1)),To(a),e})},getRowNode(e){if(e){var t=this.fullAllDataRowIdData,e=e.getAttribute("rowid");if(e){t=t[e];if(t)return{rowid:t.rowid,item:t.row,index:t.index,items:t.items,parent:t.parent}}}return null},getColumnNode(e){if(e){var t=this.fullColumnIdData,e=e.getAttribute("colid");if(e){t=t[e];if(t)return{colid:t.colid,item:t.column,index:t.index,items:t.items,parent:t.parent}}}return null},getRowSeq:(wr=r=>function(e){var t=this.fullAllDataRowIdData;if(e){t=t[yr(this,e)];if(t)return t[r]}return-1})("seq"),getRowIndex:wr("index"),getVTRowIndex:wr("_index"),getVMRowIndex:wr("$index"),_getRowIndex(e){return M("vxe.error.delFunc",["_getRowIndex","getVTRowIndex"]),this.getVTRowIndex(e)},$getRowIndex(e){return M("vxe.error.delFunc",["$getRowIndex","getVMRowIndex"]),this.getVMRowIndex(e)},getColumnIndex:(ar=r=>function(e){var t=this.fullColumnIdData;if(e){t=t[e.id];if(t)return t[r]}return-1})("index"),getVTColumnIndex:ar("_index"),getVMColumnIndex:ar("$index"),_getColumnIndex(e){return M("vxe.error.delFunc",["_getColumnIndex","getVTColumnIndex"]),this.getVTColumnIndex(e)},$getColumnIndex(e){return M("vxe.error.delFunc",["$getColumnIndex","getVMColumnIndex"]),this.getVMColumnIndex(e)},isSeqColumn(e){return e&&"seq"===e.type},defineField(e){let t=this,r=this.treeConfig,l=this.computeExpandOpts,i=this.computeTreeOpts,n=this.computeRadioOpts,a=this.computeCheckboxOpts,s=i.children||i.childrenField,c=Ll(this);return(e=sr().isArray(e)?e:[e||{}]).map(o=>(t.tableFullColumn.forEach(t=>{var{field:r,editRender:l}=t;if(r&&!sr().has(o,r)){let e=null;l&&(l=l.defaultValue,sr().isFunction(l)?e=l({column:t}):sr().isUndefined(l)||(e=l)),sr().set(o,r,e)}}),[n.labelField,a.checkField,a.labelField,l.labelField].forEach(e=>{e&&pr(sr().get(o,e))&&sr().set(o,e,null)}),r&&i.lazy&&sr().isUndefined(o[s])&&(o[s]=null),pr(sr().get(o,c))&&sr().set(o,c,Al()),o))},createData(e){let t=this;return t.$nextTick().then(()=>t.defineField(e))},createRow(e){let t=sr().isArray(e);return t||(e=[e]),this.createData(e).then(e=>t?e:e[0])},revertData(e,l){let o=this;var t=o,r=o,{keepSource:t,treeConfig:i}=t;let{fullAllDataRowIdData:n,fullDataRowIdData:a,tableSourceData:s,sourceDataRowIdData:c,tableFullData:d,afterFullData:u,removeRowMaps:p}=o;var h=o.computeTreeOpts.transform;let m=Er(o).handleGetRowId;if(!t)return A("vxe.error.reqProp",["keep-source"]),o.$nextTick();let g=e,f=(e?sr().isArray(e)||(g=[e]):g=sr().toArray(o.getUpdateRecords()),!1);return g.length&&g.forEach(e=>{var t,e=m(e),r=n[e];r&&(r=r.row,o.isInsertByRow(r)||(t=c[e])&&r&&(l?sr().set(r,l,sr().clone(sr().get(t,l),!0)):sr().destructuring(r,sr().clone(t,!0)),!a[e])&&o.isRemoveByRow(r)&&(p[e]&&delete p[e],d.unshift(r),u.unshift(r),f=!0))}),e?(f&&(r.removeRowFlag++,o.updateFooter(),o.cacheRowMap(!1),o.handleTableData(i&&h),i&&h||o.updateAfterDataIndex(),o.checkSelectionStatus(),r.scrollYLoad)&&o.updateScrollYSpace(),o.$nextTick().then(()=>(o.updateCellAreas(),o.recalculate()))):o.reloadData(s)},clearData(e,t){let{tableFullData:r,visibleColumn:l}=this;return arguments.length?e&&!sr().isArray(e)&&(e=[e]):e=r,t?e.forEach(e=>sr().set(e,t,null)):e.forEach(t=>{l.forEach(e=>{e.field&&Or(t,e,null)})}),this.$nextTick()},getCellElement(e,t){var r=this.elemStore,t=Rr(this,t);if(!t)return null;var e=yr(this,e),l=Fr(r["main-body-scroll"]),o=Fr(r["left-body-scroll"]),r=Fr(r["right-body-scroll"]);let i;return t&&(t.fixed&&("left"===t.fixed?o&&(i=o):r&&(i=r)),i=i||l)?i.querySelector(`.vxe-body--row[rowid="${e}"] .`+t.id):null},getCellLabel(t,r){r=Rr(this,r);if(!r)return null;var l=r.formatter,o=Sr(t,r);let i=o;if(l){let e;var n=this.fullAllDataRowIdData,a=yr(this,t),s=r.id,c=n[a];if(c&&(e=(e=c.formatData)||(n[a].formatData={}),c)&&e[s]&&e[s].value===o)return e[s].label;n={cellValue:o,row:t,rowIndex:this.getRowIndex(t),column:r,columnIndex:this.getColumnIndex(r)};i=sr().isString(l)?(c=(a=Se.get(l))?a.tableCellFormatMethod||a.cellFormatMethod:null)?c(n):"":sr().isArray(l)?(r=(t=Se.get(l[0]))?t.tableCellFormatMethod||t.cellFormatMethod:null)?r(n,...l.slice(1)):"":l(n),e&&(e[s]={value:o,label:i})}return i},isInsertByRow(e){e=yr(this,e);return!!this.insertRowFlag&&!!this.insertRowMaps[e]},isRemoveByRow(e){e=yr(this,e);return!!this.removeRowFlag&&!!this.removeRowMaps[e]},removeInsertRow(){var e=this.insertRowMaps;return this.remove(sr().values(e))},isUpdateByRow(e,t){var r=this.keepSource,{tableFullColumn:l,fullDataRowIdData:o,sourceDataRowIdData:i}=this;if(r){r=sr().isString(e)||sr().isNumber(e)?e:yr(this,e),e=o[r];if(!e)return!1;var n=e.row,a=i[r];if(a){if(1<arguments.length)return!go(a,n,t);for(let e=0,t=l.length;e<t;e++){var s=l[e].field;if(s&&!go(a,n,s))return!0}}}return!1},getColumns(e){var t=this.visibleColumn;return sr().isUndefined(e)?t.slice(0):t[e]},getColid(e){e=Rr(this,e);return e?e.id:null},getColumnById(e){var t=this.fullColumnIdData;return t[e]?t[e].column:null},getColumnByField(e){var t=this.fullColumnFieldData;return t[e]?t[e].column:null},getParentColumn(e){var t=this.fullColumnIdData,e=Rr(this,e);return e&&e.parentId&&t[e.parentId]?t[e.parentId].column:null},getTableColumn(){var e=this,t=this;return{collectColumn:t.collectColumn.slice(0),fullColumn:t.tableFullColumn.slice(0),visibleColumn:t.visibleColumn.slice(0),tableColumn:e.tableColumn.slice(0)}},moveColumnTo(e,r,t){var{fullColumnIdData:l,visibleColumn:o}=this,{dragToChild:t,dragPos:i,isCrossDrag:n}=Object.assign({},t),e=Rr(this,e);let a=null;var s=e?l[e.id]:null;let c="left";if(sr().isNumber(r)){if(s&&r){let e=s.items,t=s._index+r;n&&(e=o,t=s._index+r),0<t&&t<e.length-1&&(a=e[t]),0<r&&(c="right")}}else{n=(a=Rr(this,r))?l[a.id]:null;s&&n&&n._index>s._index&&(c="right")}return this.handleColDragSwapEvent(null,!0,e,a,i||c,!0===t)},moveRowTo(e,r,t){var l=this.treeConfig,{fullAllDataRowIdData:o,afterFullData:i}=this,{dragToChild:t,dragPos:n,isCrossDrag:a}=Object.assign({},t),s=this.computeTreeOpts,e=Ul(this,e);let c=null,d="top";var u=e?o[yr(this,e)]:null;if(sr().isNumber(r)){if(u&&r){let e=i,t=u._index+r;l&&(e=u.items,s.transform)&&(t=u.treeIndex+r,a)&&(e=i,t=u._index+r),0<=t&&t<=e.length-1&&(c=e[t]),0<r&&(d="bottom")}}else{l=(c=Ul(this,r))?o[yr(this,c)]:null;u&&l&&l._index>u._index&&(d="bottom")}return this.handleRowDragSwapEvent(null,!0,e,c,n||d,!0===t)},getFullColumns(){var e=this.collectColumn;return e.slice(0)},getData(e){var t=this.data||this.tableSynchData;return sr().isUndefined(e)?t.slice(0):t[e]},getCheckboxRecords(e){var t=this.treeConfig,r=this.updateCheckboxFlag;let{tableFullData:l,afterFullData:o,tableFullTreeData:i,fullDataRowIdData:n,afterFullRowMaps:a,selectCheckboxMaps:s}=this;var c=this.computeTreeOpts,{transform:d,mapChildrenField:u}=c;let p=this.computeCheckboxOpts.checkField;c=c.children||c.childrenField;let h=[];if(r)if(p)h=t?(r=e?d?i:l:d?i:o,sr().filterTree(r,e=>sr().get(e,p),{children:d?u:c})):(e?l:o).filter(e=>sr().get(e,p));else{let r=e||t&&!d?n:a;sr().each(s,(e,t)=>{r[t]&&h.push(n[t].row)})}return h},updateAfterDataIndex(){To(this)},getTreeRowChildren(t){var r=this.treeConfig,l=this.fullAllDataRowIdData,o=this.computeTreeOpts,{transform:i,mapChildrenField:n}=o,o=o.children||o.childrenField;if(t&&r){let e;if(e=sr().isString(t)?t:yr(this,t)){r=l[e],t=r?r.row:null;if(t)return t[i?n:o]||[]}}return[]},getTreeParentRow(t){var r=this.treeConfig,l=this.fullAllDataRowIdData;if(t&&r){let e;if(e=sr().isString(t)?t:yr(this,t))return(r=l[e])?r.parent:null}return null},getParentRow(e){return M("vxe.error.delFunc",["getParentRow","getTreeParentRow"]),this.getTreeParentRow(e)},getRowById(e){var t=this.fullAllDataRowIdData,e=sr().eqNull(e)?"":encodeURIComponent(e);return t[e]?t[e].row:null},getRowid(e){return yr(this,e)},getTableData(){var{tableData:e,footerTableData:t}=this,{tableFullData:r,afterFullData:l,tableFullTreeData:o}=this;return{fullData:(this.treeConfig?o:r).slice(0),visibleData:l.slice(0),tableData:e.slice(0),footerData:t.slice(0)}},getFullData(){var e,t,r,l,o=this.treeConfig,{tableFullData:i,tableFullTreeData:n}=this;return o?({transform:e,mapChildrenField:t,rowField:r,parentField:l}=o=this.computeTreeOpts,o=o.children||o.childrenField,e?sr().toArrayTree(sr().toTreeArray(n,{children:t}),{key:r,parentKey:l,children:o,mapChildren:t}):n.slice(0)):i.slice(0)},handleLoadDefaults(){ei(this)},handleInitDefaults(){ti(this)},setColumnFixed(e,t){let r=!1;var l=sr().isArray(e)?e:[e],o=this.computeColumnOpts,i=this.computeIsMaxFixedColumn;for(let e=0;e<l.length;e++){var n=Xl(this,Rr(this,l[e]));if(n&&n.fixed!==t){if(!n.fixed&&i)return nr.VxeUI.modal&&nr.VxeUI.modal.message({status:"error",content:_("vxe.table.maxFixedCol",[o.maxFixedSize])}),this.$nextTick();sr().eachTree([n],e=>{e.fixed=t,e.renderFixed=t}),this.saveCustomStore("update:fixed"),r=r||!0}}return r?this.refreshColumn():this.$nextTick()},clearColumnFixed(e){let t=this,r=!1;return(sr().isArray(e)?e:[e]).forEach(e=>{e=Rr(t,e),e=Xl(t,e);e&&e.fixed&&(sr().eachTree([e],e=>{e.fixed=null,e.renderFixed=null}),t.saveCustomStore("update:fixed"),r=r||!0)}),r?t.refreshColumn():t.$nextTick()},hideColumn(e){let t=this,r=!1;return(sr().isArray(e)?e:[e]).forEach(e=>{e=Rr(t,e);e&&e.visible&&(e.visible=!1,r=r||!0)}),r?t.handleCustom():t.$nextTick()},showColumn(e){let t=this,r=!1;return(sr().isArray(e)?e:[e]).forEach(e=>{e=Rr(t,e);e&&!e.visible&&(e.visible=!0,r=r||!0)}),r?t.handleCustom():t.$nextTick()},setColumnWidth(e,t){let r=this;var l=r.elemStore;let o=!1;e=sr().isArray(e)?e:[e];let i=sr().toInteger(t);return Tl(t)&&(l=(t=Fr(l["main-body-scroll"]))?t.clientWidth-1:0,i=Math.floor(i*l)),(i&&(e.forEach(e=>{e=Rr(r,e);e&&(e.resizeWidth=i,o=o||!0)}),o)?r.refreshColumn():r.$nextTick()).then(()=>({status:o}))},getColumnWidth(e){e=Rr(this,e);return e?e.renderWidth:0},resetColumn(e){return M("vxe.error.delFunc",["resetColumn","resetCustom"]),this.resetCustom(e)},handleCustom(){var e=this.mouseConfig;return e&&(this.clearSelected&&this.clearSelected(),this.clearCellAreas)&&(this.clearCellAreas(),this.clearCopyCellArea()),this.analyColumnWidth(),this.refreshColumn(!0)},restoreCustomStorage(){let t=this;var e=t.customConfig,r=t.computeTableId,l=t.computeCustomOpts,{storage:o,restoreStore:i}=l,n=!0===o,o=n?{}:Object.assign({},o||{}),a=n||o.resizable,s=n||o.visible,c=n||o.fixed,n=n||o.sort;if((e?cr(l):l.enabled)&&(a||s||c||n)){if(r)return o=Ie(r),i?Promise.resolve(i({$table:t,id:r,type:"restore",storeData:o})).then(e=>{if(e)return bo(t,e)}).catch(e=>e):bo(t,o);A("vxe.error.reqProp",["id"])}},getCustomStoreData(){let d=this;var e=d.id,t=d.collectColumn;let{storage:r,checkMethod:u}=d.computeCustomOpts;var l=!0===r,o=l?{}:Object.assign({},r||{});let p=l||o.resizable,h=l||o.visible,m=l||o.fixed,g=l||o.sort,f={},v={},x={},b={};l={resizableData:void 0,sortData:void 0,visibleData:void 0,fixedData:void 0};if(e){let n=0,a=0,s=0,c=0;sr().eachTree(t,(e,t,r,l,o)=>{var i=e.getKey();i?(o||(g&&(a=1,v[i]=e.renderSortNumber),m&&e.fixed!==e.defaultFixed&&(s=1,b[i]=e.fixed)),p&&e.resizeWidth&&(n=1,f[i]=e.renderWidth),!h||u&&!u({$table:d,column:e})||(!e.visible&&e.defaultVisible?(c=1,x[i]=!1):e.visible&&!e.defaultVisible&&(c=1,x[i]=!0))):A("vxe.error.reqProp",[`${e.getTitle()||e.type||""} -> column.field=?`])}),n&&(l.resizableData=f),a&&(l.sortData=v),s&&(l.fixedData=b),c&&(l.visibleData=x)}else A("vxe.error.reqProp",["id"]);return l},saveCustomStore(e){var t=this,r=this.customConfig,l=this.computeTableId,o=this.computeCustomOpts,{updateStore:i,storage:n}=o,a=!0===n,n=a?{}:Object.assign({},n||{}),s=a||n.resizable,c=a||n.visible,d=a||n.fixed,a=a||n.sort;if("reset"!==e&&(t.isCustomStatus=!0),(r?cr(o):o.enabled)&&(s||c||d||a)){if(!l)return A("vxe.error.reqProp",["id"]),this.$nextTick();n="reset"===e?{resizableData:{},sortData:{},visibleData:{},fixedData:{}}:this.getCustomStoreData();if(i)return i({$table:this,id:l,type:e,storeData:n});t=l,r="reset"===e?null:n,o=Te().version,(s=Ie())[t]=r||void 0,s._v=o,localStorage.setItem(De,sr().toJSONString(s))}return this.$nextTick()},handleUpdateDataQueue(){this.upDataFlag++},handleRefreshColumnQueue(){this.reColumnFlag++},refreshColumn(e){return e&&li(this),ni(this,!0).then(()=>this.refreshScroll()).then(()=>this.recalculate())},analyColumnWidth(){var e=this.columnOpts;let{width:t,minWidth:r}=e,l=[],o=[],i=[],n=[],a=[],s=[],c=[],d=[];this.tableFullColumn.forEach(e=>{t&&!e.width&&(e.width=t),r&&!e.minWidth&&(e.minWidth=r),e.visible&&(e.resizeWidth?l:"auto"===e.width?c:El(e.width)?o:Tl(e.width)?a:El(e.minWidth)?i:"auto"===e.minWidth?n:Tl(e.minWidth)?s:d).push(e)}),Object.assign(this.columnStore,{resizeList:l,pxList:o,pxMinList:i,autoMinList:n,scaleList:a,scaleMinList:s,autoList:c,remainList:d})},handleColResizeMousedownEvent(e,t,l){let o=this,E=o,i=o;e.stopPropagation(),e.preventDefault();var r=l.column,{columnStore:n,overflowX:a,scrollbarHeight:T}=E;let{elemStore:s,visibleColumn:R}=i;var{leftList:n,rightList:S}=n;let O=o.computeResizableOpts,F=a?T:0,D=o.$refs.refElem,I=o.$refs.refLeftContainer;a=o.$refs.refRightContainer;let $=o.$refs.refColResizeBar;if($){let f="left"===t,v="right"===t,x=$.firstElementChild,b=o.computeScrollbarXToTop,C=e.clientX;T=e.target;let w=r;r.children&&r.children.length&&sr().eachTree(r.children,e=>{w=e});t=T.parentNode,r=Object.assign(l,{cell:t});let y=0;if(Fr(s["main-body-scroll"])){let s=D.getBoundingClientRect(),c=a?a.getBoundingClientRect():null;var a=t.getBoundingClientRect(),k=T.getBoundingClientRect(),T=T.clientWidth,M=Math.floor(T/2);let d=k.x-s.x+M,u=Kl(r)-M,p=v?0:a.x-s.x+T+u,h=a.x-s.x+t.clientWidth-u,m=0,g=0;if(f||v){let t=!1;var A=f?n:S;for(let e=0;e<A.length;e++){var L=A[e];t?m+=L.renderWidth:(t=L.id===w.id)||(g+=L.renderWidth)}}k=t=>{t.stopPropagation(),t.preventDefault();var r=D.clientHeight,l=t.clientX-C;let e=d+l;f?c&&(e=Math.min(e,c.x-s.x-m-u)):v&&(I&&(e=Math.max(e,I.clientWidth+g+u)),e=Math.min(e,h)),y=Math.max(e,p);l=Math.max(1,y);if($.style.left=l+"px",$.style.top=`${b?F:0}px`,$.style.height=`${b?r-F:r}px`,O.showDragTip&&x){x.textContent=_("vxe.table.resizeColTip",[Math.floor(w.renderWidth+(v?d-y:y-d))]);var o=D.clientWidth,i=$.clientWidth,n=x.clientWidth,a=x.clientHeight;let e=-n;l<n+i?e=0:o<l&&(e+=o-l),x.style.left=e+"px",x.style.top=Math.min(r-a,Math.max(0,t.clientY-s.y-a/2))+"px"}E.isDragResize=!0};E.isDragResize=!0,fr(D,"col-drag--resize"),$.style.display="block",document.onmousemove=k,document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,$.style.display="none",i._lastResizeTime=Date.now(),setTimeout(()=>{E.isDragResize=!1},50);var t=w.renderWidth+(v?d-y:y-d),r={...l,resizeWidth:t,resizeColumn:w};"fixed"===O.dragMode&&R.forEach(e=>{e.id===w.id||e.resizeWidth||(e.resizeWidth=e.renderWidth)}),o.handleColResizeCellAreaEvent?o.handleColResizeCellAreaEvent(e,r):(w.resizeWidth=t,pi(o,e,r)),gr(D,"col-drag--resize")},k(e),o.closeMenu&&o.closeMenu()}}},handleColResizeDblclickEvent(r,l){var o=this,i=this,n=this.computeResizableOpts.isDblclickAutoWidth,a=this.$refs.refElem;if(n&&a){r.stopPropagation(),r.preventDefault();var n=i.fullColumnIdData,s=l.column;let t=s;s.children&&s.children.length&&sr().eachTree(s.children,e=>{t=e});s=n[t.id],n=r.target.parentNode,n=Kl(Object.assign(l,{cell:n}));a.setAttribute("data-calc-col","Y");let e=di(t,a);a.removeAttribute("data-calc-col"),s&&(e=Math.max(e,s.width)),e=Math.max(n,e);a={...l,resizeWidth:e,resizeColumn:t};o.isDragResize=!1,i._lastResizeTime=Date.now(),this.handleColResizeDblclickCellAreaEvent?this.handleColResizeDblclickCellAreaEvent(r,a):(t.resizeWidth=e,pi(this,r,a))}},handleRowResizeMousedownEvent(l,o){let i=this,m=i,n=i,a=(l.stopPropagation(),l.preventDefault(),o).row;var{overflowX:g,scrollbarWidth:f,overflowY:v,scrollbarHeight:x}=m,{elemStore:b,fullAllDataRowIdData:C}=n;let w=v?f:0,y=g?x:0,E=i.computeScrollbarYToLeft,T=i.computeResizableOpts;v=i.computeRowOpts,f=i.computeCellOpts;let R=i.$refs.refElem,S=i.$refs.refRowResizeBar;if(S){let p=l.clientY,h=S.firstElementChild;g=l.currentTarget.parentNode,x=g.parentNode;if(Fr(b["main-body-scroll"])){let r=C[yr(i,a)];if(r){b=i.computeDefaultRowHeight;let s=r.resizeHeight||f.height||v.height||r.height||b,c=R.getBoundingClientRect();C=x.getBoundingClientRect();let e=p-C.y-x.clientHeight,d=s;f=g.querySelector(".vxe-cell");let t=0,u=(f&&(v=getComputedStyle(f),t=Math.max(1,Math.ceil(sr().toNumber(v.paddingTop)+sr().toNumber(v.paddingBottom)))),C.y-c.y+t);b=r=>{r.stopPropagation(),r.preventDefault();var l=R.clientWidth-w,o=R.clientHeight-y;let i=r.clientY-c.y-e;if(i<u?i=u:d=Math.max(t,s+r.clientY-p),S.style.left=`${E?w:0}px`,S.style.top=i+"px",S.style.width=l+"px",T.showDragTip&&h){h.textContent=_("vxe.table.resizeRowTip",[d]);var n=h.clientWidth,a=h.clientHeight;let e=Math.max(2,r.clientX-c.x),t=0;e+n>=l-2&&(e=l-n-2),i+a>=o&&(t=o-(i+a)),h.style.left=e+"px",h.style.top=t+"px"}m.isDragResize=!0};m.isDragResize=!0,fr(R,"row-drag--resize"),S.style.display="block",document.onmousemove=b,document.onmouseup=function(e){var t;document.onmousemove=null,document.onmouseup=null,S.style.display="none",n._lastResizeTime=Date.now(),setTimeout(()=>{m.isDragResize=!1},50),d!==s&&(t={...o,resizeHeight:d,resizeRow:a},n.isResizeCellHeight=!0,i.handleRowResizeCellAreaEvent?i.handleRowResizeCellAreaEvent(e,t):(r.resizeHeight=d,hi(i,e,t),Mr(i))),gr(R,"row-drag--resize")},b(l)}}}},handleRowResizeDblclickEvent(o,i){let n=this,a=n,s=n;var e=n.computeResizableOpts.isDblclickAutoHeight;let c=n.$refs.refElem;if(e&&c){o.stopPropagation(),o.preventDefault();var e=a.editStore,t=s.fullAllDataRowIdData,e=e.actived;let r=i.row,l=t[yr(n,r)];l&&(t=()=>{var e=Le(l,c),t={...i,resizeHeight:e,resizeRow:r};a.isDragResize=!1,s._lastResizeTime=Date.now(),n.handleRowResizeDblclickCellAreaEvent?n.handleRowResizeDblclickCellAreaEvent(o,t):(l.resizeHeight=e,hi(n,o,t))},e.row||e.column?n.clearEdit().then(t):t())}},setRowHeightConf(e){let t=this;var r=t,l=t;let o=l.fullAllDataRowIdData,i=!1;return e&&(sr().each(e,(e,t)=>{t=o[t];t&&(e=sr().toInteger(e))&&(t.resizeHeight=e,i=i||!0)}),i)&&(l.isResizeCellHeight=!0,r.resizeHeightFlag++),t.$nextTick().then(()=>(Mr(t),{status:i}))},getRowHeightConf(l){let{fullAllDataRowIdData:o,afterFullData:e}=this,i=Er(this).handleGetRowId,n=this.computeRowOpts,a=this.computeCellOpts,s=this.computeDefaultRowHeight,c={};return e.forEach(e=>{var t,e=i(e),r=o[e];r&&((t=r.resizeHeight)||l)&&(t=t||a.height||n.height||r.height||s,c[e]=t)}),c},setRowHeight(e,t){var r=this,l=this;let o=l.fullAllDataRowIdData,i=!1;e=sr().isArray(e)?e:[e];let n=sr().toInteger(t);if(Tl(t)&&(t=(t=(t=this.$refs.refTableBody)?t.$el:null)?t.clientHeight-1:0,n=Math.floor(n*t)),n){let t=Er(this).handleGetRowId;e.forEach(e=>{e=sr().isString(e)||sr().isNumber(e)?e:t(e),e=o[e];e&&(e.resizeHeight=n,i=i||!0)}),i&&(l.isResizeCellHeight=!0,r.resizeHeightFlag++)}return this.$nextTick()},getRowHeight(e){var t=this.fullAllDataRowIdData,r=this.computeRowOpts,l=this.computeCellOpts,o=this.computeDefaultRowHeight,t=t[sr().isString(e)||sr().isNumber(e)?e:yr(this,e)];return t?t.resizeHeight||l.height||r.height||t.height||o:0},refreshScroll(){let t=this,r=t,{elemStore:e,lastScrollLeft:l,lastScrollTop:o}=r,i=Fr(e["main-header-scroll"]),n=Fr(e["main-body-scroll"]),a=Fr(e["main-footer-scroll"]),s=Fr(e["left-body-scroll"]),c=Fr(e["right-body-scroll"]),d=t.$refs.refScrollXHandleElem,u=t.$refs.refScrollYHandleElem;return new Promise(e=>{if(l||o)return kl(t,l,o).then(()=>{setTimeout(e,10)});r.intoRunScroll=!0,xr(u,o),xr(n,o),xr(s,o),xr(c,o),br(d,l),br(n,l),br(i,l),br(a,l),setTimeout(()=>{r.intoRunScroll=!1,e()},10)})},recalculate(i){let n=this,a=n;return new Promise(e=>{var{rceTimeout:t,rceRunTime:r}=a,l=n.computeResizeOpts.refreshDelay||20,o=n.$refs.refElem;o&&o.clientWidth&&(Ho(n),gi(n)),!t||(clearTimeout(t),r&&r+(l-5)<Date.now())?e(Zo(n,!!i)):n.$nextTick(()=>{e()}),a.rceTimeout=setTimeout(()=>{a.rceTimeout=void 0,Zo(n,!!i)},l)})},updateStyle(){return kr(this)},checkScrolling(){var e=this.elemStore,e=Fr(e["main-body-scroll"]),t=this.$refs.refLeftContainer,r=this.$refs.refRightContainer,e=this.$refs.refScrollXHandleElem||e;e&&(t&&(0<e.scrollLeft?fr:gr)(t,"scrolling--middle"),r)&&(e.clientWidth<e.scrollWidth-Math.ceil(e.scrollLeft)?fr:gr)(r,"scrolling--middle")},preventEvent(t,e,r,l,o){var i=this.$xeGrid;let n=Oe.get(e),a=(n.length||"event.clearEdit"!==e||(n=Oe.get("event.clearActived")).length&&M("vxe.error.delEvent",["event.clearActived","event.clearEdit"]),null),s=!1;for(let e=0;e<n.length;e++){var c=(0,n[e])(Object.assign({$grid:i,$table:this,$event:t},r));if(!1===c){s=!0;break}if(c&&!1===c.status){a=c.result,s=!0;break}}return s||l&&(a=l()),o&&o(),a},handleGlobalMousedownEvent(r){var e=this.$xeGrid;let{$el:l,$refs:t,$toolbar:o,mouseConfig:i,editStore:n,ctxMenuStore:a,editRules:s,editOpts:c,validOpts:d,areaOpts:u,filterStore:p,customStore:h,getRowNode:m}=this,g=n.actived;var{customWrapper:f,refValidTooltip:v}=t,x=t.refTableFilter,b=t.refTableMenu;if(!x||Cr(r,l,"vxe-cell--filter").flag||Cr(r,x.$el).flag||Cr(r,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(r,"event.clearFilter",p.args,this.closeFilter),!f||h.btnEl===r.target||Cr(r,document.body,"vxe-toolbar-custom-target").flag||Cr(r,f.$el).flag||Cr(r,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(r,"event.clearCustom",{},()=>this.closeCustom()),g.row)!1===c.autoClear||(x=g.args.cell)&&Cr(r,x).flag||v&&Cr(r,v.$el).flag||this.lastCallTime&&!(this.lastCallTime+50<Date.now())||Cr(r,document.body,"vxe-table--ignore-clear").flag||this.preventEvent(r,"event.clearEdit",g.args,()=>{let e;var t;(e=(e=(e="row"===c.mode?!!(t=Cr(r,l,"vxe-body--row")).flag&&m(t.targetElem).item!==g.args.row:!Cr(r,l,"col--edit").flag)||Cr(r,l,"vxe-header--row").flag)||Cr(r,l,"vxe-footer--row").flag)||!this.height||this.overflowY||mr(t=r.target,"vxe-table--body-wrapper")&&(e=r.offsetY<t.clientHeight),!e&&Cr(r,l).flag||setTimeout(()=>{this.handleClearEdit(r).then(()=>{!this.isActivated&&s&&d.autoClear&&(this.validErrorMaps={})})})});else if(i&&!(Cr(r,l).flag||e&&Cr(r,e.$el).flag||b&&Cr(r,b.$el).flag||o&&Cr(r,o.$el).flag)&&(this.clearSelected&&this.clearSelected(),u.autoClear)&&this.getCellAreas){let e=this.getCellAreas();e&&e.length&&!Cr(r,document.body,"vxe-table--ignore-areas-clear").flag&&this.preventEvent(r,"event.clearAreas",{},()=>{this.clearCellAreas(),this.clearCopyCellArea(),this.emitEvent("clear-cell-area-selection",{cellAreas:e},r)})}a.visible&&b&&!Cr(r,b.$el).flag&&this.closeMenu();f=Cr(r,(e||this).$el).flag;!f&&s&&d.autoClear&&(this.validErrorMaps={}),this.isActivated=f},handleGlobalBlurEvent(){this.closeFilter(),this.closeMenu()},handleGlobalMousewheelEvent(){this.closeTooltip(),this.closeMenu()},keydownEvent(t){let{filterStore:e,ctxMenuStore:r,editStore:l,keyboardConfig:o,mouseConfig:i,mouseOpts:n,keyboardOpts:a}=this,s=l.actived;var c=t.keyCode;27===c&&this.preventEvent(t,"event.keydown",null,()=>{if(this.emitEvent("keydown-start",{},t),o&&i&&n.area&&this.handleKeyboardCellAreaEvent)this.handleKeyboardCellAreaEvent(t);else if((s.row||e.visible||r.visible)&&(t.stopPropagation(),this.closeFilter(),this.closeMenu(),o)&&a.isEsc&&s.row){let e=s.args;this.handleClearEdit(t),i&&n.selected&&this.$nextTick(()=>this.handleSelected(e,t))}this.emitEvent("keydown",{},t),this.emitEvent("keydown-end",{},t)})},handleGlobalKeydownEvent(P){let z=this,N=z,j=z,U=z,W=z.$xeGrid;j.isActivated&&z.preventEvent(P,"event.keydown",null,()=>{var{mouseConfig:t,keyboardConfig:e,treeConfig:r,editConfig:l,highlightCurrentRow:o,highlightCurrentColumn:i}=N;let{ctxMenuStore:n,editStore:_,currentRow:a}=U;var s=j.afterFullData,c=z.computeIsMenu,d=z.computeBodyMenu,u=z.computeKeyboardOpts,p=z.computeMouseOpts,h=z.computeEditOpts,m=z.computeTreeOpts,g=z.computeMenuList,f=z.computeRowOpts,V=z.computeColumnOpts;let{selected:v,actived:x}=_;var b=P.keyCode,C=8===b,H=9===b,w=13===b,y=27===b,E=32===b,T=37===b,R=38===b,S=39===b,O=40===b,B=46===b,F=113===b,D=93===b,I=Rl(P),$=P.shiftKey,k=P.altKey,M=T||R||S||O,c=c&&n.visible&&(w||E||M),A=cr(l)&&x.column&&x.row,m=m.children||m.childrenField;let L=h.beforeEditMethod||h.activeMethod;if(c)P.preventDefault(),n.showChild&&bl(n.selected)?z.moveCtxMenu(P,n,"selectChild",T,!1,n.selected.children):z.moveCtxMenu(P,n,"selected",S,!0,g);else if(e&&t&&p.area&&z.handleKeyboardCellAreaEvent)z.handleKeyboardCellAreaEvent(P);else if(y){if(z.closeMenu&&z.closeMenu(),z.closeFilter(),e&&u.isEsc&&x.row){let e=x.args;z.handleClearEdit(P),p.selected&&z.$nextTick(()=>z.handleSelected(e,P))}}else if(e&&E&&u.isChecked&&v.row&&v.column&&("checkbox"===v.column.type||"radio"===v.column.type))P.preventDefault(),"checkbox"===v.column.type?z.handleToggleCheckRowEvent(P,v.args):z.triggerRadioRowEvent(P,v.args);else if(F&&cr(l))A||v.row&&v.column&&(P.stopPropagation(),P.preventDefault(),z.handleEdit(v.args,P));else if(D)j._keyCtx=v.row&&v.column&&d.length,clearTimeout(j.keyCtxTimeout),j.keyCtxTimeout=setTimeout(()=>{j._keyCtx=!1},1e3);else if(w&&!k&&e&&u.isEnter&&(v.row||x.row||r&&(f.isCurrent||o)&&a)){var{isLastEnterAppendRow:c,beforeEnterMethod:g,enterMethod:y}=u;if(I){if(x.row){let e=x.args;z.handleClearEdit(P),t&&p.selected&&z.$nextTick(()=>z.handleSelected(e,P))}}else if(v.row||x.row){let t=(v.row?v:x).args;if($)u.enterToTab?z.moveTabSelected(t,$,P):z.moveEnterSelected(t,T,!0,S,!1,P);else if(u.enterToTab)z.moveTabSelected(t,$,P);else{var F=v.row||x.row,D=v.column||x.column,d=z.getVTRowIndex(F),w={row:F,rowIndex:z.getRowIndex(F),$rowIndex:z.getVMRowIndex(F),_rowIndex:d,column:D,columnIndex:z.getColumnIndex(D),$columnIndex:z.getVMColumnIndex(D),_columnIndex:z.getVTColumnIndex(D),$table:z};if(!g||!1!==g(w)){if(c&&d>=s.length-1)return z.insertAt({},-1).then(({row:e})=>{z.scrollToRow(e,v.column),z.handleSelected({...t,row:e},P)}),void z.dispatchEvent("enter-append-row",w,P);z.moveEnterSelected(t,T,!1,S,!0,P),y&&y(w)}}}else if(r&&(f.isCurrent||o)&&a){k=a[m];if(k&&k.length){P.preventDefault();let e=k[0],t={$table:z,row:e,rowIndex:z.getRowIndex(e),$rowIndex:z.getVMRowIndex(e)};z.setTreeExpand(a,!0).then(()=>z.scrollToRow(e)).then(()=>z.triggerCurrentRowEvent(P,t))}}}else if(M&&e&&u.isArrow)A||(p.selected&&v.row&&v.column?z.moveArrowSelected(v.args,T,R,S,O,P):((R||O)&&(f.isCurrent||o)&&z.moveCurrentRow(R,O,P),(T||S)&&(V.isCurrent||i)&&z.moveCurrentColumn(T,S,P)));else if(H&&e&&u.isTab)v.row||v.column?z.moveTabSelected(v.args,$,P):(x.row||x.column)&&z.moveTabSelected(x.args,$,P);else if(e&&u.isDel&&B&&cr(l)&&(v.row||v.column))A||(t=u.delMethod,F={row:v.row,rowIndex:z.getRowIndex(v.row),column:v.column,columnIndex:z.getColumnIndex(v.column),$table:z,$grid:W},L&&!L(F))||(t?t(F):Or(v.row,v.column,null),z.updateFooter(),z.dispatchEvent("cell-delete-value",F,P));else if(C&&e&&u.isBack&&cr(l)&&(v.row||v.column))A||({editMode:D,backMethod:g}=u,u.isDel&&cr(l)&&(v.row||v.column)&&(c={row:v.row,rowIndex:z.getRowIndex(v.row),column:v.column,columnIndex:z.getColumnIndex(v.column),$table:z,$grid:W},L&&!L(c)||(g?g(c):("insert"!==D&&Or(v.row,v.column,null),z.handleEdit(v.args,P)),z.dispatchEvent("cell-backspace-value",c,P))));else if(C&&e&&r&&u.isBack&&(f.isCurrent||o)&&a){let t=sr().findTree(j.afterTreeFullData,e=>e===a,{children:m}).parent;if(t){P.preventDefault();let e={row:t,rowIndex:z.getRowIndex(t),$rowIndex:z.getVMRowIndex(t),$table:z,$grid:W};z.setTreeExpand(t,!1).then(()=>z.scrollToRow(t)).then(()=>z.triggerCurrentRowEvent(P,e))}}else if(e&&u.isEdit&&!I&&(E||48<=b&&b<=57||65<=b&&b<=90||96<=b&&b<=111||186<=b&&b<=192||219<=b&&b<=222)){d=u.editMethod;if(v.column&&v.row&&cr(v.column.editRender)){let e=h.beforeEditMethod||h.activeMethod;s={row:v.row,rowIndex:z.getRowIndex(v.row),column:v.column,columnIndex:z.getColumnIndex(v.column),$table:z,$grid:W};e&&!e(s)||(d?d(s):(Or(v.row,v.column,null),z.handleEdit(v.args,P)))}}z.dispatchEvent("keydown",{},P)})},handleGlobalPasteEvent(e){var{isActivated:t,keyboardConfig:r,keyboardOpts:l,mouseConfig:o,mouseOpts:i,editStore:n,filterStore:a}=this,n=n.actived;t&&!a.visible&&(n.row||n.column||r&&l.isClip&&o&&i.area&&this.handlePasteCellAreaEvent&&this.handlePasteCellAreaEvent(e),this.emitEvent("paste",{},e))},handleGlobalCopyEvent(e){var{isActivated:t,keyboardConfig:r,keyboardOpts:l,mouseConfig:o,mouseOpts:i,editStore:n,filterStore:a}=this,n=n.actived;t&&!a.visible&&(n.row||n.column||r&&l.isClip&&o&&i.area&&this.handleCopyCellAreaEvent&&this.handleCopyCellAreaEvent(e),this.emitEvent("copy",{},e))},handleGlobalCutEvent(e){var{isActivated:t,keyboardConfig:r,keyboardOpts:l,mouseConfig:o,mouseOpts:i,editStore:n,filterStore:a}=this,n=n.actived;t&&!a.visible&&(n.row||n.column||r&&l.isClip&&o&&i.area&&this.handleCutCellAreaEvent&&this.handleCutCellAreaEvent(e),this.emitEvent("cut",{},e))},handleGlobalResizeEvent(){this.closeMenu(),this.updateCellAreas(),this.recalculate(!0)},handleUpdateBodyMerge(){var e=this,t=this,r=t.mergeBodyList;t.mergeBodyCellMaps=Ao(r),e.mergeBodyFlag++},handleUpdateFooterMerge(){var e=this,t=this,r=t.mergeFooterList;t.mergeFooterCellMaps=Ao(r),e.mergeFootFlag++},handleAggregateSummaryData(){var e=this,{aggregateConfig:t,rowGroupConfig:r}=e,l=e.isRowGroupStatus,o=e.tableFullGroupData,i=e.computeAggregateOpts.mapChildrenField;if((t||r)&&l){let t=[];sr().eachTree(o,e=>{e.isAggregate&&t.push(e)},{children:i}),Qo(e,t)}},handleTargetLeaveEvent(){let e=this;var t=e,r=e.computeTooltipOpts;let l=e.$refs.refTooltip;l&&l.setActived&&l.setActived(!1),r.enterable?t.tooltipTimeout=setTimeout(()=>{(l=e.$refs.refTooltip)&&l.isActived&&!l.isActived()&&e.closeTooltip()},r.leaveDelay):e.closeTooltip()},triggerHeaderTitleEvent(r,e,l){let o=this;var i=o,n=e.content||e.message;if(n){i=i.tooltipStore,l=l.column;let t=dr(n);Po(o,!0),i.row=null,i.column=l,i.visible=!0,i.currOpts=e,o.$nextTick(()=>{var e=o.$refs.refTooltip;e&&e.open&&e.open(r.currentTarget,t)})}},triggerHeaderTooltipEvent(e,t){var r,l,o=this.tooltipStore,i=t.column,e=(Po(this,!0),e.currentTarget);(e=e&&e.parentElement)&&(r=e.parentElement)&&(l=r.parentElement)&&(o.column!==i||!o.visible)&&(i=l.querySelector(".vxe-cell--title"),Go(this,0,l,(mr(l,"col--ellipsis")?i:e)||e,i||r,t))},triggerBodyTooltipEvent(r,l){var o=this.editConfig,e=this.editStore,t=this.tooltipStore,i=this.computeEditOpts,e=e.actived,{row:n,column:a}=l,r=r.currentTarget;if(Po(this,t.column!==a||t.row!==n),a.editRender&&cr(o)){if("row"===i.mode&&e.row===n)return;if(e.row===n&&e.column===a)return}if(t.column!==a||t.row!==n||!t.visible){o=r.querySelector(".vxe-cell--wrapper");let e=null,t=r.querySelector("html"===a.type?".vxe-cell--html":".vxe-cell--label");a.treeNode&&(e=r.querySelector(".vxe-tree-cell")),t=t||o,Go(this,0,r,e||o,t,l)}},triggerFooterTooltipEvent(r,l){var o=l.column,i=this.tooltipStore,r=r.currentTarget;if(Po(this,i.column!==o||!!i.row),i.column!==o||!i.visible){i=r.querySelector(".vxe-cell--wrapper");let e=null,t=r.querySelector("html"===o.type?".vxe-cell--html":".vxe-cell--label");"html"===o.type&&(e=r.querySelector(".vxe-cell--html")),t=t||i,Go(this,0,r,e||i,t,l)}},openTooltip(e,t){var r=this.$refs,r=r.refCommTooltip;return r?r.open(e,t):this.$nextTick()},closeTooltip(){var e=this.tooltipStore,t=this.$refs.refTooltip,r=this.$refs.refCommTooltip;return e.visible&&(Object.assign(e,{row:null,column:null,content:null,visible:!1,currOpts:{}}),t)&&t.close(),r&&r.close(),this.$nextTick()},isAllCheckboxChecked(){return this.isAllSelected},isAllCheckboxIndeterminate(){return!this.isAllSelected&&this.isIndeterminate},isCheckboxIndeterminate(){return M("vxe.error.delFunc",["isCheckboxIndeterminate","isAllCheckboxIndeterminate"]),this.isAllCheckboxIndeterminate()},getCheckboxIndeterminateRecords(e){var t=this.treeConfig;let{fullDataRowIdData:o,treeIndeterminateRowMaps:i}=this;if(t){let r=[],l=[];return sr().each(i,(e,t)=>{e&&(r.push(e),o[t])&&l.push(e)}),e?r:l}return[]},handleCheckedCheckboxRow(e,t,r){return Do(this,e,t,r)},setCheckboxRow(e,t){return Do(this,e=e&&!sr().isArray(e)?[e]:e,t,!0)},setCheckboxRowKey(e,t){let r=this.fullAllDataRowIdData,l=(e&&!sr().isArray(e)&&(e=[e]),[]);return e.forEach(e=>{e=r[e];e&&l.push(e.row)}),Do(this,l,t,!0)},isCheckedByCheckboxRow(e){var t=this.updateCheckboxFlag,r=this.selectCheckboxMaps,l=this.computeCheckboxOpts.checkField;return l?sr().get(e,l):!!t&&!!r[yr(this,e)]},isCheckedByCheckboxRowKey(e){var t=this.updateCheckboxFlag,{fullAllDataRowIdData:r,selectCheckboxMaps:l}=this,o=this.computeCheckboxOpts.checkField;return o?!!(r=r[e])&&sr().get(r.row,o):!!t&&!!l[e]},isIndeterminateByCheckboxRow(e){var t=this.treeIndeterminateRowMaps;return!!t[yr(this,e)]&&!this.isCheckedByCheckboxRow(e)},isIndeterminateByCheckboxRowKey(e){var t=this.treeIndeterminateRowMaps;return!!t[e]&&!this.isCheckedByCheckboxRowKey(e)},handleBatchSelectRows(e,r,l){let o=this;var t=o;let i=o;var n=o,t=t.treeConfig,a=i.isRowGroupStatus;let s=n.selectCheckboxMaps;var n=o.computeAggregateOpts,c=o.computeTreeOpts,{transform:d,mapChildrenField:u}=c,c=c.children||c.childrenField,p=o.computeCheckboxOpts;let{checkField:h,checkStrictly:m,checkMethod:g}=p,f=Er(o).handleGetRowId,v=p.indeterminateField||p.halfField;if(h)!t&&!a||m?e.forEach(e=>{!l&&g&&!g({$table:o,row:e})||(sr().set(e,h,r),Oo(o,e,r))}):sr().eachTree(e,e=>{!l&&g&&!g({$table:o,row:e})||(sr().set(e,h,r),v&&sr().set(e,v,!1),Oo(o,e,r))},{children:d?u:c}),i.updateCheckboxFlag++;else{if(!m){if(a)return sr().eachTree(e,e=>{var t=f(e);!l&&g&&!g({$table:o,row:e})||(r?s[t]=e:s[t]&&delete s[t],Oo(o,e,r))},{children:n.mapChildrenField}),void i.updateCheckboxFlag++;if(t)return sr().eachTree(e,e=>{var t=f(e);!l&&g&&!g({$table:o,row:e})||(r?s[t]=e:s[t]&&delete s[t],Oo(o,e,r))},{children:d?u:c}),void i.updateCheckboxFlag++}e.forEach(e=>{var t=f(e);!l&&g&&!g({$table:o,row:e})||(r?s[t]||(s[t]=e):s[t]&&delete s[t],Oo(o,e,r),i.updateCheckboxFlag++)})}},handleSelectRow({row:e},t,r){this.handleBatchSelectRows([e],t,r)},handleToggleCheckRowEvent(t,r){var l=this.selectCheckboxMaps,{checkField:o,trigger:e}=this.computeCheckboxOpts,i=r.row;if("manual"!==e){let e=!1;e=o?!sr().get(i,o):!l[yr(this,i)],t?this.triggerCheckRowEvent(t,r,e):(this.handleBatchSelectRows([i],e),this.checkSelectionStatus())}},triggerCheckRowEvent(t,r,e){let l=this;var o=l.treeConfig,i=r.row,n=l.isRowGroupStatus,a=l.afterFullData,s=l.computeCheckboxOpts,{checkMethod:c,trigger:d}=s;if("manual"!==d){if(t.stopPropagation(),s.isShiftKey&&t.shiftKey&&!o&&!n){d=l.getCheckboxRecords();if(d.length){s=d[0],o=l.getVTRowIndex(i),n=l.getVTRowIndex(s);if(o!==n){l.setAllCheckboxRow(!1);let e=o<n?a.slice(o,n+1):a.slice(n,o+1);return l.$nextTick(()=>{Do(l,e,!0,!1)}),void l.dispatchEvent("checkbox-range-select",Object.assign({rangeRecords:e},r),t)}}}c&&!c({$table:l,row:i})||(l.handleBatchSelectRows([i],e),l.checkSelectionStatus(),l.dispatchEvent("checkbox-change",Object.assign({records:()=>l.getCheckboxRecords(),reserves:()=>l.getCheckboxReserveRecords(),indeterminates:()=>l.getCheckboxIndeterminateRecords(),checked:e},r),t))}},toggleCheckboxRow(e){var t=this.selectCheckboxMaps,r=this.computeCheckboxOpts.checkField,r=r?!sr().get(e,r):!t[yr(this,e)];return this.handleBatchSelectRows([e],r,!0),this.checkSelectionStatus(),this.$nextTick()},setAllCheckboxRow(e){return Io(this,e,!0)},updateCheckboxStatus(){let s=this;var e=s,t=s,e=e.treeConfig,r=t.isRowGroupStatus;let{afterTreeFullData:c,afterGroupFullData:o,selectCheckboxMaps:d,treeIndeterminateRowMaps:u}=s;var p=s.computeAggregateOpts,h=s.computeTreeOpts;let m=h.children||h.childrenField,{checkField:g,checkStrictly:l,checkMethod:f}=s.computeCheckboxOpts;if(!l){if(r||e){let a=Er(s).handleGetRowId,i={},n=[];if(r){let l=p.mapChildrenField;l&&sr().eachTree(o,e=>{var t=a(e),r=e[l];r&&r.length&&!i[t]&&(i[t]=1,n.unshift([e,t,r]))},{children:l})}else if(e){let{transform:l,mapChildrenField:o}=h;sr().eachTree(c,e=>{var t=a(e),r=e[l?o:m];r&&r.length&&!i[t]&&(i[t]=1,n.unshift([e,t,r]))},{children:l?o:m})}n.forEach(e=>{var t=e[0],r=e[1];let l=0,o=0,i=0;e[2].forEach(f?e=>{var t=a(e),r=g?sr().get(e,g):d[t];f({$table:s,row:e})?(r?l++:u[t]&&o++,i++):r?l++:u[t]&&o++}:e=>{var t=a(e);(g?sr().get(e,g):d[t])?l++:u[t]&&o++,i++});var e=l>=i,n=!e&&(1<=l||1<=o);g&&sr().set(t,g,e),e?(g||(d[r]=t),u[r]&&delete u[r]):(g||d[r]&&delete d[r],n?u[r]=t:u[r]&&delete u[r])})}t.updateCheckboxFlag++}},updateAllCheckboxStatus(){let l=this;var e=l,t=l,e=e.treeConfig,r=t.isRowGroupStatus;let{afterFullData:o,afterTreeFullData:i,afterGroupFullData:n,checkboxReserveRowMap:a,selectCheckboxMaps:s,treeIndeterminateRowMaps:c}=l,{checkField:d,checkMethod:u,showReserveStatus:p}=l.computeCheckboxOpts,h=Er(l).handleGetRowId,m=0,g=0,f=0;e=e?i:r?n:o,e.forEach(u?e=>{var t=h(e),r=d?sr().get(e,d):s[t];u({$table:l,row:e})?(r?m++:c[t]&&g++,f++):r?m++:c[t]&&g++}:e=>{var t=h(e);(d?sr().get(e,d):s[t])?m++:c[t]&&g++,f++}),r=0<e.length&&(0<f?m>=f:m>=e.length);let v=!r&&(1<=m||1<=g);r||v||!p||(v=!sr().isEmpty(a)),t.isAllSelected=r,t.isIndeterminate=v},checkSelectionStatus(){this.updateCheckboxStatus(),this.updateAllCheckboxStatus()},getRadioReserveRecord(e){var{fullDataRowIdData:t,radioReserveRow:l,radioOpts:r,afterFullData:o,treeConfig:i,treeOpts:n}=this,n=n.children||n.childrenField;if(r.reserve&&l){let r=yr(this,l);if(e){if(!t[r])return l}else{let t=Ll(this);if(i){if(sr().findTree(o,e=>r===sr().get(e,t),{children:n}))return l}else if(!o.some(e=>r===sr().get(e,t)))return l}}return null},clearRadioReserve(){return this.radioReserveRow=null,this.$nextTick()},getCheckboxReserveRecords(l){var e=this.treeConfig;let{afterFullData:o,fullDataRowIdData:i,checkboxReserveRowMap:n}=this;var t=this.computeCheckboxOpts,a=this.computeTreeOpts,a=a.children||a.childrenField;let s=[];if(t.reserve){let t=Er(this).handleGetRowId,r={};e?sr().eachTree(o,e=>{r[t(e)]=1},{children:a}):o.forEach(e=>{r[t(e)]=1}),sr().each(n,(e,t)=>{e&&(l?i[t]||s.push(e):r[t]||s.push(e))})}return s},clearCheckboxReserve(){return this.checkboxReserveRowMap={},this.$nextTick()},handleCheckboxReserveRow(e,t){var{checkboxReserveRowMap:r,checkboxOpts:l}=this;l.reserve&&(l=yr(this,e),t?r[l]=e:r[l]&&delete r[l])},handleCheckAllEvent(e,t){let r=this;Io(r,t),e&&r.dispatchEvent("checkbox-all",{records:()=>r.getCheckboxRecords(),reserves:()=>r.getCheckboxReserveRecords(),indeterminates:()=>r.getCheckboxIndeterminateRecords(),checked:t},e)},triggerCheckAllEvent(e,t){var r=this.checkboxOpts,r=r.trigger;"manual"!==r&&(e&&e.stopPropagation(),this.handleCheckAllEvent(e,t))},toggleAllCheckboxRow(){return this.handleCheckAllEvent(null,!this.isAllSelected),this.$nextTick()},clearCheckboxRow(){var e=this,t=this;let r=this.treeConfig;var l=t.tableFullData,o=this.computeTreeOpts,o=o.children||o.childrenField,i=this.computeCheckboxOpts;let{checkField:n,reserve:a}=i,s=i.indeterminateField||i.halfField;return n&&(i=e=>{r&&s&&sr().set(e,s,!1),sr().set(e,n,!1)},r?sr().eachTree(l,i,{children:o}):l.forEach(i)),a&&l.forEach(e=>this.handleCheckboxReserveRow(e,!1)),e.isAllSelected=!1,e.isIndeterminate=!1,t.selectCheckboxMaps={},t.treeIndeterminateRowMaps={},e.updateCheckboxFlag++,this.$nextTick()},triggerRadioRowEvent(r,l){var o=this.selectRadioRow,i=l.row,n=this.computeRadioOpts,{trigger:e,checkMethod:t}=n;if("manual"!==e&&(r.stopPropagation(),!t||t({$table:this,row:i}))){let e=i,t=o!==e;t?Fo(this,e):n.strict||(t=o===e)&&(e=null,this.clearRadioRow()),t&&this.dispatchEvent("radio-change",{oldValue:o,newValue:e,...l},r)}},triggerCurrentColumnEvent(e,t){var r=this.currentColumn,l=this.computeColumnOpts,o=this.computeCurrentColumnOpts,l=o.beforeSelectMethod||l.currentMethod,i=t.column,o=o.trigger;"manual"!==o&&(o=r!==i,!l||l({column:i,$table:this})?(this.setCurrentColumn(i),o&&this.dispatchEvent("current-column-change",{oldValue:r,newValue:i,...t},e)):this.dispatchEvent("current-column-disabled",t,e))},triggerCurrentRowEvent(e,t){var r=this.currentRow,l=this.computeRowOpts,o=this.computeCurrentRowOpts,l=o.beforeSelectMethod||l.currentMethod,i=t.row,o=o.trigger;"manual"!==o&&(o=r!==i,!l||l({row:i,$table:this})?(this.setCurrentRow(i),o&&(this.dispatchEvent("current-row-change",{oldValue:r,newValue:i,...t},e),this.dispatchEvent("current-change",{oldValue:r,newValue:i,...t},e))):this.dispatchEvent("current-row-disabled",t,e))},setCurrentRow(e){var{$el:t,rowOpts:r}=this;return this.clearCurrentRow(),this.currentRow=e,(r.isCurrent||this.highlightCurrentRow)&&t&&sr().arrayEach(t.querySelectorAll(`[rowid="${yr(this,e)}"]`),e=>fr(e,"row--current")),this.$nextTick()},isCheckedByRadioRow(e){var t=this.selectRadioRow;return!(!e||!t)&&this.eqRow(t,e)},isCheckedByRadioRowKey(e){var t=this.selectRadioRow;return!!t&&e===yr(this,t)},setRadioRow(e){return Fo(this,e,!0)},setRadioRowKey(e){var t=this.fullAllDataRowIdData,t=t[e];return t?Fo(this,t.row,!0):this.$nextTick()},clearCurrentRow(){var e=this.$el;return this.currentRow=null,this.hoverRow=null,e&&sr().arrayEach(e.querySelectorAll(".row--current"),e=>gr(e,"row--current")),this.$nextTick()},clearRadioRow(){return this.selectRadioRow=null,this.$nextTick()},getCurrentRecord(){return this.rowOpts.isCurrent||this.highlightCurrentRow?this.currentRow:null},getRadioRecord(e){var{selectRadioRow:t,fullDataRowIdData:r,afterFullRowMaps:l}=this;if(t){var o=yr(this,t);if(e){if(r[o])return t}else if(l[o])return t}return null},triggerHoverEvent(e,{row:t}){this.setHoverRow(t)},setHoverRow(e){var t=this.$el,r=yr(this,e);this.clearHoverRow(),t&&sr().arrayEach(t.querySelectorAll(`.vxe-body--row[rowid="${r}"]`),e=>fr(e,"row--hover")),this.hoverRow=e},clearHoverRow(){var e=this.$el;e&&sr().arrayEach(e.querySelectorAll(".vxe-body--row.row--hover"),e=>gr(e,"row--hover")),this.hoverRow=null},triggerHeaderCellClickEvent(e,t){var r=this,l=r,o=r._lastResizeTime,i=r.computeSortOpts,n=r.computeColumnOpts,a=r.computeCurrentColumnOpts,s=t.column,c=e.currentTarget,o=o&&o>Date.now()-300,d=Cr(e,c,"vxe-cell--sort").flag,u=Cr(e,c,"vxe-cell--filter").flag;return"cell"!==i.trigger||o||d||u||r.triggerSortEvent(e,s,fo(r,s)),r.dispatchEvent("header-cell-click",Object.assign({triggerResizable:o,triggerSort:d,triggerFilter:u,cell:c},t),e),!n.isCurrent&&!l.highlightCurrentColumn||a.trigger&&!["header","default"].includes(a.trigger)||r.triggerCurrentColumnEvent(e,t),r.$nextTick()},triggerHeaderCellDblclickEvent(e,t){this.emitEvent("header-cell-dblclick",Object.assign({cell:e.currentTarget},t),e)},getCurrentColumn(){return this.columnOpts.isCurrent||this.highlightCurrentColumn?this.currentColumn:null},setCurrentColumn(e){let t=this;var r=t,l=t,r=r.mouseConfig,o=t.computeMouseOpts;let i=r&&o.selected;r=Rr(t,e);return r&&(t.clearCurrentColumn(),l.currentColumn=r),t.$nextTick().then(()=>{i&&t.addCellSelectedClass()})},clearCurrentColumn(){return this.currentColumn=null,this.$nextTick()},triggerCellClickEvent(e,t){var r,l,o,i,n,a,s,c,d,u,p,h,m,g,f,v,x,b,C,w,y,E,T,R=this,{highlightCurrentRow:S,highlightCurrentColumn:O,editConfig:F}=R,{editStore:D,isDragResize:I}=R;I||(I=R.computeExpandOpts,r=R.computeEditOpts,l=R.computeTreeOpts,o=R.computeRadioOpts,i=R.computeCheckboxOpts,n=R.computeKeyboardOpts,a=R.computeAggregateOpts,s=R.computeRowOpts,c=R.computeColumnOpts,d=R.computeCurrentColumnOpts,{actived:D,focused:u}=D,{row:p,column:h}=t,{type:f,treeNode:m,rowGroupNode:g}=h,v="checkbox"===f,x="expand"===f,b=e.currentTarget,C=(f="radio"===f)&&Cr(e,b,"vxe-cell--radio").flag,w=v&&Cr(e,b,"vxe-cell--checkbox").flag,y=m&&Cr(e,b,"vxe-cell--tree-btn").flag,E=x&&Cr(e,b,"vxe-table--expanded").flag,T=x&&Cr(e,b,"vxe-row-group--node-btn").flag,t=Object.assign({cell:b,triggerRadio:C,triggerCheckbox:w,triggerTreeNode:y,triggerExpandNode:E},t),!w&&!C&&(!E&&("row"===I.trigger||x&&"cell"===I.trigger)&&R.triggerRowExpandEvent(e,t),("row"===l.trigger||m&&"cell"===l.trigger)&&R.triggerTreeExpandEvent(e,t),"row"===a.trigger||g&&"cell"===a.trigger)&&R.triggerRowGroupExpandEvent(e,t),y||(E||T||(!s.isCurrent&&!S||w||C||R.triggerCurrentRowEvent(e,t),!c.isCurrent&&!O||d.trigger&&!["cell","default"].includes(d.trigger)||w||C||R.triggerCurrentColumnEvent(e,t),!C&&("row"===o.trigger||f&&"cell"===o.trigger)&&R.triggerRadioRowEvent(e,t),!w&&("row"===i.trigger||v&&"cell"===i.trigger)&&R.handleToggleCheckRowEvent(e,t)),cr(F)&&(n.arrowCursorLock&&e&&"cell"===r.mode&&e.target&&/^input|textarea$/i.test(e.target.tagName)&&(u.column=h,u.row=p),"manual"===r.trigger?D.args&&D.row===p&&h!==D.column&&So(R,e,t):D.args&&p===D.row&&h===D.column||("click"===r.trigger||"dblclick"===r.trigger&&"row"===r.mode&&D.row===p)&&So(R,e,t))),cr(F)&&"dblclick"===r.trigger&&D.row&&D.column&&("row"===r.mode?R.eqRow(D.row,p)||R.handleClearEdit(e):"cell"!==r.mode||R.eqRow(D.row,p)&&D.column.id===h.id||R.handleClearEdit(e)),R.dispatchEvent("cell-click",t,e))},triggerCellDblclickEvent(e,t){let r=this;var l,o=r.editConfig,{editStore:i,isDragResize:n}=r;n||(n=r.computeEditOpts,i=i.actived,l=e.currentTarget,t=Object.assign({cell:l},t),!cr(o)||"dblclick"!==n.trigger||i.args&&e.currentTarget===i.args.cell||("row"===n.mode?Ro(r,"blur").catch(e=>e).then(()=>{r.handleEdit(t,e).then(()=>Ro(r,"change")).catch(e=>e)}):"cell"===n.mode&&r.handleEdit(t,e).then(()=>Ro(r,"change")).catch(e=>e)),this.emitEvent("cell-dblclick",t,e))},handleColumnSortEvent(e,t){var r=this.mouseConfig,l=this.computeMouseOpts,{field:o,sortable:i,order:n}=t;i&&(i={$table:this,$event:e,column:t,field:o,property:o,order:n,sortList:this.getSortColumns(),sortTime:t.sortTime},r&&l.area&&this.handleSortEvent&&this.handleSortEvent(e,i),n||this.dispatchEvent("clear-sort",i,e),this.dispatchEvent("sort-change",i,e))},triggerSortEvent(e,t,r){var{multiple:l,allowClear:o}=this.computeSortOpts,{field:i,sortable:n}=t;(n||t.remoteSort)&&(r&&t.order!==r?this.sort({field:i,order:r}):o&&this.clearSort(l?t:null),this.handleColumnSortEvent(e,t))},handleCellRuleUpdateStatus(e,t,l){let o=this;let i=o.validStore,{row:n,column:a}=t;if(o.hasCellRules&&o.hasCellRules(e,n,a)){let r=o.getCellElement(n,a);if(r){let t=!sr().isUndefined(l);return o.validCellRules(e,n,a,l).then(()=>{t&&i.visible&&Or(n,a,l),o.clearValidate(n,a)}).catch(({rule:e})=>{t&&Or(n,a,l),o.showValidTooltip({rule:e,row:n,column:a,cell:r})})}}return o.$nextTick()},triggerHeaderCellMousedownEvent(e,t){var r=this,l=r.mouseConfig,o=r.computeMouseOpts,i=r.computeColumnOpts,{trigger:n,isCrossDrag:a,isPeerDrag:s,disabledMethod:c}=r.computeColumnDragOpts,d=e.currentTarget,u=d&&d.tagName&&"input"===d.tagName.toLowerCase(),p=Cr(e,d,"vxe-cell--checkbox").flag,h=Cr(e,d,"vxe-cell--sort").flag,m=Cr(e,d,"vxe-cell--filter").flag;let g=!1;i=i.drag&&"cell"===n;u||p||h||m||(n=t.column,!i)||n.fixed||!a&&!s&&n.parentId||c&&c(t)||(g=!0,r.handleHeaderCellDragMousedownEvent(e,t)),!g&&l&&o.area&&r.handleHeaderCellAreaEvent&&r.handleHeaderCellAreaEvent(e,Object.assign({cell:d,triggerSort:h,triggerFilter:m},t)),r.focus(),r.closeMenu&&r.closeMenu()},triggerCellMousedownEvent(e,t){var r=t.column,{type:l,treeNode:o}=r,i="radio"===l,n="checkbox"===l,l="expand"===l,a=this.computeRowOpts,{trigger:s,isCrossDrag:c,isPeerDrag:d,disabledMethod:u}=this.computeRowDragOpts,p=e.currentTarget,h=(t.cell=p)&&p.tagName&&"input"===p.tagName.toLowerCase(),i=i&&Cr(e,p,"vxe-cell--radio").flag,n=n&&Cr(e,p,"vxe-cell--checkbox").flag,o=o&&Cr(e,p,"vxe-cell--tree-btn").flag,l=l&&Cr(e,p,"vxe-table--expanded").flag;let m=!1,g=(a.drag&&(m="row"===s||r.dragSort&&"cell"===s),!1);h||i||n||o||l||!m||!c&&!d&&t.level||u&&u(t)||(g=!0,this.handleCellDragMousedownEvent(e,t)),!g&&this.handleCellMousedownEvent&&this.handleCellMousedownEvent(e,t),this.focus(),this.closeFilter(),this.closeMenu&&this.closeMenu()},triggerCellMouseupEvent(){zo(this)},handleRowDragDragstartEvent(e){e.dataTransfer&&e.dataTransfer.setDragImage(wl(),0,0)},handleRowDragSwapEvent(s,e,c,d,u,t){let p=this;var r=p;let h=p,m=p,{treeConfig:g,dragConfig:l}=r;r=p.computeRowDragOpts;let{afterFullData:f,tableFullData:v,fullAllDataRowIdData:x}=m,{isPeerDrag:b,isCrossDrag:C,isSelfToChildDrag:w,dragEndMethod:o,dragToChildMethod:i}=r;r=p.computeTreeOpts;let{transform:y,rowField:E,mapChildrenField:T,parentField:R}=r,S=r.children||r.childrenField;r=o||(l?l.dragEndMethod:null);let O="bottom"===u?1:0,F={status:!1};if(d&&c&&d!==c){var n={oldRow:c,newRow:d,dragRow:c,dragPos:u,dragToChild:!!t,offsetIndex:O};let a=w&&i?i(n):t;return Promise.resolve(!r||r(n)).then(r=>{if(!r)return F;let e=-1,t=-1;if(g){if(y){var r=yr(p,c),r=x[r],l=yr(p,d),o=x[l];if(r&&o){var i=r.level,n=o.level;let t={},e=(sr().eachTree([c],e=>{t[yr(p,e)]=e},{children:T}),!1);if(i&&n)if(b&&!C){if(r.row[R]!==o.row[R])return F}else{if(!C)return F;if(t[l]&&(e=!0,!C||!w))return nr.VxeUI.modal&&nr.VxeUI.modal.message({status:"error",content:_("vxe.error.treeDragChild")}),F}else if(i){if(!C)return F}else if(n){if(!C)return F;if(t[l]&&(e=!0,!C||!w))return nr.VxeUI.modal&&nr.VxeUI.modal.message({status:"error",content:_("vxe.error.treeDragChild")}),F}r=sr().toTreeArray(m.afterTreeFullData,{key:E,parentKey:R,children:T}),o=p.findRowIndexOf(r,c),i=(r.splice(o,1),p.findRowIndexOf(r,d)),n=i+O;r.splice(n,0,c),e&&C&&w&&sr().each(c[S],e=>{e[R]=c[R]}),c[R]=a?d[E]:d[R],m.tableFullTreeData=sr().toArrayTree(r,{key:E,parentKey:R,children:S,mapChildren:T})}}}else{e=p.findRowIndexOf(f,c);l=p.findRowIndexOf(v,c),o=(f.splice(e,1),v.splice(l,1),p.findRowIndexOf(f,d)),i=p.findRowIndexOf(v,d),n=(t=o+O,i+O);f.splice(t,0,c),v.splice(n,0,c)}return h.isDragRowMove=!0,p.handleTableData(g&&y),p.cacheRowMap(!1),wo(p),g&&y||To(p),p.checkSelectionStatus(),h.scrollYLoad&&p.updateScrollYSpace(),s&&p.dispatchEvent("row-dragend",{oldRow:c,newRow:d,dragRow:c,dragPos:u,dragToChild:a,offsetIndex:O,_index:{newIndex:t,oldIndex:e}},s),p.$nextTick().then(()=>{p.updateCellAreas(),p.recalculate()}).then(()=>({status:!0}))}).catch(()=>F)}return Promise.resolve(F)},handleRowDragDragendEvent(e){var t=this;let r=t;var l=t,o=t.treeConfig,{fullAllDataRowIdData:i,prevDragToChild:n}=l,a=r.dragRow,s=t.computeTreeOpts,c=s.lazy,s=s.hasChild||s.hasChildField,{prevDragRow:d,prevDragPos:u}=l;o&&c&&n&&(o=i[yr(t,d)],d[s])&&(!o||!o.treeLoaded)||t.handleRowDragSwapEvent(e,!0,a,d,u,n),Wo(t),No(t),l.prevDragToChild=!1,r.dragRow=null,r.dragCol=null,setTimeout(()=>{r.isDragRowMove=!1},500)},handleRowDragDragoverEvent(r){var l=this,o=l,i=l,n=l.treeConfig,a=o.fullAllDataRowIdData;let e=i.dragRow;var s=l.computeTreeOpts,{lazy:c,transform:d,parentField:u}=s,s=s.hasChild||s.hasChildField,{isPeerDrag:p,isCrossDrag:h,isToChildDrag:m}=l.computeRowDragOpts;if(e){var g=Rl(r),f=r.currentTarget;let e=f.getAttribute("rowid")||"";var v=a[e];if(v){var x=v.row;let e=yr(l,x);a=a[e];r.preventDefault();let t=i.dragRow;i=r.clientY-f.getBoundingClientRect().y<f.clientHeight/2?"top":"bottom";o.prevDragToChild=!!(n&&d&&m&&g),o.prevDragRow=x,o.prevDragPos=i,l.eqRow(t,x)||g&&n&&c&&x[s]&&a&&!a.treeLoaded||!h&&n&&d&&(p?t[u]!==x[u]:v.level)?Uo(l,r,f,null,!1,i):(Uo(l,r,f,null,!0,i),l.dispatchEvent("row-dragover",{oldRow:t,targetRow:x,dragPos:i},r))}}else r.preventDefault()},handleCellDragMousedownEvent(e,t){var r=this,l=(e.stopPropagation(),this).dragConfig,{trigger:o,dragStartMethod:i}=this.computeRowDragOpts,n=t.row,a=e.currentTarget,o="cell"===o||"row"===o?a:a.parentElement?.parentElement,a=o.parentElement,i=i||(l?l.dragStartMethod:null);if(r.isDragRowMove=!1,No(this),i&&!i(t))a.draggable=!1,r.dragRow=null,r.dragCol=null,Wo(this);else{r.dragRow=n,r.dragCol=null,a.draggable=!0;l=this,i=n,r=l.$el;if(r){l=yr(l,i);sr().arrayEach(r.querySelectorAll(`[rowid="${l}"]`),e=>{fr(e,"row--drag-origin")})}{a=this;n=o;i=a,r=a.dragConfig,l=i.dragRow,o=(o=a.computeRowDragOpts.tooltipMethod)||(r?r.rowTooltipMethod:null);let e="";e=o?""+(o({$table:a,row:l})||""):_("vxe.table.dragTip",[n.textContent||""]),i.dragTipText=e}this.dispatchEvent("row-dragstart",t,e)}},handleCellDragMouseupEvent(){zo(this)},handleHeaderCellDragDragstartEvent(e){e.dataTransfer&&e.dataTransfer.setDragImage(wl(),0,0)},handleColDragSwapColumn(){let e=this;li(e),ni(e,!1).then(()=>{e.updateCellAreas(),e.saveCustomStore("update:sort")})},handleColDragSwapEvent(u,p,e,t,h,r){let m=this;var l=m;let g=m;var o=m;let f=l.mouseConfig,{isPeerDrag:v,isCrossDrag:x,isSelfToChildDrag:b,isToChildDrag:C,dragEndMethod:i,dragToChildMethod:n}=m.computeColumnDragOpts,w=o.collectColumn,y="right"===h?1:0,E={status:!1};if(t&&e&&t!==e){let s=e,c=t;l={oldColumn:s,newColumn:c,dragColumn:s,dragPos:h,dragToChild:!!r,offsetIndex:y};let d=b&&n?n(l):r;return Promise.resolve(!i||i(l)).then(e=>{if(!e)return E;let t=-1,r=-1,l={},o=(sr().eachTree([s],e=>{l[e.id]=e}),!1);if(s.parentId&&c.parentId)if(v&&!x){if(s.parentId!==c.parentId)return E}else{if(!x)return E;if(l[c.id]&&(o=!0,!x||!b))return nr.VxeUI.modal&&nr.VxeUI.modal.message({status:"error",content:_("vxe.error.treeDragChild")}),E}else if(s.parentId){if(!x)return E}else if(c.parentId){if(!x)return E;if(l[c.id]&&(o=!0,!x||!b))return nr.VxeUI.modal&&nr.VxeUI.modal.message({status:"error",content:_("vxe.error.treeDragChild")}),E}var i,n,a,e=sr().findTree(w,e=>e.id===s.id),e=(o&&x&&b?e&&({items:i,index:a}=e,(n=s.children||[]).forEach(e=>{e.parentId=s.parentId}),i.splice(a,1,...n),s.children=[]):e&&({items:i,index:a,parent:n}=e,i.splice(a,1),n||(t=a)),sr().findTree(w,e=>e.id===c.id));return e&&({items:i,index:n,parent:a}=e,x&&C&&d?(s.parentId=c.id,c.children=(c.children||[]).concat([s])):(s.parentId=c.parentId,i.splice(n+y,0,s)),a||(r=n)),sr().eachTree(w,(e,t,r,l,o)=>{o||(e.renderSortNumber=t+1)}),g.isDragColMove=!0,f&&(m.clearSelected&&m.clearSelected(),m.clearCellAreas)&&(m.clearCellAreas(),m.clearCopyCellArea()),u&&m.dispatchEvent("column-dragend",{oldColumn:s,newColumn:c,dragColumn:s,dragPos:h,dragToChild:d,offsetIndex:y,_index:{newIndex:r,oldIndex:t}},u),p&&m.handleColDragSwapColumn(),{status:!0}}).catch(()=>E)}return Promise.resolve(E)},handleHeaderCellDragDragendEvent(e){let t=this,r=t;var l=t,o=r.dragCol,{prevDragCol:i,prevDragPos:n,prevDragToChild:a}=l;t.handleColDragSwapEvent(e,!0,o,i,n,a),Wo(t),jo(t),l.prevDragToChild=!1,r.dragRow=null,r.dragCol=null,setTimeout(()=>{r.isDragColMove=!1,t.recalculate().then(()=>{oi(t)})},500)},handleHeaderCellDragDragoverEvent(e){var t,r,l,o,i,n=this,a=n,s=n.dragCol,{isToChildDrag:c,isPeerDrag:d,isCrossDrag:u}=n.computeColumnDragOpts;s?(o=Rl(e),i=(r=e.currentTarget).getAttribute("colid"),(i=n.getColumnById(i))&&(e.preventDefault(),t=e.clientX,l=t-r.getBoundingClientRect().x<r.clientWidth/2?"left":"right",a.prevDragToChild=!!(u&&c&&o),a.prevDragCol=i,a.prevDragPos=l,i.fixed||s&&s.id===i.id||!u&&(d?s.parentId!==i.parentId:i.parentId)?Uo(n,e,null,r,!1,l):(Uo(n,e,null,r,!0,l),n.dispatchEvent("column-dragover",{oldColumn:s,targetColumn:i,dragPos:l},e),(c=n.$refs.refElem)&&(o=n.$refs.refScrollXHandleElem,u=(a=n.$refs.refTableBody)?a.$el:null,d=o||u)&&(r=c.getBoundingClientRect(),s=c.clientWidth,l=(i=n.$refs.refLeftContainer)?i.clientWidth:0,o=(a=n.$refs.refRightContainer)?a.clientWidth:0,u=t-(r.x+l),c=r.x+s-o-t,0<u&&u<=28?(i=Math.floor(s/(14<u?240:120)),d.scrollLeft-=i*(28-u)):0<c&&c<=28&&(n=Math.floor(s/(14<c?240:120)),d.scrollLeft+=n*(28-c)))))):e.preventDefault()},handleHeaderCellDragMousedownEvent(e,t){var r=this,l=(e.stopPropagation(),this.computeColumnDragOpts),{trigger:l,dragStartMethod:o}=l,i=t.column,n=e.currentTarget,l="cell"===l?n:n.parentElement?.parentElement;if(r.isDragColMove=!1,jo(this),o&&!o(t))l.draggable=!1,r.dragRow=null,r.dragCol=null,Wo(this);else{r.dragCol=i,r.dragRow=null,l.draggable=!0;n=this,o=i;if(n=n.$el){let t=[];sr().eachTree([o],e=>{t.push(`[colid="${e.id}"]`)});sr().arrayEach(n.querySelectorAll(t.join(",")),e=>{fr(e,"col--drag-origin")})}{r=this;i=l;o=r,n=o.dragCol,l=r.computeColumnDragOpts.tooltipMethod;let e="";e=l?""+(l({$table:r,column:n})||""):_("vxe.table.dragTip",[i.textContent||""]),o.dragTipText=e}this.dispatchEvent("column-dragstart",t,e)}},handleHeaderCellDragMouseupEvent(){var e=this;jo(this),Wo(this),e.dragRow=null,e.dragCol=null,e.isDragColMove=!1},setPendingRow(e,t){var r=this;let l=Er(this).handleGetRowId,o=this.pendingRowMaps;return e&&!sr().isArray(e)&&(e=[e]),t?e.forEach(e=>{var t=l(e);t&&!o[t]&&(o[t]=e)}):e.forEach(e=>{e=l(e);e&&o[e]&&delete o[e]}),r.pendingRowFlag++,this.$nextTick()},togglePendingRow(e){var t=this;let r=Er(this).handleGetRowId,l=this.pendingRowMaps;return(e=e&&!sr().isArray(e)?[e]:e).forEach(e=>{var t=r(e);t&&(l[t]?delete l[t]:l[t]=e)}),t.pendingRowFlag++,this.$nextTick()},hasPendingByRow(e){return this.isPendingByRow(e)},isPendingByRow(e){var t=this.pendingRowMaps;return!!t[yr(this,e)]},getPendingRecords(){let{fullAllDataRowIdData:r,pendingRowMaps:e}=this,l=[];return sr().each(e,(e,t)=>{r[t]&&l.push(e)}),l},clearPendingRow(){var e=this;return this.pendingRowMaps={},e.pendingRowFlag++,this.$nextTick()},sort(e,t){let n=this;let{multiple:r,remote:l,orders:a}=n.computeSortOpts;if(e&&sr().isString(e)&&(e=[{field:e,order:t}]),(e=sr().isArray(e)?e:[e]).length){let i;return r||_o(n),(r?e:[e[0]]).forEach((e,t)=>{let{field:r,order:l}=e,o=r;(o=sr().isString(r)?n.getColumnByField(r):o)&&(o.sortable||o.remoteSort)&&(i=i||o,a&&-1===a.indexOf(l)&&(l=fo(n,o)),o.order!==l&&(o.order=l),o.sortTime=Date.now()+t)}),(!l||i&&i.remoteSort)&&n.handleTableData(!0),n.$nextTick().then(()=>(Mr(n),n.updateCellAreas(),kr(n)))}return n.$nextTick()},setSort(e,t){return Lo(this,new Event("click"),e,t)},setSortByEvent(e,t,r){return Lo(this,e,t,r)},clearSort(e){let t=this;var r=t.computeSortOpts;return e?(e=Rr(t,e))&&(e.order=null):_o(t),r.remote||t.handleTableData(!0),t.$nextTick().then(()=>(Mr(t),kr(t)))},clearSortByEvent(e,t){let r=this;var l=r.tableFullColumn,o=r.computeSortOpts;let i=[],n=null;return e&&(t?(n=Rr(r,t))&&(n.order=null):l.forEach(e=>{e.order&&(e.order=null,i.push(e))}),o.remote||r.handleTableData(!0),i.length?(t={$table:r,$event:e,cols:i,sortList:[]},r.dispatchEvent("clear-all-sort",t,e)):n&&r.handleColumnSortEvent(e,n)),r.$nextTick().then(()=>(Mr(r),kr(r)))},getSortColumn(){return M("vxe.error.delFunc",["getSortColumn","getSortColumns"]),sr().find(this.tableFullColumn,e=>(e.sortable||e.remoteSort)&&e.order)},isSort(e){return e?(e=Rr(this,e))&&e.sortable&&!!e.order:0<this.getSortColumns().length},getSortColumns(){var{multiple:e,chronological:t}=this.sortOpts;let l=[];return this.tableFullColumn.forEach(e=>{var{field:t,order:r}=e;(e.sortable||e.remoteSort)&&r&&l.push({column:e,field:t,property:t,order:r,sortTime:e.sortTime})}),e&&t&&1<l.length?sr().orderBy(l,"sortTime"):l},setFilterByEvent(e,t,r,l){t=Rr(this,t);return t&&t.filters&&(t.filters=Yl(r||[]),l)?this.handleColumnConfirmFilter(t,e):this.$nextTick()},closeFilter(){let e=this;var t=e.filterStore,{column:r,visible:l}=t;return t.isAllSelected=!1,t.isIndeterminate=!1,t.options=[],t.visible=!1,l&&e.dispatchEvent("filter-visible",{column:r,field:r.field,property:r.field,filterList:()=>e.getCheckedFilters(),visible:!1},null),e.$nextTick()},isActiveFilterByColumn(e){e=Rr(this,e);return e?e.filters&&e.filters.some(e=>e.checked):0<this.getCheckedFilters().length},isFilter(e){return this.isActiveFilterByColumn(e)},clearFilterByEvent(e,t){let r=this;var l=r.filterStore,o=r.tableFullColumn,i=r.computeFilterOpts;let n=[],a=null;return t?(a=Rr(r,t))&&r.handleClearFilter(a):o.forEach(e=>{e.filters&&(n.push(e),r.handleClearFilter(e))}),t&&a===l.column||Object.assign(l,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),i.remote||r.updateData(),n.length?(o={$table:r,$event:e,cols:n,filterList:[]},r.dispatchEvent("clear-all-filter",o,e)):a&&r.dispatchEvent("clear-filter",{filterList:()=>r.getCheckedFilters()},e),r.$nextTick()},isRowExpandLoaded(e){var t=this.fullAllDataRowIdData,t=t[yr(this,e)];return t&&!!t.expandLoaded},clearRowExpandLoaded(e){var t=this,{fullAllDataRowIdData:r,rowExpandLazyLoadedMaps:l}=this,o=this.computeExpandOpts.lazy,e=yr(this,e),r=r[e];return o&&r&&(r.expandLoaded=!1,delete l[e]),t.rowExpandedFlag++,this.$nextTick()},reloadRowExpand(e){let t=this;var r=t.rowExpandLazyLoadedMaps,l=t.computeExpandOpts.lazy,o=yr(this,e);return l&&!r[o]&&t.clearRowExpandLoaded(e).then(()=>Ae(t,e)),t.$nextTick()},reloadExpandContent(e){return M("vxe.error.delFunc",["reloadExpandContent","reloadRowExpand"]),this.reloadRowExpand(e)},triggerRowExpandEvent(e,t){var r=this,l=r.expandColumn,o=r.rowExpandLazyLoadedMaps,t=t.row,{lazy:i,trigger:n}=r.computeExpandOpts;"manual"===n||(e.stopPropagation(),n=yr(r,t),i&&o[n])||(i=!r.isRowExpandByRow(t),o=l?r.getColumnIndex(l):-1,n=l?r.getVMColumnIndex(l):-1,r.setRowExpand(t,i),r.dispatchEvent("toggle-row-expand",{expanded:i,column:l,columnIndex:o,$columnIndex:n,row:t,rowIndex:r.getRowIndex(t),$rowIndex:r.getVMRowIndex(t)},e))},toggleRowExpand(e){return this.setRowExpand(e,!this.isRowExpandByRow(e))},setAllRowExpand(e){var{treeConfig:t,treeOpts:r,tableFullData:l,tableFullTreeData:o}=this,r=r.children||r.childrenField;let i=[];return t?sr().eachTree(o,e=>{i.push(e)},{children:r}):i=l,this.setRowExpand(i,e)},setRowExpand(e,t){let l=this;var r=l,o=l;let i=r.expandColumn,{fullAllDataRowIdData:n,rowExpandedMaps:a,rowExpandLazyLoadedMaps:s}=o,c=Er(l).handleGetRowId,{reserve:d,lazy:u,accordion:p,toggleMethod:h}=l.computeExpandOpts,m=[],g=i?l.getColumnIndex(i):-1,f=i?l.getVMColumnIndex(i):-1;return e&&(sr().isArray(e)||(e=[e]),p&&(a={},o.rowExpandedMaps=a,e=e.slice(e.length-1,e.length)),o=h?e.filter(e=>h({$table:l,expanded:t,column:i,columnIndex:g,$columnIndex:f,row:e,rowIndex:l.getRowIndex(e),$rowIndex:l.getVMRowIndex(e)})):e,t?o.forEach(e=>{var t,r=c(e);a[r]||(t=n[r],u&&!t.expandLoaded&&!s[r]?m.push(Ae(l,e)):a[r]=e)}):o.forEach(e=>{e=c(e);a[e]&&delete a[e]}),d)&&o.forEach(e=>Xo(l,e,t)),r.rowExpandedFlag++,Promise.all(m).then(()=>l.$nextTick()).then(()=>l.recalculate(!0)).then(()=>(Mr(l),gi(l),fi(l),l.updateCellAreas()))},isRowExpandByRow(e){var t=this.rowExpandedFlag,r=this.rowExpandedMaps,e=yr(this,e);return!!t&&!!r[e]},isExpandByRow(e){return M("vxe.error.delFunc",["isExpandByRow","isRowExpandByRow"]),this.isRowExpandByRow(e)},clearRowExpand(){let t=this;var e=t,r=t,l=r.tableFullData,o=t.computeExpandOpts.reserve;let i=t.getRowExpandRecords();return r.rowExpandedMaps={},e.rowExpandedFlag++,o&&l.forEach(e=>Xo(t,e,!1)),t.$nextTick().then(()=>{if(i.length)return t.recalculate(!0)}).then(()=>(Mr(t),gi(t),fi(t),t.updateCellAreas()))},clearRowExpandReserve(){return this.rowExpandedReserveRowMap={},this.$nextTick()},getRowExpandRecords(){let t=[];return sr().each(this.rowExpandedMaps,e=>{e&&t.push(e)}),t},setRowGroups(e){var{aggregateConfig:t,rowGroupConfig:r}=this;return t||r?e?(_e(this,(sr().isArray(e)?e:[e]).map(e=>sr().isString(e)?e:e.field)),Jo(this,this.tableSynchData,!0)):this.$nextTick():(A("vxe.error.reqProp",["aggregate-config"]),this.$nextTick())},clearRowGroups(){var{aggregateConfig:e,rowGroupConfig:t}=this;return e||t?(_e(this,[]),Jo(this,this.tableSynchData,!0)):(A("vxe.error.reqProp",["aggregate-config"]),this.$nextTick())},isRowGroupRecord(e){return M("vxe.error.delFunc",["isRowGroupRecord","isAggregateRecord"]),this.isAggregateRecord(e)},isRowGroupExpandByRow(e){return M("vxe.error.delFunc",["isRowGroupExpandByRow","isAggregateExpandByRow"]),this.isAggregateExpandByRow(e)},isAggregateRecord(e){var t=this.isRowGroupStatus;return t&&e.isAggregate},isAggregateExpandByRow(e){var t=this.rowGroupExpandedFlag,r=this.rowGroupExpandedMaps;return!!t&&!!r[yr(this,e)]},setRowGroupExpand(e,t){return e?Eo(this,e=sr().isArray(e)?e:[e],t):this.$nextTick()},setAllRowGroupExpand(e){let t=this;var r=t,l=t,o=l.tableFullGroupData;let i=t.computeAggregateOpts.mapChildrenField,n={};return e&&i&&sr().eachTree(o,e=>{e[i]&&e[i].length&&(n[yr(t,e)]=e)},{children:i}),l.rowGroupExpandedMaps=n,$r(t),r.rowGroupExpandedFlag++,t.handleTableData()},clearRowGroupExpand(){var e=this;return this.rowGroupExpandedMaps={},$r(this),e.rowGroupExpandedFlag++,this.handleTableData()},getTreeExpandRecords(){let t=[];return sr().each(this.treeExpandedMaps,e=>{e&&t.push(e)}),t},getTreeStatus(){return this.treeConfig?{config:this.treeOpts,rowExpandeds:this.getTreeExpandRecords()}:null},isTreeExpandLoaded(e){var t=this.fullAllDataRowIdData,t=t[yr(this,e)];return t&&!!t.treeLoaded},clearTreeExpandLoaded(e){let r=this;var t=r,l=r;let{fullAllDataRowIdData:o,treeExpandedMaps:i}=l;var n=r.computeTreeOpts.transform;return e?(e=sr().isArray(e)?e:[e]).forEach(e=>{var e=yr(r,e),t=o[e];t&&(t.treeLoaded=!1,i[e])&&delete i[e]}):sr().each(o,e=>{e.treeLoaded=!1}),l.treeExpandedMaps={},n&&($r(r),r.handleTableData()),t.treeExpandedFlag++,r.$nextTick()},reloadTreeExpand(e){let t=this,r=t;var l=t.treeExpandLazyLoadedMaps,o=t.computeTreeOpts;let{transform:i,lazy:n}=o;var o=o.hasChild||o.hasChildField,a=yr(t,e);return n&&e[o]&&!l[a]?t.clearTreeExpandLoaded(e).then(()=>ke(t,e)).then(()=>{i&&($r(t),t.handleTableData()),r.treeExpandedFlag++}).then(()=>t.recalculate()):t.$nextTick()},reloadTreeChilds(e){return M("vxe.error.delFunc",["reloadTreeChilds","reloadTreeExpand"]),this.reloadTreeExpand(e)},triggerRowGroupExpandEvent(e,t){var r,l=this.rowGroupExpandedMaps,{row:t,column:o}=t,i=this.computeAggregateOpts.trigger;"manual"!==i&&(e.stopPropagation(),i=!l[yr(this,t)],l=this.getColumnIndex(o),r=this.getVMColumnIndex(o),this.setRowGroupExpand(t,i),this.dispatchEvent("toggle-row-group-expand",{expanded:i,column:o,columnIndex:l,$columnIndex:r,row:t},e))},triggerTreeExpandEvent(e,t){let r=this,l=r;var{treeExpandLazyLoadedMaps:o,treeEATime:i}=l,n=r.computeTreeOpts;let{row:a,column:s}=t,{lazy:c,trigger:d,accordion:u}=n;"manual"===d||(e.stopPropagation(),t=yr(this,a),c&&o[t])||(n=!r.isTreeExpandByRow(a),o=r.getColumnIndex(s),t=r.getVMColumnIndex(s),i&&clearTimeout(i),r.setTreeExpand(a,n).then(()=>{u&&(l.treeEATime=setTimeout(()=>{l.treeEATime=void 0,r.scrollToRow(a)},30))}),r.dispatchEvent("toggle-tree-expand",{expanded:n,column:s,columnIndex:o,$columnIndex:t,row:a},e))},toggleTreeExpand(e){return this.setTreeExpand(e,!this.isTreeExpandByRow(e))},setAllTreeExpand(e){let t=this,r=t;var l=t.tableFullData,o=t.computeTreeOpts;let{transform:i,lazy:n}=o,a=o.children||o.childrenField,s=[];return sr().eachTree(l,e=>{var t=e[a];(n||t&&t.length)&&s.push(e)},{children:a}),t.setTreeExpand(s,e).then(()=>{if(i)return $r(t),r.treeExpandedFlag++,t.recalculate()})},setTreeExpand(t,r){var l=this.treeOpts,l=l.transform;if(t&&(t=sr().isArray(t)?t:[t]).length){if(l){var o=this;l=t;var i=r;let e=o;return yo(o,l,i).then(()=>($r(o),o.handleTableData(),e.treeExpandedFlag++,To(o),o.$nextTick())).then(()=>o.recalculate(!0)).then(()=>{setTimeout(()=>{o.updateCellAreas()},30)});return}return yo(this,t,r)}return this.$nextTick()},isTreeExpandByRow(e){var t=this.treeExpandedFlag,r=this.treeExpandedMaps;return!!t&&!!r[yr(this,e)]},clearTreeExpand(){let t=this,e=t;var r=t,l=r.tableFullTreeData,o=t.computeTreeOpts,i=o.children||o.childrenField;let{transform:n,reserve:a}=o,s=t.getTreeExpandRecords();return r.treeExpandedMaps={},a&&sr().eachTree(l,e=>Me(t,e,!1),{children:i}),t.handleTableData().then(()=>{n&&($r(t),t.handleTableData()),e.treeExpandedFlag++}).then(()=>{s.length&&t.recalculate()})},clearTreeExpandReserve(){return this.treeExpandedReserveRowMap={},this.$nextTick()},getScroll(){var{scrollXLoad:e,scrollYLoad:t}=this,r=this.elemStore,r=Fr(r["main-body-scroll"]);return{virtualX:e,virtualY:t,scrollTop:r?r.scrollTop:0,scrollLeft:r?r.scrollLeft:0}},handleScrollEvent(c,d,u,p,h,m){var g=this,f=g,v=g,x=g.highlightHoverRow,{lastScrollLeft:b,lastScrollTop:C}=v,w=g.$refs.refScrollXHandleElem,y=g.$refs.refScrollYHandleElem;if(w&&y){var E=g.computeRowOpts,T=g.$refs.refValidTooltip,R=g.$refs.refTooltip,S=y.clientHeight,O=w.clientWidth,y=y.scrollHeight,w=w.scrollWidth;let e=!1,t=!1,r=!1,l=!1,o="",i=!1,n=!1,a=!1,s=!1;u&&(F=g.computeScrollXThreshold,(r=h<=0)||(l=w<=h+O),b<h?(o="right",w-F<=h+O&&(s=!0)):(o="left",h<=F&&(a=!0)),g.checkScrolling(),v.lastScrollLeft=h),d&&(b=g.computeScrollYThreshold,(e=p<=0)||(t=y<=p+S),C<p?(o="bottom",y-b<=p+S&&(n=!0)):(o="top",p<=b&&(i=!0)),v.lastScrollTop=p),f.isDragColMove=!1,f.isDragRowMove=!1,f.lastScrollTime=Date.now();var F={scrollTop:p,scrollLeft:h,bodyHeight:S,bodyWidth:O,scrollHeight:y,scrollWidth:w,isX:u,isY:d,isTop:e,isBottom:t,isLeft:r,isRight:l,direction:o,...m};gi(g);{var D=g;var I=u;var $=d;let e=D,{scrollXLoad:t,scrollYLoad:r,isAllOverflow:l}=D;C=e.lcsTimeout;C&&clearTimeout(C),e.lcsTimeout=setTimeout(()=>{e.lcsRunTime=Date.now(),e.lcsTimeout=void 0,e.intoRunScroll=!1,e.inVirtualScroll=!1,e.inWheelScroll=!1,e.inHeaderScroll=!1,e.inBodyScroll=!1,e.inFooterScroll=!1,e.scrollRenderType="",l||(k(D),Mr(D)),I&&t&&D.updateScrollXData(),$&&r&&D.updateScrollYData().then(()=>{l||(k(D),Mr(D)),D.updateScrollYSpace()}),D.updateCellAreas()},200)}u&&g.closeFilter(),(E.isHover||x)&&g.clearHoverRow(),T&&T.reactData.visible&&T.close(),R&&R.reactData.visible&&R.close(),(n||i||s||a)&&g.dispatchEvent("scroll-boundary",F,c),g.dispatchEvent("scroll",F,c)}},triggerScrollXEvent(){if(this.computeVirtualXOpts.immediate)oi(this);else{var t=this;let e=t;var{lxTimeout:r,lxRunTime:l,scrollXStore:o}=e,o=26<(o=o.visibleSize)?26:16<o?14:6;r&&clearTimeout(r),(!l||l+o<Date.now())&&(e.lxRunTime=Date.now(),oi(t)),e.lxTimeout=setTimeout(()=>{e.lxTimeout=void 0,e.lxRunTime=void 0,oi(t)},o)}},triggerScrollYEvent(){if(this.computeVirtualYOpts.immediate)si(this);else{var t=this;let e=t;var{lyTimeout:r,lyRunTime:l,scrollYStore:o}=e,o=30<(o=o.visibleSize)?32:20<o?18:8;r&&clearTimeout(r),(!l||l+o<Date.now())&&(e.lyRunTime=Date.now(),si(t)),e.lyTimeout=setTimeout(()=>{e.lyTimeout=void 0,e.lyRunTime=void 0,si(t)},o)}},triggerBodyScrollEvent(r,l){var o=this,{scrollYLoad:i,scrollXLoad:n}=this,{elemStore:a,intoRunScroll:s,lastScrollTop:c,lastScrollLeft:d,inWheelScroll:u,inVirtualScroll:p,inHeaderScroll:h,inBodyScroll:m,scrollRenderType:e,inFooterScroll:g}=o;if(!(u||p||h||g)){var u=this.$refs.refScrollXHandleElem,p=this.$refs.refScrollYHandleElem,h=Fr(a["left-body-scroll"]),g=Fr(a["main-body-scroll"]),f=Fr(a["right-body-scroll"]),v=Fr(a["main-header-scroll"]),a=Fr(a["main-footer-scroll"]),x=this.$refs.refRowExpandElem;if(!s&&g&&u&&p&&(!m||e===l)){let e=p.scrollTop,t=u.scrollLeft;h&&"left"===l?e=h.scrollTop:f&&"right"===l?e=f.scrollTop:(e=g.scrollTop,t=g.scrollLeft);s=t!==d,m=e!==c;o.inBodyScroll=!0,o.scrollRenderType=l,m&&("left"===l?(xr(g,e),xr(f,e)):"right"===l?(xr(g,e),xr(h,e)):(xr(h,e),xr(f,e)),xr(p,e),xr(x,e),i)&&this.triggerScrollYEvent(r),s&&(br(u,t),br(v,t),br(a,t),n)&&this.triggerScrollXEvent(r),this.handleScrollEvent(r,m,s,e,t,{type:"body",fixed:l})}}},triggerHeaderScrollEvent(e,t){var r=this,l=this.scrollXLoad,{elemStore:o,intoRunScroll:i,inWheelScroll:n,inVirtualScroll:a,inBodyScroll:s,inFooterScroll:c}=r;n||a||s||c||i||(n=this.$refs.refScrollXHandleElem,a=this.$refs.refScrollYHandleElem,s=Fr(o["main-body-scroll"]),c=Fr(o["main-header-scroll"]),i=Fr(o["main-footer-scroll"]),c&&n&&a&&(o=a.scrollTop,a=c.scrollLeft,r.inHeaderScroll=!0,br(n,a),br(i,a),br(s,a),l&&this.triggerScrollXEvent(e),this.handleScrollEvent(e,!1,!0,o,a,{type:"header",fixed:t})))},triggerFooterScrollEvent(e,t){var r=this,l=this.scrollXLoad,{elemStore:o,intoRunScroll:i,inWheelScroll:n,inVirtualScroll:a,inHeaderScroll:s,inBodyScroll:c}=r;n||a||s||c||(n=this.$refs.refScrollXHandleElem,a=this.$refs.refScrollYHandleElem,s=Fr(o["main-body-scroll"]),c=Fr(o["main-header-scroll"]),o=Fr(o["main-footer-scroll"]),i)||o&&n&&a&&(i=a.scrollTop,a=o.scrollLeft,r.inFooterScroll=!0,br(n,a),br(c,a),br(s,a),l&&this.triggerScrollXEvent(e),this.handleScrollEvent(e,!1,!0,i,a,{type:"footer",fixed:t}))},triggerBodyWheelEvent(h){let m=this;var g=m,f=m;let v=m;var{target:x,deltaY:b,deltaX:C,shiftKey:w}=h;if(!x||!/^textarea$/i.test(x.tagName)){x=g.highlightHoverRow;let{scrollXLoad:u,scrollYLoad:p,expandColumn:e}=f;var g=m.computeLeftFixedWidth,y=m.computeRightFixedWidth;if(g||y||e){var{elemStore:g,lastScrollTop:y,lastScrollLeft:E}=v,T=m.computeRowOpts;let l=m.$refs.refScrollXHandleElem,o=m.$refs.refScrollYHandleElem,i=Fr(g["left-body-scroll"]),n=Fr(g["main-header-scroll"]),a=Fr(g["main-body-scroll"]),s=Fr(g["main-footer-scroll"]),c=Fr(g["right-body-scroll"]),d=m.$refs.refRowExpandElem;if(l&&o&&a){g=(e=>{let t=1;var r=Date.now();return r<e+25?t=1.18:r<e+30?t=1.15:r<e+40?t=1.12:r<e+55?t=1.09:r<e+75?t=1.06:r<e+100&&(t=1.03),t})(f.lastScrollTime),f=w?0:Math.ceil(b*g),w=Math.ceil((w&&b||C)*g),b=f<0,C=a.scrollTop;if(!(b?C<=0:C>=a.scrollHeight-a.clientHeight)){var R,S,g=C+f,b=a.scrollLeft+w;let t=b!==E,r=g!==y;(T.isHover||x)&&m.clearHoverRow(),t&&(h.preventDefault(),v.inWheelScroll=!0,z.firefox||z.safari?(br(l,f=b),br(a,f),br(n,f),br(s,f),u&&m.triggerScrollXEvent(h),m.handleScrollEvent(h,r,t,a.scrollTop,f,{type:"table",fixed:""})):(R=b,S=e=>{br(l,e),br(a,e),br(n,e),br(s,e),u&&m.triggerScrollXEvent(h),m.handleScrollEvent(h,r,t,a.scrollTop,e,{type:"table",fixed:""})},requestAnimationFrame(()=>{S(R)}))),r&&(h.preventDefault(),z.firefox||z.safari?(xr(o,w=g),xr(a,w),xr(i,w),xr(c,w),xr(d,w),p&&m.triggerScrollYEvent(h),m.handleScrollEvent(h,r,t,w,a.scrollLeft,{type:"table",fixed:""})):((r,l)=>{let o=Math.abs(r),i=performance.now(),n=0,a=e=>{let t=(e-i)/o;1<t&&(t=1);e=Math.pow(t,2),e=Math.floor(r*e)-n;n+=e,l(e),t<1&&requestAnimationFrame(a)};requestAnimationFrame(a)})(g-C,e=>{e=a.scrollTop+e;v.inWheelScroll=!0,xr(o,e),xr(a,e),xr(i,e),xr(c,e),xr(d,e),p&&m.triggerScrollYEvent(h),m.handleScrollEvent(h,r,t,e,a.scrollLeft,{type:"table",fixed:""})}))}}}}},triggerVirtualScrollXEvent(t){var r=this,l=this.scrollXLoad,{elemStore:o,inWheelScroll:i,lastScrollTop:n,inHeaderScroll:a,inBodyScroll:s,inFooterScroll:c}=r;if(!(a||s||c||i)){a=Fr(o["main-header-scroll"]),s=Fr(o["main-body-scroll"]),c=Fr(o["main-footer-scroll"]),i=this.$refs.refScrollYHandleElem,o=t.currentTarget.scrollLeft,i=i||s;let e=0;i=(e=i?i.scrollTop:e)!==n;r.inVirtualScroll=!0,br(s,o),br(a,o),br(c,o),l&&this.triggerScrollXEvent(t),this.handleScrollEvent(t,i,!0,e,o,{type:"table",fixed:""})}},triggerVirtualScrollYEvent(t){var r=this,l=this.scrollYLoad,{elemStore:o,inWheelScroll:i,lastScrollLeft:n,inHeaderScroll:a,inBodyScroll:s,inFooterScroll:c}=r;if(!(a||s||c||i)){var a=Fr(o["left-body-scroll"]),s=Fr(o["main-body-scroll"]),c=Fr(o["right-body-scroll"]),i=this.$refs.refRowExpandElem,o=this.$refs.refScrollXHandleElem,d=t.currentTarget.scrollTop,o=o||s;let e=0;o=(e=o?o.scrollLeft:e)!==n;r.inVirtualScroll=!0,xr(s,d),xr(a,d),xr(c,d),xr(i,d),l&&this.triggerScrollYEvent(t),this.handleScrollEvent(t,!0,o,d,e,{type:"table",fixed:""})}},updateScrollXData(){let e=this;let t=e.isAllOverflow;return ri(e),e.updateScrollXSpace(),e.$nextTick().then(()=>{ri(e),e.updateScrollXSpace(),t||e.updateScrollYSpace()})},updateScrollXSpace(){let o=this;var i=o,n=o;let{scrollXLoad:a,overflowX:s,scrollXWidth:c}=i,{visibleColumn:d,scrollXStore:u,elemStore:p,fullColumnIdData:h}=n;var n=o.computeMouseOpts,m=o.$refs.refTableBody;if(m?m.$el:null){var m=Fr(p["main-body-scroll"]),g=Fr(p["main-body-table"]),f=Fr(p["main-header-table"]),v=Fr(p["main-footer-table"]);let e=0;var x=d[u.startIndex];x&&(x=h[x.id]||{},e=x.oLeft);let t=0,r=(m&&(t=m.clientWidth),!1),l=c;c>b&&(e=m&&g&&m.scrollLeft+t>=b?b-g.clientWidth:(b-t)*(e/(c-t)),l=b,r=!0),a&&s||(e=0),f&&(f.style.transform=f.getAttribute("xvm")?`translate(${e}px, 0px)`:""),g&&(g.style.transform=`translate(${e}px, ${i.scrollYTop||0}px)`),v&&(v.style.transform=v.getAttribute("xvm")?`translate(${e}px, 0px)`:"");["main"].forEach(t=>{["header","body","footer"].forEach(e=>{e=Fr(p[t+`-${e}-xSpace`]);e&&(e.style.width=a?l+"px":"")})}),i.scrollXLeft=e,i.scrollXWidth=l,i.isScrollXBig=r;x=o.$refs.refScrollXSpaceElem;return x&&(x.style.width=l+"px"),r&&n.area&&A("vxe.error.notProp",["mouse-config.area"]),Ko(o),o.$nextTick(()=>{kr(o)})}},updateScrollYData(){let e=this;return e.handleTableData(),e.updateScrollYSpace(),e.$nextTick().then(()=>{e.handleTableData(),e.updateScrollYSpace()})},updateScrollYSpace(){let e=this;var t=e,{isAllOverflow:r,scrollYLoad:l,expandColumn:o}=t;let{scrollYStore:i,elemStore:n,isResizeCellHeight:a,afterFullData:s,fullAllDataRowIdData:c,rowExpandedMaps:d}=e;var u=i.startIndex,p=e.computeMouseOpts,h=e.computeExpandOpts,m=e.computeRowOpts,g=e.computeCellOpts,f=e.computeDefaultRowHeight,v=Fr(n["main-body-scroll"]),x=Fr(n["main-body-table"]),b=Fr(n["left-body-table"]),C=Fr(n["right-body-table"]);let w=0,y=0,E=!1,T=(l?a||g.height||m.height||o||!r?(l=s[u],r=c[yr(e,l)]||{},w=r.oTop||0,l=s[s.length-1],r=c[l=yr(e,l)]||{},y=(r.oTop||0)+(r.resizeHeight||g.height||m.height||r.height||f),o&&d[l]&&(y+=r.expandHeight||h.height||0),y>F&&(E=!0)):((y=s.length*f)>F&&(E=!0),w=Math.max(0,u*f)):x&&(y=x.clientHeight),0),R=(v&&(T=v.clientHeight),y),S=w;E&&(S=v&&x&&v.scrollTop+T>=F?F-x.clientHeight:(F-T)*(w/(y-T)),R=F),b&&(b.style.transform=`translate(0px, ${S}px)`),x&&(x.style.transform=`translate(${t.scrollXLeft||0}px, ${S}px)`),C&&(C.style.transform=`translate(0px, ${S}px)`),["main","left","right"].forEach(t=>{["header","body","footer"].forEach(e=>{e=Fr(n[t+`-${e}-ySpace`]);e&&(e.style.height=R?R+"px":"")})});g=e.$refs.refScrollYSpaceElem,g&&(g.style.height=R?R+"px":""),m=e.$refs.refRowExpandYSpaceElem;return m&&(m.style.height=R?R+"px":""),t.scrollYTop=S,t.scrollYHeight=y,(t.isScrollYBig=E)&&p.area&&A("vxe.error.notProp",["mouse-config.area"]),Ko(e),e.$nextTick().then(()=>{kr(e)})},updateScrollYStatus(){return wo(this)},scrollTo(e,t){let r=this;var l=r;let o=r;var i=o.elemStore,n=Fr(i["main-header-scroll"]),a=Fr(i["main-body-scroll"]),s=Fr(i["main-footer-scroll"]),c=Fr(i["left-body-scroll"]),i=Fr(i["right-body-scroll"]),d=r.$refs.refScrollXHandleElem,u=r.$refs.refScrollYHandleElem;return o.intoRunScroll=!0,sr().isNumber(e)&&(br(d,e),br(a,e),br(n,e),br(s,e),oi(r)),sr().isNumber(t)&&(xr(u,t),xr(a,t),xr(c,t),xr(i,t),si(r)),l.scrollXLoad||l.scrollYLoad?new Promise(e=>{setTimeout(()=>{r.$nextTick(()=>{o.intoRunScroll=!1,e()})},30)}):r.$nextTick()},scrollToRow(e,t){let r=this;var l=r;let{isAllOverflow:o,scrollYLoad:i,scrollXLoad:n}=r;var a=[];return e&&(l.treeConfig?a.push(r.scrollToTreeRow(e)):a.push(eo(r,e))),t&&a.push(qo(r,t,e)),Promise.all(a).then(()=>{if(e)return o||!i&&!n||(k(r),ui(r)),r.$nextTick()})},scrollToColumn(e){return qo(this,e)},scrollToTreeRow(t){let l=this;var e=l.treeConfig,r=l.isRowGroupStatus,o=l.tableFullData;let i=[];if(e||r){var e=l.computeAggregateOpts,n=l.computeTreeOpts,n=n.children||n.childrenField,o=sr().findTree(o,e=>l.eqRow(e,t),{children:r?e.mapChildrenField:n});if(o){let r=o.nodes;r.forEach((e,t)=>{t<r.length-1&&!l.isTreeExpandByRow(e)&&i.push(l.setTreeExpand(e,!0))})}}return Promise.all(i).then(()=>eo(l,t))},clearScroll(){let e=this;var{elemStore:t,scrollXStore:r,scrollYStore:l}=e,o=Fr(t["main-header-scroll"]),i=Fr(t["main-body-scroll"]),n=Fr(t["main-footer-scroll"]),a=Fr(t["left-body-scroll"]),t=Fr(t["right-body-scroll"]),s=this.$refs.refScrollXHandleElem,c=this.$refs.refScrollYHandleElem;return e.intoRunScroll=!0,br(s,0),br(i,0),br(o,0),br(n,0),xr(c,0),xr(i,0),xr(a,0),xr(t,0),r.startIndex=0,r.visibleStartIndex=0,r.endIndex=r.visibleSize,r.visibleEndIndex=r.visibleSize,l.startIndex=0,l.visibleStartIndex=0,l.endIndex=l.visibleSize,l.visibleEndIndex=l.visibleSize,this.$nextTick().then(()=>{e.intoRunScroll=!1})},updateFooter(){var e=this,t=this.$xeGrid,{showFooter:r,footerData:l,footerMethod:o}=this,{visibleColumn:i,afterFullData:n}=this;let a=[];return r&&l&&l.length?a=l.slice(0):r&&o&&(a=i.length?o({columns:i,data:n,$table:this,$grid:t}):[]),e.footerTableData=a,this.handleUpdateFooterMerge(),this.$nextTick()},updateStatus(t,r){let l=this,o=l;return this.$nextTick().then(()=>{var e=o.editRules;if(t&&e)return l.handleCellRuleUpdateStatus("change",t,r)})},setMergeCells(e){let t=this;return t.spanMethod&&A("vxe.error.errConflicts",["merge-cells","span-method"]),((e,t)=>{let{fullAllDataRowIdData:s,fullColumnIdData:c,visibleColumn:d,afterFullData:u,mergeBodyList:p,mergeBodyMaps:h}=e;if(t){let a=Er(e).handleGetRowId;(t=sr().isArray(t)?t:[t]).forEach(r=>{let{row:e,col:t,rowspan:l,colspan:o}=r,i=-1,n=-1;if(sr().isNumber(e)?i=e:(r=(r=e?a(e):null)?s[r]:null)&&(i=r._index),sr().isNumber(t)?n=t:(r=(r=t?t.id:null)?c[r]:null)&&(n=r._index),-1<i&&-1<n&&(l||o)&&(l=sr().toNumber(l)||1,o=sr().toNumber(o)||1,1<l||1<o)){let e=u[i];r=d[n];let t=h[i+":"+n];t?(t.rowspan=l,t.colspan=o,t._rowspan=l,t._colspan=o):(t={row:i,col:n,rowspan:l,colspan:o,_row:e,_col:r,_rowspan:l,_colspan:o},h[i+":"+n]=t,p.push(t))}})}})(t,e),t.handleUpdateBodyMerge(),t.$nextTick().then(()=>(t.updateCellAreas(),kr(t)))},removeMergeCells(e){let t=this;t.spanMethod&&A("vxe.error.errConflicts",["merge-cells","span-method"]);let r=((e,t)=>{let{mergeBodyList:i,fullColumnIdData:n,fullAllDataRowIdData:a,mergeBodyMaps:s}=e,c=[];if(t){let o=Er(e).handleGetRowId;(t=sr().isArray(t)?t:[t]).forEach(e=>{var{row:e,col:t}=e;let r=-1,l=-1;sr().isNumber(e)?r=e:(e=(e=e?o(e):null)?a[e]:null)&&(r=e._index),sr().isNumber(t)?l=t:(t=(e=t?t.id:null)?n[e]:null)&&(l=t._index);t=sr().findIndexOf(i,e=>e.row===r&&e.col===l);if(-1<t){t=i.splice(t,1);let e=t[0];e&&(c.push(t[0]),s[r+":"+l])&&delete s[r+":"+l]}})}return c})(t,e);return t.handleUpdateBodyMerge(),t.$nextTick().then(()=>(t.updateCellAreas(),kr(t),r))},getMergeCells(){return this.mergeBodyList.slice(0)},clearMergeCells(){let e=this;var t=e,r=e;return r.mergeBodyList=[],r.mergeBodyMaps={},r.mergeBodyCellMaps={},t.mergeBodyFlag++,e.$nextTick().then(()=>kr(e))},setMergeFooterItems(e){let t=this;return t.footerSpanMethod&&A("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),((e,t)=>{let s=e.footerTableData,{mergeFooterList:c,mergeFooterMaps:d,fullColumnIdData:u}=e;if(t){let a=e.visibleColumn;(t=sr().isArray(t)?t:[t]).forEach(t=>{var{row:t,col:r,rowspan:l,colspan:o}=t,t=sr().isNumber(t)?t:-1;let i=-1;if(sr().isNumber(r)?i=r:(r=(r=r?r.id:null)?u[r]:null)&&(i=r._index),-1<t&&-1<i&&(l||o)&&(l=sr().toNumber(l)||1,o=sr().toNumber(o)||1,1<l||1<o)){var r=s[t],n=a[i];let e=d[t+":"+i];e?(e.rowspan=l,e.colspan=o,e._rowspan=l,e._colspan=o):(e={row:t,col:i,rowspan:l,colspan:o,_row:r,_col:n,_rowspan:l,_colspan:o},d[t+":"+i]=e,c.push(e))}})}})(t,e),t.handleUpdateFooterMerge(),t.$nextTick().then(()=>(t.updateCellAreas(),kr(t)))},removeMergeFooterItems(e){let t=this;t.footerSpanMethod&&A("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);let r=((e,t)=>{let{mergeFooterList:o,fullColumnIdData:i,mergeFooterMaps:n}=e,a=[];return t&&(t=sr().isArray(t)?t:[t]).forEach(e=>{var{row:e,col:t}=e;let r=sr().isNumber(e)?e:-1,l=-1;sr().isNumber(t)?l=t:(t=(e=t?t.id:null)?i[e]:null)&&(l=t._index);t=sr().findIndexOf(o,e=>e.row===r&&e.col===l);if(-1<t){let e=o.splice(t,1)[0];e&&(a.push(e),n[r+":"+l])&&delete n[r+":"+l]}}),a})(t,e);return t.handleUpdateFooterMerge(),t.$nextTick().then(()=>(t.updateCellAreas(),kr(t),r))},getMergeFooterItems(){return this.mergeFooterList.slice(0)},clearMergeFooterItems(){let e=this;var t=e,r=e;return r.mergeFooterList=[],r.mergeFooterMaps={},r.mergeFooterCellMaps={},t.mergeFootFlag++,e.$nextTick().then(()=>kr(e))},updateZindex(){this.zIndex?this.tZindex=this.zIndex:this.tZindex<xl()&&(this.tZindex=vl())},updateCellAreas(){var e=this.mouseConfig,t=this.computeMouseOpts;return e&&t.area&&this.handleRecalculateCellAreaEvent?this.handleRecalculateCellAreaEvent():this.$nextTick()},dispatchEvent(e,t,r){var l=this.$xeGrid;this.$emit(e,Fe(r,{$table:this,$grid:l},t))},emitEvent(e,t,r){var l=this.$xeGrid;this.$emit(e,Object.assign({$table:this,$grid:l,$event:r},t))},focus(){return this.isActivated=!0,this.$nextTick()},blur(){return this.isActivated=!1,this.$nextTick()},connect(e){return e&&e.syncUpdate?(e.syncUpdate({collectColumn:this.collectColumn,$table:this}),this.$toolbar=e):A("vxe.error.barUnableLink"),this.$nextTick()},getCell(e,t){return this.getCellElement(e,t)},findRowIndexOf(e,t){return t?sr().findIndexOf(e,e=>this.eqRow(e,t)):-1},eqRow(e,t){return!(!e||!t||e!==t&&yr(this,e)!==yr(this,t))},getSetupOptions(){return Te()}},{getI18n:He,renderer:Ye,renderEmptyElement:Be}=("setFilter,openFilter,clearFilter,saveFilterPanel,saveFilterPanelByEvent,resetFilterPanel,resetFilterPanelByEvent,getCheckedFilters,updateFilterOptionStatus,closeMenu,setActiveCellArea,getActiveCellArea,getCellAreas,clearCellAreas,copyCellArea,cutCellArea,pasteCellArea,getCopyCellArea,getCopyCellAreas,clearCopyCellArea,setCellAreas,openFNR,openFind,openReplace,closeFNR,getSelectedCell,clearSelected,insert,insertAt,insertNextAt,insertChild,insertChildAt,insertChildNextAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,clearEdit,clearActived,getEditRecord,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell,setSelectCell,clearValidate,fullValidate,validate,fullValidateField,validateField,openExport,closeExport,openPrint,closePrint,getPrintHtml,exportData,openImport,closeImport,importData,saveFile,readFile,importByFile,print,openCustom,closeCustom,saveCustom,cancelCustom,resetCustom,toggleCustomAllCheckbox,setCustomAllCheckbox".split(",").forEach(t=>{Ve[t]=function(...e){return this["_"+t]||("openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").includes(t)?A("vxe.error.reqModule",["Export"]):"fullValidate,validate".split(",").includes(t)?A("vxe.error.reqModule",["Validator"]):"setFilter,openFilter,clearFilter,getCheckedFilters".split(",").includes(t)?A("vxe.error.reqModule",["Filter"]):"insert,insertAt,insertNextAt,remove,removeCheckboxRow,removeRadioRow,removeCurrentRow,getRecordset,getInsertRecords,getRemoveRecords,getUpdateRecords,getEditRecord,getActiveRecord,isEditByRow,isActiveByRow,setEditRow,setActiveRow,setEditCell,setActiveCell".split(",").includes(t)?A("vxe.error.reqModule",["Edit"]):"openCustom".split(",").includes(t)&&A("vxe.error.reqModule",["Custom"])),this["_"+t]?this["_"+t](...e):null}}),wr=Ve,nr.VxeUI),Ke="body",Ze=e=>{var t=e.delayHover,{lastScrollTime:e,isDragResize:r}=e;return!!(r||e&&Date.now()<e+t)};function vi(e,t,_,r,l,V,H,o,B,P,i,n,z,N,a){var s=t.$xeGrid,{columnKey:j,resizable:c,showOverflow:d,border:U,height:u,treeConfig:W,cellClassName:G,cellStyle:q,align:X,spanMethod:Y,mouseConfig:K,editConfig:Z,editRules:p,tooltipConfig:h,padding:m}=t,{tableData:Q,dragRow:J,overflowX:ee,currentColumn:te,scrollXLoad:re,scrollYLoad:le,mergeBodyFlag:oe,calcCellHeightFlag:g,resizeHeightFlag:f,resizeWidthFlag:ie,editStore:ne,isAllOverflow:ae,validErrorMaps:v}=t,{fullAllDataRowIdData:se,fullColumnIdData:x,mergeBodyCellMaps:ce,visibleColumn:de,afterFullData:ue,mergeBodyList:pe,scrollXStore:he,scrollYStore:me}=t,b=t.computeCellOpts,C=t.computeValidOpts,ge=t.computeCheckboxOpts,fe=t.computeEditOpts,w=t.computeTooltipOpts,ve=t.computeVirtualXOpts,xe=t.computeVirtualYOpts,{isAllColumnDrag:be,isAllRowDrag:Ce}=t.resizableOpts,y=t.computeRowOpts,E=t.computeRowDragOpts,we=t.computeDefaultRowHeight,g=g?b.height||y.height:0,{disabledMethod:T,isCrossDrag:ye,isPeerDrag:Ee}=E,Te=t.computeColumnOpts,Re=t.computeMouseOpts,Se=t.computeCellOffsetWidth,Oe=t.computeAreaOpts.selectCellToRow,{type:Fe,cellRender:De,editRender:Ie,align:$e,showOverflow:ke,className:Me,treeNode:Ae,rowResize:Le,padding:R,verticalAlign:S,slots:_e}=n,O=b.verticalAlign,ne=ne.actived,Ve=se[r]||{},F=n.id,x=x[F]||{},D=Ie||De,D=D?Ye.get(D.name):null,He=D?D.tableCellClassName||D.cellClassName:null,Be=D?D.tableCellStyle||D.cellStyle:"";let Pe=w.showAll;var ze=x.index,w=x._index,x=cr(Ie),f=f?Ve.resizeHeight:0;let I=l?n.fixed!==l:n.fixed&&ee;ee=sr().eqNull(R)?null===m?b.padding:m:R,m=sr().eqNull(ke)?d:ke,R="ellipsis"===m;let $="title"===m,k=!0===m||"tooltip"===m;d=ae||$||k||R,ke=sr().isBoolean(n.resizable)?n.resizable:Te.resizable||c,m=!!g,c=0<f;let Ne;g={},f=$e||(D?D.tableCellAlign:"")||X,$e=sr().eqNull(S)?O:S,D=v[r+":"+F],X=p&&C.showMessage&&("default"===C.message?u||1<Q.length:"inline"===C.message),O={colid:F};let M={$table:t,$grid:s,isEdit:!1,seq:_,rowid:r,row:o,rowIndex:B,$rowIndex:P,_rowIndex:i,column:n,columnIndex:ze,$columnIndex:z,_columnIndex:w,fixed:l,type:Ke,isHidden:!!I,level:H,visibleData:ue,data:Q,items:a},A=!1,je=!1,L=((A=y.drag?"row"===E.trigger||n.dragSort&&"cell"===E.trigger:A)&&(je=!(!T||!T(M))),($||k||Pe||h)&&(g.mouseenter=e=>{Ze(t)||($?Il(e.currentTarget,n):(k||Pe)&&t.triggerBodyTooltipEvent(e,M),t.dispatchEvent("cell-mouseenter",Object.assign({cell:e.currentTarget},M),e))}),(k||Pe||h)&&(g.mouseleave=e=>{Ze(t)||((k||Pe)&&t.handleTargetLeaveEvent(e),t.dispatchEvent("cell-mouseleave",Object.assign({cell:e.currentTarget},M),e))}),(A||ge.range||K)&&(g.mousedown=e=>{t.triggerCellMousedownEvent(e,M)}),A&&(g.mouseup=t.triggerCellMouseupEvent),g.click=e=>{t.triggerCellClickEvent(e,M)},!(g.dblclick=e=>{t.triggerCellDblclickEvent(e,M)})),Ue=1;if(oe&&pe.length){S=ce[i+":"+w];if(S){var{rowspan:v,colspan:p}=S;if(!v||!p)return null;1<v&&(L=!0,Ue=v,O.rowspan=v),1<p&&(L=!0,O.colspan=p)}}else if(Y){var{rowspan:u=1,colspan:s=1}=Y(M)||{};if(!u||!s)return null;1<u&&(L=!0,Ue=u,O.rowspan=u),1<s&&(L=!0,O.colspan=s)}!(I=I&&L&&(1<O.colspan||1<O.rowspan)?!1:I)&&Z&&(Ie||De)&&(fe.showStatus||fe.showUpdateStatus)&&(Ne=t.isUpdateByRow(o,n.field));_=le&&!d;let We=Wl(Ve,b,y,we);B=z===N.length-1,P=!n.resizeWidth&&("auto"===n.minWidth||"auto"===n.width);let Ge=!1;L||J&&yr(t,J)===r||(le&&!W&&!xe.immediate&&(i<me.visibleStartIndex-me.preloadSize||i>me.visibleEndIndex+me.preloadSize)||re&&!ve.immediate&&!n.fixed&&(w<he.visibleStartIndex-he.preloadSize||w>he.visibleEndIndex+he.preloadSize))&&(Ge=!0),1<Ue&&(Q=ue[i+Ue-1])&&(a=se[yr(t,Q)])&&(We+=a.oTop-Ve.oTop+Wl(a,b,y,we));E={};if(d&&ie){let t=O.colspan||0;if(1<t)for(let e=1;e<t;e++){var qe=de[ze+e];qe&&(t+=qe.renderWidth)}E.width=n.renderWidth-Se*t+"px"}le||d||m||c?E.height=We+"px":E.minHeight=We+"px";T=[];I&&ae?T.push(e("div",{key:"tc",class:["vxe-cell",{"c--title":$,"c--tooltip":k,"c--ellipsis":R}],style:E})):(W&&T.push(...((e,t,r,l,o)=>{var{row:i,column:n}=l,a=t.afterFullData,s=t.treeConfig,c=t.computeTreeOpts,{slots:n,treeNode:d}=n,u=t.fullAllDataRowIdData;if(n&&n.line)return t.callSlot(n.line,l,e);n=u[r];let p=0,h=null;return n&&(p=n.level,h=n.items[n.treeIndex-1]),s&&d&&(c.showLine||c.line)?[e("div",{key:"tl",class:"vxe-tree--line-wrapper"},[e("div",{class:"vxe-tree--line",style:{height:`${t.eqRow(a[0],i)?1:Ql(l,h)}px`,bottom:`-${Math.floor(o/2)}px`,left:p*c.indent+(p?2-Zl(t):0)+16+"px"}})])]:[]})(e,t,r,M,We)),T.push(e("div",{key:"tc",class:["vxe-cell",{"c--title":$,"c--tooltip":k,"c--ellipsis":R}],style:E,attrs:{title:$?t.getCellLabel(o,n):null}},Ge?[]:[e("div",{attrs:{colid:F,rowid:r},class:"vxe-cell--wrapper"},n.renderCell(e,M))])),X&&D&&(h=D.rule,ge=_e?_e.valid:null,oe={...M,...D,rule:D},T.push(e("div",{key:"tcv",class:["vxe-cell--valid-error-tip",hr(C.className,D)],style:h&&h.maxWidth?{width:h.maxWidth+"px"}:void 0},[e("div",{class:"vxe-cell--valid-error-wrapper vxe-cell--valid-error-theme-"+(C.theme||"normal")},[ge?t.callSlot(ge,oe,e):[e("span",{class:"vxe-cell--valid-error-msg"},D.content)]])]))));let Xe=!1;return K&&Re.area&&Oe&&((w||!0!==Oe)&&Oe!==n.field||(Xe=!0)),!I&&ke&&be&&T.push(e("div",{key:"tcc",class:["vxe-cell--col-resizable",{"is--line":!U||"none"===U}],on:{mousedown:e=>t.handleColResizeMousedownEvent(e,l,M),dblclick:e=>t.handleColResizeDblclickEvent(e,M)}})),(Le||Ce)&&y.resizable&&T.push(e("div",{key:"tcr",class:"vxe-cell--row-resizable",on:{mousedown:e=>t.handleRowResizeMousedownEvent(e,M),dblclick:e=>t.handleRowResizeDblclickEvent(e,M)}})),e("td",{class:["vxe-body--column",F,$e?"col--vertical-"+$e:"",f?"col--"+f:"",Fe?"col--"+Fe:"",{"col--last":B,"col--tree-node":Ae,"col--edit":x,"col--ellipsis":d,"col--cs-height":m,"col--rs-height":c,"col--to-row":Xe,"col--auto-height":_,"fixed--width":!P,"fixed--hidden":I,"is--padding":ee,"is--progress":I&&ae||Ge,"is--drag-cell":A&&(ye||Ee||!H),"is--drag-disabled":je,"col--dirty":Ne,"col--active":Z&&x&&ne.row===o&&(ne.column===n||"row"===fe.mode),"col--valid-error":!!D,"col--current":te===n},hr(He,M),hr(Me,M),hr(G,M)],key:j||re||le||Te.useKey||y.useKey||Te.drag?n.id:z,attrs:O,style:Object.assign({},sr().isFunction(Be)?Be(M):Be,sr().isFunction(q)?q(M):q),on:g},V&&I?[]:T)}function xi(f,v,x,b,C,w){let y=v.$parent;var e=y,t=y,r=y;let E=y.$xeGrid,{stripe:T,rowKey:R,highlightHoverRow:S,rowClassName:O,rowStyle:F,editConfig:D,treeConfig:I}=e,{hasFixedColumn:$,treeExpandedFlag:k,isColLoading:M,scrollXLoad:A,scrollYLoad:L,isAllOverflow:_,rowExpandedFlag:V,expandColumn:H,selectRadioRow:B,pendingRowFlag:P,isDragColMove:z,rowExpandHeightFlag:Y,isRowGroupStatus:N}=t,{fullAllDataRowIdData:K,fullColumnIdData:Z,treeExpandedMaps:Q,pendingRowMaps:J,rowExpandedMaps:ee}=r,te=y.computeCheckboxOpts,re=y.computeRadioOpts,j=y.computeTreeOpts,U=y.computeEditOpts,W=y.computeRowOpts,G=y.computeColumnOpts,le=y.computeColumnDragOpts,{transform:q,seqMode:oe}=j,ie=j.children||j.childrenField,X=[],ne=Er(y).handleGetRowId,ae=I||N;return C.forEach((l,o)=>{var i={};let n=ne(l);var a=K[n]||{};let s=o,c=0,d=-1,u=-1;var p=N&&l.isAggregate,h=((W.isHover||S)&&(i.mouseenter=e=>{Ze(y)||y.triggerHoverEvent(e,{row:l,rowIndex:s})},i.mouseleave=()=>{Ze(y)||y.clearHoverRow()}),a&&(c=a.level,d=p||I&&q&&"increasing"===oe?a._index+1:a.seq,s=a.index,u=a._index),{$table:y,seq:d,rowid:n,fixed:x,type:Ke,level:c,row:l,rowIndex:s,$rowIndex:o,_rowIndex:u}),m=H&&!!V&&!!ee[n];let e=!1,t=[],r=!1;D&&(r=y.isInsertByRow(l)),!I||L||q||(t=l[ie],e=!!k&&t&&0<t.length&&!!Q[n]),!W.drag||N||I&&!q||(i.dragstart=y.handleRowDragDragstartEvent,i.dragend=y.handleRowDragDragendEvent,i.dragover=y.handleRowDragDragoverEvent);var p=["vxe-body--row",ae?"row--level-"+c:"",{"row--stripe":T&&(u+1)%2==0,"is--new":r,"is--expand-row":m,"is--expand-tree":e,"row--new":r&&(U.showStatus||U.showInsertStatus),"row--radio":re.highlight&&B===l,"row--checked":te.highlight&&y.isCheckedByCheckboxRow(l),"row--pending":!!P&&!!J[n],"row--group":p},O?sr().isFunction(O)?O(h):O:""],g=w.map((e,t)=>vi(f,y,d,n,x,b,c,l,s,o,u,e,t,w,C));if(X.push(!M&&G.drag&&le.animation?f("transition-group",{props:{tag:"tr",name:"vxe-header--col-list"+(z?"":"-disabled")},class:p,attrs:{rowid:n},style:F?sr().isFunction(F)?F(h):F:void 0,key:R||A||L||W.useKey||W.drag||G.drag||N||I?n:o,nativeOn:i},g):f("tr",{class:p,attrs:{rowid:n},style:F?sr().isFunction(F)?F(h):F:void 0,key:R||A||L||W.useKey||W.drag||G.drag||N||I?n:o,on:i},g)),m){var{height:p,padding:h,mode:i}=y.computeExpandOpts;if("fixed"===i)X.push(f("tr",{class:"vxe-body--row-expanded-place",key:"expand_"+n,attrs:{rowid:n}},[f("td",{class:"vxe-body--row-expanded-place-column",attrs:{colspan:w.length},style:{height:`${Y?a.expandHeight||p:0}px`}})]));else{g={},m=(p&&(g.height=p+"px"),I&&(g.paddingLeft=c*j.indent+30+"px"),H||{}).showOverflow,i=H.id,a=Z[i]||{},i=sr().isUndefined(m)||sr().isNull(m)?_:m;let e=-1,t=-1,r=-1;a&&(e=a.index,t=a.$index,r=a._index);m={$grid:E,$table:y,seq:d,column:H,columnIndex:e,$columnIndex:t,_columnIndex:r,fixed:x,type:Ke,level:c,row:l,rowid:n,rowIndex:s,$rowIndex:o,_rowIndex:u,isHidden:!1,isEdit:!1,visibleData:[],data:[],items:[]};X.push(f("tr",{class:["vxe-body--expanded-row",{"is--padding":h}],key:"expand_"+n},[f("td",{class:["vxe-body--expanded-column",{"fixed--hidden":x&&!$,"col--ellipsis":i}],attrs:{colspan:w.length}},[f("div",{class:["vxe-body--expanded-cell",{"is--ellipsis":p}],style:g},[H.renderData(f,m)])])]))}}e&&X.push(...xi(f,v,x,b,t,w))}),X}var bi={name:"VxeTableBody",props:{tableData:Array,tableColumn:Array,fixedColumn:Array,fixedType:{type:String,default:""}},mounted(){var e=this,t=e.fixedType,r=e.$parent.elemStore,t=`${t||"main"}-body-`;r[t+"wrapper"]=e.$refs.refElem,r[t+"scroll"]=e.$refs.refBodyScroll,r[t+"table"]=e.$refs.refBodyTable,r[t+"colgroup"]=e.$refs.refBodyColgroup,r[t+"list"]=e.$refs.refBodyTBody,r[t+"xSpace"]=e.$refs.refBodyXSpace,r[t+"ySpace"]=e.$refs.refBodyYSpace,r[t+"emptyBlock"]=e.$refs.refBodyEmptyBlock},destroyed(){var e=this.fixedType,t=this.$parent.elemStore,e=`${e||"main"}-body-`;t[e+"wrapper"]=null,t[e+"scroll"]=null,t[e+"table"]=null,t[e+"colgroup"]=null,t[e+"list"]=null,t[e+"xSpace"]=null,t[e+"ySpace"]=null,t[e+"emptyBlock"]=null},render(r){let t=this.$parent;var e=t,l=t,o=t,i=t.$xeGrid,{xID:n,$scopedSlots:a}=t;let{fixedColumn:s,fixedType:c,tableColumn:d}=this;var{spanMethod:u,footerSpanMethod:p,mouseConfig:h}=e,{isGroup:l,tableData:m,isRowLoading:g,isColLoading:f,overflowX:v,scrollXLoad:x,scrollYLoad:b,isAllOverflow:C,isDragRowMove:w,expandColumn:y,dragRow:E,dragCol:T}=l,{visibleColumn:o,fullAllDataRowIdData:R,fullColumnIdData:S}=o,O=t.computeRowOpts,F=t.computeEmptyOpts,D=t.computeMouseOpts,I=t.computeRowDragOpts,$=t.computeExpandOpts;let k=m,M=d,A=!1;!(x||b||C)||y&&"fixed"!==$.mode||u||p||(A=!0),f||!c&&v||(M=o),c&&A&&(M=s||[]),b&&E&&2<k.length&&(m=R[yr(t,E)])&&(C=m._index,y=k[0],$=k[k.length-1],u=R[yr(t,y)],p=R[yr(t,$)],u)&&p&&(v=u._index,o=p._index,C<v?k=[E].concat(k):o<C&&(k=k.concat([E]))),c||l||x&&T&&2<M.length&&(b=S[T.id])&&(m=b._index,y=M[0],R=M[M.length-1],$=S[y.id],u=S[R.id],$)&&u&&(p=$._index,v=u._index,m<p?M=[T].concat(M):v<m&&(M=M.concat([T])));let L;return L=a.empty?a.empty.call(this,{$table:t,$grid:i}):(C=(o=F.name?Ye.get(F.name):null)?o.renderTableEmpty||o.renderTableEmptyView||o.renderEmpty:null)?Dr(C.call(this,r,F,{$table:t})):e.emptyText||He("vxe.table.emptyText"),r("div",{ref:"refElem",class:["vxe-table--body-wrapper",c?`fixed-${c}--wrapper`:"body--wrapper"],attrs:{xid:n}},[r("div",{ref:"refBodyScroll",class:"vxe-table--body-inner-wrapper",on:{scroll(e){t.triggerBodyScrollEvent(e,c)}}},[c?Be(t):r("div",{ref:"refBodyXSpace",class:"vxe-body--x-space"}),r("div",{ref:"refBodyYSpace",class:"vxe-body--y-space"}),r("table",{ref:"refBodyTable",class:"vxe-table--body",attrs:{xid:n,cellspacing:0,cellpadding:0,border:0,xvm:A?"1":null}},[r("colgroup",{ref:"refBodyColgroup"},M.map((e,t)=>r("col",{attrs:{name:e.id},key:t,style:{width:e.renderWidth+"px"}}))),!g&&!f&&O.drag&&I.animation?r("transition-group",{ref:"refBodyTBody",props:{tag:"tbody",name:"vxe-body--row-list"+(w?"":"-disabled")}},xi(r,this,c,A,k,M)):r("tbody",{ref:"refBodyTBody"},xi(r,this,c,A,k,M))]),r("div",{class:"vxe-table--checkbox-range"}),h&&D.area?r("div",{class:"vxe-table--cell-area"},[r("span",{class:"vxe-table--cell-main-area"},D.extension?[r("span",{class:"vxe-table--cell-main-area-btn",on:{mousedown(e){t.triggerCellAreaExtendMousedownEvent&&t.triggerCellAreaExtendMousedownEvent(e,{$table:t,fixed:c,type:Ke})}}})]:null),r("span",{class:"vxe-table--cell-copy-area"}),r("span",{class:"vxe-table--cell-extend-area"}),r("span",{class:"vxe-table--cell-multi-area"}),r("span",{class:"vxe-table--cell-active-area"}),r("span",{class:"vxe-table--cell-row-status-area"})]):Be(t),c?Be(t):r("div",{class:"vxe-table--empty-block",ref:"emptyBlock"},[r("div",{class:"vxe-table--empty-content"},L)])])])}};let{renderer:Pe,renderEmptyElement:ze}=nr.VxeUI,Ne="header",je=(R,e,S,O,F,D)=>{let I=e.$parent,$=I.$xeGrid;var t=I,r=I,l=I;let k=e.fixedType,{resizable:M,columnKey:A,headerCellClassName:L,headerCellStyle:_,showHeaderOverflow:V,headerAlign:H,align:B,mouseConfig:P}=t,{currentColumn:z,dragCol:N,scrollXLoad:j,scrollYLoad:U,overflowX:W}=r,{fullColumnIdData:G,scrollXStore:q}=l,X=I.computeVirtualXOpts,Y=I.computeColumnOpts,K=I.computeColumnDragOpts,Z=I.computeCellOpts;e=I.computeDefaultRowHeight;let Q=I.computeHeaderCellOpts,J=jl(Q.height)||e,{disabledMethod:ee,isCrossDrag:te,isPeerDrag:re}=K;return F.map((e,t)=>{var{type:r,showHeaderOverflow:l,headerAlign:o,align:i,filters:n,headerClassName:a,editRender:s,cellRender:c}=e,d=e.id,u=G[d]||{},s=s||c,c=s?Pe.get(s.name):null,s=e.children&&e.children.length,p=k?e.fixed!==k&&!s:e.fixed&&W,h=(sr().isBoolean(Q.padding)?Q:Z).padding,l=sr().isUndefined(l)||sr().isNull(l)?V:l,o=o||(c?c.tableHeaderCellAlign:"")||H||i||(c?c.tableCellAlign:"")||B,i="ellipsis"===l,c="title"===l,l=!0===l||"tooltip"===l,m=c||l||i;let g=!1,f=null;n&&(f=n[0],g=n.some(e=>e.checked));var v=u.index,u=u._index;let x={$table:I,$grid:$,$rowIndex:D,column:e,columnIndex:v,$columnIndex:t,_columnIndex:u,firstFilterOption:f,fixed:k,type:Ne,isHidden:p,hasFilter:g};var v={colid:d,colspan:1<e.colSpan?e.colSpan:null,rowspan:1<e.rowSpan?e.rowSpan:null},b={click:e=>I.triggerHeaderCellClickEvent(e,x),dblclick:e=>I.triggerHeaderCellDblclickEvent(e,x)},C=Y.drag&&"cell"===K.trigger;let w=!1;C&&(w=!(!ee||!ee(x))),(P||C)&&(b.mousedown=e=>I.triggerHeaderCellMousedownEvent(e,x)),Y.drag&&(b.dragstart=I.handleHeaderCellDragDragstartEvent,b.dragend=I.handleHeaderCellDragDragendEvent,b.dragover=I.handleHeaderCellDragDragoverEvent,C)&&(b.mouseup=I.handleHeaderCellDragMouseupEvent);var C=t===F.length-1,y=sr().isBoolean(e.resizable)?e.resizable:Y.resizable||M,E=!e.resizeWidth&&("auto"===e.minWidth||"auto"===e.width);let T=!1;!O||S||N&&N.id===d||j&&!e.fixed&&!X.immediate&&(u<q.visibleStartIndex-q.preloadSize||u>q.visibleEndIndex+q.preloadSize)&&(T=!0);u={};return m?u.height=J+"px":u.minHeight=J+"px",R("th",{class:["vxe-header--column",d,{["col--"+o]:o,["col--"+r]:r,"col--last":C,"col--fixed":e.fixed,"col--group":s,"col--ellipsis":m,"fixed--width":!E,"fixed--hidden":p,"is--padding":h,"is--sortable":e.sortable,"col--filter":!!n,"is--filter-active":g,"is--drag-active":Y.drag&&!e.fixed&&!w&&(te||re||!e.parentId),"is--drag-disabled":Y.drag&&w,"col--current":z===e},hr(a,x),hr(L,x)],attrs:v,style:_?sr().isFunction(_)?_(x):_:void 0,on:b,key:A||j||U||Y.useKey||Y.drag||s?d:t},[R("div",{class:["vxe-cell",{"c--title":c,"c--tooltip":l,"c--ellipsis":i}],style:u},T||O&&p?[]:[R("div",{attrs:{colid:d},class:"vxe-cell--wrapper"},e.renderHeader(R,x))]),!p&&y?R("div",{class:"vxe-cell--col-resizable",on:{mousedown:e=>I.handleColResizeMousedownEvent(e,k,x),dblclick:e=>I.handleColResizeDblclickEvent(e,x)}}):ze(I)])})};var Ci={name:"VxeTableHeader",props:{tableData:Array,tableColumn:Array,tableGroupColumn:Array,fixedColumn:Array,fixedType:{type:String,default:null}},data(){return{headerColumn:[]}},watch:{tableColumn(){this.uploadColumn()}},created(){this.uploadColumn()},mounted(){var e=this.fixedType,t=this.$parent.elemStore,e=`${e||"main"}-header-`;t[e+"wrapper"]=this.$refs.refElem,t[e+"scroll"]=this.$refs.refHeaderScroll,t[e+"table"]=this.$refs.refHeaderTable,t[e+"colgroup"]=this.$refs.refHeaderColgroup,t[e+"list"]=this.$refs.refHeaderTHead,t[e+"xSpace"]=this.$refs.refHeaderXSpace,t[e+"repair"]=this.$refs.refHeaderBorderRepair},destroyed(){var e=this.fixedType,t=this.$parent.elemStore,e=`${e||"main"}-header-`;t[e+"wrapper"]=null,t[e+"scroll"]=null,t[e+"table"]=null,t[e+"colgroup"]=null,t[e+"list"]=null,t[e+"xSpace"]=null,t[e+"repair"]=null},render(r){let t=this.$parent;var e=t,l=t,o=t,i=t.xID;let{fixedType:n,fixedColumn:a,tableColumn:s}=this;var c=this.headerColumn,{mouseConfig:e,showHeaderOverflow:d,spanMethod:u,footerSpanMethod:p}=e,{isGroup:l,isColLoading:h,overflowX:m,scrollXLoad:g,dragCol:f}=l,{visibleColumn:o,fullColumnIdData:v}=o,x=t.computeMouseOpts;let b=c,C=s,w=!1;return l?C=o:(g&&d&&(u||p||(w=!0)),w&&(h||!n&&m)||(C=o),n&&w&&(C=a||[]),b=[C]),n||l||g&&f&&2<C.length&&(c=v[f.id])&&(d=c._index,u=C[0],p=C[C.length-1],h=v[u.id],m=v[p.id],h)&&m&&(o=h._index,g=m._index,d<o?(C=[f].concat(C),b=[[f].concat(b[0])].concat(b.slice(1))):g<d&&(C=C.concat([f]),b=[b[0].concat([f])].concat(b.slice(1)))),r("div",{ref:"refElem",class:["vxe-table--header-wrapper",n?`fixed-${n}--wrapper`:"body--wrapper"],attrs:{xid:i}},[r("div",{ref:"refHeaderScroll",class:"vxe-table--header-inner-wrapper",on:{scroll(e){t.triggerHeaderScrollEvent(e,n)}}},[n?ze(t):r("div",{ref:"refHeaderXSpace",class:"vxe-body--x-space"}),r("table",{ref:"refHeaderTable",class:"vxe-table--header",attrs:{xid:i,cellspacing:0,cellpadding:0,border:0,xvm:w?"1":null}},[r("colgroup",{ref:"refHeaderColgroup"},C.map((e,t)=>r("col",{attrs:{name:e.id},key:t,style:{width:e.renderWidth+"px"}}))),r("thead",{ref:"refHeaderTHead"},((l,o,i,n,e)=>{let a=o.$parent;var t=a,r=a;let s=o.fixedType,c=a.computeColumnOpts,d=a.computeColumnDragOpts,{headerRowClassName:u,headerRowStyle:p}=t,{isColLoading:h,isDragColMove:m}=r;return e.map((e,t)=>{var r={$table:a,$rowIndex:t,fixed:s,type:Ne};return!h&&c.drag&&d.animation?l("transition-group",{key:t,props:{tag:"tr",name:"vxe-header--col-list"+(m?"":"-disabled"),class:["vxe-header--row",u?sr().isFunction(u)?u(r):u:""],style:p?sr().isFunction(p)?p(r):p:null}},je(l,o,i,n,e,t)):l("tr",{key:t,class:["vxe-header--row",u?sr().isFunction(u)?u(r):u:""],style:p?sr().isFunction(p)?p(r):p:void 0},je(l,o,i,n,e,t))})})(r,this,l,w,b)),e&&x.area?r("div",{class:"vxe-table--cell-area"},[r("span",{class:"vxe-table--cell-main-area"}),r("span",{class:"vxe-table--cell-copy-area"}),r("span",{class:"vxe-table--cell-extend-area"}),r("span",{class:"vxe-table--cell-multi-area"}),r("span",{class:"vxe-table--cell-active-area"}),r("span",{class:"vxe-table--cell-col-status-area"})]):ze(t)])])])},methods:{uploadColumn(){var e=this.$parent.isGroup;this.headerColumn=e?(e=>{let t=1,l=(r,e)=>{if(e&&(r.level=e.level+1,t<r.level)&&(t=r.level),r.children&&r.children.length&&r.children.some(e=>e.visible)){let t=0;r.children.forEach(e=>{e.visible&&(l(e,r),t+=e.colSpan)}),r.colSpan=t}else r.colSpan=1},r=(e.forEach(e=>{e.level=1,l(e)}),[]);for(let e=0;e<t;e++)r.push([]);return fe(e).forEach(e=>{e.children&&e.children.length&&e.children.some(e=>e.visible)?e.rowSpan=1:e.rowSpan=t-e.level+1,r[e.level-1].push(e)}),r})(this.tableGroupColumn):[]}}};let Ue="footer",{renderer:We,renderEmptyElement:Ge}=nr.VxeUI;function wi(y,e,E,T,R,S,O,F){let D=e.$parent;var t=D,r=D,l=D;let I=D.$xeGrid,$=e.fixedType,{resizable:k,border:M,footerCellClassName:A,footerCellStyle:L,footerAlign:_,footerSpanMethod:V,align:H,columnKey:B,showFooterOverflow:P}=t,{scrollXLoad:z,scrollYLoad:N,overflowX:j,currentColumn:U}=r,{fullColumnIdData:W,mergeFooterList:G,mergeFooterCellMaps:q,scrollXStore:X}=l,Y=D.computeVirtualXOpts,K=D.computeTooltipOpts,ee=D.resizableOpts.isAllColumnDrag,Z=D.computeColumnOpts;e=D.computeDefaultRowHeight;let te=D.computeCellOpts,Q=D.computeFooterCellOpts,J=jl(Q.height)||e;return T.map((t,e)=>{var{type:r,showFooterOverflow:l,footerAlign:o,align:i,footerClassName:n,editRender:a,cellRender:s}=t,c=t.id,d=W[c]||{},a=a||s,s=a?We.get(a.name):null;let u=K.showAll;var a=t.children&&t.children.length,a=$?t.fixed!==$&&!a:t.fixed&&j,p=(sr().isBoolean(Q.padding)?Q:te).padding,l=sr().eqNull(l)?P:l,o=o||(s?s.tableFooterCellAlign:"")||_||i||(s?s.tableCellAlign:"")||H,i="ellipsis"===l;let h="title"===l,m=!0===l||"tooltip"===l;var s=h||m||i,l=sr().isBoolean(t.resizable)?t.resizable:Z.resizable||k,g={colid:c},f={},v=d.index,d=d._index,x=d;let b={$table:D,$grid:I,row:S,rowIndex:F,_rowIndex:F,$rowIndex:O,column:t,columnIndex:v,$columnIndex:e,_columnIndex:d,itemIndex:x,items:S,fixed:$,type:Ue,data:R},C=((h||m||u)&&(f.mouseenter=e=>{h?Il(e.currentTarget,t):(m||u)&&D.triggerFooterTooltipEvent(e,b)}),(m||u)&&(f.mouseleave=e=>{(m||u)&&D.handleTargetLeaveEvent(e)}),f.click=e=>{D.dispatchEvent("footer-cell-click",Object.assign({cell:e.currentTarget},b),e)},!(f.dblclick=e=>{D.dispatchEvent("footer-cell-dblclick",Object.assign({cell:e.currentTarget},b),e)}));if(G.length){v=q[F+":"+d];if(v){var{rowspan:x,colspan:v}=v;if(!x||!v)return null;1<x&&(C=!0,g.rowspan=x),1<v&&(C=!0,g.colspan=v)}}else if(V){var{rowspan:x=1,colspan:v=1}=V(b)||{};if(!x||!v)return null;1<x&&(g.rowspan=x),1<v&&(g.colspan=v)}x=e===T.length-1,v=!t.resizeWidth&&("auto"===t.minWidth||"auto"===t.width);let w=!1;E&&!C&&z&&!t.fixed&&!Y.immediate&&(d<X.visibleStartIndex-X.preloadSize||d>X.visibleEndIndex+X.preloadSize)&&(w=!0);d={};return s?d.height=J+"px":d.minHeight=J+"px",y("td",{class:["vxe-footer--column",t.id,{["col--"+o]:o,["col--"+r]:r,"col--last":x,"fixed--width":!v,"fixed--hidden":a,"is--padding":p,"col--ellipsis":s,"col--current":U===t},hr(n,b),hr(A,b)],attrs:g,style:L?sr().isFunction(L)?L(b):L:void 0,on:f,key:B||z||N||Z.useKey||Z.drag?t.id:e},[y("div",{class:["vxe-cell",{"c--title":h,"c--tooltip":m,"c--ellipsis":i}],style:d},w?[]:[y("div",{attrs:{colid:c},class:"vxe-cell--wrapper"},t.renderFooter(y,b))]),!a&&l&&ee?y("div",{class:["vxe-cell--col-resizable",{"is--line":!M||"none"===M}],on:{mousedown:e=>D.handleColResizeMousedownEvent(e,$,b),dblclick:e=>D.handleColResizeDblclickEvent(e,b)}}):Ge(D)])})}var yi={name:"VxeTableFooter",props:{footerTableData:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},fixedColumn:{type:Array,default:()=>[]},fixedType:{type:String,default:null}},mounted(){var e=this.fixedType,t=this.$parent.elemStore,e=`${e||"main"}-footer-`;t[e+"wrapper"]=this.$refs.refElem,t[e+"scroll"]=this.$refs.refFooterScroll,t[e+"table"]=this.$refs.refFooterTable,t[e+"colgroup"]=this.$refs.refFooterColgroup,t[e+"list"]=this.$refs.refFooterTFoot,t[e+"xSpace"]=this.$refs.refFooterXSpace},destroyed(){var e=this.fixedType,t=this.$parent.elemStore,e=`${e||"main"}-footer-`;t[e+"wrapper"]=null,t[e+"scroll"]=null,t[e+"table"]=null,t[e+"colgroup"]=null,t[e+"list"]=null,t[e+"xSpace"]=null},render(r){let t=this.$parent;var e=t,l=t,o=t,i=t.xID;let{fixedType:n,fixedColumn:a,tableColumn:s}=this;var{spanMethod:e,footerSpanMethod:c,showFooterOverflow:d}=e,{visibleColumn:o,fullColumnIdData:u}=o,{isGroup:l,isColLoading:p,overflowX:h,scrollXLoad:m,dragCol:g}=l;let f=s,v=!1;return m&&d&&(e||c||(v=!0)),v&&(p||!n&&h)||(f=o),n&&v&&(f=a||[]),n||l||m&&g&&2<f.length&&(d=u[g.id])&&(e=d._index,c=f[0],p=f[f.length-1],h=u[c.id],o=u[p.id],h)&&o&&(l=h._index,m=o._index,e<l?f=[g].concat(f):m<e&&(f=f.concat([g]))),r("div",{ref:"refElem",class:["vxe-table--footer-wrapper",n?`fixed-${n}--wrapper`:"body--wrapper"],attrs:{xid:i}},[r("div",{ref:"refFooterScroll",class:"vxe-table--footer-inner-wrapper",on:{scroll(e){t.triggerFooterScrollEvent(e,n)}}},[n?Ge(t):r("div",{ref:"refFooterXSpace",class:"vxe-body--x-space"}),r("table",{ref:"refFooterTable",class:"vxe-table--footer",attrs:{xid:i,cellspacing:0,cellpadding:0,border:0,xvm:v?"1":null}},[r("colgroup",{ref:"refFooterColgroup"},f.map((e,t)=>r("col",{attrs:{name:e.id},key:t,style:{width:e.renderWidth+"px"}}))),r("tfoot",{ref:"refFooterTFoot"},((o,i,n,a)=>{let s=i.$parent;var e=s,t=s;let{fixedType:c,footerTableData:d}=i,{footerRowClassName:u,footerRowStyle:p}=e,{isColLoading:h,isDragColMove:m}=t,g=s.computeColumnOpts,f=s.computeColumnDragOpts;return d.map((e,t)=>{var r=t,l={$table:s,row:e,_rowIndex:r,$rowIndex:t,fixed:c,type:Ue};return!h&&g.drag&&f.animation?o("transition-group",{key:t,props:{tag:"tr",name:"vxe-header--col-list"+(m?"":"-disabled"),class:["vxe-footer--row",u?sr().isFunction(u)?u(l):u:""],style:p?sr().isFunction(p)?p(l):p:void 0}},wi(o,i,n,a,d,e,t,r)):o("tr",{key:t,class:["vxe-footer--row",u?sr().isFunction(u)?u(l):u:""],style:p?sr().isFunction(p)?p(l):p:void 0},wi(o,i,n,a,d,e,t,r))})})(r,this,v,f))])])])}};let r=nr.VxeUI.getConfig,qe={id:[String,Function],data:Array,height:[Number,String],minHeight:{type:[Number,String],default:()=>r().table.minHeight},maxHeight:[Number,String],resizable:{type:Boolean,default:()=>r().table.resizable},stripe:{type:Boolean,default:()=>r().table.stripe},border:{type:[Boolean,String],default:()=>r().table.border},padding:{type:Boolean,default:null},round:{type:Boolean,default:()=>r().table.round},size:{type:String,default:()=>r().table.size||r().size},fit:{type:Boolean,default:()=>r().table.fit},loading:Boolean,align:{type:String,default:()=>r().table.align},headerAlign:{type:String,default:()=>r().table.headerAlign},footerAlign:{type:String,default:()=>r().table.footerAlign},showHeader:{type:Boolean,default:()=>r().table.showHeader},highlightCurrentRow:{type:Boolean,default:()=>r().table.highlightCurrentRow},highlightHoverRow:{type:Boolean,default:()=>r().table.highlightHoverRow},highlightCurrentColumn:{type:Boolean,default:()=>r().table.highlightCurrentColumn},highlightHoverColumn:{type:Boolean,default:()=>r().table.highlightHoverColumn},highlightCell:Boolean,showFooter:Boolean,footerData:Array,footerMethod:Function,rowClassName:[String,Function],cellClassName:[String,Function],headerRowClassName:[String,Function],headerCellClassName:[String,Function],footerRowClassName:[String,Function],footerCellClassName:[String,Function],cellStyle:[Object,Function],headerCellStyle:[Object,Function],footerCellStyle:[Object,Function],rowStyle:[Object,Function],headerRowStyle:[Object,Function],footerRowStyle:[Object,Function],mergeCells:Array,mergeFooterItems:Array,spanMethod:Function,footerSpanMethod:Function,showOverflow:{type:[Boolean,String],default:()=>r().table.showOverflow},showHeaderOverflow:{type:[Boolean,String],default:()=>r().table.showHeaderOverflow},showFooterOverflow:{type:[Boolean,String],default:()=>r().table.showFooterOverflow},columnKey:Boolean,rowKey:Boolean,rowId:{type:String,default:()=>r().table.rowId},zIndex:Number,emptyText:{type:String,default:()=>r().table.emptyText},keepSource:{type:Boolean,default:()=>r().table.keepSource},autoResize:{type:Boolean,default:()=>r().table.autoResize},syncResize:[Boolean,String,Number],resizeConfig:Object,columnConfig:Object,currentColumnConfig:Object,cellConfig:Object,headerCellConfig:Object,footerCellConfig:Object,rowConfig:Object,aggregateConfig:Object,rowGroupConfig:Object,currentRowConfig:Object,dragConfig:Object,rowDragConfig:Object,columnDragConfig:Object,resizableConfig:Object,seqConfig:Object,sortConfig:Object,filterConfig:Object,radioConfig:Object,checkboxConfig:Object,tooltipConfig:Object,exportConfig:[Boolean,Object],importConfig:[Boolean,Object],printConfig:Object,expandConfig:Object,treeConfig:[Boolean,Object],menuConfig:[Boolean,Object],contextMenu:[Boolean,Object],mouseConfig:Object,areaConfig:Object,keyboardConfig:Object,clipConfig:Object,fnrConfig:Object,editConfig:[Boolean,Object],validConfig:Object,editRules:Object,loadingConfig:Object,emptyRender:[Boolean,Object],customConfig:Object,scrollX:Object,scrollY:Object,virtualXConfig:Object,virtualYConfig:Object,scrollbarConfig:Object,animat:{type:Boolean,default:()=>r().table.animat},delayHover:{type:Number,default:()=>r().table.delayHover},params:Object},{getI18n:N,getIcon:j,renderEmptyElement:U}=nr.VxeUI;function Ei(e,t,r,l,o){var i,n,a=e.prevDragToChild,s=e.$refs.bodyElemRef;s&&(i=s.getBoundingClientRect(),r&&(n=e.$refs.refDragLineElem)&&(l?(r=r.getBoundingClientRect(),n.style.display="block",n.style.top=Math.max(1,r.y+s.scrollTop-i.y)+"px",n.style.height=r.height+"px",n.style.width=r.width+"px",n.setAttribute("drag-pos",o),n.setAttribute("drag-to-child",a?"y":"n")):n.style.display=""),r=e.$refs.refDragTipElem)&&(r.style.display="block",r.style.top=Math.min(s.clientHeight+s.scrollTop-r.clientHeight,t.clientY+s.scrollTop-i.y)+"px",r.style.left=Math.min(s.clientWidth+s.scrollLeft-r.clientWidth,t.clientX+s.scrollLeft-i.x)+"px",r.setAttribute("drag-status",l?a?"sub":"normal":"disabled"))}function Ti(e){var t=e.$refs.refDragTipElem,e=e.$refs.refDragLineElem;t&&(t.style.display=""),e&&(e.style.display="")}let Xe=(e,t)=>{var t=t.$xeTable,r=t.dragColumnRef;return e("div",{},[e("div",{ref:"refDragLineElem",class:["vxe-table-custom-popup--drag-line",{"is--guides":t.computeColumnDragOpts.showGuidesStatus}]}),e("div",{ref:"refDragTipElem",class:"vxe-table-custom-popup--drag-tip"},[e("div",{class:"vxe-table-custom-popup--drag-tip-wrapper"},[e("div",{class:"vxe-table-custom-popup--drag-tip-status"},[e("span",{class:["vxe-table-custom-popup--drag-tip-normal-status",j().TABLE_DRAG_STATUS_ROW]}),e("span",{class:["vxe-table-custom-popup--drag-tip-sub-status",j().TABLE_DRAG_STATUS_SUB_ROW]}),e("span",{class:["vxe-table-custom-popup--drag-tip-disabled-status",j().TABLE_DRAG_DISABLED]})]),e("div",{class:"vxe-table-custom-popup--drag-tip-content"},N("vxe.custom.cstmDragTarget",[r&&"html"!==r.type?r.getTitle():""]))])])])};var Ri={name:"VxeTableCustomPanel",props:{customStore:{type:Object,default:()=>({})}},inject:{$xeTable:{default:null}},data(){return{prevDragCol:void 0,prevDragToChild:!1,prevDragPos:null}},computed:{},created(){let t=nr.VxeUI.getComponent("VxeModal"),r=nr.VxeUI.getComponent("VxeDrawer"),l=nr.VxeUI.getComponent("VxeButton"),o=nr.VxeUI.getComponent("VxeNumberInput"),i=nr.VxeUI.getComponent("VxeRadioGroup");this.$nextTick(()=>{var e=this.$xeTable.customOpts,e=e.mode;t||"modal"!==e||A("vxe.error.reqComp",["vxe-modal"]),r||"drawer"!==e||A("vxe.error.reqComp",["vxe-drawer"]),l||A("vxe.error.reqComp",["vxe-button"]),o||A("vxe.error.reqComp",["vxe-input"]),i||A("vxe.error.reqComp",["vxe-radio-group"])})},render(e){var t=this.$xeTable.computeCustomOpts;return(["modal","drawer","popup"].includes(""+t.mode)?(d,u)=>{var e=nr.VxeUI.getComponent("VxeModal"),t=nr.VxeUI.getComponent("VxeDrawer");let r=nr.VxeUI.getComponent("VxeButton"),p=nr.VxeUI.getComponent("VxeInput"),h=u,m=u.$xeTable;var l=m,o=m,i=m.$xeGrid;let n=u.customStore,_=l.resizable,{isCustomStatus:a,customColumnList:s}=o,c=m.computeCustomOpts,g=c.immediate;l=m.computeColumnDragOpts;let{mode:V,modalOptions:H,drawerOptions:B,allowVisible:f,allowSort:P,allowFixed:v,allowResizable:x,checkMethod:b,visibleMethod:C}=c,w=m.computeColumnOpts,y=w.maxFixedSize,{minWidth:E,maxWidth:T}=m.computeResizableOpts;var o=Object.assign({},H),R=Object.assign({},B);let S=m.computeIsMaxFixedColumn,z=l.isCrossDrag;l=c.slots||{};let O=l.header,F=l.top,D=l.bottom,I=l.default,$=l.footer,k=[],M=n.isAll,A=n.isIndeterminate,L={$table:m,$grid:i,columns:s,isAllChecked:M,isAllIndeterminate:A,isCustomStatus:a};sr().eachTree(s,(l,o,e,t,i)=>{if(!C||C({$table:m,column:l})){let e=0,t=0;x&&(o={$table:m,column:l,columnIndex:o,$columnIndex:o,$rowIndex:-1},E&&(e=sr().toNumber(sr().isFunction(E)?E(o):E)),T)&&(t=sr().toNumber(sr().isFunction(T)?T(o):T));var o=l.renderVisible,n=l.halfVisible,a=ur(l.getTitle(),1),s=l.children&&l.children.length;let r=!!b&&!b({$table:m,column:l});var c=!o;k.push(d("tr",{key:l.id,attrs:{colid:l.id},class:["vxe-table-custom-popup--row level--"+l.level,{"is--group":s}],on:{dragstart:u.sortDragstartEvent,dragend:u.sortDragendEvent,dragover:u.sortDragoverEvent}},[f?d("td",{class:"vxe-table-custom-popup--column-item col--visible"},[d("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":o,"is--indeterminate":n,"is--disabled":r}],attrs:{title:N("vxe.custom.setting.colVisible")},on:{click:()=>{r||u.changeCheckboxOption(l)}}},[d("span",{class:["vxe-checkbox--icon",n?j().TABLE_CHECKBOX_INDETERMINATE:o?j().TABLE_CHECKBOX_CHECKED:j().TABLE_CHECKBOX_UNCHECKED]})])]):U(m),d("td",{class:"vxe-table-custom-popup--column-item col--name"},[d("div",{class:"vxe-table-custom-popup--name"},[P?z&&g||1===l.level?d("div",{class:["vxe-table-custom-popup--column-sort-btn",{"is--disabled":r||c||l.renderFixed}],attrs:{title:N("vxe.custom.setting.sortHelpTip")},on:r||c||l.renderFixed?{}:{mousedown:u.sortMousedownEvent,mouseup:u.sortMouseupEvent}},[d("i",{class:j().TABLE_CUSTOM_SORT})]):d("div",{class:"vxe-table-custom-popup--column-sort-placeholder"}):U(m),"html"===l.type?d("div",{key:"1",class:"vxe-table-custom-popup--title",domProps:{innerHTML:a}}):d("div",{key:"0",class:"vxe-table-custom-popup--title",attrs:{title:a}},a)])]),x?d("td",{class:"vxe-table-custom-popup--column-item col--resizable"},[l.children&&l.children.length||!(sr().isBoolean(l.resizable)?l.resizable:w.resizable||_)?d("span","-"):p?d(p,{props:{type:"integer",immediate:!1,disabled:r||c,value:l.renderResizeWidth,min:e||void 0,max:t||void 0},on:{modelValue(e){l.renderResizeWidth=Math.max(0,Number(e))},change(){u.changeColumnWidth(l)}}}):U(h)]):U(m),v?d("td",{class:"vxe-table-custom-popup--column-item col--fixed"},[i?d("span","-"):d("vxe-radio-group",{props:{value:l.renderFixed||"",type:"button",size:"mini",disabled:r||c,options:[{label:N("vxe.custom.setting.fixedLeft"),value:"left",disabled:r||c||S},{label:N("vxe.custom.setting.fixedUnset"),value:"",disabled:r||c},{label:N("vxe.custom.setting.fixedRight"),value:"right",disabled:r||c||S}]},on:{input(e){u.changeFixedOption(l,e)}}})]):U(m)]))}});l={default:()=>I?m.callSlot(I,L,d):d("div",{ref:"bodyElemRef",class:"vxe-table-custom-popup--body"},[F?d("div",{class:"vxe-table-custom-popup--table-top"},m.callSlot(F,L,d)):U(m),d("div",{class:"vxe-table-custom-popup--table-wrapper"},[d("table",{},[d("colgroup",{},[f?d("col",{class:"vxe-table-custom-popup--table-col-seq"}):U(m),d("col",{class:"vxe-table-custom-popup--table-col-title"}),x?d("col",{class:"vxe-table-custom-popup--table-col-width"}):U(m),v?d("col",{class:"vxe-table-custom-popup--table-col-fixed"}):U(m)]),d("thead",{},[d("tr",{},[f?d("th",{},[d("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":M,"is--indeterminate":A}],attrs:{title:N("vxe.table.allTitle")},on:{click:u.allOptionEvent}},[d("span",{class:["vxe-checkbox--icon",A?j().TABLE_CHECKBOX_INDETERMINATE:M?j().TABLE_CHECKBOX_CHECKED:j().TABLE_CHECKBOX_UNCHECKED]}),d("span",{class:"vxe-checkbox--label"},N("vxe.toolbar.customAll"))])]):U(m),d("th",{},N("vxe.custom.setting.colTitle")),x?d("th",{},N("vxe.custom.setting.colResizable")):U(m),v?d("th",{},N("vxe.custom.setting."+(y?"colFixedMax":"colFixed"),[y])):U(m)])]),d("transition-group",{class:"vxe-table-custom--panel-list",props:{tag:"tbody",name:"vxe-table-custom--list"}},k)])]),D?d("div",{class:"vxe-table-custom-popup--table-bottom"},m.callSlot(D,L,d)):U(m),Xe(d,u)]),footer:()=>$?m.callSlot($,L,d):d("div",{class:"vxe-table-custom-popup--footer"},[d(r,{props:{content:c.resetButtonText||N("vxe.custom.cstmRestore"),disabled:!a},on:{click:u.resetCustomEvent}}),g?d(r,{props:{content:c.resetButtonText||N("vxe.table.customClose")},on:{click:u.cancelCloseEvent}}):d(r,{props:{content:c.resetButtonText||N("vxe.custom.cstmCancel")},on:{click:u.cancelCustomEvent}}),g?U(m):d(r,{props:{status:"primary",content:c.confirmButtonText||N("vxe.custom.cstmConfirm")},on:{click:u.confirmCustomEvent}})])};return O&&(l.header=()=>m.callSlot(O,L,d)),"drawer"===V?t?d(t,{key:"drawer",props:{className:["vxe-table-custom-drawer-wrapper","vxe-table--ignore-clear",R.className||""].join(" "),value:n.visible,title:R.title||N("vxe.custom.cstmTitle"),width:R.width||Math.min(880,Math.floor(.6*document.documentElement.clientWidth)),position:R.position,resize:!!R.resize,escClosable:!!R.escClosable,maskClosable:!!R.maskClosable,destroyOnClose:!0,showFooter:!0},on:{input(e){n.visible=e}},scopedSlots:l}):U(h):e?d(e,{key:"modal",props:{className:["vxe-table-custom-popup-wrapper","vxe-table--ignore-clear",o.className||""].join(" "),value:n.visible,title:o.title||N("vxe.custom.cstmTitle"),width:o.width||Math.min(880,document.documentElement.clientWidth),minWidth:o.minWidth||700,height:o.height||Math.min(680,document.documentElement.clientHeight),minHeight:o.minHeight||400,showZoom:o.showZoom,showMaximize:o.showMaximize,showMinimize:o.showMinimize,mask:o.mask,lockView:o.lockView,resize:o.resize,escClosable:!!o.escClosable,maskClosable:!!o.maskClosable,destroyOnClose:!0,showFooter:!0},on:{input(e){n.visible=e}},scopedSlots:l}):U(h)}:(d,u)=>{let p=nr.VxeUI.getComponent("VxeButton");let h=u.$xeTable;var e=h,t=h.$xeGrid,r=u.customStore,{isCustomStatus:e,customColumnList:l}=e,o=h.computeCustomOpts;let m=o.immediate;var i=h.computeColumnDragOpts,n=r.maxHeight;let{checkMethod:g,visibleMethod:f,allowVisible:v,allowSort:x,allowFixed:b,trigger:a,placement:s}=o,C=h.computeIsMaxFixedColumn,w=i.isCrossDrag;var i=o.slots||{},c=i.header,y=i.top,E=i.bottom,T=i.default,i=i.footer;let R=[];var S={},O=r.isAll,F=r.isIndeterminate,t=("hover"===a&&(S.mouseenter=u.handleWrapperMouseenterEvent,S.mouseleave=u.handleWrapperMouseleaveEvent),{$table:h,$grid:t,columns:l,isAllChecked:O,isAllIndeterminate:F,isCustomStatus:e});return sr().eachTree(l,(t,e,r,l,o)=>{if(!f||f({$table:h,column:t})){var i=t.renderVisible,n=t.halfVisible,a=t.children&&t.children.length,s=ur(t.getTitle(),1);let e=!!g&&!g({$table:h,column:t});var c=!i;R.push(d("li",{key:t.id,attrs:{colid:t.id},class:["vxe-table-custom--option","level--"+t.level,{"is--hidden":e||c,"is--group":a}],on:{dragstart:u.sortDragstartEvent,dragend:u.sortDragendEvent,dragover:u.sortDragoverEvent}},[v?d("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":i,"is--indeterminate":n,"is--disabled":e}],attrs:{title:N("vxe.custom.setting.colVisible")},on:{click:()=>{e||u.changeCheckboxOption(t)}}},[d("span",{class:["vxe-checkbox--icon",n?j().TABLE_CHECKBOX_INDETERMINATE:i?j().TABLE_CHECKBOX_CHECKED:j().TABLE_CHECKBOX_UNCHECKED]})]):U(h),d("div",{class:"vxe-table-custom--name-option"},[x&&(w&&m||1===t.level)?d("div",{class:"vxe-table-custom--sort-option"},[d("span",{class:["vxe-table-custom--sort-btn",{"is--disabled":e||c||t.renderFixed}],attrs:{title:N("vxe.custom.setting.sortHelpTip")},on:e||c||t.renderFixed?{}:{mousedown:u.sortMousedownEvent,mouseup:u.sortMouseupEvent}},[d("i",{class:j().TABLE_CUSTOM_SORT})])]):U(h),"html"===t.type?d("div",{key:"1",class:"vxe-table-custom--checkbox-label",domProps:{innerHTML:s}}):d("div",{key:"0",class:"vxe-table-custom--checkbox-label",attrs:{title:s}},s)]),!o&&b?d("div",{class:"vxe-table-custom--fixed-option"},[d(p,{props:{mode:"text",icon:"left"===t.renderFixed?j().TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:j().TOOLBAR_TOOLS_FIXED_LEFT,status:"left"===t.renderFixed?"primary":"",disabled:e||c||C&&!t.renderFixed,title:N("left"===t.renderFixed?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedLeft")},on:{click:()=>{u.changeFixedOption(t,"left")}}}),d(p,{props:{mode:"text",icon:"right"===t.renderFixed?j().TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:j().TOOLBAR_TOOLS_FIXED_RIGHT,status:"right"===t.renderFixed?"primary":"",disabled:e||c||C&&!t.renderFixed,title:N("right"===t.renderFixed?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedRight")},on:{click:()=>{u.changeFixedOption(t,"right")}}})]):U(h)]))}}),d("div",{key:"simple",class:["vxe-table-custom-wrapper","placement--"+s,{"is--active":r.visible}],style:n&&!["left","right"].includes(s||"")?{maxHeight:n+"px"}:{}},r.visible?[d("div",{class:"vxe-table-custom--header"},c?h.callSlot(c,t,d):[d("ul",{class:"vxe-table-custom--panel-list"},[d("li",{class:"vxe-table-custom--option"},[v?d("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":O,"is--indeterminate":F}],attrs:{title:N("vxe.table.allTitle")},on:{click:u.allOptionEvent}},[d("span",{class:["vxe-checkbox--icon",F?j().TABLE_CHECKBOX_INDETERMINATE:O?j().TABLE_CHECKBOX_CHECKED:j().TABLE_CHECKBOX_UNCHECKED]}),d("span",{class:"vxe-checkbox--label"},N("vxe.toolbar.customAll"))]):d("span",{class:"vxe-checkbox--label"},N("vxe.table.customTitle"))])])]),d("div",{ref:"bodyElemRef",class:"vxe-table-custom--body"},[y?d("div",{class:"vxe-table-custom--panel-top"},h.callSlot(y,t,d)):U(h),T?d("div",{class:"vxe-table-custom--panel-body"},h.callSlot(T,t,d)):d("transition-group",{class:"vxe-table-custom--panel-list",props:{name:"vxe-table-custom--list",tag:"ul"},on:S},R),E?d("div",{class:"vxe-table-custom--panel-bottom"},h.callSlot(E,t,d)):U(h),Xe(d,u)]),o.showFooter?d("div",{class:"vxe-table-custom--footer"},i?h.callSlot(i,t,d):[d("div",{class:"vxe-table-custom--footer-buttons"},[d(p,{props:{mode:"text",content:o.resetButtonText||N("vxe.table.customRestore"),disabled:!e},on:{click:u.resetCustomEvent}}),m?d(p,{props:{mode:"text",content:o.closeButtonText||N("vxe.table.customClose")},on:{click:u.cancelCloseEvent}}):d(p,{props:{mode:"text",content:o.resetButtonText||N("vxe.table.customCancel")},on:{click:u.cancelCustomEvent}}),m?U(h):d(p,{props:{mode:"text",status:"primary",content:o.confirmButtonText||N("vxe.table.customConfirm")},on:{click:u.confirmCustomEvent}})])]):null]:[])})(e,this)},methods:{handleWrapperMouseenterEvent(e){var t=this.$xeTable,r=this.customStore;r.activeWrapper=!0,t.customOpenEvent(e)},handleWrapperMouseleaveEvent(e){let t=this.$xeTable,r=this.customStore;r.activeWrapper=!1,setTimeout(()=>{r.activeBtn||r.activeWrapper||t.customCloseEvent(e)},300)},getStoreData(){return{}},confirmCustomEvent({$event:e}){var t=this.$xeTable;t.isCustomStatus=!0,t.saveCustom(),t.closeCustom(),t.emitCustomEvent("confirm",e)},cancelCloseEvent({$event:e}){var t=this.$xeTable;t.closeCustom(),t.emitCustomEvent("close",e)},cancelCustomEvent({$event:e}){var t=this.$xeTable;t.cancelCustom(),t.closeCustom(),t.emitCustomEvent("cancel",e)},handleResetCustomEvent(e){var t=this.$xeTable;t.resetCustom(!0),t.closeCustom(),t.emitCustomEvent("reset",e)},resetCustomEvent(t){nr.VxeUI.modal?nr.VxeUI.modal.confirm({content:N("vxe.custom.cstmConfirmRestore"),className:"vxe-table--ignore-clear",escClosable:!0}).then(e=>{"confirm"===e&&this.handleResetCustomEvent(t)}):this.handleResetCustomEvent(t)},resetPopupCustomEvent(t){nr.VxeUI.modal?nr.VxeUI.modal.confirm({content:N("vxe.custom.cstmConfirmRestore"),className:"vxe-table--ignore-clear",escClosable:!0}).then(e=>{"confirm"===e&&this.resetCustomEvent(t)}):this.resetCustomEvent(t)},handleOptionCheck(t){var e=this.$xeTable.customColumnList,e=sr().findTree(e,e=>e===t);e&&e.parent&&(e=e.parent,e.children)&&e.children.length&&(e.visible=e.children.every(e=>e.visible),e.halfVisible=!e.visible&&e.children.some(e=>e.visible||e.halfVisible),this.handleOptionCheck(e))},changeCheckboxOption(e){var t=this.$xeTable,r=t,l=t.computeCustomOpts;let o=!e.renderVisible;l.immediate?(sr().eachTree([e],e=>{e.visible=o,e.renderVisible=o,e.halfVisible=!1}),r.isCustomStatus=!0,t.handleCustom(),t.saveCustomStore("update:visible")):sr().eachTree([e],e=>{e.renderVisible=o,e.halfVisible=!1}),this.handleOptionCheck(e),t.checkCustomStatus()},changeColumnWidth(e){var t=this.$xeTable,r=t;t.computeCustomOpts.immediate&&e.renderResizeWidth!==e.renderWidth&&(e.resizeWidth=e.renderResizeWidth,e.renderWidth=e.renderResizeWidth,r.isCustomStatus=!0,t.handleCustom(),t.saveCustomStore("update:width"))},changeFixedOption(e,t){var r=this.$xeTable,l=r,o=r.computeIsMaxFixedColumn;r.computeCustomOpts.immediate?(e.renderFixed===t?sr().eachTree([e],e=>{e.fixed="",e.renderFixed=""}):o&&!e.renderFixed||sr().eachTree([e],e=>{e.fixed=t,e.renderFixed=t}),l.isCustomStatus=!0,r.handleCustom(),r.saveCustomStore("update:fixed")):e.renderFixed===t?sr().eachTree([e],e=>{e.renderFixed=""}):o&&!e.renderFixed||sr().eachTree([e],e=>{e.renderFixed=t})},allOptionEvent(){this.$xeTable.toggleCustomAllCheckbox()},sortMousedownEvent(e){var t=this.$xeTable,e=e.currentTarget.parentElement.parentElement.parentElement,r=e.getAttribute("colid"),t=t.getColumnById(r);e.draggable=!0,this.dragCol=t,fr(e,"active--drag-origin")},sortMouseupEvent(e){e=e.currentTarget.parentElement.parentElement.parentElement;Ti(this),e.draggable=!1,this.dragCol=null,gr(e,"active--drag-origin")},sortDragstartEvent(e){e.dataTransfer&&e.dataTransfer.setDragImage(wl(),0,0)},sortDragendEvent(d){let u=this.$xeTable;var e=u;let p=u;var t=u;let{dragCol:r,prevDragPos:h,prevDragCol:l,prevDragToChild:m}=this,g=e.mouseConfig,f=p.customColumnList,v=t.collectColumn,x=u.computeCustomOpts.immediate;e=d.currentTarget;let{isCrossDrag:b,isSelfToChildDrag:C,isToChildDrag:w,dragEndMethod:o}=u.computeColumnDragOpts,y="bottom"===h?1:0;if(l&&r&&l!==r){let s=r,c=l;Promise.resolve(!o||o({oldColumn:s,newColumn:c,dragColumn:s,dragPos:h,dragToChild:!!m,offsetIndex:y})).then(o=>{if(o){let e=-1,t=-1,r={},l=(sr().eachTree([s],e=>{r[e.id]=e}),!1);if(x){if(s.parentId&&c.parentId){if(!b)return;if(r[c.id]&&(l=!0,!b||!C))return void(nr.VxeUI.modal&&nr.VxeUI.modal.message({status:"error",content:N("vxe.error.treeDragChild")}))}else if(s.parentId){if(!b)return}else if(c.parentId){if(!b)return;if(r[c.id]&&(l=!0,!b||!C))return void(nr.VxeUI.modal&&nr.VxeUI.modal.message({status:"error",content:N("vxe.error.treeDragChild")}))}var i,n,a,o=sr().findTree(v,e=>e.id===s.id),o=(l&&b&&C?o&&({items:i,index:a}=o,(n=s.children||[]).forEach(e=>{e.parentId=s.parentId}),i.splice(a,1,...n),s.children=[]):o&&({items:i,index:a,parent:n}=o,i.splice(a,1),n||(e=a)),sr().findTree(v,e=>e.id===c.id));o&&({items:i,index:n,parent:a}=o,b&&w&&m?(s.parentId=c.id,c.children=(c.children||[]).concat([s])):(s.parentId=c.parentId,i.splice(n+y,0,s)),a||(t=n)),sr().eachTree(v,(e,t,r,l,o)=>{o||(e.renderSortNumber=t+1)})}else e=sr().findIndexOf(f,e=>e.id===s.id),f.splice(e,1),t=sr().findIndexOf(f,e=>e.id===c.id),f.splice(t+y,0,s);p.isDragColMove=!0,g&&(u.clearSelected&&u.clearSelected(),u.clearCellAreas)&&(u.clearCellAreas(),u.clearCopyCellArea()),u.dispatchEvent("column-dragend",{oldColumn:s,newColumn:c,dragColumn:s,dragPos:h,offsetIndex:y,_index:{newIndex:t,oldIndex:e}},d),x&&(p.customColumnList=v.slice(0),u.handleColDragSwapColumn())}}).catch(()=>{})}Ti(this),this.dragCol.value=null,e.draggable=!1,e.removeAttribute("drag-pos"),gr(e,"active--drag-target"),gr(e,"active--drag-origin")},sortDragoverEvent(e){var t=this.$xeTable,r=this.dragCol,l=t.computeCustomOpts.immediate,{isCrossDrag:o,isToChildDrag:i}=t.computeColumnDragOpts,n=e.currentTarget,a=Rl(e),s=n.getAttribute("colid"),t=t.getColumnById(s);t&&(o||1===t.level)&&(e.preventDefault(),s=e.clientY-n.getBoundingClientRect().y<n.clientHeight/2?"top":"bottom",r&&r.id===t.id||!o&&1<t.level||!l&&1<t.level||t.renderFixed?Ei(this,e,n,!1,s):(this.prevDragToChild=!!(o&&i&&a&&l),this.prevDragCol=t,this.prevDragPos=s,Ei(this,e,n,!0,s)))}}};let{getI18n:Qe,getIcon:p,renderer:Je,globalMixins:et}=nr.VxeUI;var Si={name:"VxeTableFilterPanel",mixins:[et.sizeMixin],props:{filterStore:Object},inject:{$xeTable:{default:null}},computed:{computeHasCheckOption(){var e=this.filterStore;return e&&e.options.some(e=>e.checked)}},mounted(){var e=this.$xeTable.computeFilterOpts.transfer,t=this.$refs.refElem;e&&t&&document.body.appendChild(t)},beforeDestroy(){var e=this.$refs.refElem;e&&e.parentNode&&e.parentNode.removeChild(e)},render(e){var t=this.$xeTable,r=t,l=this.filterStore,{visible:o,multiple:i,column:n}=l,a=n?n.filterRender:null,s=cr(a)?Je.get(a.name):null,c=s?s.tableFilterClassName||s.filterClassName:"",r=Object.assign({},r._currFilterParams,{$panel:this,$table:t}),d=t,u=this.computeSize,t=t.computeFilterOpts.destroyOnClose;return e("div",{ref:"refElem",class:["vxe-table--filter-wrapper","filter--prevent-default",s&&s.className?s.className:"",hr(c,r),{["size--"+u]:u,"is--animat":d.animat,"is--multiple":i,"is--active":o}],style:l.style},l.visible&&(!t||o)&&n?((r,l,e,t)=>{var o=r.$xeTable;let i=r.filterStore,{column:n,multiple:a,maxHeight:s}=i;var c=(c=n?n.slots:null)?c.filter:null,d=Object.assign({},o._currFilterParams,{$panel:r,$table:o}),t=t?t.renderTableFilter||t.renderFilter:null;return c?[l("div",{class:"vxe-table--filter-template",style:s?{maxHeight:s+"px"}:{}},o.callSlot(c,d,l))]:t?[l("div",{class:"vxe-table--filter-template",style:s?{maxHeight:s+"px"}:{}},Dr(t.call(o,l,e,d)))]:(c=a?i.isAllSelected:!i.options.some(e=>e._checked),t=a&&i.isIndeterminate,[l("ul",{class:"vxe-table--filter-header"},[l("li",{class:["vxe-table--filter-option",{"is--checked":c,"is--indeterminate":t}],attrs:{title:Qe(a?"vxe.table.allTitle":"vxe.table.allFilter")},on:{click:e=>{r.changeAllOption(e,!i.isAllSelected)}}},(a?[l("span",{class:["vxe-checkbox--icon",t?p().TABLE_CHECKBOX_INDETERMINATE:c?p().TABLE_CHECKBOX_CHECKED:p().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([l("span",{class:"vxe-checkbox--label"},Qe("vxe.table.allFilter"))]))]),l("ul",{class:"vxe-table--filter-body",style:s?{maxHeight:s+"px"}:{}},i.options.map(t=>{var e=t._checked;return l("li",{class:["vxe-table--filter-option",{"is--checked":e}],attrs:{title:t.label},on:{click:e=>{r.changeOption(e,!t._checked,t)}}},(a?[l("span",{class:["vxe-checkbox--icon",e?p().TABLE_CHECKBOX_CHECKED:p().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([l("span",{class:"vxe-checkbox--label"},ur(t.label,1))]))}))])})(this,e,a,s).concat(((e,t)=>{var r=e.filterStore,{column:l,multiple:o}=r,i=e.$xeTable.computeFilterOpts,n=e.computeHasCheckOption,l=cr(l=l.filterRender)?Je.get(l.name):null,n=!n&&!r.isAllSelected&&!r.isIndeterminate;return o&&(!l||!1!==l.showTableFilterFooter&&!1!==l.showFilterFooter&&!1!==l.isFooter)?[t("div",{class:"vxe-table--filter-footer"},[t("button",{class:{"is--disabled":n},attrs:{disabled:n},on:{click:e.confirmFilter}},i.confirmButtonText||Qe("vxe.table.confirmFilter")),t("button",{on:{click:e.resetFilter}},i.resetButtonText||Qe("vxe.table.resetFilter"))])]:[]})(this,e)):[])},methods:{filterCheckAllEvent(e,t){var r=this.filterStore;r.options.forEach(e=>{e._checked=t,e.checked=t}),r.isAllSelected=t,r.isIndeterminate=!1},changeRadioOption(e,t,r){var l=this.$parent,o=this.filterStore;o.options.forEach(e=>{e._checked=!1}),r._checked=t,l.checkFilterOptions(),this.confirmFilter(e)},changeMultipleOption(e,t,r){var l=this.$parent;r._checked=t,l.checkFilterOptions()},changeAllOption(e,t){this.filterStore.multiple?this.filterCheckAllEvent(e,t):this.resetFilter(e)},changeOption(e,t,r){this.filterStore.multiple?this.changeMultipleOption(e,t,r):this.changeRadioOption(e,t,r)},confirmFilter(e){this.$parent.handleFilterConfirmFilter(e)},resetFilter(e){this.$parent.handleFilterResetFilter(e)}}};let{getI18n:g,getIcon:tt,globalMixins:rt,renderEmptyElement:lt}=nr.VxeUI;var Oi={name:"VxeTableImportPanel",mixins:[rt.sizeMixin],props:{defaultOptions:Object,storeData:Object},components:{},inject:{$xeTable:{default:null}},data(){return{loading:!1}},computed:{selectName(){return this.storeData.filename+"."+this.storeData.type},hasFile(){return this.storeData.file&&this.storeData.type},parseTypeLabel(){var e=this.storeData;let{type:t,typeList:r}=e;return t?(e=sr().find(r,e=>t===e.value))?e.label:"*.*":"*."+r.map(e=>e.value).join(", *.")}},created(){let e=nr.VxeUI.getComponent("VxeModal"),t=nr.VxeUI.getComponent("VxeButton"),r=nr.VxeUI.getComponent("VxeSelect");this.$nextTick(()=>{e||A("vxe.error.reqComp",["vxe-modal"]),t||A("vxe.error.reqComp",["vxe-button"]),r||A("vxe.error.reqComp",["vxe-select"])})},render(t){let r=this.$parent,l=r.$xeGrid,{hasFile:o,loading:i,parseTypeLabel:n,defaultOptions:a,storeData:s,selectName:c}=this;var e=a.slots||{};let d=e.top,u=e.bottom,p=e.default,h=e.footer;return t("vxe-modal",{ref:"modal",props:{id:"VXE_IMPORT_MODAL",value:s.visible,title:g("vxe.import.impTitle"),width:540,minWidth:360,minHeight:240,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:i},on:{input(e){s.visible=e},show:this.showEvent},scopedSlots:{default:()=>{var e={$table:r,$grid:l,options:a,params:a.params};return t("div",{class:"vxe-table-export--panel"},[d?t("div",{class:"vxe-table-export--panel-top"},r.callSlot(d,e,t)):lt(this),t("div",{class:"vxe-table-export--panel-body"},p?r.callSlot(p,e,t):[t("table",{class:"vxe-table-export--panel-table",attrs:{cellspacing:0,cellpadding:0,border:0}},[t("tbody",[t("tr",[t("td",g("vxe.import.impFile")),t("td",[o?t("div",{class:"vxe-table-export--selected--file",attrs:{title:c}},[t("span",c),t("i",{class:tt().INPUT_CLEAR,on:{click:this.clearFileEvent}})]):t("button",{ref:"fileBtn",class:"vxe-table-export--select--file",attrs:{type:"button"},on:{click:this.selectFileEvent}},g("vxe.import.impSelect"))])]),t("tr",[t("td",g("vxe.import.impType")),t("td",n)]),t("tr",[t("td",g("vxe.import.impMode")),t("td",[t("vxe-select",{props:{value:a.mode,options:s.modeList},on:{modelValue(e){a.mode=e}}})])])])])]),u?t("div",{class:"vxe-table-export--panel-bottom"},r.callSlot(u,e,t)):lt(this)])},footer:()=>{var e={$table:r,$grid:l,options:a,params:a.params};return t("div",{class:"vxe-table-export--panel-footer"},h?r.callSlot(h,e,t):[t("div",{class:"vxe-table-export--panel-btns"},[t("vxe-button",{on:{click:this.cancelEvent}},g("vxe.import.impCancel")),t("vxe-button",{props:{status:"primary",disabled:!o||i},on:{click:this.importEvent}},g("vxe.import.impConfirm"))])])}}})},methods:{clearFileEvent(){Object.assign(this.storeData,{filename:"",sheetName:"",type:""})},selectFileEvent(){this.$parent.readFile(this.defaultOptions).then(e=>{e=e.file;Object.assign(this.storeData,fl(e),{file:e})}).catch(e=>e)},showEvent(){this.$nextTick(()=>{var e=this.$refs,e=e.fileBtn;e&&e.focus()})},cancelEvent(){this.storeData.visible=!1},importEvent(){var e=this.$parent;this.loading=!0,e.importByFile(this.storeData.file,Object.assign({},e.importOpts,this.defaultOptions)).then(()=>{this.loading=!1,this.storeData.visible=!1}).catch(()=>{this.loading=!1})}}};let{getI18n:R,getIcon:S,globalMixins:ot,renderEmptyElement:it}=nr.VxeUI;var Fi={name:"VxeTableExportPanel",mixins:[ot.sizeMixin],props:{defaultOptions:Object,storeData:Object},components:{},inject:{$xeTable:{default:null}},data(){return{isAll:!1,isIndeterminate:!1,loading:!1}},computed:{checkedAll(){return this.storeData.columns.every(e=>e.checked)},showSheet(){return-1<["html","xml","xlsx","pdf"].indexOf(this.defaultOptions.type)},supportMerge(){var{storeData:e,defaultOptions:t}=this;return!t.original&&"current"===t.mode&&(e.isPrint||-1<["html","xlsx"].indexOf(t.type))},supportStyle(){var e=this.defaultOptions;return!e.original&&-1<["xlsx"].indexOf(e.type)}},created(){let e=nr.VxeUI.getComponent("VxeModal"),t=nr.VxeUI.getComponent("VxeButton"),r=nr.VxeUI.getComponent("VxeSelect"),l=nr.VxeUI.getComponent("VxeInput"),o=nr.VxeUI.getComponent("VxeCheckbox");this.$nextTick(()=>{e||A("vxe.error.reqComp",["vxe-modal"]),t||A("vxe.error.reqComp",["vxe-button"]),r||A("vxe.error.reqComp",["vxe-select"]),l||A("vxe.error.reqComp",["vxe-input"]),o||A("vxe.error.reqComp",["vxe-checkbox"])})},render(n){let r=this.$xeTable,l=r.$xeGrid,{_e:o,checkedAll:i,isAll:a,isIndeterminate:s,showSheet:c,supportMerge:d,supportStyle:u,defaultOptions:p,storeData:h}=this,{hasTree:m,hasMerge:g,isPrint:f,hasColgroup:v,columns:x}=h,b=p.isHeader;var e=p.slots||{};let C=e.top,w=e.bottom,y=e.default,t=e.footer,E=e.parameter,T=[];return sr().eachTree(x,e=>{var t=ur(e.getTitle(),1),r=e.children&&e.children.length,l=e.checked,o=e.halfChecked,i="html"===e.type;T.push(n("li",{class:["vxe-table-export--panel-column-option","level--"+e.level,{"is--group":r,"is--checked":l,"is--indeterminate":o,"is--disabled":e.disabled}],attrs:{title:t},on:{click:()=>{e.disabled||this.changeOption(e)}}},[n("span",{class:["vxe-checkbox--icon",o?S().TABLE_CHECKBOX_INDETERMINATE:l?S().TABLE_CHECKBOX_CHECKED:S().TABLE_CHECKBOX_UNCHECKED]}),i?n("span",{key:"1",class:"vxe-checkbox--label",domProps:{innerHTML:t}}):n("span",{key:"0",class:"vxe-checkbox--label"},t)]))}),n("vxe-modal",{ref:"modal",props:{id:"VXE_EXPORT_MODAL",value:h.visible,title:R(f?"vxe.export.printTitle":"vxe.export.expTitle"),width:660,minWidth:500,minHeight:400,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:this.loading},on:{input(e){h.visible=e},show:this.showEvent},scopedSlots:{default:()=>{var e={$table:r,$grid:l,options:p,columns:x,params:p.params},t="empty"===p.mode;return n("div",{class:"vxe-table-export--panel"},[C?n("div",{class:"vxe-table-export--panel-top"},r.callSlot(C,e,n)):it(this),n("div",{class:"vxe-table-export--panel-body"},y?r.callSlot(y,e,n):[n("table",{attrs:{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0}},[n("tbody",[[f?o():n("tr",[n("td",R("vxe.export.expName")),n("td",[n("vxe-input",{ref:"filename",props:{value:p.filename,type:"text",clearable:!0,placeholder:R("vxe.export.expNamePlaceholder")},on:{modelValue(e){p.filename=e}}})])]),f?o():n("tr",[n("td",R("vxe.export.expType")),n("td",[n("vxe-select",{props:{value:p.type,options:h.typeList},on:{modelValue(e){p.type=e}}})])]),f||c?n("tr",[n("td",R("vxe.export.expSheetName")),n("td",[n("vxe-input",{ref:"sheetname",props:{value:p.sheetName,type:"text",clearable:!0,placeholder:R("vxe.export.expSheetNamePlaceholder")},on:{modelValue(e){p.sheetName=e}}})])]):o(),n("tr",[n("td",R("vxe.export.expMode")),n("td",[n("vxe-select",{props:{value:p.mode,options:h.modeList},on:{modelValue(e){p.mode=e}}})])]),n("tr",[n("td",[R("vxe.export.expColumn")]),n("td",[n("div",{class:"vxe-table-export--panel-column"},[n("ul",{class:"vxe-table-export--panel-column-header"},[n("li",{class:["vxe-table-export--panel-column-option",{"is--checked":a,"is--indeterminate":s}],attrs:{title:R("vxe.table.allTitle")},on:{click:this.allColumnEvent}},[n("span",{class:["vxe-checkbox--icon",s?S().TABLE_CHECKBOX_INDETERMINATE:a?S().TABLE_CHECKBOX_CHECKED:S().TABLE_CHECKBOX_UNCHECKED]}),n("span",{class:"vxe-checkbox--label"},R("vxe.export.expCurrentColumn"))])]),n("ul",{class:"vxe-table-export--panel-column-body"},T)])])]),n("tr",[n("td",R("vxe.export.expOpts")),E?n("td",[n("div",{class:"vxe-table-export--panel-option-row"},r.callSlot(E,e,n))]):n("td",[n("div",{class:"vxe-table-export--panel-option-row"},[n("vxe-checkbox",{props:{value:t||b,disabled:t,title:R("vxe.export.expHeaderTitle"),content:R("vxe.export.expOptHeader")},on:{input(e){p.isHeader=e}}}),n("vxe-checkbox",{props:{value:!!b&&p.isTitle,disabled:!b,title:R("vxe.export.expTitleTitle"),content:R("vxe.export.expOptTitle")},on:{input(e){p.isTitle=e}}}),n("vxe-checkbox",{props:{value:!!(b&&v&&d)&&p.isColgroup,disabled:!b||!v||!d,title:R("vxe.export.expColgroupTitle"),content:R("vxe.export.expOptColgroup")},on:{input(e){p.isColgroup=e}}})]),n("div",{class:"vxe-table-export--panel-option-row"},[n("vxe-checkbox",{props:{value:!t&&p.original,disabled:t,title:R("vxe.export.expOriginalTitle"),content:R("vxe.export.expOptOriginal")},on:{input(e){p.original=e}}}),n("vxe-checkbox",{props:{value:!!(g&&d&&i)&&p.isMerge,disabled:t||!g||!d||!i,title:R("vxe.export.expMergeTitle"),content:R("vxe.export.expOptMerge")},on:{input(e){p.isMerge=e}}}),f?o():n("vxe-checkbox",{props:{value:!!u&&p.useStyle,disabled:!u,title:R("vxe.export.expUseStyleTitle"),content:R("vxe.export.expOptUseStyle")},on:{input(e){p.useStyle=e}}}),n("vxe-checkbox",{props:{value:!!m&&p.isAllExpand,disabled:t||!m,title:R("vxe.export.expAllExpandTitle"),content:R("vxe.export.expOptAllExpand")},on:{input(e){p.isAllExpand=e}}})]),n("div",{class:"vxe-table-export--panel-option-row"},[n("vxe-checkbox",{props:{value:p.isFooter,disabled:!h.hasFooter,title:R("vxe.export.expFooterTitle"),content:R("vxe.export.expOptFooter")},on:{input(e){p.isFooter=e}}})])])])]])])]),w?n("div",{class:"vxe-table-export--panel-bottom"},r.callSlot(w,e,n)):it(this)])},footer:()=>{var e={$table:r,$grid:l,options:p,columns:x,params:p.params};return n("div",{class:"vxe-table-export--panel-footer"},t?r.callSlot(t,e,n):[n("div",{class:"vxe-table-export--panel-btns"},[n("vxe-button",{props:{content:R("vxe.export.expCancel")},on:{click:this.cancelEvent}}),n("vxe-button",{ref:"confirmBtn",props:{status:"primary",content:R(f?"vxe.export.expPrint":"vxe.export.expConfirm")},on:{click:this.confirmEvent}})])])}}})},methods:{changeOption(e){let t=!e.checked;sr().eachTree([e],e=>{e.checked=t,e.halfChecked=!1}),this.handleOptionCheck(e),this.checkStatus()},handleOptionCheck(t){var e=sr().findTree(this.storeData.columns,e=>e===t);e&&e.parent&&(e=e.parent,e.children)&&e.children.length&&(e.checked=e.children.every(e=>e.checked),e.halfChecked=!e.checked&&e.children.some(e=>e.checked||e.halfChecked),this.handleOptionCheck(e))},checkStatus(){var e=this.storeData.columns;this.isAll=e.every(e=>e.disabled||e.checked),this.isIndeterminate=!this.isAll&&e.some(e=>!e.disabled&&(e.checked||e.halfChecked))},allColumnEvent(){let t=!this.isAll;sr().eachTree(this.storeData.columns,e=>{e.disabled||(e.checked=t,e.halfChecked=!1)}),this.isAll=t,this.checkStatus()},showEvent(){this.$nextTick(()=>{var e=this.$refs,e=e.filename||e.sheetname||e.confirmBtn;e&&e.focus()}),this.checkStatus()},getExportOption(){var{checkedAll:e,storeData:t,defaultOptions:r,supportMerge:l}=this,{hasMerge:t,columns:o}=t,o=sr().searchTree(o,e=>e.checked,{children:"children",mapChildren:"childNodes",original:!0});return Object.assign({},r,{columns:o,isMerge:!!(t&&l&&e)&&r.isMerge})},cancelEvent(){this.storeData.visible=!1},confirmEvent(e){this.storeData.isPrint?this.printEvent(e):this.exportEvent(e)},printEvent(){var e=this.$parent;this.storeData.visible=!1,e.print(Object.assign({},e.printOpts,this.getExportOption()))},exportEvent(){var e=this.$xeTable,t=e.exportOpts;this.loading=!0,e.exportData(Object.assign({},t,this.getExportOption())).then(()=>{this.loading=!1,this.storeData.visible=!1}).catch(()=>{this.loading=!1})}}};let nt=nr.VxeUI.getIcon;var Di={name:"VxeTableMenuPanel",props:{ctxMenuStore:Object,ctxMenuOpts:Object},mounted(){document.body.appendChild(this.$el)},beforeDestroy(){var e=this.$el;e.parentNode&&e.parentNode.removeChild(e)},render(s){let c=this.$parent,{_e:d,ctxMenuOpts:e,ctxMenuStore:u}=this;return s("div",{class:["vxe-table--context-menu-wrapper",e.className,{"is--visible":u.visible}],style:u.style},u.list.map((e,a)=>e.every(e=>!1===e.visible)?d():s("ul",{class:"vxe-context-menu--option-wrapper",key:a},e.map((i,n)=>{var e=i.children&&i.children.some(e=>!1!==e.visible),t=Object.assign({},i.prefixConfig),r=Object.assign({},i.suffixConfig),l=dr(i.name);return!1===i.visible?null:s("li",{class:[i.className,{"link--disabled":i.disabled,"link--active":i===u.selected}],key:a+"_"+n},[s("a",{class:"vxe-context-menu--link",on:{click(e){c.ctxMenuLinkEvent(e,i)},mouseover(e){c.ctxMenuMouseoverEvent(e,i)},mouseout(e){c.ctxMenuMouseoutEvent(e,i)}}},[s("div",{class:["vxe-context-menu--link-prefix",t.className||""]},[s("i",{class:t.icon||i.prefixIcon}),t.content?s("span",{},""+t.content):d()]),s("span",{class:"vxe-context-menu--link-content",attrs:{title:l}},l),s("div",{class:["vxe-context-menu--link-suffix",r.className||""]},[s("i",{class:r.icon||i.suffixIcon||(e?nt().TABLE_MENU_OPTIONS:"")}),r.content?s("span",""+r.content):d()])]),e?s("ul",{class:["vxe-table--context-menu-clild-wrapper",{"is--show":i===u.selected&&u.showChild}]},i.children.map((t,e)=>{var r=Object.assign({},t.prefixConfig),l=Object.assign({},t.suffixConfig),o=dr(t.name);return!1===t.visible?null:s("li",{class:[t.className,{"link--disabled":t.disabled,"link--active":t===u.selectChild}],key:a+`_${n}_`+e},[s("a",{class:"vxe-context-menu--link",on:{click(e){c.ctxMenuLinkEvent(e,t)},mouseover(e){c.ctxMenuMouseoverEvent(e,i,t)},mouseout(e){c.ctxMenuMouseoutEvent(e,i)}}},[s("div",{class:["vxe-context-menu--link-prefix",r.className||""]},[s("i",{class:r.icon||t.prefixIcon}),r.content?s("span",""+r.content):d()]),s("span",{class:"vxe-context-menu--link-content",attrs:{title:o}},o),s("div",{class:["vxe-context-menu--link-suffix",l.className||""]},[s("i",{class:l.icon}),l.content?s("span",""+l.content):d()])])])})):null])}))))}};let at=nr.VxeUI.renderer,st={methods:{_openFilter(e){let o=Rr(this,e);if(o&&o.filters){let r=this.elemStore,l=o.fixed;return this.scrollToColumn(o).then(()=>{var e,t=r[`${l||"main"}-header-wrapper`]||r["main-header-wrapper"];t&&(t=t.querySelector(`.vxe-header--column.${o.id} .vxe-cell--filter`),e="click",t=t)&&t.dispatchEvent(new Event(e))})}return this.$nextTick()},_setFilter(e,t,r){e=Rr(this,e);return e&&e.filters&&(e.filters=Yl(t||[]),r)?this.handleColumnConfirmFilter(e,new Event("click")):this.$nextTick()},checkFilterOptions(){var e=this.filterStore;e.isAllSelected=e.options.every(e=>e._checked),e.isIndeterminate=!e.isAllSelected&&e.options.some(e=>e._checked)},triggerFilterEvent(r,o,i){let v=this;var n=v,a=v;let e=this.filterStore;if(e.column===o&&e.visible)e.visible=!1;else{let{initStore:e,filterStore:f}=n,t=a.elemStore;if(f.column===o&&f.visible)f.visible=!1;else{let s=v.$refs.refElem,{scrollTop:c,scrollLeft:d,visibleHeight:u,visibleWidth:p}=Ol();let h=v.computeFilterOpts.transfer,m=s.getBoundingClientRect(),g=r.currentTarget;var{filters:n,filterMultiple:x,filterRender:b}=o,b=cr(b)?at.get(b.name):null;let l=o.filterRecoverMethod||(b?b.tableFilterRecoverMethod||b.filterRecoverMethod:null);a._currFilterParams=i,Object.assign(f,{multiple:x,options:n,column:o,style:null}),f.options.forEach(e=>{var{_checked:t,checked:r}=e;(e._checked=r)||t===r||l&&l({option:e,column:o,$table:v})}),this.checkFilterOptions(),f.visible=!0,e.filter=!0,v.$nextTick(()=>{if(Fr(t["main-header-scroll"])){var l=v.$refs.refTableFilter,l=l?l.$el:null;if(l){var o=g.getBoundingClientRect(),i=l.querySelector(".vxe-table--filter-header"),n=l.querySelector(".vxe-table--filter-footer"),l=l.offsetWidth,a=l/2;let e=0,t=0,r=0;h?(e=o.left-a+d,t=o.top+g.clientHeight+c,r=Math.min(Math.max(m.height,Math.floor(u/2)),Math.max(80,u-t-(i?i.clientHeight:0)-(n?n.clientHeight:0)-28)),e<16?e=16:e>p-l-16&&(e=p-l-16)):(e=o.left-m.left-a,t=o.top-m.top+g.clientHeight,r=Math.max(40,s.clientHeight-t-(i?i.clientHeight:0)-(n?n.clientHeight:0)-14),e<1?e=1:e>s.clientWidth-l-1&&(e=s.clientWidth-l-1)),f.style={top:Sl(t),left:Sl(e)},f.maxHeight=r}}})}v.dispatchEvent("filter-visible",{column:o,field:o.field,property:o.field,filterList:v.getCheckedFilters(),visible:f.visible},r)}},handleFilterConfirmFilter(e){var t=this.filterStore;t.options.forEach(e=>{e.checked=e._checked}),this.confirmFilterEvent(e)},_saveFilterPanel(){return this.handleFilterConfirmFilter(null),this.$nextTick()},_saveFilterPanelByEvent(e){return this.handleFilterConfirmFilter(e),this.$nextTick()},_resetFilterPanel(){return this.handleFilterResetFilter(null),this.$nextTick()},_resetFilterPanelByEvent(e){return this.handleFilterResetFilter(e),this.$nextTick()},_getCheckedFilters(){var e=this.tableFullColumn;let i=[];return e.forEach(e=>{var{field:t,filters:r}=e;let l=[],o=[];r&&r.length&&(r.forEach(e=>{e.checked&&(l.push(e.value),o.push(e.data))}),l.length)&&i.push({column:e,field:t,property:t,values:l,datas:o})}),i},handleColumnConfirmFilter(e,t){let r=this;var l=r.mouseConfig;let{scrollXLoad:o,scrollYLoad:i}=r;var n=r.computeFilterOpts,a=r.computeMouseOpts,s=e.field;let c=[],d=[];e.filters.forEach(e=>{e.checked&&(c.push(e.value),d.push(e.data))});var u=this.getCheckedFilters(),e={$table:this,$event:t,column:e,field:s,property:s,values:c,datas:d,filters:u,filterList:u};return n.remote||(this.handleTableData(!0),this.checkSelectionStatus()),l&&a.area&&this.handleFilterEvent&&r.handleFilterEvent(t,e),t&&r.emitEvent("filter-change",e,t),r.closeFilter(),r.updateFooter().then(()=>{var{scrollXLoad:e,scrollYLoad:t}=this;if(o||e||i||t)return(o||e)&&r.updateScrollXSpace(),(i||t)&&r.updateScrollYSpace(),r.refreshScroll()}).then(()=>(r.updateCellAreas(),r.recalculate(!0))).then(()=>{setTimeout(()=>r.recalculate(),50)})},confirmFilterEvent(e){var t=this.filterStore,t=t.column;this.handleColumnConfirmFilter(t,e)},handleClearFilter(e){if(e){var{filters:r,filterRender:l}=e;if(r){l=cr(l)?at.get(l.name):null;let t=e.filterResetMethod||(l?l.tableFilterResetMethod||l.filterResetMethod:null);r.forEach(e=>{e._checked=!1,e.checked=!1,t||(e.data=sr().clone(e.resetValue,!0))}),t&&t({options:r,column:e,$table:this})}}},handleFilterResetFilter(e){var t=this.filterStore;this.handleClearFilter(t.column),this.confirmFilterEvent(e),e&&this.dispatchEvent("clear-filter",{filterList:[]},e)},_clearFilter(e){var t=this.filterStore,r=this.tableFullColumn;let l;return e?(l=Rr(this,e))&&this.handleClearFilter(l):r.forEach(this.handleClearFilter),e&&l===t.column||Object.assign(t,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),this.updateData()},_updateFilterOptionStatus(e,t){return e._checked=t,e.checked=t,this.$nextTick()}}},{menus:ct,globalEvents:dt,GLOBAL_EVENT_KEYS:ut}=nr.VxeUI,pt={methods:{_closeMenu(){return Object.assign(this.ctxMenuStore,{visible:!1,selected:null,selectChild:null,showChild:!1}),this.$nextTick()},moveCtxMenu(e,t,r,l,o,i){let n;var a=sr().findIndexOf(i,e=>t[r]===e);if(l)o&&bl(t.selected)?t.showChild=!0:(t.showChild=!1,t.selectChild=null);else if(dt.hasKey(e,ut.ARROW_UP)){for(let e=a-1;0<=e;e--)if(!1!==i[e].visible){n=i[e];break}t[r]=n||i[i.length-1]}else if(dt.hasKey(e,ut.ARROW_DOWN)){for(let e=a+1;e<i.length;e++)if(!1!==i[e].visible){n=i[e];break}t[r]=n||i[0]}else t[r]&&(dt.hasKey(e,ut.ENTER)||dt.hasKey(e,ut.SPACEBAR))&&this.ctxMenuLinkEvent(e,t[r])},handleGlobalContextmenuEvent(t){var r=this.$xeGrid;let{$refs:e,tId:l,editStore:o,menuConfig:i,contextMenu:n,ctxMenuStore:a,ctxMenuOpts:s,mouseConfig:c,mouseOpts:d}=this;var u=o.selected,p=this.$refs.refTableFilter,h=["header","body","footer"];if(cr(i)||n){if(a.visible&&e.refTableMenu&&Cr(t,e.refTableMenu.$el).flag)return void t.preventDefault();if(this._keyCtx){var m={type:"body",$grid:r,$table:this,keyboard:!0,columns:this.visibleColumn.slice(0),$event:t};if(c&&d.area){var g=this.getActiveCellArea();if(g&&g.row&&g.column)return m.row=g.row,m.column=g.column,void this.handleOpenMenuEvent(t,"body",m)}else if(c&&d.selected&&u.row&&u.column)return m.row=u.row,m.column=u.column,void this.handleOpenMenuEvent(t,"body",m)}for(let e=0;e<h.length;e++){var f=h[e],v=Cr(t,this.$el,`vxe-${f}--column`,e=>e.parentNode.parentNode.parentNode.getAttribute("xid")===l),x={type:f,$grid:r,$table:this,columns:this.visibleColumn.slice(0),$event:t};if(v.flag){var v=v.targetElem,b=this.getColumnNode(v).item;let e=f+"-";return Object.assign(x,{column:b,columnIndex:this.getColumnIndex(b),cell:v}),"body"===f&&(b=this.getRowNode(v.parentNode).item,e="",x.row=b,x.rowIndex=this.getRowIndex(b)),this.handleOpenMenuEvent(t,f,x),void(this.$listeners[e+"cell-context-menu"]?(M("vxe.error.delEvent",[e+"cell-context-menu",e+"cell-menu"]),this.emitEvent(e+"cell-context-menu",x,t)):this.emitEvent(e+"cell-menu",x,t))}if(Cr(t,this.$el,`vxe-table--${f}-wrapper`,e=>e.getAttribute("xid")===l).flag)return void("cell"===s.trigger?t.preventDefault():this.handleOpenMenuEvent(t,f,x))}}p&&!Cr(t,p.$el).flag&&this.closeFilter(),this.closeMenu()},handleOpenMenuEvent(r,l,p){let{isCtxMenu:o,ctxMenuStore:h,ctxMenuOpts:e}=this;l=e[l];let i=e.visibleMethod;if(l){let{options:t,disabled:e}=l;e?r.preventDefault():o&&t&&t.length&&(p.options=t,this.preventEvent(r,"event.showMenu",p,()=>{if(!i||i(p)){r.preventDefault(),this.updateZindex();let{scrollTop:o,scrollLeft:i,visibleHeight:n,visibleWidth:a}=Ol(),s=r.clientY+o,c=r.clientX+i,l=()=>{Object.assign(h,{args:p,visible:!0,list:t,selected:null,selectChild:null,showChild:!1,style:{zIndex:this.tZindex,top:s+"px",left:c+"px"}}),this.$nextTick(()=>{var e=this.$refs.refTableMenu.$el,t=e.clientHeight,r=e.clientWidth,{boundingTop:e,boundingLeft:l}=$l(e),e=e+t-n,l=l+r-a;-10<e&&(h.style.top=Math.max(o+2,s-t-2)+"px"),-10<l&&(h.style.left=Math.max(i+2,c-r-2)+"px")})},{keyboard:e,row:d,column:u}=p;e&&d&&u?this.scrollToRow(d,u).then(()=>{var e=this.getCellElement(d,u),{boundingTop:t,boundingLeft:r}=$l(e);s=t+o+Math.floor(e.offsetHeight/2),c=r+i+Math.floor(e.offsetWidth/2),l()}):l()}else this.closeMenu()}))}this.closeFilter()},ctxMenuMouseoverEvent(e,t,r){let c=e.currentTarget;var l=this.ctxMenuStore;e.preventDefault(),e.stopPropagation(),l.selected=t,(l.selectChild=r)||(l.showChild=bl(t),l.showChild&&this.$nextTick(()=>{var o=c.nextElementSibling;if(o){var{boundingTop:i,boundingLeft:n,visibleHeight:a,visibleWidth:s}=$l(c),i=i+c.offsetHeight;let e="",t="",r=(n+c.offsetWidth+o.offsetWidth>s-10&&(e="auto",t=c.offsetWidth+"px"),""),l="";i+o.offsetHeight>a-10&&(r="auto",l="0"),o.style.left=e,o.style.right=t,o.style.top=r,o.style.bottom=l}}))},ctxMenuMouseoutEvent(e,t){var r=this.ctxMenuStore;t.children||(r.selected=null),r.selectChild=null},ctxMenuLinkEvent(e,t){var r,l=this.$xeGrid;t.disabled||!t.code&&t.children&&t.children.length||(r=ct.get(t.code),t=Object.assign({menu:t,$grid:l,$table:this,$event:e},this.ctxMenuStore.args),r&&r.menuMethod&&r.menuMethod(t,e),this.$listeners["context-menu-click"]?(M("vxe.error.delEvent",["context-menu-click","menu-click"]),this.emitEvent("context-menu-click",t,e)):this.emitEvent("menu-click",t,e),this.closeMenu())}}},{getConfig:ht,renderer:mt,getI18n:gt}=nr.VxeUI,ft=sr().browse();function Ii(e,t){var{model:r,editRender:l}=t;l&&(r.value=Sr(e,t),r.update=!1)}function $i(e,t){var{model:r,editRender:l}=t;l&&r.update&&(Or(e,t,r.value),r.update=!1,r.value=null)}function ki(e){var e=e.$refs.refElem;e&&(e=e.querySelector(".col--selected"))&&gr(e,"col--selected")}function Mi(e){var{editStore:t,tableColumn:r}=e,e=e.computeEditOpts,t=t.actived;let{row:l,column:o}=t;(l||o)&&("row"===e.mode?r.forEach(e=>$i(l,e)):$i(l,o))}function Ai(n,e,t){let{tableFullTreeData:a,afterFullData:s,fullDataRowIdData:c,fullAllDataRowIdData:d}=n;var r=n.computeTreeOpts;let{rowField:u,parentField:p,mapChildrenField:h}=r,m=r.children||r.childrenField,g=t?"push":"unshift";e.forEach(r=>{let t=r[p];var l=yr(n,r),o=t?sr().findTree(a,e=>t===e[u],{children:h}):null;if(o){var o=o.item,i=d[yr(n,o)],i=i?i.level:0;let e=o[m],t=o[h];sr().isArray(e)||(e=o[m]=[]),sr().isArray(t)||(t=o[m]=[]),e[g](r),t[g](r);o={row:r,rowid:l,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:e,parent:o,level:i+1,height:0,resizeHeight:0,oTop:0,expandHeight:0};c[l]=o,d[l]=o}else{t&&M("vxe.error.unableInsert"),s[g](r),a[g](r);i={row:r,rowid:l,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:a,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};c[l]=i,d[l]=i}})}function Li(s,t,r,c){var e=s;let o=s.treeConfig,{tableFullTreeData:l,afterFullData:i,mergeBodyList:n,tableFullData:a,fullDataRowIdData:d,fullAllDataRowIdData:u,insertRowMaps:p}=s,h=s.computeTreeOpts,{transform:m,rowField:g,mapChildrenField:f}=h,v=h.children||h.childrenField,x=(sr().isArray(t)||(t=[t]),s.defineField(t.map(e=>Object.assign(o&&m?{[f]:[],[v]:[]}:{},e))));if(sr().eqNull(r))o&&m?Ai(s,x,!1):(x.forEach(e=>{var t=yr(s,e),r={row:e,rowid:t,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:i,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};d[t]=r,u[t]=r,i.unshift(e),a.unshift(e)}),n.forEach(e=>{var t=e.row;0<t&&(e.row=t+x.length)}));else if(-1===r)o&&m?Ai(s,x,!0):(x.forEach(e=>{var t=yr(s,e),r={row:e,rowid:t,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:i,parent:null,level:0,height:0,resizeHeight:0,oTop:0,expandHeight:0};d[t]=r,u[t]=r,i.push(e),a.push(e)}),n.forEach(e=>{var{row:t,rowspan:r}=e;t+r>i.length&&(e.rowspan=r+x.length)}));else if(o&&m){let a=sr().findTree(l,e=>r[g]===e[g],{children:f});if(a){let o=a.parent,i=o?o[f]:l;t=u[yr(s,o)];let n=t?t.level:0;if(x.forEach((e,t)=>{var r=yr(s,e);e[h.parentField]&&o&&e[h.parentField]!==o[g]&&A("vxe.error.errProp",[h.parentField+"="+e[h.parentField],h.parentField+"="+o[g]]),o&&(e[h.parentField]=o[g]);let l=a.index+t;c&&(l+=1),i.splice(l,0,e);t={row:e,rowid:r,seq:-1,index:-1,_index:-1,$index:-1,treeIndex:-1,items:i,parent:o,level:n+1,height:0,resizeHeight:0,oTop:0,expandHeight:0};d[r]=t,u[r]=t}),o){t=sr().findTree(l,e=>r[g]===e[g],{children:v});if(t){var b=t.items;let e=t.index;c&&(e+=1),b.splice(e,0,...x)}}}else M("vxe.error.unableInsert"),Ai(s,x,!0)}else{if(o)throw new Error(gt("vxe.error.noTree",["insert"]));let l=-1;if(sr().isNumber(r)?r<i.length&&(l=r):l=s.findRowIndexOf(i,r),-1===(l=c?Math.min(i.length,l+1):l))throw new Error(A("vxe.error.unableInsert"));i.splice(l,0,...x);t=s.findRowIndexOf(a,r);-1<t?a.splice(t+(c?1:0),0,...x):a.push(...x),n.forEach(e=>{var{row:t,rowspan:r}=e;t>l?e.row=t+x.length:t+r>l&&(e.rowspan=r+x.length)})}return x.forEach(e=>{var t=yr(s,e);p[t]=e}),e.insertRowFlag++,s.cacheRowMap(!1),s.updateScrollYStatus(),s.handleTableData(o&&m),o&&m||s.updateAfterDataIndex(),s.updateFooter(),s.handleUpdateBodyMerge(),s.checkSelectionStatus(),e.scrollYLoad&&s.updateScrollYSpace(),s.$nextTick().then(()=>(s.updateCellAreas(),s.recalculate())).then(()=>({row:x.length?x[x.length-1]:null,rows:x}))}function _i(e,t,r,l,o){var i=e.treeConfig;let{transform:n,rowField:a,parentField:s}=e.computeTreeOpts;return i&&n?Li(e,(t=sr().isArray(t)?t:[t]).map(e=>Object.assign({},e,{[s]:r[a]})),l,o):(A("vxe.error.errProp",["tree-config.transform=false","tree-config.transform=true"]),Promise.resolve({row:null,rows:[]}))}function Vi(e,t,r){var l=e.editStore,{actived:l,focused:o}=l,{row:i,column:n}=l,a=e.computeValidOpts;if(i||n){if(r&&yr(e,r)!==yr(e,i))return e.$nextTick();Mi(e),l.args=null,l.row=null,l.column=null,e.updateFooter(),e.dispatchEvent("edit-closed",{row:i,rowIndex:e.getRowIndex(i),$rowIndex:e.getVMRowIndex(i),column:n,columnIndex:e.getColumnIndex(n),$columnIndex:e.getVMColumnIndex(n)},t||null)}return o.row=null,o.column=null,a.autoClear&&("full"!==a.msgMode||"obsolete"===ht().cellVaildMode)&&e.clearValidate?e.clearValidate():e.$nextTick().then(()=>e.updateCellAreas())}function Hi(r,l,o,i,e){let n=r.$xeGrid;var{editConfig:t,mouseConfig:a}=r,{editStore:s,tableColumn:c}=r,d=r.computeEditOpts,u=d.mode,{actived:s,focused:p}=s;let{row:h,column:m}=l;var g=m.editRender,f=l.cell||r.getCellElement(h,m),v=d.beforeEditMethod||d.activeMethod;if((l.cell=f)&&cr(t)&&cr(g)&&!r.isPendingByRow(h)&&!r.isAggregateRecord(h)){if(s.row!==h||"cell"===u&&s.column!==m){let t="edit-disabled";if(!v||v({...l,$table:r,$grid:n})){a&&(r.clearSelected(),r.clearCellAreas)&&(r.clearCellAreas(),r.clearCopyCellArea()),r.closeTooltip(),s.column&&Vi(r,o),t="edit-activated",m.renderHeight=f.offsetHeight,s.args=l,s.row=h,s.column=m,"row"===u?c.forEach(e=>Ii(h,e)):Ii(h,m);let e=d.afterEditMethod;r.$nextTick(()=>{i&&r.handleFocus(l,o),e&&e({...l,$table:r,$grid:n})})}r.dispatchEvent(t,{row:h,rowIndex:r.getRowIndex(h),$rowIndex:r.getVMRowIndex(h),column:m,columnIndex:r.getColumnIndex(m),$columnIndex:r.getVMColumnIndex(m)},o),"edit-activated"===t&&r.dispatchEvent("edit-actived",{row:h,rowIndex:r.getRowIndex(h),$rowIndex:r.getVMRowIndex(h),column:m,columnIndex:r.getColumnIndex(m),$columnIndex:r.getVMColumnIndex(m)},o)}else{t=s.column;a&&(r.clearSelected(),r.clearCellAreas)&&(r.clearCellAreas(),r.clearCopyCellArea()),t!==m&&(g=t.model,g.update&&Or(h,t,g.value),r.clearValidate)&&r.clearValidate(h,m),m.renderHeight=f.offsetHeight,s.args=l,s.column=m,e&&setTimeout(()=>{r.handleFocus(l,o)})}p.column=null,p.row=null,r.focus()}return r.$nextTick()}function Bi(t,r,e,l){let o=t;var i=t.editConfig;let n=sr().isString(e)?t.getColumnByField(e):e;return r&&n&&cr(i)&&cr(n.editRender)&&!t.isAggregateRecord(r)?Promise.resolve(l?t.scrollToRow(r,n):null).then(()=>{var e=t.getCellElement(r,n);return e&&(Hi(t,{row:r,rowIndex:t.getRowIndex(r),column:n,columnIndex:t.getColumnIndex(n),cell:e,$table:t},null,l,l),o._lastCallTime=Date.now()),t.$nextTick()}):t.$nextTick()}let vt={methods:{_insert(e){return Li(this,e,null)},_insertAt(e,t){return Li(this,e,t)},_insertNextAt(e,t){return Li(this,e,t,!0)},_insertChild(e,t){return _i(this,e,t,null)},_insertChildAt(e,t,r){return _i(this,e,t,r)},_insertChildNextAt(e,t,r){return _i(this,e,t,r,!0)},_remove(e){let r=this;var t=r,l=r,t=t.treeConfig,o=l.editStore;let{tableFullTreeData:i,selectCheckboxMaps:n,afterFullData:a,mergeBodyList:s,tableFullData:c,pendingRowMaps:d,insertRowMaps:u,removeRowMaps:p}=r;var h=r.computeCheckboxOpts,m=r.computeTreeOpts;let{transform:g,mapChildrenField:f}=m,v=m.children||m.childrenField;m=o.actived,o=h.checkField;let x=[];return e?sr().isArray(e)||(e=[e]):e=c,e.forEach(e=>{var t;r.isInsertByRow(e)||(t=yr(r,e),p[t]=e)}),o||(e.forEach(e=>{e=yr(this,e);n[e]&&delete n[e]}),l.updateCheckboxFlag++),c===e?(e=x=c.slice(0),this.tableFullData=[],this.afterFullData=[],this.clearMergeCells()):t&&g?e.forEach(e=>{let t=yr(this,e);var r=sr().findTree(i,e=>t===yr(this,e),{children:f}),r=(r&&(r=r.items.splice(r.index,1),x.push(r[0])),sr().findTree(i,e=>t===yr(this,e),{children:v})),r=(r&&r.items.splice(r.index,1),this.findRowIndexOf(a,e));-1<r&&a.splice(r,1)}):e.forEach(e=>{var t=this.findRowIndexOf(c,e);-1<t&&(t=c.splice(t,1),x.push(t[0]));let l=this.findRowIndexOf(a,e);-1<l&&(s.forEach(e=>{var{row:t,rowspan:r}=e;t>l?e.row=t-1:t+r>l&&(e.rowspan=r-1)}),a.splice(l,1))}),m.row&&-1<r.findRowIndexOf(e,m.row)&&r.clearEdit(),e.forEach(e=>{e=yr(r,e);u[e]&&delete u[e],d[e]&&delete d[e]}),l.removeRowFlag++,l.insertRowFlag++,l.pendingRowFlag++,r.cacheRowMap(!1),r.handleTableData(t&&g),r.updateFooter(),r.handleUpdateBodyMerge(),t&&g||r.updateAfterDataIndex(),r.checkSelectionStatus(),l.scrollYLoad&&r.updateScrollYSpace(),this.$nextTick().then(()=>(this.updateCellAreas(),this.recalculate())).then(()=>({row:x.length?x[x.length-1]:null,rows:x}))},_removeCheckboxRow(){return this.remove(this.getCheckboxRecords()).then(e=>(this.clearCheckboxRow(),e))},_removeRadioRow(){var e=this.getRadioRecord();return this.remove(e||[]).then(e=>(this.clearRadioRow(),e))},_removeCurrentRow(){var e=this.getCurrentRecord();return this.remove(e||[]).then(e=>(this.clearCurrentRow(),e))},_getRecordset(){var e=this.getRemoveRecords(),t=this.getPendingRecords();let r=e.concat(t);var l=this.getUpdateRecords().filter(t=>!r.some(e=>this.eqRow(e,t)));return{insertRecords:this.getInsertRecords(),removeRecords:e,updateRecords:l,pendingRecords:t}},_getInsertRecords(){let{fullAllDataRowIdData:r,insertRowMaps:e}=this,l=[];return sr().each(e,(e,t)=>{r[t]&&l.push(e)}),l},_getRemoveRecords(){var e=this.removeRowMaps;let t=[];return sr().each(e,e=>{t.push(e)}),t},_getUpdateRecords(){let t=this;var{keepSource:e,treeConfig:r}=t,l=t.tableFullData,o=t.computeTreeOpts;return e?(Mi(t),r?sr().filterTree(l,e=>t.isUpdateByRow(e),o):l.filter(e=>t.isUpdateByRow(e))):[]},handleEdit(e,t){return Hi(this,e,t,!0,!0)},handleActived(e,t){return this.handleEdit(e,t)},_getColumnModel(e,t){Ii(e,t)},_setColumnModel(e,t){$i(e,t)},_syncActivedCell(){Mi(this)},_clearActived(e){return M("vxe.error.delFunc",["clearActived","clearEdit"]),this.clearEdit(e)},_clearEdit(e){return Vi(this,null,e)},handleClearEdit(e,t){return Vi(this,e,t)},_getActiveRecord(){return M("vxe.error.delFunc",["getActiveRecord","getEditRecord"]),this.getEditRecord()},_getEditRecord(){var e=this.editStore,t=this.afterFullData,r=this.$refs.refElem,{args:e,row:l}=e.actived;return e&&-1<this.findRowIndexOf(t,l)&&r.querySelectorAll(".vxe-body--column.col--active").length?Object.assign({},e):null},_isActiveByRow(e){return M("vxe.error.delFunc",["isActiveByRow","isEditByRow"]),this.isEditByRow(e)},_isEditByRow(e){var t=this.editStore;return t.actived.row===e},handleFocus(l){var{row:o,column:i,cell:n}=l,a=i.editRender,s=this.computeEditOpts;if(cr(a)){var c=mt.get(a.name);let e=a.autofocus||a.autoFocus,t=a.autoSelect||a.autoselect,r;s.autoFocus&&(!e&&c&&(e=c.tableAutoFocus||c.tableAutofocus||c.autoFocus||c.autofocus),!t&&c&&(t=c.tableAutoSelect||c.autoSelect||c.autoselect),sr().isFunction(e)?r=e.call(this,l):e&&(r=!0===e?n.querySelector("input,textarea"):n.querySelector(e))&&r.focus()),r?t?r.select():ft.msie&&((a=r.createTextRange()).collapse(!1),a.select()):s.autoPos&&!i.fixed&&this.scrollToRow(o,i)}},_setActiveRow(e){return M("vxe.error.delFunc",["setActiveRow","setEditRow"]),this.setEditRow(e)},_setEditRow(e,t){let r=sr().find(this.visibleColumn,e=>cr(e.editRender)),l=!1;return t&&(l=!0)!==t&&(r=sr().isString(t)?this.getColumnByField(t):t),Bi(this,e,r,l)},_setActiveCell(e,t){return M("vxe.error.delFunc",["setActiveCell","setEditCell"]),this.setEditCell(e,t)},_setEditCell(e,t){return Bi(this,e,t,!0)},_setSelectCell(e,t){var r=this.tableData,l=this.computeEditOpts,t=sr().isString(t)?this.getColumnByField(t):t;return e&&t&&"manual"!==l.trigger&&-1<(l=this.findRowIndexOf(r,e))&&(r=this.getCellElement(e,t),e={row:e,rowIndex:l,column:t,columnIndex:this.getColumnIndex(t),cell:r},this.handleSelected(e,{})),this.$nextTick()},handleSelected(e,t){let r=this;var l=r.mouseConfig,o=r.editStore,i=r.computeMouseOpts;let n=r.computeEditOpts,{actived:a,selected:s}=o,{row:c,column:d}=e,u=l&&i.selected;return!u||s.row===c&&s.column===d||(a.row!==c||"cell"===n.mode&&a.column!==d)&&(Vi(r,t),r.clearSelected(),r.clearCellAreas&&(r.clearCellAreas(),r.clearCopyCellArea()),s.args=e,s.row=c,s.column=d,u&&this.addCellSelectedClass(),r.focus(),t)&&r.dispatchEvent("cell-selected",e,t),r.$nextTick()},_getSelectedCell(){var e=this.editStore,{args:e,column:t}=e.selected;return e&&t?Object.assign({},e):null},_clearSelected(){var e=this.editStore,e=e.selected;return e.row=null,e.column=null,ki(this),this.$nextTick()},reColTitleSdCls(){var e=this.elemStore["main-header-list"];e&&sr().arrayEach(e.querySelectorAll(".col--title-selected"),e=>gr(e,"col--title-selected"))},addCellSelectedClass(){var e=this.editStore,e=e.selected,{row:e,column:t}=e;ki(this),e&&t&&(e=this.getCellElement(e,t))&&fr(e,"col--selected")}}},xt='body{margin:0;padding: 0 1px;color:#333333;font-size:14px;font-family:"Microsoft YaHei",微软雅黑,"MicrosoftJhengHei",华文细黑,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type="checkbox"]{margin:0}.vxe-table input[type="checkbox"],.vxe-table input[type="radio"],.vxe-table input[type="checkbox"]+span,.vxe-table input[type="radio"]+span{vertical-align:middle;padding-left:0.4em}',{getI18n:L,renderer:bt}=nr.VxeUI,x,Ct="\ufeff",h="\r\n";function Pi(e,t,r,l,o,i){var n=e.computeSeqOpts.seqMethod||o.seqMethod;return n?n({$table:e,row:r,rowIndex:e.getRowIndex(r),$rowIndex:l,column:o,columnIndex:e.getColumnIndex(o),$columnIndex:i}):t}function zi(e){return!!e.field||-1===["seq","checkbox","radio"].indexOf(e.type||"")}function Ni(e){return sr().isBoolean(e)?e?"TRUE":"FALSE":e}let wt=e=>pr(e)?"":""+e;function ji(u,p,h,e){let{isAllExpand:n,mode:m}=p;var t=u.treeConfig;let g=u.computeRadioOpts,f=u.computeCheckboxOpts;var r=u.computeTreeOpts;let v=u.computeColumnOpts;if(x=x||document.createElement("div"),t){t=r.children||r.childrenField;let i=[],d=new Map;return sr().eachTree(e,(e,a,t,s,r,l)=>{let c=e._row||e;var o,e=r&&r._row?r._row:r;if(n||!e||d.has(e)&&u.isTreeExpandByRow(e)){r=c,o=(o=(o=u).computeTreeOpts).children||o.childrenField;r=r[o]&&r[o].length;let n={_row:c,_level:l.length-1,_hasChild:r,_expand:r&&u.isTreeExpandByRow(c)};h.forEach((e,t)=>{let r="";var l=e.editRender||e.cellRender;let o=e.exportMethod||v.exportMethod;if(o=(o=!o&&l&&l.name&&(l=bt.get(l.name))?l.tableExportMethod||l.exportMethod:o)||v.exportMethod)r=o({$table:u,row:c,column:e,options:p});else switch(e.type){case"seq":var i=s.map((e,t)=>t%2==0?Number(e)+1:".").join("");r="all"===m?i:Pi(u,i,c,a,e,t);break;case"checkbox":r=Ni(u.isCheckedByCheckboxRow(c)),n._checkboxLabel=f.labelField?sr().get(c,f.labelField):"",n._checkboxDisabled=f.checkMethod&&!f.checkMethod({$table:u,row:c});break;case"radio":r=Ni(u.isCheckedByRadioRow(c)),n._radioLabel=g.labelField?sr().get(c,g.labelField):"",n._radioDisabled=g.checkMethod&&!g.checkMethod({$table:u,row:c});break;default:p.original?r=Sr(c,e):(r=u.getCellLabel(c,e),"html"===e.type?(x.innerHTML=r,r=x.innerText.trim()):(i=u.getCellElement(c,e))&&!mr(i,"is--progress")&&(r=i.innerText.trim()))}n[e.id]=wt(r)}),d.set(c,1),i.push(Object.assign(n,c))}},{children:t}),i}return e.map((n,a)=>{let s={_row:n};return h.forEach((e,t)=>{let r="";var l=e.editRender||e.cellRender;let o=e.exportMethod||v.exportMethod;if(o=!o&&l&&l.name&&(l=bt.get(l.name))?l.tableExportMethod||l.exportMethod:o)r=o({$table:u,row:n,column:e,options:p});else switch(e.type){case"seq":var i=a+1;r="all"===m?i:Pi(u,i,n,a,e,t);break;case"checkbox":r=Ni(u.isCheckedByCheckboxRow(n)),s._checkboxLabel=f.labelField?sr().get(n,f.labelField):"",s._checkboxDisabled=f.checkMethod&&!f.checkMethod({$table:u,row:n});break;case"radio":r=Ni(u.isCheckedByRadioRow(n)),s._radioLabel=g.labelField?sr().get(n,g.labelField):"",s._radioDisabled=g.checkMethod&&!g.checkMethod({$table:u,row:n});break;default:p.original?r=Sr(n,e):(r=u.getCellLabel(n,e),"html"===e.type?(x.innerHTML=r,r=x.innerText.trim()):(i=u.getCellElement(n,e))&&!mr(i,"is--progress")&&(r=i.innerText.trim()))}s[e.id]=wt(r)}),s})}function Ui(e){return"TRUE"===e||"true"===e||!0===e}function Wi(e,t,r){var l=e.computeColumnOpts,l=r.headerExportMethod||l.headerExportMethod;return l?l({column:r,options:t,$table:e}):(t.isTitle?r.getTitle():r.field)||""}function Gi(e,t,r,l){var o=e.computeColumnOpts,i=l.editRender||l.cellRender;let n=l.footerExportMethod;n=(n=!n&&i&&i.name&&(i=bt.get(i.name))?i.tableFooterExportMethod||i.footerExportMethod||i.footerCellExportMethod:n)||o.footerExportMethod;i=e.getVTColumnIndex(l);return n?n({$table:e,items:r,itemIndex:i,row:r,_columnIndex:i,column:l,options:t}):sr().isArray(r)?sr().toValueString(r[i]):sr().get(r,l.field)}function qi(r,e,t){let l=e.footerFilterMethod;return l?t.filter((e,t)=>l({$table:r,items:e,$rowIndex:t})):t}function Xi(e){return/[",\s\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function Yi(r,l,e,t){var o=r;let i=Ct;return l.isHeader&&(i+=e.map(e=>Xi(Wi(r,l,e))).join(",")+h),t.forEach(t=>{i+=e.map(e=>Xi(((e,t)=>{if(t){if("seq"===e.type)return`	`+t;switch(e.cellType){case"string":if(isNaN(t))break;return`	`+t;case"number":break;default:if(12<=t.length&&!isNaN(t))return`	`+t}}return t})(e,t[e.id]))).join(",")+h}),l.isFooter&&(t=o.footerTableData,qi(r,l,t).forEach(t=>{i+=e.map(e=>Xi(Gi(r,l,t,e))).join(",")+h})),i}function Ki(e,t,r,l){t=t[r],r=sr().isUndefined(t)||sr().isNull(t)?l:t;let o="title"===r||(!0===r||"tooltip"===r)||"ellipsis"===r;var{scrollXLoad:l,scrollYLoad:t}=e;return o=l||t?o||!0:o}function Zi(c,a,e,t){var r=c;let{id:d,border:l,treeConfig:o,headerAlign:s,align:u,footerAlign:i,showOverflow:p,showHeaderOverflow:h}=c,{isAllSelected:m,isIndeterminate:n}=r,g=c.mergeBodyCellMaps,f=c.computeTreeOpts,{print:v,isHeader:x,isFooter:b,isColgroup:C,isMerge:w,colgroups:y,original:E}=a,T="check-all",R=[`<table class="${["vxe-table","border--"+(!0===(S=l)?"full":S||"default"),v?"is--print":"",x?"is--header":""].filter(e=>e).join(" ")}" border="0" cellspacing="0" cellpadding="0">`,`<colgroup>${e.map(e=>`<col style="width:${e.renderWidth}px">`).join("")}</colgroup>`];x&&(R.push("<thead>"),C&&!E?y.forEach(e=>{R.push(`<tr>${e.map(t=>{var e=t.headerAlign||t.align||s||u,r=Ki(c,t,"showHeaderOverflow",h)?["col--ellipsis"]:[],l=Wi(c,a,t);let o=0,i=0;sr().eachTree([t],e=>{e.childNodes&&t.childNodes.length||i++,o+=e.renderWidth},{children:"childNodes"});var n=o-i;return e&&r.push("col--"+e),"checkbox"===t.type?`<th class="${r.join(" ")}" colspan="${t._colSpan}" rowspan="${t._rowSpan}"><div ${v?"":`style="width: ${n}px"`}><input type="checkbox" class="${T}" ${m?"checked":""}><span>${l}</span></div></th>`:`<th class="${r.join(" ")}" colspan="${t._colSpan}" rowspan="${t._rowSpan}" title="${l}"><div ${v?"":`style="width: ${n}px"`}><span>${ur(l,!0)}</span></div></th>`}).join("")}</tr>`)}):R.push(`<tr>${e.map(e=>{var t=e.headerAlign||e.align||s||u,r=Ki(c,e,"showHeaderOverflow",h)?["col--ellipsis"]:[],l=Wi(c,a,e);return t&&r.push("col--"+t),"checkbox"===e.type?`<th class="${r.join(" ")}"><div ${v?"":`style="width: ${e.renderWidth}px"`}><input type="checkbox" class="${T}" ${m?"checked":""}><span>${l}</span></div></th>`:`<th class="${r.join(" ")}" title="${l}"><div ${v?"":`style="width: ${e.renderWidth}px"`}><span>${ur(l,!0)}</span></div></th>`}).join("")}</tr>`),R.push("</thead>")),t.length&&(R.push("<tbody>"),o?t.forEach(o=>{R.push("<tr>"+e.map(t=>{var e=t.align||u,r=Ki(c,t,"showOverflow",p)?["col--ellipsis"]:[],l=o[t.id];if(e&&r.push("col--"+e),t.treeNode){let e="";return o._hasChild&&(e=`<i class="${o._expand?"vxe-table--tree-fold-icon":"vxe-table--tree-unfold-icon"}"></i>`),r.push("vxe-table--tree-node"),"radio"===t.type?`<td class="${r.join(" ")}" title="${l}"><div ${v?"":`style="width: ${t.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${o._level*f.indent}px"><div class="vxe-table--tree-icon-wrapper">${e}</div><div class="vxe-table--tree-cell"><input type="radio" name="radio_${d}" ${o._radioDisabled?"disabled ":""}${Ui(l)?"checked":""}><span>${o._radioLabel}</span></div></div></div></td>`:"checkbox"===t.type?`<td class="${r.join(" ")}" title="${l}"><div ${v?"":`style="width: ${t.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${o._level*f.indent}px"><div class="vxe-table--tree-icon-wrapper">${e}</div><div class="vxe-table--tree-cell"><input type="checkbox" ${o._checkboxDisabled?"disabled ":""}${Ui(l)?"checked":""}><span>${o._checkboxLabel}</span></div></div></div></td>`:`<td class="${r.join(" ")}" title="${l}"><div ${v?"":`style="width: ${t.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${o._level*f.indent}px"><div class="vxe-table--tree-icon-wrapper">${e}</div><div class="vxe-table--tree-cell">${l}</div></div></div></td>`}return"radio"===t.type?`<td class="${r.join(" ")}"><div ${v?"":`style="width: ${t.renderWidth}px"`}><input type="radio" name="radio_${d}" ${o._radioDisabled?"disabled ":""}${Ui(l)?"checked":""}><span>${o._radioLabel}</span></div></td>`:"checkbox"===t.type?`<td class="${r.join(" ")}"><div ${v?"":`style="width: ${t.renderWidth}px"`}><input type="checkbox" ${o._checkboxDisabled?"disabled ":""}${Ui(l)?"checked":""}><span>${o._checkboxLabel}</span></div></td>`:`<td class="${r.join(" ")}" title="${l}"><div ${v?"":`style="width: ${t.renderWidth}px"`}>${ur(l,!0)}</div></td>`}).join("")+"</tr>")}):t.forEach(s=>{R.push("<tr>"+e.map(e=>{var t=e.id,r=e.align||u,l=Ki(c,e,"showOverflow",p)?["col--ellipsis"]:[],t=s[t];let o=1,i=1;if(w){var n=c.getVTRowIndex(s._row),a=c.getVTColumnIndex(e),n=g[n+":"+a];if(n){var{rowspan:a,colspan:n}=n;if(!a||!n)return"";1<a&&(o=a),1<n&&(i=n)}}return r&&l.push("col--"+r),"radio"===e.type?`<td class="${l.join(" ")}" rowspan="${o}" colspan="${i}"><div ${v?"":`style="width: ${e.renderWidth}px"`}><input type="radio" name="radio_${d}" ${s._radioDisabled?"disabled ":""}${Ui(t)?"checked":""}><span>${s._radioLabel}</span></div></td>`:"checkbox"===e.type?`<td class="${l.join(" ")}" rowspan="${o}" colspan="${i}"><div ${v?"":`style="width: ${e.renderWidth}px"`}><input type="checkbox" ${s._checkboxDisabled?"disabled ":""}${Ui(t)?"checked":""}><span>${s._checkboxLabel}</span></div></td>`:`<td class="${l.join(" ")}" rowspan="${o}" colspan="${i}" title="${t}"><div ${v?"":`style="width: ${e.renderWidth}px"`}>${ur(t,!0)}</div></td>`}).join("")+"</tr>")}),R.push("</tbody>")),b&&(S=r.footerTableData,(t=qi(c,a,S)).length)&&(R.push("<tfoot>"),t.forEach(o=>{R.push(`<tr>${e.map(e=>{var t=e.footerAlign||e.align||i||u,r=Ki(c,e,"showOverflow",p)?["col--ellipsis"]:[],l=Gi(c,a,o,e);return t&&r.push("col--"+t),`<td class="${r.join(" ")}" title="${l}"><div ${v?"":`style="width: ${e.renderWidth}px"`}>${ur(l,!0)}</div></td>`}).join("")}</tr>`)}),R.push("</tfoot>"));var S,r=!m&&n?`<script>(function(){var a=document.querySelector(".${T}");if(a){a.indeterminate=true}})()</script>`:"";return R.push("</table>",r),(v?R:(S=a,t=R.join(""),r=S.style,["<!DOCTYPE html><html>","<head>",'<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">',`<title>${S.sheetName}</title>`,'<style media="print">.vxe-page-break-before{page-break-before:always;}.vxe-page-break-after{page-break-after:always;}</style>',`<style>${xt}</style>`,r?`<style>${r}</style>`:"","</head>",`<body>${t}</body>`,"</html>"])).join("")}function Qi(t,r,l,o){if(l.length)switch(r.type){case"csv":return Yi(t,r,l,o);case"txt":{var i=t;var n=r;var a=l;var s=o;var c=i;let e="";return n.isHeader&&(e+=a.map(e=>Xi(Wi(i,n,e))).join("\t")+h),s.forEach(t=>{e+=a.map(e=>Xi(t[e.id])).join("\t")+h}),n.isFooter&&(s=c.footerTableData,qi(i,n,s).forEach(t=>{e+=a.map(e=>Xi(Gi(i,n,t,e))).join("\t")+h})),e;return}case"html":return Zi(t,r,l,o);case"xml":{var d=t;var u=r;var p=l;c=o;s=d;let e=['<?xml version="1.0"?>','<?mso-application progid="Excel.Sheet"?>','<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">','<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">',"<Version>16.00</Version>","</DocumentProperties>",'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">',"<WindowHeight>7920</WindowHeight>","<WindowWidth>21570</WindowWidth>","<WindowTopX>32767</WindowTopX>","<WindowTopY>32767</WindowTopY>","<ProtectStructure>False</ProtectStructure>","<ProtectWindows>False</ProtectWindows>","</ExcelWorkbook>",`<Worksheet ss:Name="${u.sheetName}">`,"<Table>",p.map(e=>`<Column ss:Width="${e.renderWidth}"/>`).join("")].join("");return u.isHeader&&(e+=`<Row>${p.map(e=>`<Cell><Data ss:Type="String">${Wi(d,u,e)}</Data></Cell>`).join("")}</Row>`),c.forEach(t=>{e+="<Row>"+p.map(e=>`<Cell><Data ss:Type="String">${t[e.id]}</Data></Cell>`).join("")+"</Row>"}),u.isFooter&&(c=s.footerTableData,qi(d,u,c).forEach(t=>{e+=`<Row>${p.map(e=>`<Cell><Data ss:Type="String">${Gi(d,u,t,e)}</Data></Cell>`).join("")}</Row>`})),e+"</Table></Worksheet></Workbook>";return}}return""}function Ji(e,t,r){var{filename:l,type:o,download:i}=t;if(!i)return i=new Blob([r],{type:`text/${t.type};charset=utf-8;`}),Promise.resolve({type:o,content:r,blob:i});nr.VxeUI.saveFile&&nr.VxeUI.saveFile({filename:l,type:o,content:r}).then(()=>{!1!==t.message&&nr.VxeUI.modal&&nr.VxeUI.modal.message({content:L("vxe.table.expSuccess"),status:"success"})})}function en(e){sr().eachTree(e,e=>{delete e._level,delete e._colSpan,delete e._rowSpan,delete e._children,delete e.childNodes},{children:"children"})}function tn(r,l){let o=r.$xeGrid,{remote:i,columns:n,colgroups:a,exportMethod:s,afterExportMethod:t}=l;return new Promise(t=>{if(i){var e={options:l,$table:r,$grid:o};t(s?s(e):e)}else{let e=((r,e)=>{let{columns:t,dataFilterMethod:l}=e,o=e.data;return l&&(o=o.filter((e,t)=>l({$table:r,row:e,$rowIndex:t}))),ji(r,e,t,o)})(r,l);t(r.preventEvent(null,"event.export",{options:l,columns:n,colgroups:a,datas:e},()=>Ji(0,l,Qi(r,l,n,e))))}}).then(e=>(en(n),l.print||t&&t({status:!0,options:l,$table:r,$grid:o}),Object.assign({status:!0},e))).catch(()=>{en(n),l.print||t&&t({status:!1,options:l,$table:r,$grid:o});return Promise.reject({status:!1})})}function Ar(e,t){return e.getElementsByTagName(t)}function rn(e){return`#${e}@`+sr().uniqueId()}function ln(e,t){return e.replace(/#\d+@\d+/g,e=>sr().hasOwnProp(t,e)?t[e]:e)}function on(e,t){return ln(e,t).replace(/^"+$/g,e=>'"'.repeat(Math.ceil(e.length/2)))}function nn(e,t){var{fieldMaps:e,titleMaps:r}=e;return e[t]||(e=r[t])&&e.field&&(t=e.field),t}function an(t,e,i){e=e.split(h);let n=[],a=[];if(e.length){let l={},o=Date.now();e.forEach(e=>{if(e){let r={};e=(e=e.replace(/("")|(\n)/g,(e,t)=>{var r=rn(o);return l[r]=t?'"':"\n",r}).replace(/"(.*?)"/g,(e,t)=>{var r=rn(o);return l[r]=ln(t,l),r})).split(i);a.length?(e.forEach((e,t)=>{t<a.length&&(r[a[t]]=on(e.trim(),l))}),n.push(r)):a=e.map(e=>nn(t,on(e.trim(),l)))}})}return{fields:a,rows:n}}function sn(r,e,l){let{tableFullColumn:t,_importResolve:o,_importReject:i}=r,n={fields:[],rows:[]},a={},s={};t.forEach(e=>{var t=e.field,r=e.getTitle();t&&(a[t]=e),r&&(s[e.getTitle()]=e)});var c={fieldMaps:a,titleMaps:s};switch(l.type){case"csv":n=an(c,e,",");break;case"txt":n=an(c,e,"\t");break;case"html":n=((t,e)=>{var r,e=Ar((new DOMParser).parseFromString(e,"text/html"),"body");let l=[],o=[];return e.length&&(e=Ar(e[0],"table")).length&&(r=Ar(e[0],"thead")).length&&(sr().arrayEach(Ar(r[0],"tr"),e=>{sr().arrayEach(Ar(e,"th"),e=>{o.push(nn(t,e.textContent||""))})}),(r=Ar(e[0],"tbody")).length)&&sr().arrayEach(Ar(r[0],"tr"),e=>{let r={};sr().arrayEach(Ar(e,"td"),(e,t)=>{o[t]&&(r[o[t]]=e.textContent||"")}),l.push(r)}),{fields:o,rows:l}})(c,e);break;case"xml":n=((t,e)=>{var e=Ar((new DOMParser).parseFromString(e,"application/xml"),"Worksheet");let l=[],o=[];return e.length&&(e=Ar(e[0],"Table")).length&&(e=Ar(e[0],"Row")).length&&(sr().arrayEach(Ar(e[0],"Cell"),e=>{o.push(nn(t,e.textContent||""))}),sr().arrayEach(e,(e,t)=>{if(t){let r={};t=Ar(e,"Cell");sr().arrayEach(t,(e,t)=>{o[t]&&(r[o[t]]=e.textContent)}),l.push(r)}})),{fields:o,rows:l}})(c,e)}let{fields:d,rows:u}=n;d.some(e=>a[e]||s[e])?r.createData(u).then(e=>{let t;return"insert"!==l.mode&&"insertBottom"!==l.mode||(t=r.insertAt(e,-1)),t="insertTop"===l.mode?r.insert(e):r.reloadData(e),!1!==l.message&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({content:L("vxe.table.impSuccess",[u.length]),status:"success"})),t.then(()=>{o&&o({status:!0})})}):!1!==l.message&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({content:L("vxe.error.impFields"),status:"error"}),i)&&i({status:!1})}function cn(i,n,a){let s=i;var e=i.computeImportOpts;let{importMethod:c,afterImportMethod:t}=a,{type:d,filename:u}=fl(n);return c||sr().includes(sr().keys(e._typeMaps),d)?new Promise((t,r)=>{let e=e=>{t(e),i._importResolve=null,i._importReject=null},l=e=>{r(e),i._importResolve=null,i._importReject=null};if(i._importResolve=e,i._importReject=l,window.FileReader){let t=Object.assign({mode:"insertTop"},a,{type:d,filename:u});var o;t.remote?c?Promise.resolve(c({file:n,options:t,$table:i})).then(()=>{e({status:!0})}).catch(()=>{e({status:!0})}):e({status:!0}):(o=s.tableFullColumn,i.preventEvent(null,"event.import",{file:n,options:t,columns:o},()=>{var e=new FileReader;e.onerror=()=>{A("vxe.error.notType",[d]),l({status:!1})},e.onload=e=>{sn(i,e.target.result,t)},e.readAsText(n,t.encoding||"UTF-8")}))}else A("vxe.error.notExp"),e({status:!0})}).then(()=>{t&&t({status:!0,options:a,$table:i})}).catch(e=>(t&&t({status:!1,options:a,$table:i}),Promise.reject(e))):(!1!==a.message&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({content:L("vxe.error.notType",[d]),status:"error"})),Promise.reject({status:!1}))}function dn(){return nr.VxeUI.modal?nr.VxeUI.modal.close("VXE_EXPORT_MODAL"):Promise.resolve()}function un(e,l,t){return t.some(e=>{var t,r;return Jl(e)?l.id===e.id:sr().isString(e)?l.field===e:(t=e.id||e.colId,r=e.type,e=e.field,t?l.id===t:e&&r?l.field===e&&l.type===r:e?l.field===e:!!r&&l.type===r)})}function pn(e,t,r,l){return(!l||!sr().includes(l,t.field))&&(r?!!sr().includes(r,t.field):e.original?!!t.field:zi(t))}function hn(a,e,t){var r=a.$xeGrid,{treeConfig:l,showHeader:o,showFooter:i}=a,{initStore:n,isGroup:s,footerTableData:c,exportStore:d,exportParams:u}=a,{collectColumn:p,mergeBodyList:h,mergeFooterList:m}=a,g=a.computeExportOpts,f=a.computeCustomOpts,v=a.getCheckboxRecords(),x=r?r.computeProxyOpts:{},c=!!c.length,h=!(!h.length&&!m.length);let b=Object.assign({message:!0,isHeader:o,isTitle:o,isFooter:i,isColgroup:s,isMerge:h,useStyle:!0,current:"current",modes:(x.ajax&&x.ajax.queryAll?["all"]:[]).concat(["current","selected","empty"])},e);m=b.types||sr().keys(g._typeMaps),o=b.modes||[];let C=f.checkMethod;i=p.slice(0);let{columns:w,excludeFields:y,includeFields:E}=b;x=m.map(e=>({value:e,label:L("vxe.export.types."+e)})),e=o.map(e=>e&&e.value?{value:e.value,label:e.label||e.value}:{value:e,label:L("vxe.export.modes."+e)});sr().eachTree(i,(e,t,r,l,o)=>{var i=e.children&&0<e.children.length;let n=!1;n=w&&w.length?un(b,e,w):y||E?pn(b,e,E,y):e.visible&&(i||zi(e)),e.checked=n,e.halfChecked=!1,e.disabled=o&&o.disabled||!!C&&!C({$table:a,column:e})}),Object.assign(d,{columns:i,typeList:x,modeList:e,hasFooter:c,hasMerge:h,hasTree:l,isPrint:t,hasColgroup:s,visible:!0}),Object.assign(u,{mode:v.length?"selected":"current"},b);let{filename:T,sheetName:R,mode:S,type:O}=u;return T&&(sr().isFunction(T)?u.filename=T({options:b,$table:a,$grid:r}):u.filename=""+T),R&&(sr().isFunction(R)?u.sheetName=R({options:b,$table:a,$grid:r}):u.sheetName=""+R),e.some(e=>e.value===S)||(u.mode=e[0].value),x.some(e=>e.value===O)||(u.type=x[0].value),n.export=!0,a.$nextTick()}let yt=e=>{let t=[];return e.forEach(e=>{e.childNodes&&e.childNodes.length?(t.push(e),t.push(...yt(e.childNodes))):t.push(e)}),t},Et={methods:{_exportData(e){let a=this;var t=a,r=a,l=a;let s=a.$xeGrid;var{treeConfig:t,showHeader:c,showFooter:d}=t,r=r.isGroup;let{tableFullColumn:i,afterFullData:o,collectColumn:n,mergeBodyList:u,mergeFooterList:p}=l;var l=a.computeExportOpts,h=a.computeTreeOpts;let m=s?s.computeProxyOpts:{};var g=!(!u.length&&!p.length);let f=Object.assign({message:!0,isHeader:c,isTitle:c,isFooter:d,isColgroup:r,isMerge:g,useStyle:!0,current:"current",modes:(m.ajax&&m.ajax.queryAll?["all"]:[]).concat(["current","selected","empty"]),download:!0,type:"csv"},l,e),{filename:v,sheetName:x,type:b,mode:C,columns:w,original:y,columnFilterMethod:E,beforeExportMethod:T,includeFields:R,excludeFields:S}=f,O=[],F=a.getCheckboxRecords(),D=(C=C||(F.length?"selected":"current"),!1),I=[],$=(I=w&&w.length?(D=!0,w):sr().searchTree(n,e=>{var t=e.children&&0<e.children.length;let r=!1;return r=w&&w.length?un(f,e,w):S||R?pn(f,e,R,S):e.visible&&(t||zi(e))},{children:"children",mapChildren:"childNodes",original:!0}),Object.assign({},f,{filename:"",sheetName:""})),k=(D||E||(E=({column:e})=>(!S||!sr().includes(S,e.field))&&(R?!!sr().includes(R,e.field):y?!!e.field:zi(e)),$.columnFilterMethod=E),O=I?($._isCustomColumn=!0,sr().searchTree(sr().mapTree(I,e=>{let l;if(e){if(Jl(e))l=e;else if(sr().isString(e))l=a.getColumnByField(e);else{var o=e.id||e.colId;let t=e.type,r=e.field;o?l=a.getColumnById(o):r&&t?l=i.find(e=>e.field===r&&e.type===t):r?l=a.getColumnByField(r):t&&(l=i.find(e=>e.type===t))}return l||{}}},{children:"childNodes",mapChildren:"_children"}),(e,t)=>Jl(e)&&(!E||E({$table:a,column:e,$columnIndex:t})),{children:"_children",mapChildren:"childNodes",original:!0})):sr().searchTree(r?n:i,(e,t)=>e.visible&&(!E||E({$table:a,column:e,$columnIndex:t})),{children:"children",mapChildren:"childNodes",original:!0}),[]);if(sr().eachTree(O,e=>{e.children&&e.children.length||k.push(e)},{children:"childNodes"}),$.columns=k,$.colgroups=(e=>{let t=1,l=(r,e)=>{if(e&&(r._level=e._level+1,t<r._level)&&(t=r._level),r.childNodes&&r.childNodes.length){let t=0;r.childNodes.forEach(e=>{l(e,r),t+=e._colSpan}),r._colSpan=t}else r._colSpan=1},r=(e.forEach(e=>{e._level=1,l(e)}),[]);for(let e=0;e<t;e++)r.push([]);return yt(e).forEach(e=>{e.childNodes&&e.childNodes.length?e._rowSpan=1:e._rowSpan=t-e._level+1,r[e._level-1].push(e)}),r})(O),v&&(sr().isFunction(v)?$.filename=v({options:f,$table:a,$grid:s}):$.filename=""+v),$.filename||($.filename=L($.original?"vxe.table.expOriginFilename":"vxe.table.expFilename",[sr().toDateString(Date.now(),"yyyyMMddHHmmss")])),x&&(sr().isFunction(x)?$.sheetName=x({options:f,$table:a,$grid:s}):$.sheetName=""+x),$.sheetName||($.sheetName=document.title||""),!$.exportMethod&&!sr().includes(sr().keys(l._typeMaps),b))return A("vxe.error.notType",[b]),["xlsx","pdf"].includes(b)&&M("vxe.error.reqPlugin",[4,"plugin-export-xlsx"]),Promise.reject({status:!1});if($.print||T&&T({options:$,$table:a,$grid:s}),!$.data)if($.data=[],"selected"===C)-1<["html","pdf"].indexOf(b)&&t?$.data=sr().searchTree(a.getTableData().fullData,e=>-1<a.findRowIndexOf(F,e),Object.assign({},h,{data:"_row"})):$.data=F;else if("all"===C){if(s||A("vxe.error.errProp",["all","mode=current,selected"]),s&&!$.remote){c=s;let e=s.computeProxyOpts;d=c.sortData;let{beforeQueryAll:t,afterQueryAll:l,ajax:r={}}=e,o=e.response||e.props||{};g=r.queryAll;let i=r.queryAllSuccess,n=r.queryAllError;if(g||A("vxe.error.notFunc",["proxy-config.ajax.queryAll"]),g){let r={$table:a,$grid:s,sort:d.length?d[0]:{},sorts:d,filters:c.filterData,form:c.formData,options:$};return Promise.resolve((t||g)(r)).then(e=>{var t=o.list;return $.data=(t?sr().isFunction(t)?t({data:e,$grid:s}):sr().get(e,t):e)||[],l&&l(r),i&&i({...r,response:e}),tn(a,$)}).catch(e=>{n&&n({...r,response:e})})}}}else"current"===C&&($.data=o);return tn(a,$)},_importByFile(e,t){var t=Object.assign({},t),r=t.beforeImportMethod;return r&&r({options:t,$table:this}),cn(this,e,t)},_importData(e){let t=this;var r=this.importOpts;let l=Object.assign({types:sr().keys(r._typeMaps)},r,e),{beforeImportMethod:o,afterImportMethod:i}=l;return o&&o({options:l,$table:this}),nr.VxeUI.readFile(l).catch(e=>(i&&i({status:!1,options:l,$table:t}),Promise.reject(e))).then(e=>{e=e.file;return cn(t,e,l)})},_saveFile(e){return nr.VxeUI.saveFile(e)},_readFile(e){return nr.VxeUI.readFile(e)},_print(e){let r=this;var t=r.$xeGrid;let l=Object.assign({original:!1},this.printOpts,e,{type:"html",download:!1,remote:!1,print:!0});e=l.sheetName;let o="",i=(o=(o=e?sr().isFunction(e)?e({options:l,$table:r,$grid:t}):""+e:o)||document.title||"",l.beforePrintMethod),n=l.html||l.content;return new Promise((e,t)=>{nr.VxeUI.print?n?e(nr.VxeUI.print({title:o,html:n,customStyle:l.style,beforeMethod:i?({html:e})=>i({html:e,content:e,options:l,$table:r}):void 0})):e(r.exportData(l).then(({content:e})=>nr.VxeUI.print({title:o,html:e,customStyle:l.style,beforeMethod:i?({html:e})=>i({html:e,content:e,options:l,$table:r}):void 0}))):t({status:!1})})},_getPrintHtml(e){var t=this.computePrintOpts,t=Object.assign({original:!1},t,e,{type:"html",download:!1,remote:!1,print:!0});return this.exportData(t).then(({content:e})=>({html:e}))},_closeImport(){return nr.VxeUI.modal?nr.VxeUI.modal.close("VXE_IMPORT_MODAL"):Promise.resolve()},_openImport(e){var{treeConfig:t,importConfig:r}=this;let{initStore:l,importStore:o,importParams:i}=this;var n=this.computeImportOpts,n=Object.assign({mode:"insertTop",message:!0,types:sr().keys(n._typeMaps),modes:["insertTop","covering"]},n,e),e=n.types||[],a=n.modes||[];!t?(r||A("vxe.error.reqProp",["import-config"]),t=e.map(e=>({value:e,label:L("vxe.export.types."+e)})),r=a.map(e=>e&&e.value?{value:e.value,label:e.label||e.value}:{value:e,label:L("vxe.import.modes."+e)}),Object.assign(o,{file:null,type:"",filename:"",modeList:r,typeList:t,visible:!0}),Object.assign(i,n),r.some(e=>e.value===i.mode)||(i.mode=r[0].value),l.import=!0):n.message&&nr.VxeUI.modal.message({content:L("vxe.error.treeNotImp"),status:"error"})},_closeExport:dn,_openExport(e){var t=this.computeExportOpts,t=Object.assign({message:!0,types:sr().keys(t._typeMaps)},t,e);return this.exportConfig||A("vxe.error.reqProp",["export-config"]),hn(this,t)},_closePrint:dn,_openPrint(e){var t=this.computePrintOpts,t=Object.assign({message:!0},t,e);return this.printConfig||A("vxe.error.reqProp",["print-config"]),hn(this,t,!0)}}},Tt=sr().browse();function mn(e,t,r,l,o,i,n){var{afterFullData:a,visibleColumn:s}=e;let c=Object.assign({},r);var r=e.getVTRowIndex(c.row),d=e.getVTColumnIndex(c.column);return t.preventDefault(),o&&0<r?(c.rowIndex=r-1,c.row=a[c.rowIndex]):n&&r<a.length-1?(c.rowIndex=r+1,c.row=a[c.rowIndex]):l&&d?(c.columnIndex=d-1,c.column=s[c.columnIndex]):i&&d<s.length-1&&(c.columnIndex=d+1,c.column=s[c.columnIndex]),e.scrollToRow(c.row,c.column).then(()=>{c.cell=e.getCellElement(c.row,c.column),e.handleSelected(c,t)}),c}function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e){e=((e,t)=>{if("object"!=gn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=gn(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string");return"symbol"==gn(e)?e:e+""}let{getConfig:Rt,validators:St}=nr.VxeUI;class Ca{constructor(e){var t,r,l;t=this,l=void 0,(r=fn(r="$options"))in t?Object.defineProperty(t,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[r]=l,Object.assign(this,{$options:e,required:e.required,min:e.min,max:e.max,type:e.type,pattern:e.pattern,validator:e.validator,trigger:e.trigger,maxWidth:e.maxWidth})}get content(){return dr(this.$options.content||this.$options.message)}get message(){return this.content}}function vn(e,t){return!(!sr().eqNull(e)&&t>sr().toNumber(e))}function xn(e,t){return!(!sr().eqNull(e)&&t<sr().toNumber(e))}function bn(e,t,r){var l,{type:e,min:o,max:i,pattern:n}=e,a="array"===e,s="number"===e,e="string"===e,c=""+t;if(l=c,!n||(sr().isRegExp(n)?n:new RegExp(n)).test(l)){if(a){if(!sr().isArray(t))return;if(r&&!t.length)return;if(!xn(o,t.length))return;if(!vn(i,t.length))return}else if(s){n=Number(t);if(isNaN(n))return;if(!xn(o,n))return;if(!vn(i,n))return}else{if(e&&!sr().isString(t))return;if(r&&!c)return;if(!xn(o,c.length))return;if(!vn(i,c.length))return}return 1}}function Cn(e){var t=e.customStore,e=e.$refs.refElem;let r=0;e&&(r=e.clientHeight-28),t.maxHeight=Math.max(88,r)}function wn(e,t,r){(e.$xeGrid||e).dispatchEvent("custom",{type:t},r)}let Ot={methods:{_openCustom(){let e=this;var{initStore:t,customStore:r}=e;return r.visible=!0,t.custom=!0,e.handleUpdateCustomColumn(),e.checkCustomStatus(),Cn(e),e.$nextTick().then(()=>Cn(e))},_closeCustom(){var e=this.customStore,t=this.computeCustomOpts;return e.visible&&(e.visible=!1,t.immediate||this.handleCustom()),this.$nextTick()},_saveCustom(){let e=this;var{customOpts:t,customColumnList:r}=this;let{allowVisible:i,allowSort:n,allowFixed:a,allowResizable:s}=t;return sr().eachTree(r,(e,t,r,l,o)=>{o?e.fixed=o.fixed:(n&&(e.renderSortNumber=t+1),a&&(e.fixed=e.renderFixed)),s&&e.renderVisible&&(!e.children||e.children.length)&&e.renderResizeWidth!==e.renderWidth&&(e.resizeWidth=e.renderResizeWidth,e.renderWidth=e.renderResizeWidth),i&&(e.visible=e.renderVisible)}),e.isCustomStatus=!0,e.isDragColMove=!0,setTimeout(()=>{e.isDragColMove=!1},1e3),this.saveCustomStore("confirm")},_cancelCustom(){var{customColumnList:e,customStore:t}=this;let{oldSortMaps:o,oldFixedMaps:i,oldVisibleMaps:n}=t,{allowVisible:a,allowSort:s,allowFixed:c,allowResizable:d}=this.computeCustomOpts;return sr().eachTree(e,e=>{var t=e.getKey(),r=!!n[t],l=i[t]||"";a&&(e.renderVisible=r,e.visible=r),c&&(e.renderFixed=l,e.fixed=l),s&&(e.renderSortNumber=o[t]||0),d&&(e.renderResizeWidth=e.renderWidth)},{children:"children"}),this.$nextTick()},_resetCustom(e){let t=this;var r=t,l=t.collectColumn;let o=t.computeCustomOpts.checkMethod,i=Object.assign({visible:!0,resizable:!0===e,fixed:!0===e,sort:!0===e},e);return sr().eachTree(l,e=>{i.resizable&&(e.resizeWidth=0),i.fixed&&(e.fixed=e.defaultFixed),i.sort&&(e.renderSortNumber=e.sortNumber),o&&!o({$table:t,column:e})||(e.visible=e.defaultVisible),e.renderResizeWidth=e.renderWidth}),r.isCustomStatus=!1,t.saveCustomStore("reset"),t.handleCustom()},_toggleCustomAllCheckbox(){var e=this.customStore,e=!e.isAll;return this.setCustomAllCheckbox(e)},_setCustomAllCheckbox(e){let t=this;var r=t,l=r.customStore,o=r.customColumnList,i=t.computeCustomOpts;let{checkMethod:n,visibleMethod:a}=i,s=!!e;i.immediate?(sr().eachTree(o,e=>{a&&!a({$table:t,column:e})||n&&!n({$table:t,column:e})||(e.visible=s,e.renderVisible=s,e.halfVisible=!1)}),l.isAll=s,r.isCustomStatus=!0,t.handleCustom(),t.saveCustomStore("update:visible")):(sr().eachTree(o,e=>{a&&!a({$table:t,column:e})||n&&!n({$table:t,column:e})||(e.renderVisible=s,e.halfVisible=!1)}),l.isAll=s),t.checkCustomStatus()},checkCustomStatus(){let t=this;var e=t.customStore,r=t.collectColumn;let l=t.computeCustomOpts.checkMethod;e.isAll=r.every(e=>!!l&&!l({$table:t,column:e})||e.renderVisible),e.isIndeterminate=!e.isAll&&r.some(e=>(!l||l({$table:t,column:e}))&&(e.renderVisible||e.halfVisible))},emitCustomEvent(e,t){(this.$xeGrid||this).dispatchEvent("custom",{type:e},t)},triggerCustomEvent(e){var t=this.customStore;t.visible?(this.closeCustom(),wn(this,"close",e)):(t.btnEl=e.target,this.openCustom(),wn(this,"open",e))},customOpenEvent(e){var t=this.customStore;t.visible&&(t.activeBtn=!0,t.btnEl=e.target,this.openCustom(),wn(this,"open",e))},customCloseEvent(e){var t=this.customStore;t.visible&&(t.activeBtn=!1,this.closeCustom(),wn(this,"close",e))},handleUpdateCustomColumn(){var e=this,t=e.customStore,i=this.collectColumn;if(t.visible){let r={},l={},o={};sr().eachTree(i,e=>{var t=e.getKey();e.renderFixed=e.fixed,e.renderVisible=e.visible,e.renderResizeWidth=e.renderWidth,r[t]=e.renderSortNumber,l[t]=e.fixed,o[t]=e.visible}),t.oldSortMaps=r,t.oldFixedMaps=l,t.oldVisibleMaps=o,e.customColumnList=i.slice(0)}}}},{getConfig:K,getIcon:Ft,getI18n:Dt,renderer:It,globalResize:$t,globalEvents:D,globalMixins:kt,renderEmptyElement:Z}=nr.VxeUI;function yn(e){var t=e,e=e.computeRowField;t.currKeyField=e,t.isCurrDeepKey=-1<e.indexOf(".")}function En(e,t,r){var{showHeader:l,showFooter:o}=t,{tableData:i,tableColumn:n,tableGroupColumn:a,columnStore:s,footerTableData:c}=t,d="left"===r,s=d?s.leftList:s.rightList;return e("div",{ref:d?"refLeftContainer":"refRightContainer",class:`vxe-table--fixed-${r}-wrapper`},[l?e(Ci,{props:{fixedType:r,tableData:i,tableColumn:n,tableGroupColumn:a,fixedColumn:s},ref:r+"Header"}):Z(t),e(bi,{props:{fixedType:r,tableData:i,tableColumn:n,fixedColumn:s},ref:r+"Body"}),o?e(yi,{props:{footerTableData:c,tableColumn:n,fixedColumn:s,fixedType:r},ref:r+"Footer"}):Z(t)])}function Tn(e){var t=e.$el;t&&t.clientWidth&&t.clientHeight&&e.recalculate()}function Rn(e,t){return e("div",{key:"vsx",ref:"refScrollXVirtualElem",class:"vxe-table--scroll-x-virtual"},[e("div",{ref:"refScrollXLeftCornerElem",class:"vxe-table--scroll-x-left-corner"}),e("div",{ref:"refScrollXWrapperElem",class:"vxe-table--scroll-x-wrapper"},[e("div",{ref:"refScrollXHandleElem",class:"vxe-table--scroll-x-handle",on:{scroll:t.triggerVirtualScrollXEvent}},[e("div",{ref:"refScrollXSpaceElem",class:"vxe-table--scroll-x-space"})])]),e("div",{ref:"refScrollXRightCornerElem",class:"vxe-table--scroll-x-right-corner"})])}function Sn(e,t){return e("div",{ref:"refScrollYVirtualElem",class:"vxe-table--scroll-y-virtual"},[e("div",{ref:"refScrollYTopCornerElem",class:"vxe-table--scroll-y-top-corner"}),e("div",{ref:"refScrollYWrapperElem",class:"vxe-table--scroll-y-wrapper"},[e("div",{ref:"refScrollYHandleElem",class:"vxe-table--scroll-y-handle",on:{scroll:t.triggerVirtualScrollYEvent}},[e("div",{ref:"refScrollYSpaceElem",class:"vxe-table--scroll-y-space"})])]),e("div",{ref:"refScrollYBottomCornerElem",class:"vxe-table--scroll-y-bottom-corner"})])}function On(e,t){var{showHeader:r,showFooter:l}=t,{overflowX:o,tableData:i,tableColumn:n,tableGroupColumn:a,footerTableData:s,columnStore:c}=t,{leftList:c,rightList:d}=c;return e("div",{ref:"refTableViewportElem",class:"vxe-table--viewport-wrapper"},[e("div",{class:"vxe-table--main-wrapper"},[r?e(Ci,{ref:"refTableHeader",props:{tableData:i,tableColumn:n,tableGroupColumn:a}}):Z(t),e(bi,{ref:"refTableBody",props:{tableData:i,tableColumn:n}}),l?e(yi,{ref:"refTableFooter",props:{footerTableData:s,tableColumn:n}}):Z(t)]),e("div",{class:"vxe-table--fixed-wrapper"},[c&&c.length&&o?En(e,t,"left"):Z(t),d&&d.length&&o?En(e,t,"right"):Z(t)]),((C,w)=>{let y=w,E=w.$xeGrid,T=w.treeConfig,{expandColumn:R,isRowGroupStatus:S}=w;var e=w.computeTableRowExpandedList,t=w.computeExpandOpts.mode;if("fixed"!==t)return Z(w);let O=[C("div",{key:"repY",ref:"refRowExpandYSpaceElem"})];if(R){let b=Er(w).handleGetRowId;e.forEach(e=>{var{height:t,padding:r,indent:l}=w.computeExpandOpts,{fullAllDataRowIdData:o,fullColumnIdData:i}=y,n=w.computeTreeOpts,{transform:a,seqMode:s}=n,c={},d=b(e),o=o[d],i=i[R.id]||{};let u=0,p=-1,h=-1,m=-1,g=-1,f=(o&&(u=o.level,p=S||T&&a&&"increasing"===s?o._index+1:o.seq,m=o.index,g=o.$index,h=o._index),t&&(c.height=t+"px"),(S||T)&&(c.paddingLeft=u*(sr().isNumber(l)?l:n.indent)+30+"px"),-1),v=-1,x=-1;i&&(f=i.index,v=i.$index,x=i._index);a={$grid:E,$table:w,seq:p,column:R,columnIndex:f,$columnIndex:v,_columnIndex:x,fixed:"",type:"body",level:u,rowid:d,row:e,rowIndex:m,$rowIndex:g,_rowIndex:h,isHidden:!1,isEdit:!1,visibleData:[],data:[],items:[]};O.push(C("div",{key:d,class:["vxe-body--row-expanded-cell",{"is--padding":r,"is--ellipsis":t}],attrs:{rowid:d},style:c},R.renderData(C,a)))})}return C("div",{ref:"refRowExpandElem",class:"vxe-table--row-expanded-wrapper"},O)})(e,t)])}function Fn(e,t){return e("div",{class:"vxe-table--layout-wrapper"},t.computeScrollbarYToLeft?[Sn(e,t),On(e,t)]:[On(e,t),Sn(e,t)])}var Dn={name:"VxeTable",mixins:[kt.sizeMixin,st,pt,vt,Et,{methods:{moveTabSelected(e,t,r){let l=this;var o=l.editConfig,{afterFullData:i,visibleColumn:n}=l,a=l.computeEditOpts,s=l.computeRowOpts,c=l.computeCurrentRowOpts,d=l.computeColumnOpts,u=l.computeCurrentColumnOpts;let p,h,m,g=Object.assign({},e);var e=l.getVTRowIndex(g.row),f=l.getVTColumnIndex(g.column),t=(r.preventDefault(),t?f<=0?0<e&&(h=e-1,p=i[h],m=n.length-1):m=f-1:f>=n.length-1?e<i.length-1&&(h=e+1,p=i[h],m=0):m=f+1,n[m]);t&&(p?(g.rowIndex=h,g.row=p):g.rowIndex=e,g.columnIndex=m,g.column=t,g.cell=l.getCellElement(g.row,g.column),s.isCurrent&&c.isFollowSelected&&l.triggerCurrentRowEvent(r,g),d.isCurrent&&u.isFollowSelected&&l.triggerCurrentColumnEvent(r,g),o?"click"!==a.trigger&&"dblclick"!==a.trigger||("row"===a.mode?l.handleEdit(g,r):l.scrollToRow(g.row,g.column).then(()=>{l.handleSelected(g,r)})):l.scrollToRow(g.row,g.column).then(()=>{l.handleSelected(g,r)}))},moveCurrentRow(e,t,r){let l=this;var o=l,i=l,n=l,o=o.treeConfig;let a=i.currentRow;var i=n.afterFullData,n=l.computeTreeOpts,n=n.children||n.childrenField;let s;if(a?o?({index:o,items:n}=sr().findTree(i,e=>e===a,{children:n}),e&&0<o?s=n[o-1]:t&&o<n.length-1&&(s=n[o+1])):(n=l.getVTRowIndex(a),e&&0<n?s=i[n-1]:t&&n<i.length-1&&(s=i[n+1])):s=i[0],s){r.preventDefault();let e={$table:l,row:s,rowIndex:l.getRowIndex(s),$rowIndex:l.getVMRowIndex(s)};l.scrollToRow(s).then(()=>l.triggerCurrentRowEvent(r,e))}},moveCurrentColumn(e,t,r){let l=this;var o=l.currentColumn,i=l.visibleColumn;let n=null;if(o?(o=l.getVTColumnIndex(o),e&&0<o?n=i[o-1]:t&&o<i.length-1&&(n=i[o+1])):n=i[0],n){r.preventDefault();let e={$table:l,column:n,columnIndex:l.getColumnIndex(n),$columnIndex:l.getVMColumnIndex(n)};l.scrollToColumn(n).then(()=>l.triggerCurrentColumnEvent(r,e))}},moveArrowSelected(e,t,r,l,o,i){var n=this,{highlightCurrentRow:a,highlightCurrentColumn:s}=n,c=n.computeRowOpts,d=n.computeCurrentRowOpts,u=n.computeColumnOpts,p=n.computeCurrentColumnOpts,e=mn(n,i,e,t,r,l,o);(c.isCurrent||a)&&(d.isFollowSelected?n.triggerCurrentRowEvent(i,e):(r||o)&&(c.isCurrent||a)&&n.moveCurrentRow(r,o,i)),(u.isCurrent||s)&&(p.isFollowSelected?n.triggerCurrentColumnEvent(i,e):(t||l)&&(u.isCurrent||s)&&n.moveCurrentColumn(t,l,i))},moveEnterSelected(e,t,r,l,o,i){var{highlightCurrentRow:n,highlightCurrentColumn:a}=this,s=this.computeRowOpts,c=this.computeCurrentRowOpts,d=this.computeColumnOpts,u=this.computeCurrentColumnOpts,e=mn(this,i,e,t,r,l,o);(s.isCurrent||n)&&c.isFollowSelected&&this.triggerCurrentRowEvent(i,e),(d.isCurrent||a)&&u.isFollowSelected&&this.triggerCurrentColumnEvent(i,e)},moveSelected(e,t,r,l,o,i){mn(this,i,e,t,r,l,o)},handleCellMousedownEvent(e,t){var{editConfig:r,editOpts:l,handleSelected:o,checkboxConfig:i,checkboxOpts:n,mouseConfig:a,mouseOpts:s}=this;if(a&&s.area&&this.triggerCellAreaMousedownEvent)return this.triggerCellAreaMousedownEvent(e,t);i&&n.range&&this.handleCheckboxRangeEvent(e,t),a&&s.selected&&(r&&"cell"!==l.mode||o(t,e))},handleCheckboxRangeEvent(e,O){let F=this;var t=F.elemStore,r=Fr(t["main-body-scroll"]),l=Fr(t["left-body-scroll"]),t=Fr(t["right-body-scroll"]),{column:o,cell:i}=O;if("checkbox"===o.type){let S=r;if(l&&"left"===o.fixed?S=l:t&&"right"===o.fixed&&(S=t),S){let t=F.$refs.refElem,a=e.clientX,s=e.clientY,c=S.querySelector(".vxe-table--checkbox-range"),d=i.parentNode,u=this.getCheckboxRecords(),p=[],h=1;r=((e,t)=>{let r=0,l=0;var o,i,n=!Tt.firefox&&mr(e,"vxe-checkbox--label");for(n&&(o=getComputedStyle(e),r-=sr().toNumber(o.paddingTop),l-=sr().toNumber(o.paddingLeft));e&&e!==t;)r+=e.offsetTop,l+=e.offsetLeft,e=e.offsetParent,n&&(i=getComputedStyle(e),r-=sr().toNumber(i.paddingTop),l-=sr().toNumber(i.paddingLeft));return{offsetTop:r,offsetLeft:l}})(e.target,S);let m=r.offsetTop+e.offsetY,g=r.offsetLeft+e.offsetX,f=S.scrollTop,n=d.offsetHeight,v=d.getBoundingClientRect(),x=s-v.y,b=null,C=!1,w=1,y=(e,t)=>{this.emitEvent("checkbox-range-"+e,{records:()=>this.getCheckboxRecords(),reserves:()=>this.getCheckboxReserveRecords()},t)},E=e=>{var{clientX:t,clientY:r}=e,t=t-a,r=r-s+(S.scrollTop-f);let l=Math.abs(r),o=Math.abs(t),i=m,n=g;r<h?(i+=r)<h&&(i=h,l=m):l=Math.min(l,S.scrollHeight-m-h),t<h?(n+=t,o>g&&(n=h,o=g)):o=Math.min(o,S.clientWidth-g-h),c.style.height=l+"px",c.style.width=o+"px",c.style.left=n+"px",c.style.top=i+"px",c.style.display="block";t=((t,e,r,l,o,i)=>{var n=t.showOverflow,{fullAllDataRowIdData:a,isResizeCellHeight:s}=t,c=t.computeRowOpts,d=t.computeCellOpts,u=t.computeDefaultRowHeight,e=e.row;let p=0,h=[],m=0;var g=0<i,f=t.scrollYLoad,v=t.afterFullData;if(m=g?o+i:l.height-o+Math.abs(i),f){l=t.getVTRowIndex(e);if(!(s||d.height||c.height)&&n)h=g?v.slice(l,l+Math.ceil(m/u)):v.slice(l-Math.floor(m/u),l+1);else if(g)for(let e=l;e<v.length;e++){var x=v[e],b=a[t.getRowid(x)]||{};if(p+=b.resizeHeight||d.height||c.height||b.height||u,h.push(x),p>m)return h}else for(let e=l;0<=e;e--){var C=v[e],w=a[t.getRowid(C)]||{};if(p+=w.resizeHeight||d.height||c.height||w.height||u,h.push(C),p>m)return h}}else for(var y=g?"next":"previous";r&&p<m;){var E=t.getRowNode(r);E&&(h.push(E.item),p+=r.offsetHeight,r=r[y+"ElementSibling"])}return h})(this,O,d,v,x,r<h?-l:l);10<l&&t.length!==p.length&&(r=Rl(e),p=t,r?t.forEach(e=>{F.handleBatchSelectRows([e],-1===u.indexOf(e))}):(this.setAllCheckboxRow(!1),this.handleCheckedCheckboxRow(t,!0,!1)),y("change",e))},T=()=>{clearTimeout(b),b=null},R=i=>{T(),b=setTimeout(()=>{var e,t,r,l,o;b&&({scrollLeft:e,scrollTop:t,clientHeight:r,scrollHeight:l}=S,o=Math.ceil(50*w/n),C?t+r<l?(this.scrollTo(e,t+o),R(i),E(i)):T():t?(this.scrollTo(e,t-o),R(i),E(i)):T())},50)};fr(t,"drag--range"),document.onmousemove=e=>{e.preventDefault(),e.stopPropagation();var t=e.clientY,r=$l(S).boundingTop;t<r?(C=!1,w=r-t,b||R(e)):t>r+S.clientHeight?(C=!0,w=t-r-S.clientHeight,b||R(e)):b&&T(),E(e)},document.onmouseup=e=>{T(),gr(t,"drag--range"),c.removeAttribute("style"),document.onmousemove=null,document.onmouseup=null,y("end",e)},y("start",e)}}}}},{methods:{_fullValidate(e,t){return sr().isFunction(t)&&M("vxe.error.notValidators",["fullValidate(rows, callback)","fullValidate(rows)"]),this.beginValidate(e,null,t,!0)},_validate(e,t){return sr().isFunction(t)&&M("vxe.error.notValidators",["validate(rows, callback)","validate(rows)"]),this.beginValidate(e,null,t)},_fullValidateField(e,t){t=(sr().isArray(t)?t:t?[t]:[]).map(e=>Rr(this,e));return t.length?this.beginValidate(e,t,null,!0):this.$nextTick()},_validateField(e,t){t=(sr().isArray(t)?t:t?[t]:[]).map(e=>Rr(this,e));return t.length?this.beginValidate(e,t,null):this.$nextTick()},handleValidError(t){let r=this.validOpts;return new Promise(e=>{!1===r.autoPos?(this.emitEvent("valid-error",t),e()):this.handleEdit(t,{type:"valid-error",trigger:"call"}).then(()=>{setTimeout(()=>{e(this.showValidTooltip(t))},10)})})},handleErrMsgMode(e){var t,r=this.validOpts;return"single"===r.msgMode?(r={},(t=Object.keys(e)).length&&(r[t=t[0]]=e[t]),r):e},beginValidate(e,r,n,i){let l=this;var o=l,a=l,s=l;let c={},{editRules:d,treeConfig:u}=o;o=a.isRowGroupStatus;let{afterFullData:t,pendingRowMaps:p,removeRowMaps:h}=s;a=l.computeTreeOpts,s=l.computeAggregateOpts;let m,g=(!0===e?m=t:e&&(sr().isFunction(e)?n=e:m=sr().isArray(e)?e:[e]),m=m||this.getInsertRecords().concat(this.getUpdateRecords()),[]),f=(this.lastCallTime=Date.now(),this.validRuleErr=!1,this.clearValidate(),{});if(d){let t=r&&r.length?r:this.getColumns();e=o=>{var e=yr(l,o);if(!h[e]&&!p[e]&&!l.isAggregateRecord(o)&&(i||!this.validRuleErr)){let e=[];t.forEach(r=>{let l=sr().isString(r)?r:r.field;!i&&this.validRuleErr||!sr().has(d,l)||e.push(this.validCellRules("all",o,r).catch(({rule:e,rules:t})=>{t={rule:e,rules:t,rowIndex:this.getRowIndex(o),row:o,columnIndex:this.getColumnIndex(r),column:r,field:l,$table:this};if(c[l]||(c[l]=[]),f[yr(this,o)+":"+r.id]={column:r,row:o,rule:e,content:e.content},c[l].push(t),!i)return this.validRuleErr=!0,Promise.reject(t)}))}),g.push(Promise.all(e))}};return o?sr().eachTree(m,e,{children:s.mapChildrenField}):u?(r=a.children||a.childrenField,sr().eachTree(m,e,{children:r})):m.forEach(e),Promise.all(g).then(()=>{let e=Object.keys(c);return this.validErrorMaps=this.handleErrMsgMode(f),this.$nextTick().then(()=>{if(e.length)return Promise.reject(c[e[0]][0]);n&&n()})}).catch(i=>new Promise((e,t)=>{let r=()=>{this.$nextTick(()=>{n?(n(c),e()):("obsolete"===Rt().validToReject?t:e)(c)})};var l,o=()=>{var e;i.cell=this.getCellElement(i.row,i.column),(e=i.cell)&&(e[pe]?e[pe]():e[he]&&e[he]()),this.handleValidError(i).then(r)};!1===this.validOpts.autoPos?r():(l=i.row,this.scrollToRow(l,i.column).then(o))}))}return this.validErrorMaps={},this.$nextTick().then(()=>{n&&n()})},hasCellRules(t,e,r){var l=this.editRules,r=r.property;return!(!r||!l)&&(l=sr().get(l,r))&&sr().find(l,e=>"all"===t||!e.trigger||t===e.trigger)},validCellRules(e,s,c,t){var r=this.editRules,l=c.property;let d=[],u=[];if(l&&r){let a=sr().get(r,l);if(a){let n=sr().isUndefined(t)?sr().get(s,l):t;a.forEach(t=>{let{trigger:r,validator:l}=t;if("all"===e||!r||e===r)if(l){var o,i={cellValue:n,rule:t,rules:a,row:s,rowIndex:this.getRowIndex(s),column:c,columnIndex:this.getColumnIndex(c),field:c.property,$table:this};let e;sr().isString(l)?(o=St.get(l))&&(o=o.tableCellValidatorMethod||o.cellValidatorMethod)?e=o(i):A("vxe.error.notValidators",[l]):e=l(i),e&&(sr().isError(e)?(this.validRuleErr=!0,d.push(new Ca({type:"custom",trigger:r,content:e.message,rule:new Ca(t)}))):e.catch&&u.push(e.catch(e=>{this.validRuleErr=!0,d.push(new Ca({type:"custom",trigger:r,content:e&&e.message?e.message:t.content||t.message,rule:new Ca(t)}))})))}else((e,t)=>{var r=e.required,l=sr().isArray(t)?!t.length:pr(t);if(r){if(l)return;if(!bn(e,t,r))return}else if(!l&&!bn(e,t,r))return;return 1})(t,n)||(this.validRuleErr=!0,d.push(new Ca(t)))})}}return Promise.all(u).then(()=>{var e;if(d.length)return e={rules:d,rule:d[0]},Promise.reject(e)})},_clearValidate(e,t){var{validOpts:r,validErrorMaps:l}=this,o=this.$refs.refValidTooltip,e=sr().isArray(e)?e:e?[e]:[];let i=(sr().isArray(t)?t:t?[t]:[]).map(e=>Rr(this,e)),n={};if(o&&o.visible&&o.close(),"single"===r.msgMode)this.validErrorMaps={};else{if(e.length&&i.length)n=Object.assign({},l),e.forEach(t=>{i.forEach(e=>{e=yr(this,t)+":"+e.id;n[e]&&delete n[e]})});else if(e.length){let r=e.map(e=>""+yr(this,e));sr().each(l,(e,t)=>{-1<r.indexOf(t.split(":")[0])&&(n[t]=e)})}else if(i.length){let r=i.map(e=>""+e.id);sr().each(l,(e,t)=>{-1<r.indexOf(t.split(":")[1])&&(n[t]=e)})}this.validErrorMaps=n}return this.$nextTick()},triggerValidate(o){let{editConfig:e,editStore:t,editRules:r,editOpts:i,validOpts:l}=this;var n=t.actived;if(r&&"single"===l.msgMode&&(this.validErrorMaps={}),e&&r&&n.row){let{row:t,column:r,cell:l}=n.args;if(this.hasCellRules(o,t,r))return this.validCellRules(o,t,r).then(()=>{"row"===i.mode&&this.clearValidate(t,r)}).catch(({rule:e})=>e.trigger&&o!==e.trigger?Promise.resolve():(e={rule:e,row:t,column:r,cell:l},this.showValidTooltip(e),Promise.reject(e)))}return Promise.resolve()},showValidTooltip(e){var{$refs:t,height:r,validStore:l,validErrorMaps:o,tableData:i,validOpts:n}=this,{rule:a,row:s,column:c,cell:d}=e,t=t.refValidTooltip,u=a.content;return l.visible=!0,"single"===n.msgMode?this.validErrorMaps={[yr(this,s)+":"+c.id]:{column:c,row:s,rule:a,content:u}}:this.validErrorMaps=Object.assign({},o,{[yr(this,s)+":"+c.id]:{column:c,row:s,rule:a,content:u}}),this.emitEvent("valid-error",e,null),t&&("tooltip"===n.message||"default"===n.message&&!r&&i.length<2)?t.open(d,u):this.$nextTick()}}},Ot],props:qe,provide(){return{$xeTable:this,xecolgroup:null}},inject:{$xeTabs:{default:null},$xeGrid:{default:null}},data(){var e=sr().uniqueId();return{xID:e,tId:e,staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,currentRow:null,currentColumn:null,selectRadioRow:null,footerTableData:[],rowGroupColumn:null,expandColumn:null,hasFixedColumn:!1,treeNodeColumn:null,initStore:{filter:!1,import:!1,export:!1,custom:!1},customColumnList:[],upDataFlag:0,reColumnFlag:0,customStore:{btnEl:null,isAll:!1,isIndeterminate:!1,activeBtn:!1,activeWrapper:!1,visible:!1,maxHeight:0,oldSortMaps:{},oldFixedMaps:{},oldVisibleMaps:{}},filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],autoMinList:[],scaleList:[],scaleMinList:[],autoList:[],remainList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},focused:{row:null,column:null}},tooltipStore:{row:null,column:null,visible:!1,currOpts:{}},validStore:{visible:!1},validErrorMaps:{},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasTree:!1,hasMerge:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isTitle:!1,isFooter:!1},visiblwRowsFlag:1,isRowGroupStatus:!1,rowGroupExpandedFlag:1,rowExpandedFlag:1,treeExpandedFlag:1,updateCheckboxFlag:1,pendingRowFlag:1,insertRowFlag:1,removeRowFlag:1,mergeBodyFlag:1,mergeFootFlag:1,rowHeightStore:{large:52,default:48,medium:44,small:40,mini:36},scrollVMLoading:!1,scrollYHeight:0,scrollYTop:0,isScrollYBig:!1,scrollXLeft:0,scrollXWidth:0,isScrollXBig:!1,rowExpandHeightFlag:1,calcCellHeightFlag:1,resizeHeightFlag:1,resizeWidthFlag:1,isCustomStatus:!1,isDragRowMove:!1,dragRow:null,isDragColMove:!1,dragCol:null,dragTipText:"",isDragResize:!1,isRowLoading:!1,isColLoading:!1,reScrollFlag:0,reLayoutFlag:0,footFlag:0}},computed:{tableId(){return this.computeTableId},computeTableId(){var e=this.id;return e?sr().isFunction(e)?""+(e({$table:this})||""):""+e:""},computeRowField(){var e=this.computeRowOpts;return""+(this.rowId||e.keyField||"_X_ROW_KEY")},validOpts(){return this.computeValidOpts},computeValidOpts(){return Object.assign({message:"default"},K().table.validConfig,this.validConfig)},sXOpts(){return this.computeVirtualXOpts},computeSXOpts(){return this.computeVirtualXOpts},computeScrollXThreshold(){var e=this.computeVirtualXOpts.threshold;return e?sr().toNumber(e):0},sYOpts(){return this.computeVirtualYOpts},computeSYOpts(){return this.computeVirtualYOpts},computeVirtualXOpts(){return Object.assign({},K().table.virtualXConfig||K().table.scrollX,this.virtualXConfig||this.scrollX)},computeVirtualYOpts(){return Object.assign({},K().table.virtualYConfig||K().table.scrollY,this.virtualYConfig||this.scrollY)},computeScrollbarOpts(){return Object.assign({},K().table.scrollbarConfig,this.scrollbarConfig)},computeScrollbarXToTop(){var e=this.computeScrollbarOpts;return!(!e.x||"top"!==e.x.position)},computeScrollbarYToLeft(){var e=this.computeScrollbarOpts;return!(!e.y||"left"!==e.y.position)},computeScrollYThreshold(){var e=this.computeVirtualYOpts.threshold;return e?sr().toNumber(e):0},rowHeightMaps(){return this.computeRowHeightMaps},computeRowHeightMaps(){return this.rowHeightStore},computeDefaultRowHeight(){var e=this.computeSize;return this.computeRowHeightMaps[e||"default"]||18},columnOpts(){return this.computeColumnOpts},computeColumnOpts(){return Object.assign({},K().table.columnConfig,this.columnConfig)},computeCurrentColumnOpts(){return Object.assign({},K().table.currentColumnConfig,this.currentColumnConfig)},computeCellOpts(){var e=Object.assign({},K().table.cellConfig,this.cellConfig);return e.height&&(e.height=sr().toNumber(e.height)),e},computeHeaderCellOpts(){var e=Object.assign({},K().table.headerCellConfig,this.headerCellConfig),t=this.computeCellOpts;return e.height=sr().toNumber(jl(e.height||t.height)),e},computeFooterCellOpts(){var e=Object.assign({},K().table.footerCellConfig,this.footerCellConfig),t=this.computeCellOpts;return e.height=sr().toNumber(jl(e.height||t.height)),e},rowOpts(){return this.computeRowOpts},computeRowOpts(){return Object.assign({},K().table.rowConfig,this.rowConfig)},computeAggregateOpts(){return Object.assign({},K().table.aggregateConfig||K().table.rowGroupConfig,this.aggregateConfig||this.rowGroupConfig)},computeRowGroupOpts(){return this.computeAggregateOpts},computeCurrentRowOpts(){return Object.assign({},K().table.currentRowConfig,this.currentRowConfig)},computeRowDragOpts(){return Object.assign({},K().table.rowDragConfig,this.rowDragConfig)},computeColumnDragOpts(){return Object.assign({},K().table.columnDragConfig,this.columnDragConfig)},resizeOpts(){return this.computeResizeOpts},computeResizeOpts(){return Object.assign({},K().table.resizeConfig,this.resizeConfig)},resizableOpts(){return this.computeResizableOpts},computeResizableOpts(){return Object.assign({},K().table.resizableConfig,this.resizableConfig)},seqOpts(){return this.computeSeqOpts},computeSeqOpts(){return Object.assign({startIndex:0},K().table.seqConfig,this.seqConfig)},radioOpts(){return this.computeRadioOpts},computeRadioOpts(){return Object.assign({},K().table.radioConfig,this.radioConfig)},checkboxOpts(){return this.computeCheckboxOpts},computeCheckboxOpts(){return Object.assign({},K().table.checkboxConfig,this.checkboxConfig)},tooltipOpts(){return this.computeTooltipOpts},computeTooltipOpts(){return Object.assign({},K().tooltip,K().table.tooltipConfig,this.tooltipConfig)},tipConfig(){return{...this.tooltipOpts}},computeTableTipConfig(){var e=this.tooltipStore,t=this.computeTooltipOpts;return Object.assign({},t,e.currOpts)},computeValidTipConfig(){var e=this.computeTooltipOpts;return Object.assign({},e)},validTipOpts(){return Object.assign({isArrow:!1},this.tooltipOpts)},editOpts(){return this.computeEditOpts},computeEditOpts(){return Object.assign({},K().table.editConfig,this.editConfig)},sortOpts(){return this.computeSortOpts},computeSortOpts(){return Object.assign({orders:["asc","desc",null]},K().table.sortConfig,this.sortConfig)},filterOpts(){return this.computeFilterOpts},computeFilterOpts(){return Object.assign({},K().table.filterConfig,this.filterConfig)},mouseOpts(){return this.computeMouseOpts},computeMouseOpts(){return Object.assign({},K().table.mouseConfig,this.mouseConfig)},areaOpts(){return this.computeAreaOpts},computeAreaOpts(){return Object.assign({},K().table.areaConfig,this.areaConfig)},keyboardOpts(){return this.computeKeyboardOpts},computeKeyboardOpts(){return Object.assign({},K().table.keyboardConfig,this.keyboardConfig)},clipOpts(){return this.computeClipOpts},computeClipOpts(){return Object.assign({},K().table.clipConfig,this.clipConfig)},fnrOpts(){return this.computeFNROpts},computeFNROpts(){return Object.assign({},K().table.fnrConfig,this.fnrConfig)},headerCtxMenu(){return this.computeHeaderMenu},computeHeaderMenu(){var e=this.computeMenuOpts.header;return e&&e.options?e.options:[]},bodyCtxMenu(){return this.computeBodyMenu},computeBodyMenu(){var e=this.computeMenuOpts.body;return e&&e.options?e.options:[]},footerCtxMenu(){return this.computeFooterMenu},computeFooterMenu(){var e=this.computeMenuOpts.footer;return e&&e.options?e.options:[]},isCtxMenu(){return this.computeIsMenu},computeIsMenu(){var e=this.computeMenuOpts,t=this.computeHeaderMenu,r=this.computeBodyMenu,l=this.computeFooterMenu;return!(!this.contextMenu&&!this.menuConfig||!cr(e)||!(t.length||r.length||l.length))},ctxMenuList(){return this.computeMenuList},computeMenuList(){var e=this.ctxMenuStore;let t=[];return e.list.forEach(e=>{e.forEach(e=>{t.push(e)})}),t},ctxMenuOpts(){return this.computeMenuOpts},computeMenuOpts(){return Object.assign({},K().table.menuConfig,this.contextMenu,this.menuConfig)},computeLeftFixedWidth(){var e=this.columnStore,t=e.leftList;let r=0;for(let e=0;e<t.length;e++){var l=t[e];r+=l.renderWidth}return r},computeRightFixedWidth(){var e=this.columnStore,t=e.rightList;let r=0;for(let e=0;e<t.length;e++){var l=t[e];r+=l.renderWidth}return r},exportOpts(){return this.computeExportOpts},computeExportOpts(){return Object.assign({},K().table.exportConfig,this.exportConfig)},importOpts(){return this.computeImportOpts},computeImportOpts(){return Object.assign({},K().table.importConfig,this.importConfig)},printOpts(){return this.computePrintOpts},computePrintOpts(){return Object.assign({},K().table.printConfig,this.printConfig)},expandOpts(){return this.computeExpandOpts},computeExpandOpts(){return Object.assign({},K().table.expandConfig,this.expandConfig)},treeOpts(){return this.computeTreeOpts},computeTreeOpts(){return Object.assign({},K().table.treeConfig,this.treeConfig)},emptyOpts(){return this.computeEmptyOpts},computeEmptyOpts(){return Object.assign({},K().table.emptyRender,this.emptyRender)},loadingOpts(){return this.computeLoadingOpts},computeLoadingOpts(){return Object.assign({},K().table.loadingConfig,this.loadingConfig)},computeCellOffsetWidth(){return this.border?Math.max(2,Math.ceil(this.scrollbarWidth/this.tableColumn.length)):1},customOpts(){return this.computeCustomOpts},computeCustomOpts(){return Object.assign({},K().table.customConfig,this.customConfig)},computeTableRowExpandedList(){var e=this.treeConfig,{rowExpandedFlag:t,expandColumn:r,rowGroupExpandedFlag:l,treeExpandedFlag:o,isRowGroupStatus:i}=this;let{visibleDataRowIdData:n,rowExpandedMaps:a}=this;var s=this.computeTreeOpts.transform;let c=[];if(r&&t&&l&&o){if(!(i||e&&s))return sr().values(a);sr().each(a,(e,t)=>{n[t]&&c.push(e)})}return c},computeAutoWidthColumnList(){var{tableColumn:e,visibleColumn:t}=this;return e.length||t.length?t.filter(e=>"auto"===e.width||"auto"===e.minWidth):[]},computeFixedColumnSize(){var e=this.tableColumn,t=this.collectColumn;let r=0;return e.length&&t.length&&t.forEach(e=>{e.renderFixed&&r++}),r},fixedColumnSize(){return this.computeFixedColumnSize},computeIsMaxFixedColumn(){var e=this.computeFixedColumnSize,t=this.columnOpts.maxFixedSize;return!!t&&t<=e},computeTableBorder(){var e=this.border;return!0===e?"full":e||"default"},isAllCheckboxDisabled(){var{tableFullData:e,tableData:t,checkboxOpts:r}=this;let{strict:l,checkMethod:o}=r;return!!l&&(!t.length&&!e.length||!!o&&e.every(e=>!o({row:e})))},computeVirtualScrollBars(){var{overflowX:e,scrollXLoad:t,overflowY:r,scrollYLoad:l}=this;return{x:e&&t,y:r&&l}},computeRowGroupFields(){return this.computeAggregateOpts.groupFields},tabsResizeFlag(){var e=this.$xeTabs;return e?e.reactData.resizeFlag:null},computeVxeLanguage(){return nr.VxeUI.getLanguage()}},watch:{data(e){let o=this,i=o,n=this.initStatus;e&&5e4<=e.length&&M("vxe.error.errLargeData",["loadData(data), reloadData(data)"]),this.loadTableData(e||[],!1).then(()=>{var{scrollXLoad:e,scrollYLoad:t,expandColumn:r}=i,l=o.computeExpandOpts;this.inited=!0,this.initStatus=!0,n||this.handleLoadDefaults(),(e||t)&&r&&"fixed"!==l.mode&&M("vxe.error.scrollErrProp",["column.type=expand"]),this.recalculate()})},staticColumns(e){this.handleColumn(sr().clone(e))},tableColumn(){this.analyColumnWidth()},upDataFlag(){this.$nextTick().then(()=>this.updateData())},reColumnFlag(){this.$nextTick().then(()=>this.refreshColumn())},computeSize(){this.reScrollFlag++},showHeader(){this.reScrollFlag++},showFooter(){this.reScrollFlag++},overflowX(){this.reScrollFlag++},overflowY(){this.reScrollFlag++},reScrollFlag(){let e=this;e.$nextTick(()=>{e.recalculate(!0).then(()=>e.refreshScroll())})},height(){this.reLayoutFlag++},maxHeight(){this.reLayoutFlag++},computeScrollbarXToTop(){this.reLayoutFlag++},computeScrollbarYToLeft(){this.reLayoutFlag++},computeVxeLanguage(){this.reLayoutFlag++},reLayoutFlag(){let e=this;e.$nextTick(()=>e.recalculate(!0))},footerData(){this.footFlag++},footFlag(){this.updateFooter()},syncResize(e){e&&(Tn(this),this.$nextTick(()=>{Tn(this),setTimeout(()=>Tn(this))}))},tabsResizeFlag(){this.handleGlobalResizeEvent()},mergeCells(e){this.clearMergeCells(),this.$nextTick(()=>this.setMergeCells(e))},mergeFooterItems(e){this.clearMergeFooterItems(),this.$nextTick(()=>this.setMergeFooterItems(e))},computeRowGroupFields(e){this.handleUpdateRowGroup(e)},computeRowField(){let e=this;var t=e;let{inited:r,tableFullData:l}=e;r&&(yn(e),t.tableData=[],e.$nextTick(()=>{e.reloadData(l)}))}},created(){var e=this,t=e,r=e;Object.assign(e,{tZindex:0,currKeyField:"",isCurrDeepKey:!1,elemStore:{},scrollXStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},scrollYStore:{preloadSize:0,offsetSize:0,visibleSize:0,visibleStartIndex:0,visibleEndIndex:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},treeIndeterminateRowMaps:{},tableFullData:[],afterFullData:[],afterTreeFullData:[],afterGroupFullData:[],afterFullRowMaps:{},tableFullTreeData:[],tableFullGroupData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},fullDataRowIdData:{},visibleDataRowIdData:{},sourceDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},mergeBodyList:[],mergeBodyMaps:{},mergeFooterList:[],mergeFooterMaps:{},mergeBodyCellMaps:{},mergeFooterCellMaps:{},rowExpandedMaps:{},rowExpandLazyLoadedMaps:{},rowGroupExpandedMaps:{},treeExpandedMaps:{},treeExpandLazyLoadedMaps:{},selectCheckboxMaps:{},pendingRowMaps:{},insertRowMaps:{},removeRowMaps:{},cvCacheMaps:{},swYSize:0,swYInterval:0,swYTotal:0}),yn(e);let{data:l,exportConfig:o,importConfig:i,treeConfig:n,showOverflow:a,highlightCurrentRow:s,highlightCurrentColumn:c}=t;var{scrollXStore:r,scrollYStore:d}=r,u=e.computeColumnOpts,p=e.computeEditOpts,h=e.computeTreeOpts,m=e.computeRadioOpts,g=e.computeCheckboxOpts,f=e.computeExpandOpts,v=e.computeRowOpts,x=e.computeCustomOpts,b=e.computeMouseOpts;let C=e.computeExportOpts,w=e.computeImportOpts;var y=e.computeCurrentRowOpts,E=e.computeCurrentColumnOpts,T=e.computeKeyboardOpts,R=e.computeAggregateOpts,S=R.groupFields;t.rowId&&M("vxe.error.delProp",["row-id","row-config.keyField"]),t.rowKey&&M("vxe.error.delProp",["row-key","row-config.useKey"]),t.columnKey&&M("vxe.error.delProp",["column-id","column-config.useKey"]),t.rowId||v.keyField||!(g.reserve||g.checkRowKeys||m.reserve||m.checkRowKey||f.expandRowKeys||h.expandRowKeys)||M("vxe.error.reqProp",["row-config.keyField"]),t.editConfig&&p.showStatus&&!t.keepSource&&M("vxe.error.reqProp",["keep-source"]),n&&(h.showLine||h.line)&&!a&&M("vxe.error.reqProp",["show-overflow"]),n&&!h.transform&&t.stripe&&M("vxe.error.noTree",["stripe"]),!t.showFooter||t.footerMethod||t.footerData||M("vxe.error.reqProp",["footer-data | footer-method"]),v.height&&M("vxe.error.delProp",["row-config.height","cell-config.height"]),this.tooltipOpts.enabled&&M("vxe.error.delProp",["tooltip-config.enabled","tooltip-config.showAll"]),this.highlightCurrentRow&&M("vxe.error.delProp",["highlight-current-row","row-config.isCurrent"]),this.highlightHoverRow&&M("vxe.error.delProp",["highlight-hover-row","row-config.isHover"]),this.highlightCurrentColumn&&M("vxe.error.delProp",["highlight-current-column","column-config.isCurrent"]),this.highlightHoverColumn&&M("vxe.error.delProp",["highlight-hover-column","column-config.isHover"]),t.resizable&&M("vxe.error.delProp",["resizable","column-config.resizable"]),i&&w.types&&!w.importMethod&&!sr().includeArrays(sr().keys(w._typeMaps),w.types)&&M("vxe.error.errProp",["export-config.types="+w.types.join(","),w.types.filter(e=>sr().includes(sr().keys(w._typeMaps),e)).join(",")||sr().keys(w._typeMaps).join(",")]),o&&C.types&&!C.exportMethod&&!sr().includeArrays(sr().keys(C._typeMaps),C.types)&&M("vxe.error.errProp",["export-config.types="+C.types.join(","),C.types.filter(e=>sr().includes(sr().keys(C._typeMaps),e)).join(",")||sr().keys(C._typeMaps).join(",")]),t.id||(t.customConfig?cr(x):x.enabled)&&x.storage&&A("vxe.error.reqProp",["id"]),n&&g.range&&A("vxe.error.noTree",["checkbox-config.range"]),v.height&&!this.showOverflow&&M("vxe.error.notProp",["table.show-overflow"]),!e.triggerCellAreaMousedownEvent&&(t.areaConfig&&M("vxe.error.notProp",["area-config"]),t.clipConfig&&M("vxe.error.notProp",["clip-config"]),t.fnrConfig&&M("vxe.error.notProp",["fnr-config"]),b.area)?A("vxe.error.notProp",["mouse-config.area"]):(n&&v.drag&&!h.transform&&M("vxe.error.notSupportProp",["column-config.drag","tree-config.transform=false","tree-config.transform=true"]),t.dragConfig&&M("vxe.error.delProp",["drag-config","row-drag-config"]),t.rowGroupConfig&&M("vxe.error.delProp",["row-group-config","aggregate-config"]),R.countFields&&M("vxe.error.delProp",["row-group-config.countFields","column.agg-func"]),R.countMethod&&M("vxe.error.delProp",["row-group-config.countMethod","aggregate-config.aggregateMethod"]),t.treeConfig&&h.children&&M("vxe.error.delProp",["tree-config.children","tree-config.childrenField"]),t.treeConfig&&h.line&&M("vxe.error.delProp",["tree-config.line","tree-config.showLine"]),b.area&&b.selected&&M("vxe.error.errConflicts",["mouse-config.area","mouse-config.selected"]),b.area&&t.treeConfig&&!h.transform&&A("vxe.error.noTree",["mouse-config.area"]),t.editConfig&&p.activeMethod&&M("vxe.error.delProp",["table.edit-config.activeMethod","table.edit-config.beforeEditMethod"]),t.treeConfig&&g.isShiftKey&&A("vxe.error.errConflicts",["tree-config","checkbox-config.isShiftKey"]),g.halfField&&M("vxe.error.delProp",["checkbox-config.halfField","checkbox-config.indeterminateField"]),this.contextMenu&&(M("vxe.error.delProp",["context-menu","menu-config"]),sr().isObject(this.contextMenu)||M("vxe.error.errProp",["table.context-menu="+this.contextMenu,"table.context-menu={}"])),t.menuConfig&&!sr().isObject(t.menuConfig)&&M("vxe.error.errProp",["table.menu-config="+t.menuConfig,"table.menu-config={}"]),t.exportConfig&&!sr().isObject(t.exportConfig)&&M("vxe.error.errProp",["table.export-config="+t.exportConfig,"table.export-config={}"]),t.importConfig&&!sr().isObject(t.importConfig)&&M("vxe.error.errProp",["table.import-config="+t.importConfig,"table.import-config={}"]),t.printConfig&&!sr().isObject(t.printConfig)&&M("vxe.error.errProp",["table.print-config="+t.printConfig,"table.print-config={}"]),t.treeConfig&&!sr().isObject(t.treeConfig)&&M("vxe.error.errProp",["table.tree-config="+t.treeConfig,"table.tree-config={}"]),t.customConfig&&!sr().isObject(t.customConfig)&&M("vxe.error.errProp",["table.custom-config="+t.customConfig,"table.custom-config={}"]),t.editConfig&&!sr().isObject(t.editConfig)&&M("vxe.error.errProp",["table.edit-config="+t.editConfig,"table.edit-config={}"]),t.emptyRender&&!sr().isObject(t.emptyRender)&&M("vxe.error.errProp",["table.empty-render="+t.emptyRender,"table.empty-render={}"]),v.currentMethod&&M("vxe.error.delProp",["row-config.currentMethod","current-row-config.beforeSelectMethod"]),u.currentMethod&&M("vxe.error.delProp",["row-config.currentMethod","current-column-config.beforeSelectMethod"]),(v.isCurrent||s)&&t.keyboardConfig&&T.isArrow&&!sr().isBoolean(y.isFollowSelected)&&M("vxe.error.notConflictProp",["row-config.isCurrent","current-row-config.isFollowSelected"]),(u.isCurrent||c)&&t.keyboardConfig&&T.isArrow&&!sr().isBoolean(E.isFollowSelected)&&M("vxe.error.notConflictProp",["column-config.isCurrent","current-column-config.isFollowSelected"]),t.editConfig&&!e.insert&&A("vxe.error.reqModule",["Edit"]),t.editRules&&!e.validate&&A("vxe.error.reqModule",["Validator"]),(g.range||t.keyboardConfig||t.mouseConfig)&&!e.handleCellMousedownEvent&&A("vxe.error.reqModule",["Keyboard"]),(t.printConfig||t.importConfig||t.exportConfig)&&!e.exportData&&A("vxe.error.reqModule",["Export"]),Object.assign(d,{startIndex:0,endIndex:1,visibleSize:0}),Object.assign(r,{startIndex:0,endIndex:1,visibleSize:0}),this.handleUpdateRowGroup(S),this.loadTableData(l,!0).then(()=>{l&&l.length&&(this.inited=!0,this.initStatus=!0,this.handleLoadDefaults()),this.handleInitDefaults(),this.updateStyle()}),D.on(e,"paste",this.handleGlobalPasteEvent),D.on(e,"copy",this.handleGlobalCopyEvent),D.on(e,"cut",this.handleGlobalCutEvent),D.on(e,"mousedown",this.handleGlobalMousedownEvent),D.on(e,"blur",this.handleGlobalBlurEvent),D.on(e,"mousewheel",this.handleGlobalMousewheelEvent),D.on(e,"keydown",this.handleGlobalKeydownEvent),D.on(e,"resize",this.handleGlobalResizeEvent),D.on(e,"contextmenu",this.handleGlobalContextmenuEvent),e.preventEvent(null,"created"))},mounted(){let e=this;var t=this.computeColumnOpts,r=this.computeRowOpts,l=this.computeCustomOpts,o=this.computeVirtualYOpts,t=((t.drag||r.drag||l.allowSort)&&Cl(),this).$listeners;!this.menuConfig&&(t["menu-click"]||t["cell-menu"]||t["header-cell-menu"]||t["footer-cell-menu"])&&M("vxe.error.reqProp",["menu-config"]),this.tooltipConfig||!t["cell-mouseenter"]&&!t["cell-mouseleave"]||M("vxe.error.reqProp",["tooltip-config"]);let i=nr.VxeUI.getComponent("VxeLoading"),n=nr.VxeUI.getComponent("VxeTooltip");this.$nextTick(()=>{!e.loading||i||this.$scopedSlots.loading||A("vxe.error.reqComp",["vxe-loading"]),!0!==e.showOverflow&&"tooltip"!==e.showOverflow&&!0!==e.showHeaderOverflow&&"tooltip"!==e.showHeaderOverflow&&!0!==e.showFooterOverflow&&"tooltip"!==e.showFooterOverflow&&!e.tooltipConfig&&!e.editRules||n||A("vxe.error.reqComp",["vxe-tooltip"])}),this.autoResize&&((r=$t.create(()=>{this.autoResize&&this.recalculate(!0)})).observe(this.$el),r.observe(this.getParentElem()),this.$resize=r),"scroll"!==o.mode&&(l=this.$refs.refTableViewportElem)&&l.addEventListener("wheel",this.triggerBodyWheelEvent,{passive:!1}),this.preventEvent(null,"mounted")},activated(){this.recalculate().then(()=>this.refreshScroll()),this.preventEvent(null,"activated")},deactivated(){this.preventEvent(null,"deactivated")},beforeDestroy(){var e=this,t=this.$refs.refTableViewportElem;t&&t.removeEventListener("wheel",this.triggerBodyWheelEvent),e.cvCacheMaps={},e.prevDragRow=null,e.prevDragCol=null,this.$resize&&this.$resize.disconnect(),this.closeFilter(),this.closeMenu(),this.preventEvent(null,"beforeDestroy")},destroyed(){D.off(this,"paste"),D.off(this,"copy"),D.off(this,"cut"),D.off(this,"mousedown"),D.off(this,"blur"),D.off(this,"mousewheel"),D.off(this,"keydown"),D.off(this,"resize"),D.off(this,"contextmenu"),this.preventEvent(null,"destroyed")},render(e){var t=nr.VxeUI.getComponent("VxeLoading"),r=nr.VxeUI.getComponent("VxeTooltip");let l=this,o=l.$xeGrid;var i=l,n=l.$scopedSlots,a=l,s=l.xID,{loading:c,stripe:d,showHeader:u,height:p,treeConfig:h,mouseConfig:m,showFooter:g,highlightCell:f,highlightHoverRow:v,highlightHoverColumn:x,editConfig:b,editRules:C}=i,{isGroup:w,overflowX:y,overflowY:_,scrollXLoad:V,scrollYLoad:H,tableData:B,initStore:E,isRowGroupStatus:P,columnStore:T,filterStore:z,customStore:N}=a,{leftList:T,rightList:j}=T;let R=n.loading;var n=l.computeTableTipConfig,S=l.computeValidTipConfig,O=l.computeValidOpts,U=l.computeCheckboxOpts,F=l.computeTreeOpts,W=l.computeRowOpts,D=l.computeColumnOpts,I=l.computeSize,G=l.computeTableBorder,$=l.computeMouseOpts,k=l.computeAreaOpts,M=l.computeLoadingOpts,q=l.computeIsMenu;let A=a.isColLoading||a.isRowLoading||c;var a=l.computeResizableOpts,c=m&&$.area,X=l.computeColumnDragOpts,L=l.computeScrollbarXToTop,Y=l.computeScrollbarYToLeft;return e("div",{ref:"refElem",class:["vxe-table","vxe-table--render-default","tid_"+s,"border--"+G,"sx-pos--"+(L?"top":"bottom"),"sy-pos--"+(Y?"left":"right"),{["size--"+I]:I,["valid-msg--"+O.msgMode]:!!C,"vxe-editable":!!b,"old-cell-valid":C&&"obsolete"===K().cellVaildMode,"cell--highlight":f,"cell--selected":m&&$.selected,"cell--area":c,"header-cell--area":c&&k.selectCellByHeader,"body-cell--area":c&&k.selectCellByBody,"row--highlight":W.isHover||v,"column--highlight":D.isHover||x,"checkbox--range":U.range,"col--drag-cell":D.drag&&"cell"===X.trigger,"is--header":u,"is--footer":g,"is--group":w,"is-row-group":P,"is--tree-line":h&&(F.showLine||F.line),"is--fixed-left":T.length,"is--fixed-right":j.length,"is--animat":!!i.animat,"is--round":i.round,"is--stripe":!h&&d,"is--loading":A,"is--empty":!A&&!B.length,"is--scroll-y":_,"is--scroll-x":y,"is--virtual-x":V,"is--virtual-y":H}],attrs:{spellcheck:!1},on:{keydown:this.keydownEvent}},[e("div",{class:"vxe-table-slots",ref:"hideColumn"},this.$slots.default),e("div",{ref:"refVarElem",class:"vxe-table-vars"},[e("div",{class:"vxe-table-var-default"}),e("div",{class:"vxe-table-var-medium"}),e("div",{class:"vxe-table-var-small"}),e("div",{class:"vxe-table-var-mini"})]),e("div",{key:"tw",class:"vxe-table--render-wrapper"},L?[Rn(e,l),Fn(e,l)]:[Fn(e,l),Rn(e,l)]),e("div",{key:"tn",ref:"refEmptyPlaceholder",class:"vxe-table--empty-placeholder"},[e("div",{class:"vxe-table--empty-content"},((e,t)=>{var{$scopedSlots:r,emptyOpts:l}=t;let o="";var i={$table:t};return o=r.empty?r.empty.call(t,i,e):(r=(r=l.name?It.get(l.name):null)?r.renderTableEmpty||r.renderTableEmptyView||r.renderEmpty:null)?Dr(r.call(t,e,l,i)):dr(t.emptyText)||Dt("vxe.table.emptyText")})(e,this))]),e("div",{key:"tl",class:"vxe-table--border-line"}),e("div",{key:"tcl",ref:"refColResizeBar",class:"vxe-table--resizable-col-bar"},a.showDragTip?[e("div",{ref:"refColResizeTip",class:"vxe-table--resizable-number-tip"})]:[]),e("div",{key:"trl",ref:"refRowResizeBar",class:"vxe-table--resizable-row-bar"},a.showDragTip?[e("div",{class:"vxe-table--resizable-number-tip"})]:[]),t?e(t,{key:"lg",class:"vxe-table--loading",props:{value:A,icon:M.icon,text:M.text},scopedSlots:R?{default:()=>l.callSlot(R,{$table:l,$grid:o,loading:A},e)}:{}}):R?e("div",{class:["vxe-loading--custom-wrapper",{"is--visible":A}]},l.callSlot(R,{$table:l,$grid:o,loading:A},e)):Z(l),E.custom?e(Ri,{key:"cs",ref:"customWrapper",props:{customStore:N}}):Z(l),E.filter?e(Si,{key:"tf",ref:"refTableFilter",props:{filterStore:z}}):Z(l),E.import&&this.importConfig?e(Oi,{key:"it",props:{defaultOptions:this.importParams,storeData:this.importStore}}):Z(l),E.export&&(this.exportConfig||this.printConfig)?e(Fi,{key:"et",props:{defaultOptions:this.exportParams,storeData:this.exportStore}}):Z(l),q?e(Di,{key:"tm",ref:"refTableMenu",props:{ctxMenuStore:this.ctxMenuStore,ctxMenuOpts:this.ctxMenuOpts}}):Z(l),((e,t)=>{var{dragRow:r,dragCol:l}=t,o=t.computeRowOpts,i=t.computeRowDragOpts,n=t.computeColumnDragOpts;return o.drag||t.computeColumnOpts.drag?e("div",{class:"vxe-table--drag-wrapper"},[e("div",{ref:"refDragRowLineElem",class:["vxe-table--drag-row-line",{"is--guides":i.showGuidesStatus}]}),e("div",{ref:"refDragColLineElem",class:["vxe-table--drag-col-line",{"is--guides":n.showGuidesStatus}]}),r&&i.showDragTip||l&&n.showDragTip?e("div",{ref:"refDragTipElem",class:"vxe-table--drag-sort-tip"},[e("div",{class:"vxe-table--drag-sort-tip-wrapper"},[e("div",{class:"vxe-table--drag-sort-tip-status"},[e("span",{class:["vxe-table--drag-sort-tip-normal-status",r?Ft().TABLE_DRAG_STATUS_ROW:Ft().TABLE_DRAG_STATUS_COLUMN]}),e("span",{class:["vxe-table--drag-sort-tip-sub-status",Ft().TABLE_DRAG_STATUS_SUB_ROW]}),e("span",{class:["vxe-table--drag-sort-tip-disabled-status",Ft().TABLE_DRAG_DISABLED]})]),e("div",{class:"vxe-table--drag-sort-tip-content"},((e,t)=>{var r=t.dragConfig,{dragRow:l,dragCol:o,dragTipText:i}=t,n=t.computeColumnDragOpts,r=(t.computeRowDragOpts.slots||{}).tip||(r&&r.slots?r.slots.rowTip:null),n=(n.slots||{}).tip;return l&&r?t.callSlot(r,{row:l},e):o&&n?t.callSlot(n,{column:o},e):[e("span",i)]})(e,t))])]):Z(t)]):Z(t)})(e,this),e("div",{},[r?e(r,{key:"ctp",ref:"refCommTooltip",props:{isArrow:!1,enterable:!1}}):Z(l),r?e(r,{key:"btp",ref:"refTooltip",props:{theme:n.theme,enterable:n.enterable,enterDelay:n.enterDelay,leaveDelay:n.leaveDelay,useHTML:n.useHTML}}):Z(l),r&&this.editRules&&O.showMessage&&("default"===O.message?!p:"tooltip"===O.message)?e(r,{key:"vtp",ref:"refValidTooltip",class:[{"old-cell-valid":C&&"obsolete"===K().cellVaildMode},"vxe-table--valid-error"],props:{theme:S.theme,enterable:S.enterable,enterDelay:S.enterDelay,leaveDelay:S.leaveDelay}}):Z(l)])])},methods:wr};let{getConfig:l,getIcon:i,getI18n:n,renderer:Mt,commands:At,createEvent:Lt,globalMixins:_t,renderEmptyElement:f}=nr.VxeUI;var In={name:"VxeToolbar",mixins:[_t.sizeMixin],props:{loading:Boolean,refresh:[Boolean,Object],import:[Boolean,Object],export:[Boolean,Object],print:[Boolean,Object],zoom:[Boolean,Object],custom:[Boolean,Object],buttons:{type:Array,default:()=>l().toolbar.buttons},tools:{type:Array,default:()=>l().toolbar.tools},perfect:{type:Boolean,default:()=>l().toolbar.perfect},size:{type:String,default:()=>l().toolbar.size||l().size},className:[String,Function]},inject:{$xeGrid:{default:null}},data(){return{xID:sr().uniqueId(),reactData:{isRefresh:!1,connectFlag:0,columns:[]},internalData:{connectTable:null}}},computed:{computeRefreshOpts(){return Object.assign({},sr().clone(l().toolbar.refresh,!0),this.refresh)},computeImportOpts(){return Object.assign({},sr().clone(l().toolbar.import,!0),this.import)},computeExportOpts(){return Object.assign({},sr().clone(l().toolbar.export,!0),this.export)},computePrintOpts(){return Object.assign({},sr().clone(l().toolbar.print,!0),this.print)},computeZoomOpts(){return Object.assign({},sr().clone(l().toolbar.zoom,!0),this.zoom)},computeCustomOpts(){return Object.assign({},sr().clone(l().toolbar.custom,!0),this.custom)},computeTableCustomOpts(){var e=this.reactData,t=this.internalData.connectTable;return(e.connectFlag||t)&&t?t.computeCustomOpts:{trigger:""}},computeTrigger(){return this.computeTableCustomOpts.trigger}},methods:{dispatchEvent(e,t,r){this.$emit(e,Lt(r,{$toolbar:this},t))},fintTable(){var e=this.$parent.$children;let r=e.indexOf(this);return sr().find(e,(e,t)=>e&&e.loadData&&t>r&&"vxe-table"===e.$vnode.componentOptions.tag)},syncUpdate(e){var t=this.reactData;this.internalData.connectTable=e.$table,t.columns=e.collectColumn,t.connectFlag++},checkTable(){var e=this.internalData.connectTable;if(e)return!0;A("vxe.error.barUnableLink")},handleClickSettingEvent({$event:e}){var t=this.internalData.connectTable;t&&t.triggerCustomEvent&&t.triggerCustomEvent(e)},handleMouseenterSettingEvent({$event:e}){var t=this.internalData.connectTable;t&&t.customOpenEvent(e)},handleMouseleaveSettingEvent({$event:t}){var e=this.internalData.connectTable;let r=e;if(r){let e=r.reactData.customStore;e.activeBtn=!1,setTimeout(()=>{e.activeBtn||e.activeWrapper||r.customCloseEvent(t)},350)}},refreshEvent({$event:e}){let t=this.reactData;var r=this.$xeGrid,l=t.isRefresh,o=this.computeRefreshOpts;if(!l){l=o.queryMethod||o.query;if(l){t.isRefresh=!0;try{Promise.resolve(l({})).catch(e=>e).then(()=>{t.isRefresh=!1})}catch(e){t.isRefresh=!1}}else r&&(t.isRefresh=!0,r.triggerToolbarCommitEvent({code:o.code||"reload"},e).catch(e=>e).then(()=>{t.isRefresh=!1}))}},zoomEvent({$event:e}){var t=this.$xeGrid;t&&t.triggerZoomEvent(e)},btnEvent(e,t){var r=this.internalData,l=this.$xeGrid,r=r.connectTable,o=t.code;o&&(l?l.triggerToolbarBtnEvent(t,e):(t={code:o,button:t,$table:r,$grid:l,$event:e},(r=At.get(o))&&((l=r.tableCommandMethod||r.commandMethod)?l(t):A("vxe.error.notCommands",[o])),this.dispatchEvent("button-click",t,e)))},tolEvent(e,t){var r=this.internalData,l=this.$xeGrid,r=r.connectTable,o=t.code;o&&(l?l.triggerToolbarTolEvent(t,e):(t={code:o,button:null,tool:t,$table:r,$grid:l,$event:e},(r=At.get(o))&&((l=r.tableCommandMethod||r.commandMethod)?l(t):A("vxe.error.notCommands",[o])),this.dispatchEvent("tool-click",t,e)))},importEvent(){var e=this.internalData;this.checkTable()&&(e=e.connectTable,e)&&e.openImport()},exportEvent(){var e=this.internalData;this.checkTable()&&(e=e.connectTable,e)&&e.openExport()},printEvent(){var e=this.internalData;this.checkTable()&&(e=e.connectTable,e)&&e.openPrint()},renderDropdowns(r,e,l){let o=nr.VxeUI.getComponent("VxeButton"),i=this;e=e.dropdowns;return e?e.map((t,e)=>!1!==t.visible&&o?r(o,{key:e,props:{disabled:t.disabled,loading:t.loading,type:t.type,mode:t.mode,icon:t.icon,circle:t.circle,round:t.round,status:t.status,content:t.name,title:t.title,routerLink:t.routerLink,permissionCode:t.permissionCode,prefixTooltip:t.prefixTooltip,suffixTooltip:t.suffixTooltip},on:{click:({$event:e})=>l?i.btnEvent(e,t):i.tolEvent(e,t)}}):f(i)):[]},renderLeftBtns(n){let a=nr.VxeUI.getComponent("VxeButton");var e=this.$scopedSlots,t=this.internalData;let s=this.$xeGrid;var r=this.buttons,t=t.connectTable;let c=t;t=e.buttonPrefix||e["button-prefix"],e=e.buttonSuffix||e["button-suffix"];let d=[];return t&&d.push(...Dr(t.call(this,{buttons:r||[],$grid:s,$table:c}))),r&&r.forEach(t=>{var e,r,l,{dropdowns:o,buttonRender:i}=t;!1!==t.visible&&(e=i?Mt.get(i.name):null,i&&e&&e.renderToolbarButton?(r=e.toolbarButtonClassName,l={$grid:s,$table:c,button:t},d.push(n("span",{class:["vxe-button--item",r?sr().isFunction(r)?r(l):r:""]},Dr(e.renderToolbarButton(n,i,l))))):a&&d.push(n(a,{props:{disabled:t.disabled,loading:t.loading,type:t.type,mode:t.mode,icon:t.icon,circle:t.circle,round:t.round,status:t.status,content:t.name,title:t.title,routerLink:t.routerLink,permissionCode:t.permissionCode,prefixTooltip:t.prefixTooltip,suffixTooltip:t.suffixTooltip,destroyOnClose:t.destroyOnClose,placement:t.placement,transfer:t.transfer},on:{click:({$event:e})=>this.btnEvent(e,t)},scopedSlots:o&&o.length?{dropdowns:()=>this.renderDropdowns(n,t,!0)}:{}})))}),e&&d.push(...Dr(e.call(this,{buttons:r||[],$grid:s,$table:c}))),d},renderRightTools(s){let c=nr.VxeUI.getComponent("VxeButton"),d=this;var e=d,t=d.$scopedSlots,r=d.internalData;let u=d.$xeGrid;e=e.tools,r=r.connectTable;let p=r;r=t.toolPrefix||t["tool-prefix"],t=t.toolSuffix||t["tool-suffix"];let h=[];return r&&h.push(...Dr(r.call(d,{tools:e||[],$grid:u,$table:p}))),e&&e.forEach((t,e)=>{var r,l,o,i,{dropdowns:n,toolRender:a}=t;!1!==t.visible&&(r=a?a.name:null,l=a?Mt.get(r):null,a&&l&&l.renderToolbarTool?(o=l.toolbarToolClassName,i={$grid:u,$table:p,tool:t},h.push(s("span",{key:r,class:["vxe-tool--item",o?sr().isFunction(o)?o(i):o:""]},Dr(l.renderToolbarTool(s,a,i))))):c&&h.push(s(c,{key:e,props:{disabled:t.disabled,loading:t.loading,type:t.type,mode:t.mode,icon:t.icon,circle:t.circle,round:t.round,status:t.status,content:t.name,title:t.title,routerLink:t.routerLink,permissionCode:t.permissionCode,prefixTooltip:t.prefixTooltip,suffixTooltip:t.suffixTooltip,destroyOnClose:t.destroyOnClose,placement:t.placement,transfer:t.transfer},on:{click:({$event:e})=>d.tolEvent(e,t)},scopedSlots:n&&n.length?{dropdowns:()=>d.renderDropdowns(s,t,!1)}:{}})))}),t&&h.push(...Dr(t.call(d,{tools:e||[],$grid:u,$table:p}))),h},renderToolImport(e){var t=nr.VxeUI.getComponent("VxeButton"),r=this.computeImportOpts;return t?e(t,{key:"import",props:{circle:!0,icon:r.icon||i().TOOLBAR_TOOLS_IMPORT,title:n("vxe.toolbar.import")},on:{click:this.importEvent}}):f(this)},renderToolExport(e){var t=nr.VxeUI.getComponent("VxeButton"),r=this.computeExportOpts;return t?e(t,{key:"export",props:{circle:!0,icon:r.icon||i().TOOLBAR_TOOLS_EXPORT,title:n("vxe.toolbar.export")},on:{click:this.exportEvent}}):f(this)},renderToolPrint(e){var t=nr.VxeUI.getComponent("VxeButton"),r=this.computePrintOpts;return t?e(t,{key:"print",props:{circle:!0,icon:r.icon||i().TOOLBAR_TOOLS_PRINT,title:n("vxe.toolbar.print")},on:{click:this.printEvent}}):f(this)},renderToolRefresh(e){var t=nr.VxeUI.getComponent("VxeButton"),r=this.reactData,l=this.computeRefreshOpts;return t?e(t,{key:"refresh",props:{circle:!0,icon:r.isRefresh?l.iconLoading||i().TOOLBAR_TOOLS_REFRESH_LOADING:l.icon||i().TOOLBAR_TOOLS_REFRESH,title:n("vxe.toolbar.refresh")},on:{click:this.refreshEvent}}):f(this)},renderToolZoom(e){var t=nr.VxeUI.getComponent("VxeButton"),r=this.$xeGrid,l=this.computeZoomOpts;return r&&t?e(t,{key:"zoom",props:{circle:!0,icon:r.isMaximized()?l.iconOut||i().TOOLBAR_TOOLS_MINIMIZE:l.iconIn||i().TOOLBAR_TOOLS_FULLSCREEN,title:n("vxe.toolbar.zoom"+(r.isMaximized()?"Out":"In"))},on:{click:this.zoomEvent}}):f(this)},renderToolCustom(e){var t=nr.VxeUI.getComponent("VxeButton"),r=this.computeCustomOpts,l=this.computeTrigger,o={};return"manual"!==l&&("hover"===l?(o.mouseenter=this.handleMouseenterSettingEvent,o.mouseleave=this.handleMouseleaveSettingEvent):o.click=this.handleClickSettingEvent),t?e(t,{key:"custom",props:{circle:!0,icon:r.icon||i().TOOLBAR_TOOLS_CUSTOM,title:n("vxe.toolbar.custom"),className:"vxe-toolbar-custom-target"},on:o}):f(this)},renderVN(e){var t=this,r=t,l=t.$scopedSlots,o=t.$xeGrid,{perfect:i,loading:n,refresh:a,zoom:s,custom:c,className:d}=r,u=t.internalData.connectTable,p=l.tools,l=l.buttons,h=t.computeSize;return e("div",{ref:"refElem",class:["vxe-toolbar",d?sr().isFunction(d)?d({$toolbar:t}):d:"",{["size--"+h]:h,"is--perfect":i,"is--loading":n}]},[e("div",{class:"vxe-buttons--wrapper"},l?l({$grid:o,$table:u}):t.renderLeftBtns(e)),e("div",{class:"vxe-tools--wrapper"},p?p({$grid:o,$table:u}):t.renderRightTools(e)),e("div",{class:"vxe-tools--operate"},[r.import?t.renderToolImport(e):f(t),r.export?t.renderToolExport(e):f(t),r.print?t.renderToolPrint(e):f(t),a?t.renderToolRefresh(e):f(t),s&&o?t.renderToolZoom(e):f(t),c?t.renderToolCustom(e):f(t)])])}},created(){let l=this,o=l,i=l.$xeGrid;l.$nextTick(()=>{var e=o.refresh,t=l.computeRefreshOpts,r=this.fintTable(),t=t.queryMethod||t.query,e=(!e||i||t||M("vxe.error.notFunc",["queryMethod"]),r&&r.connect(this),l.computeCustomOpts);e.isFooter&&M("vxe.error.delProp",["toolbar.custom.isFooter","table.custom-config.showFooter"]),e.showFooter&&M("vxe.error.delProp",["toolbar.custom.showFooter","table.custom-config.showFooter"]),e.immediate&&M("vxe.error.delProp",["toolbar.custom.immediate","table.custom-config.immediate"]),e.trigger&&M("vxe.error.delProp",["toolbar.custom.trigger","table.custom-config.trigger"])});var e=nr.VxeUI.getComponent("VxeButton");(o.refresh||o.import||o.export||o.print||o.zoom)&&!e&&A("vxe.error.reqComp",["vxe-button"])},render(e){return this.renderVN(e)}};let{getConfig:a,getI18n:V,commands:Vt,globalEvents:Ht,globalMixins:Bt,renderEmptyElement:d}=nr.VxeUI,Pt={},zt=Object.keys(qe),Nt=[["Form"],["Toolbar","Top","Table","Bottom","Pager"]];function $n(e,t){var r=e.tablePage,l=e.pagerConfig,e=e.computePagerOpts;l&&cr(e)&&(t?e[t]&&(r[t]=sr().toNumber(e[t])):({currentPage:l,pageSize:t,total:e}=e,l&&(r.currentPage=l),t&&(r.pageSize=t),e&&(r.pageSize=e)))}function kn(e,t,r){e=e.$scopedSlots,t=t[r];if(t){if(!sr().isString(t))return t;if(e[t])return e[t];A("vxe.error.notSlot",[t])}return null}let jt=(e,t)=>{let r=e.$scopedSlots,l={};return sr().objectMap(t,(e,t)=>{e&&(sr().isString(e)?r[e]?l[t]=r[e]:A("vxe.error.notSlot",[e]):l[t]=e)}),l};function Mn(e,t){var{_e:r,$scopedSlots:l,formConfig:o}=t,l=l.form;return!l&&!cr(o)?r():e("div",{key:"form",ref:"refFormWrapper",class:"vxe-grid--form-wrapper"},l?l.call(t,{$grid:t},e):((e,r)=>{var l=nr.VxeUI.getComponent("VxeForm");let o=r.$scopedSlots;var{proxyConfig:i,formConfig:t}=r,{proxyOpts:n,formData:a,formOpts:s}=r;if(cr(t)&&s.items&&s.items.length){let t={};if(!s.inited){s.inited=!0;let t=n.beforeItem;n&&t&&s.items.forEach(e=>{t.call(r,{$grid:r,item:e})})}return s.items.forEach(e=>{sr().each(e.slots,e=>{sr().isFunction(e)||o[e]&&(t[e]=o[e])})}),[l?e(l,{props:Object.assign({},s,{data:i&&n.form?a:s.data}),on:{submit:r.submitEvent,reset:r.resetEvent,collapse:r.collapseEvent,"submit-invalid":r.submitInvalidEvent},scopedSlots:t}):d(r)]}return[]})(e,t))}function An(e,t){var{_e:r,$scopedSlots:l,toolbarConfig:o,toolbar:i}=t,l=l.toolbar;return!(l||cr(o)||i)?r():e("div",{key:"toolbar",ref:"refToolbarWrapper",class:"vxe-grid--toolbar-wrapper"},l?l.call(t,{$grid:t},e):[e(In,{props:Object.assign({},t.toolbarOpts,{slots:void 0}),ref:"xToolbar",scopedSlots:(e=>{var{$scopedSlots:t,toolbarOpts:r}=e,r=r.slots,l={};return!t.buttons||r&&"buttons"===r.buttons||M("vxe.error.reqProp",["toolbar-config.slots.buttons"]),!t.tools||r&&"tools"===r.tools||M("vxe.error.reqProp",["toolbar-config.slots.tools"]),r&&(t=kn(e,r,"buttons"),e=kn(e,r,"tools"),t&&(l.buttons=t),e)&&(l.tools=e),l})(t)})])}function Ln(e,t){var{$scopedSlots:r,tableProps:l}=t;return e("div",{class:"vxe-grid--table-wrapper"},[e("vxe-table",{key:"table",props:l,on:(r=>{var{$listeners:e,proxyConfig:t,proxyOpts:l}=r;let o={};return sr().each(e,(e,t)=>{o[t]=(...e)=>{r.$emit(t,...e)}}),t&&(l.sort&&(o["sort-change"]=r.sortChangeEvent),l.filter)&&(o["filter-change"]=r.filterChangeEvent),o})(t),scopedSlots:r,ref:"xTable"})])}function _n(e,s){var t=nr.VxeUI.getComponent("VxePager"),r=s.$scopedSlots,l=s,{proxyConfig:o,pagerConfig:i}=s,n=s.computeProxyOpts,a=s.computePagerOpts,c=r.pager;return i&&cr(a)||r.pager?e("div",{ref:"refPagerWrapper",key:"pager",class:"vxe-grid--pager-wrapper"},c?c.call(s,{$grid:s}):[t?e(t,{ref:"refPager",props:{...a,...o&&cr(n)?l.tablePage:{}},on:{"page-change"(l){{var o=s,i=o.proxyConfig,n=o.tablePage;let{$event:t,currentPage:e,pageSize:r}=l;var a=o.computeProxyOpts;n.currentPage=e,n.pageSize=r,o.dispatchEvent("page-change",l,t),i&&cr(a)&&o.commitProxy("query").then(e=>{o.dispatchEvent("proxy-query",e,t)})}}},scopedSlots:jt(s,a.slots)}):d(s)]):d(s)}function Vn(t,r,e){let l=[];return e.forEach(e=>{switch(e){case"Form":l.push(Mn(t,r));break;case"Toolbar":l.push(An(t,r));break;case"Top":l.push(((e,t)=>{var{_e:r,$scopedSlots:l}=t;return(l=l.top)?e("div",{key:"top",ref:"refTopWrapper",class:"vxe-grid--top-wrapper"},l.call(t,{$grid:t},e)):r()})(t,r));break;case"Table":l.push(t("div",{key:"table",class:"vxe-grid--table-container"},[((e,t)=>{var{_e:r,$scopedSlots:l}=t;return(l=l.left)?e("div",{class:"vxe-grid--left-wrapper"},l({$grid:t})):r()})(t,r),Ln(t,r),((e,t)=>{var{_e:r,$scopedSlots:l}=t;return(l=l.right)?e("div",{class:"vxe-grid--right-wrapper"},l({$grid:t})):r()})(t,r)]));break;case"Bottom":l.push(((e,t)=>{var{_e:r,$scopedSlots:l}=t;return(l=l.bottom)?e("div",{key:"bottom",ref:"refBottomWrapper",class:"vxe-grid--bottom-wrapper"},l.call(t,{$grid:t},e)):r()})(t,r));break;case"Pager":l.push(_n(t,r));break;default:A("vxe.error.notProp",["layouts -> "+e])}}),l}Object.keys(Dn.methods).forEach(t=>{Pt[t]=function(...e){return this.$refs.xTable&&this.$refs.xTable[t](...e)}});var Hn={name:"VxeGrid",mixins:[Bt.sizeMixin],props:{...qe,layouts:Array,columns:Array,pagerConfig:[Boolean,Object],proxyConfig:Object,toolbar:[Boolean,Object],toolbarConfig:[Boolean,Object],formConfig:[Boolean,Object],zoomConfig:Object,size:{type:String,default:()=>a().grid.size||a().size}},provide(){return{$xeGrid:this}},data(){return{tableLoading:!1,isZMax:!1,tableData:[],filterData:[],formData:{},sortData:[],tZindex:0,tablePage:{total:0,pageSize:a().pager?.pageSize||10,currentPage:1}}},computed:{isRespMsg(){var e=this.proxyOpts;return sr().isBoolean(e.message)?e.message:e.showResponseMsg},isActiveMsg(){return this.proxyOpts.showActiveMsg},proxyOpts(){return this.computeProxyOpts},computeProxyOpts(){return sr().merge({},sr().clone(a().grid.proxyConfig,!0),this.proxyConfig)},pagerOpts(){return this.computePagerOpts},computePagerOpts(){return Object.assign({},a().grid.pagerConfig,this.pagerConfig)},formOpts(){return this.computeFormOpts},computeFormOpts(){return Object.assign({},a().grid.formConfig,this.formConfig)},toolbarOpts(){return this.computeToolbarOpts},computeToolbarOpts(){return Object.assign({},a().grid.toolbarConfig,this.toolbarConfig||this.toolbar)},zoomOpts(){return this.computeZoomOpts},computeZoomOpts(){return Object.assign({},a().grid.zoomConfig,this.zoomConfig)},computeStyles(){var{height:e,maxHeight:t}=this,{isZMax:r,tZindex:l}=this,o={};return r?o.zIndex=l:(e&&(o.height="auto"===e||"100%"===e?"100%":Sl(e)),t&&(o.maxHeight="auto"===t||"100%"===t?"100%":Sl(t))),o},tableExtendProps(){let t={};return zt.forEach(e=>{t[e]=this[e]}),t},computeTableProps(){var{isZMax:e,seqConfig:t,pagerConfig:r,loading:l,editConfig:o,proxyConfig:i,proxyOpts:n,tableExtendProps:a,tableLoading:s,tablePage:c}=this,d=Object.assign({},a);return e&&(a.maxHeight?d.maxHeight="100%":d.height="100%"),i&&(d.loading=l||s,n.seq)&&cr(r)&&(d.seqConfig=Object.assign({},t,{startIndex:(c.currentPage-1)*c.pageSize})),o&&(d.editConfig=Object.assign({},o)),d},tableProps(){return this.computeTableProps},computeCurrLayoutConf(){var e=this.layouts;let t=[],r=[],l=[],o=[];return(t=e&&e.length?e:a().grid.layouts||Nt).length&&(sr().isArray(t[0])?(r=t[0],l=t[1]||[],o=t[2]||[]):l=t),{headKeys:r,bodyKeys:l,footKeys:o}},computeCustomCurrentPageFlag(){return this.computePagerOpts.currentPage},computeCustomPageSizeFlag(){return this.computePagerOpts.pageSize},computeCustomTotalFlag(){return this.computePagerOpts.total}},watch:{columns(e){this.$nextTick(()=>this.loadColumn(e))},toolbar(e){e&&this.initToolbar()},toolbarConfig(e){e&&this.initToolbar()},proxyConfig(){this.initProxy()},computeCustomCurrentPageFlag(){$n(this,"currentPage")},computeCustomPageSizeFlag(){$n(this,"pageSize")},computeCustomTotalFlag(){$n(this,"total")}},created(){let e=this,t=(this.toolbar&&M("vxe.error.delProp",["grid.toolbar","grid.toolbar-config"]),this.toolbarConfig&&!sr().isObject(this.toolbarConfig)&&M("vxe.error.errProp",["grid.toolbar-config="+this.toolbarConfig,"grid.toolbar-config={}"]),nr.VxeUI.getComponent("VxeForm")),r=nr.VxeUI.getComponent("VxePager");this.$nextTick(()=>{e.formConfig&&!t&&A("vxe.error.reqComp",["vxe-form"]),e.pagerConfig&&!r&&A("vxe.error.reqComp",["vxe-pager"])}),$n(this),Ht.on(this,"keydown",this.handleGlobalKeydownEvent)},mounted(){this.columns&&this.columns.length&&this.loadColumn(this.columns),this.initToolbar(),this.initProxy()},destroyed(){Ht.off(this,"keydown")},render(e){var t=this.computeSize,r=this.computeStyles;return e("div",{ref:"refElem",class:["vxe-grid",{["size--"+t]:t,"is--animat":!!this.animat,"is--round":this.round,"is--maximize":this.isZMax,"is--loading":this.loading||this.tableLoading}],style:r},((e,t)=>{var r=t.$scopedSlots,{headKeys:l,bodyKeys:o,footKeys:i}=t.computeCurrLayoutConf,n=r.asideLeft||r["aside-left"],r=r.asideRight||r["aside-right"];return[e("div",{class:"vxe-grid--layout-header-wrapper"},Vn(e,t,l)),e("div",{class:"vxe-grid--layout-body-wrapper"},[n?e("div",{class:"vxe-grid--layout-aside-left-wrapper"},n({})):d(t),e("div",{class:"vxe-grid--layout-body-content-wrapper"},Vn(e,t,o)),r?e("div",{class:"vxe-grid--layout-aside-right-wrapper"},r({})):d(t)]),e("div",{class:"vxe-grid--layout-footer-wrapper"},Vn(e,t,i))]})(e,this))},methods:{...Pt,callSlot(e,t,r,l){var o=this.$scopedSlots;return e&&(sr().isString(e)&&(e=o[e]||null),sr().isFunction(e))?Dr(e.call(this,t,r,l)):[]},getEl(){return this.$refs.refElem},getExcludeHeight(){var e,t,r,l,o,i,n=this.isZMax,a=this.$refs.refElem;return a?(e=this.$refs.refFormWrapper,t=this.$refs.refToolbarWrapper,r=this.$refs.refTopWrapper,l=this.$refs.refBottomWrapper,o=this.$refs.refPagerWrapper,i=a.parentElement,(!n&&i?Dl(i):0)+Dl(a)+Fl(e)+Fl(t)+Fl(r)+Fl(l)+Fl(o)):0},getParentHeight(){var e=this.$refs.refElem;return e?(e=e.parentElement,(this.isZMax?Ol().visibleHeight:e?sr().toNumber(getComputedStyle(e).height):0)-this.getExcludeHeight()):0},initToolbar(){this.$nextTick(()=>{var{xTable:e,xToolbar:t}=this.$refs;e&&t&&e.connect(t)})},initProxy(){var{proxyInited:e,proxyConfig:t,proxyOpts:r,formConfig:l,formOpts:i}=this;if(t){if(cr(l)&&r.form&&i.items){let o={};i.items.forEach(t=>{var{field:r,itemRender:l}=t;if(r){let e=null;l&&(l=l.defaultValue,sr().isFunction(l)?e=l({item:t}):sr().isUndefined(l)||(e=l)),o[r]=e}}),this.formData=o}e||!1===r.autoLoad||(this.proxyInited=!0,this.$nextTick().then(()=>this.commitProxy("_init")).then(e=>{this.$emit("proxy-query",{...e,isInited:!0,$grid:this,$event:new Event("init")})}))}},handleGlobalKeydownEvent(e){27===e.keyCode&&this.isZMax&&!1!==this.zoomOpts.escRestore&&this.triggerZoomEvent(e)},commitProxy(t,...u){let{$refs:e,toolbar:r,toolbarConfig:l,toolbarOpts:o,proxyOpts:i,tablePage:a,pagerConfig:s,editRules:p,isRespMsg:h,isActiveMsg:m,validConfig:g,pagerOpts:c}=this,{beforeQuery:d,afterQuery:f,beforeDelete:v,afterDelete:x,beforeSave:b,afterSave:C,ajax:w={}}=i,y=i.response||i.props||{},E=e.xTable;var n,T=this.getFormData();let R,S;sr().isString(t)?(n=l||r?sr().findTree(o.buttons,e=>e.code===t,{children:"dropdowns"}):null,S=t,R=n?n.item:null):(R=t,S=R.code);var O=R?R.params:null;switch(S){case"insert":return E.insert({});case"insert_edit":return E.insert({}).then(({row:e})=>E.setEditRow(e));case"insert_actived":return E.insert({}).then(({row:e})=>E.setEditRow(e));case"mark_cancel":this.triggerPendingEvent(S);break;case"remove":return this.handleDeleteRow(S,"vxe.grid.removeSelectRecord",()=>this.removeCheckboxRow());case"import":E.importData(O);break;case"open_import":E.openImport(O);break;case"export":E.exportData(O);break;case"open_export":E.openExport(O);break;case"reset_custom":E.resetCustom(!0);break;case"_init":case"reload":case"query":{var F=w.query;let n=w.querySuccess,l=w.queryError;if(F){var D="_init"===S,I="reload"===S;if(!D&&this.tableLoading)return this.$nextTick();let t=[],r=[],e={};if(s&&((D||I)&&(a.currentPage=1),cr(s))&&(e={...a}),D){let e=null;E&&($=E.sortOpts,e=$.defaultSort),e&&(sr().isArray(e)||(e=[e]),t=e.map(e=>({field:e.field,property:e.field,order:e.order}))),E&&(r=E.getCheckedFilters())}else E&&(I?E.clearAll():(t=E.getSortColumns(),r=E.getCheckedFilters()));let o={code:S,button:R,isInited:D,isReload:I,$grid:this,page:e,sort:t.length?t[0]:{},sorts:t,filters:r,form:T,options:F},i=(this.sortData=t,this.filterData=r,this.tableLoading=!0,[o].concat(u));return Promise.resolve((d||F)(...i)).then(e=>{let t=[];var r,l;return this.tableLoading=!1,e&&(s&&cr(c)?(l=y.total,l=(sr().isFunction(l)?l({data:e,$grid:this}):sr().get(e,l||"page.total"))||0,a.total=sr().toNumber(l),r=y.result,t=(sr().isFunction(r)?r({data:e,$grid:this}):sr().get(e,r||"result"))||[],r=Math.max(Math.ceil(l/a.pageSize),1),a.currentPage>r&&(a.currentPage=r)):(l=y.list,t=(l?sr().isFunction(l)?l({data:e,$grid:this}):sr().get(e,l):e)||[])),E?E.loadData(t):E.$nextTick(()=>{E&&E.loadData(t)}),f&&f(...i),n&&n({...o,response:e}),{status:!0}}).catch(e=>(this.tableLoading=!1,l&&l({...o,response:e}),{status:!1}))}A("vxe.error.notFunc",["proxy-config.ajax.query"]);break}case"delete":{let o=w.delete,i=w.deleteSuccess,n=w.deleteError;if(o){let e=E.getCheckboxRecords(),t=e.filter(e=>!E.isInsertByRow(e));var $={removeRecords:t};let r={$grid:this,code:S,button:R,body:$,form:T,options:o},l=[r].concat(u);if(e.length)return this.handleDeleteRow(S,"vxe.grid.deleteSelectRecord",()=>t.length?(this.tableLoading=!0,Promise.resolve((v||o)(...l)).then(e=>(this.tableLoading=!1,E.setPendingRow(t,!1),h&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({content:this.getRespMsg(e,"vxe.grid.delSuccess"),status:"success"})),x?x(...l):this.commitProxy("query"),i&&i({...r,response:e}),{status:!0})).catch(e=>(this.tableLoading=!1,h&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({id:S,content:this.getRespMsg(e,"vxe.grid.operError"),status:"error"})),n&&n({...r,response:e}),{status:!1}))):E.remove(e));m&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({id:S,content:V("vxe.grid.selectOneRecord"),status:"warning"}))}else A("vxe.error.notFunc",["proxy-config.ajax.delete"]);break}case"save":{let s=w.save,c=w.saveSuccess,d=w.saveError;if(s){let t=this.getRecordset(),{insertRecords:r,removeRecords:l,updateRecords:o,pendingRecords:i}=t,n={$grid:this,code:S,button:R,body:t,form:T,options:s},a=[n].concat(u),e=(r.length&&(t.pendingRecords=i.filter(e=>-1===r.indexOf(e))),i.length&&(t.insertRecords=r.filter(e=>-1===i.indexOf(e))),Promise.resolve());return(e=p?this[g&&"full"===g.msgMode?"fullValidate":"validate"](t.insertRecords.concat(o)):e).then(e=>{if(!e)return t.insertRecords.length||l.length||o.length||t.pendingRecords.length?(this.tableLoading=!0,Promise.resolve((b||s)(...a)).then(e=>(this.tableLoading=!1,E.clearPendingRow(),h&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({content:this.getRespMsg(e,"vxe.grid.saveSuccess"),status:"success"})),C?C(...a):this.commitProxy("query"),c&&c({...n,response:e}),{status:!0})).catch(e=>(this.tableLoading=!1,h&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({id:S,content:this.getRespMsg(e,"vxe.grid.operError"),status:"error"})),d&&d({...n,response:e}),{status:!1}))):void(m&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({id:S,content:V("vxe.grid.dataUnchanged"),status:"info"})))})}A("vxe.error.notFunc",["proxy-config.ajax.save"]);break}default:D=Vt.get(S);D&&(D.commandMethod?D.commandMethod({code:S,button:R,$grid:this,$table:E},...u):A("vxe.error.notCommands",[S]))}return this.$nextTick()},getRespMsg(e,t){var r=this.proxyOpts,r=r.response||r.props||{};let l;return(l=e&&r.message?sr().get(e,r.message):l)||V(t)},handleDeleteRow(e,t,r){var l=this.getCheckboxRecords();if(this.isActiveMsg){if(l.length)return nr.VxeUI.modal.confirm({id:"cfm_"+e,content:V(t),escClosable:!0}).then(e=>{if("confirm"===e)return r()});nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({id:"msg_"+e,content:V("vxe.grid.selectOneRecord"),status:"warning"})}else l.length&&r();return Promise.resolve()},getFormData(){var{proxyConfig:e,proxyOpts:t,formOpts:r,formData:l}=this;return e&&cr(t)&&t.form?l:r.data},getFormItems(e){var{formConfig:t,formOpts:r}=this;let l=[];return sr().eachTree(cr(t)&&r.items?r.items:[],e=>{l.push(e)},{children:"children"}),sr().isUndefined(e)?l:l[e]},triggerToolbarCommitEvent(e,t){let r=e.code;return this.commitProxy(e,t).then(e=>{r&&e&&e.status&&["query","reload","delete","save"].includes(r)&&this.$emit("delete"===r||"save"===r?"proxy-"+r:"proxy-query",{...e,isReload:"reload"===r,$grid:this,$event:t})})},triggerToolbarBtnEvent(e,t){this.triggerToolbarCommitEvent(e,t),this.$emit("toolbar-button-click",{code:e.code,button:e,$grid:this,$event:t})},triggerToolbarTolEvent(e,t){this.triggerToolbarCommitEvent(e,t),this.$emit("toolbar-tool-click",{code:e.code,tool:e,$grid:this,$event:t})},triggerPendingEvent(e){var t=this.isActiveMsg,r=this.getCheckboxRecords();r.length?(this.togglePendingRow(r),this.clearCheckboxRow()):t&&(nr.VxeUI.modal||A("vxe.error.reqModule",["Modal"]),nr.VxeUI.modal.message({id:e,content:V("vxe.grid.selectOneRecord"),status:"warning"}))},sortChangeEvent(t){var{$table:e,column:r,sortList:l}=t;(sr().isBoolean(r.remoteSort)?r.remoteSort:e.sortOpts.remote)&&(this.sortData=l,this.proxyConfig)&&(this.tablePage.currentPage=1,this.commitProxy("query").then(e=>{this.$emit("proxy-query",{...e,$grid:this,$event:t.$event})})),this.$emit("sort-change",Object.assign({$grid:this},t))},filterChangeEvent(t){var{$table:e,filterList:r}=t;e.filterOpts.remote&&(this.filterData=r,this.proxyConfig)&&(this.tablePage.currentPage=1,this.commitProxy("query").then(e=>{this.$emit("proxy-query",{...e,$grid:this,$event:t.$event})})),this.$emit("filter-change",Object.assign({$grid:this},t))},submitEvent(t){var e=this.proxyConfig;this.tableLoading||(e&&this.commitProxy("reload").then(e=>{this.$emit("proxy-query",{...e,isReload:!0,$grid:this,$event:t.$event})}),this.$emit("form-submit",Object.assign({$grid:this},t)))},resetEvent(t){var e=this.proxyConfig,r=this.$refs.xTable;e&&(r.clearScroll(),this.commitProxy("reload").then(e=>{this.$emit("proxy-query",{...e,isReload:!0,$grid:this,$event:t.$event})})),this.$emit("form-reset",Object.assign({$grid:this},t))},submitInvalidEvent(e){this.$emit("form-submit-invalid",Object.assign({$grid:this},e))},collapseEvent(e){this.$nextTick(()=>this.recalculate(!0)),this.$emit("form-toggle-collapse",Object.assign({$grid:this},e)),this.$emit("form-collapse",Object.assign({$grid:this},e))},triggerZoomEvent(e){this.zoom(),this.$emit("zoom",{$grid:this,type:this.isZMax?"max":"revert",$event:e})},zoom(){return this[this.isZMax?"revert":"maximize"]()},isMaximized(){return this.isZMax},maximize(){return this.handleZoom(!0)},revert(){return this.handleZoom()},handleZoom(e){var t=this.isZMax;return(e?!t:t)&&(this.isZMax=!t,this.tZindex<xl())&&(this.tZindex=vl()),this.$nextTick().then(()=>this.recalculate(!0)).then(()=>(setTimeout(()=>this.recalculate(!0),15),this.isZMax))},getProxyInfo(){var e=this.$refs.xTable,{sortData:t,proxyConfig:r}=this;return r?{data:e?e.getFullData():[],filter:this.filterData,form:this.getFormData(),sort:t.length?t[0]:{},sorts:t,pager:this.tablePage,pendingRecords:e?e.getPendingRecords():[]}:null},loadColumn(e){var t=this.$refs.xTable;let r=this.$scopedSlots;return sr().eachTree(e,e=>{e.slots&&sr().each(e.slots,e=>{sr().isFunction(e)||r[e]||A("vxe.error.notSlot",[e])})}),t.loadColumn(e)},reloadColumn(e){return this.clearAll(),this.loadColumn(e)}}};let Ut=Object.assign({},Hn,{install(e){e.component(Hn.name,Hn)}}),Wt=(nr.VxeUI.dynamicApp&&nr.VxeUI.dynamicApp.component(Hn.name,Hn),nr.VxeUI.component(Hn),Ut),Gt=ir(9274);var Bn=ir.n(Gt);let{getConfig:qt,renderer:Xt,getI18n:Yt,getComponent:Kt}=nr.VxeUI,Zt="value",Qt={};function Lr(e,t,r){return sr().eqNull(e)?sr().eqNull(t)?r:t:e}function Pn(e,t,r){var{dateConfig:l={}}=t;return sr().toDateString((t=t,(e=e)&&t.valueFormat?sr().toStringDate(e,t.valueFormat):e),l.labelFormat||r)}function zn(e,t){return Pn(e,t,Yt("vxe.input.date.labelFormat."+(t.type||"date")))}function Nn({name:e}){return"vxe-"+e.replace("$","")}function _r({name:e}){return Kt(e)||e}function jn(e,t,r){e=e.$panel;e.changeOption({},t,r)}function Un(e){let{name:t,attrs:r}=e;return r="input"===t?Object.assign({type:"text"},r):r}function Wn(e){var{name:e,immediate:t,props:r}=e;return t||("VxeInput"===e||"$input"===e?(t=(r||{}).type,!(!t||"text"===t||"number"===t||"integer"===t||"float"===t)):"input"!==e&&"textarea"!==e&&"$textarea"!==e)}function Vr(e,t,r,l){return sr().assign({immediate:Wn(e)},Qt,l,e.props,{[Zt]:r})}function Gn(e,t,r,l){return sr().assign({},Qt,l,e.props,{[Zt]:r})}function qn(e,t){return"cell"===t.$type||Wn(e)}function Hr(e,t,r,l,o){t=t.placeholder;return[e("span",{class:["vxe-cell--label",o?o.class:""]},t&&gl(l)?[e("span",{class:"vxe-cell--placeholder"},ur(dr(t),1))]:ur(l,1))]}function Xn(e,r,t){let l=e.events,o=ro(e),i=lo(e),{model:n,change:a,blur:s}=t||{},c=i===o,d={};return l&&sr().objectEach(l,(t,e)=>{d[to(e)]=function(...e){t(r,...e)}}),n&&(d[to(o)]=function(e){n(e),c&&a&&a(e),l&&l[o]&&l[o](r,e)}),!c&&a&&(d[to(i)]=function(e){a(e),l&&l[i]&&l[i](r,e)}),s&&(d[to(u)]=function(e){s(e),l&&l[u]&&l[u](r,e)}),d}let u="blur";function Yn(e,r,t,l){let o=e.events,i=ro(e),n=lo(e),{model:a,change:s,blur:c}=t||{},d={};return sr().objectEach(o,(t,e)=>{d[to(e)]=function(...e){sr().isFunction(t)||A("vxe.error.errFunc",[t]),t(r,...e)}}),a&&(d[to(i)]=function(e){a(e),o&&o[i]&&o[i](r,e)}),s&&(d[to(n)]=function(...e){s(...e),o&&o[n]&&o[n](r,...e)}),c&&(d[to(u)]=function(...e){c(...e),o&&o[u]&&o[u](r,...e)}),l?Object.assign(d,l):d}function Br(e,t){let{$table:r,row:l,column:o}=t,i=e.name,n=o.model,a=qn(e,t);return Yn(e,t,{model(e){n.update=!0,n.value=e,a&&Or(l,o,e)},change(e){!a&&i&&["VxeInput","VxeNumberInput","VxeTextarea","$input","$textarea"].includes(i)?(e=e.value,n.update=!0,n.value=e,r.updateStatus(t,e)):r.updateStatus(t)},blur(){a?r.handleCellRuleUpdateStatus("blur",t):r.handleCellRuleUpdateStatus("blur",t,n.value)}})}function Kn(e,t,r){return Yn(e,t,{model(e){r.data=e},change(){jn(t,!sr().eqNull(r.data),r)},blur(){jn(t,!sr().eqNull(r.data),r)}})}function Zn(t,r){let{$table:l,row:o,column:i}=r,n=i.model;return Xn(t,r,{model(e){var e=e.target;e&&(e=e.value,qn(t,r)?Or(o,i,e):(n.update=!0,n.value=e))},change(e){var e=e.target;e&&(e=e.value,l.updateStatus(r,e))},blur(e){var e=e.target;e&&(e=e.value,l.updateStatus(r,e))}})}function Qn(e,t,r){return Xn(e,t,{model(e){e=e.target;e&&(r.data=e.value)},change(){jn(t,!sr().eqNull(r.data),r)},blur(){jn(t,!sr().eqNull(r.data),r)}})}function Jn(e,t,r){var{row:l,column:o}=r,i=t.name,l=qn(t,r)?Sr(l,o):o.model.value;return[e(i,{class:"vxe-default-"+i,attrs:Un(t),domProps:{value:l},on:Zn(t,r)})]}function Pr(e,t,r){var{row:l,column:o}=r,l=Sr(l,o);return[e(_r(t),{props:Vr(t,0,l),on:Br(t,r)})]}function ea(e,t,r){var l=t.options,{row:o,column:i}=r,o=Sr(o,i);return[e(_r(t),{props:{options:l,...Vr(t,0,o)},on:Br(t,r)})]}function ta(e,t,r){var{row:l,column:o}=r,l=Sr(l,o);return[e(Nn(t),{props:Vr(t,0,l),on:Br(t,r)})]}function ra(e,t,r){return[e("vxe-button",{props:Vr(t,0,null),on:Yn(t,r)})]}function la(r,l,o,i){var{optionGroups:e,optionGroupProps:t={}}=l;let n=t.options||"options",a=t.label||"label";return e?e.map((e,t)=>r("optgroup",{key:t,attrs:{label:e[a]}},i(r,e[n],l,o))):[]}function oa(r,e,t,l){var{optionProps:o={}}=t,{row:i,column:n}=l;let a=o.label||"label",s=o.value||"value",c=o.disabled||"disabled",d=qn(t,l)?Sr(i,n):n.model.value;return e?e.map((e,t)=>r("option",{key:t,attrs:{value:e[s],disabled:e[c]},domProps:{selected:e[s]==d}},e[a])):[]}function ia(l,o,i){var e=i.column;return e.filters.map((e,t)=>{var r=e.data;return l(_r(o),{key:t,props:Gn(o,0,r),on:Kn(o,i,e)})})}function na({option:e,row:t,column:r}){e=e.data;return sr().get(t,r.field)==e}function aa({option:e,row:t,column:r}){e=e.data,t=sr().get(t,r.field);return-1<sr().toValueString(t).indexOf(e)}function sa(e,t,r){return[e("select",{class:"vxe-default-select",attrs:Un(t),on:Zn(t,r)},t.optionGroups?la(e,t,r,oa):oa(e,t.options,t,r))]}function ca(e,t,r){var{row:l,column:o}=r,{options:i,optionProps:n,optionGroups:a,optionGroupProps:s}=t,l=Sr(l,o);return[e(_r(t),{props:Vr(t,0,l,{options:i,optionProps:n,optionGroups:a,optionGroupProps:s}),on:Br(t,r)})]}function da(e,t,r){var{row:l,column:o}=r,{options:i,optionProps:n}=t,l=Sr(l,o);return[e(_r(t),{props:Vr(t,0,l,{options:i,optionProps:n}),on:Br(t,r)})]}function ua(e,t,r){var{row:l,column:o}=r,{options:i,optionProps:n,optionGroups:a,optionGroupProps:s}=t,l=Sr(l,o);return[e(Nn(t),{props:Vr(t,0,l,{options:i,optionProps:n,optionGroups:a,optionGroupProps:s}),on:Br(t,r)})]}function pa(e,{row:t,column:r}){let{options:l,optionGroups:o,optionProps:i={},optionGroupProps:n={}}=e;e=sr().get(t,r.field);let a,s=i.label||"label",c=i.value||"value";return null!=e?sr().map(sr().isArray(e)?e:[e],o?t=>{var r=n.options||"options";for(let e=0;e<o.length&&!(a=sr().find(o[e][r],e=>e[c]==t));e++);return a?a[s]:t}:t=>(a=sr().find(l,e=>e[c]==t))?a[s]:t).join(", "):""}function ha(e){var{row:t,column:r,options:l}=e;return l.original?Sr(t,r):pa(r.editRender||r.cellRender,e)}function ma(e,{row:r,column:l}){var{options:e,optionProps:t={}}=e,r=sr().get(r,l.field);let o=t.label||"label",i=t.value||"value";l=t.children||"children";if(null==r)return"";{let t={};return sr().eachTree(e,e=>{t[sr().get(e,i)]=e},{children:l}),sr().map(sr().isArray(r)?r:[r],e=>{e=t[e];return e&&sr().get(e,o)}).join(", ")}}function ga(e){var{row:t,column:r,options:l}=e;return l.original?Sr(t,r):ma(r.editRender||r.cellRender,e)}function fa(e,t,r){var l,{props:o={},showNegativeStatus:i}=t,{row:r,column:n}=r,a=o.type;let s=sr().get(r,n.field),c=!1;return gl(s)||(r=qt().numberInput||{},"float"===a?(n=Lr(o.autoFill,r.autoFill,!0),l=Lr(o.digits,r.digits,1),s=sr().toFixed(sr().floor(s,l),l),n||(s=sr().toNumber(s)),i&&s<0&&(c=!0)):"amount"===a?(l=Lr(o.autoFill,r.autoFill,!0),n=Lr(o.digits,r.digits,2),a=Lr(o.showCurrency,r.showCurrency,!1),s=sr().toNumber(s),i&&s<0&&(c=!0),s=sr().commafy(s,{digits:n}),l||([n,l]=s.split("."),l&&(l=l.replace(/0+$/,""),s=l?[n,".",l].join(""):n)),a&&(s=""+(o.currencySymbol||r.currencySymbol||Yt("vxe.numberInput.currencySymbol")||"")+s)):i&&sr().toNumber(s)<0&&(c=!0)),Hr(e,t,0,s,c?{class:"is--negative"}:{})}Xt.mixin({input:{tableAutoFocus:"input",renderTableEdit:Jn,renderTableDefault:Jn,renderTableFilter:function(r,l,o){var e=o.column;let i=l.name,n=Un(l);return e.filters.map((e,t)=>r(i,{key:t,class:"vxe-default-"+i,attrs:n,domProps:{value:e.data},on:Qn(l,o,e)}))},tableFilterDefaultMethod:aa},textarea:{tableAutoFocus:"textarea",renderTableEdit:Jn},select:{renderTableEdit:sa,renderTableDefault:sa,renderTableCell(e,t,r){return Hr(e,t,0,pa(t,r))},renderTableFilter(r,l,o){var e=o.column;return e.filters.map((e,t)=>r("select",{key:t,class:"vxe-default-select",attrs:Un(l),on:Qn(l,o,e)},l.optionGroups?la(r,l,o,oa):oa(r,l.options,l,o)))},tableFilterDefaultMethod:na,tableExportMethod:ha},VxeInput:{tableAutoFocus:"input",renderTableEdit:Pr,renderTableCell(e,t,r){var{props:l={}}=t,{row:r,column:o}=r,i=qt().input||{},n=l.digits||i.digits||2;let a=sr().get(r,o.field);if(a)switch(l.type){case"date":case"week":case"month":case"quarter":case"year":a=zn(a,l);break;case"float":a=sr().toFixed(sr().floor(a,n),n)}return Hr(e,t,0,a)},renderTableDefault:Pr,renderTableFilter:ia,tableFilterDefaultMethod:aa},FormatNumberInput:{renderTableDefault:fa,tableFilterDefaultMethod:aa,tableExportMethod(e){var{row:e,column:t}=e;return sr().get(e,t.field)}},VxeNumberInput:{tableAutoFocus:"input",renderTableEdit:Pr,renderTableCell:fa,renderTableFooter(e,t,r){var{props:t={}}=t,{row:r,column:l,_columnIndex:o}=r,i=t.type,o=sr().isArray(r)?r[o]:sr().get(r,l.field);if(sr().isNumber(o)){r=qt().numberInput||{};if("float"===i){var l=Lr(t.autoFill,r.autoFill,!0),n=Lr(t.digits,r.digits,1);let e=sr().toFixed(sr().floor(o,n),n);return e=l?e:sr().toNumber(e)}if("amount"===i){var n=Lr(t.autoFill,r.autoFill,!0),l=Lr(t.digits,r.digits,2),i=Lr(t.showCurrency,r.showCurrency,!1);let e=sr().commafy(sr().toNumber(o),{digits:l});return n||([l,n]=e.split("."),n&&(n=n.replace(/0+$/,""),e=n?[l,".",n].join(""):l)),e=i?""+(t.currencySymbol||r.currencySymbol||Yt("vxe.numberInput.currencySymbol")||"")+e:e}}return dr(o,1)},renderTableDefault:Pr,renderTableFilter:ia,tableFilterDefaultMethod:aa,tableExportMethod(e){var{row:e,column:t}=e;return sr().get(e,t.field)}},VxeDatePicker:{tableAutoFocus:"input",renderTableEdit:Pr,renderTableCell(e,t,r){var{props:l={}}=t,{row:r,column:o}=r;let i=sr().get(r,o.field);return Hr(e,t,0,i=i&&"time"!==l.type?zn(i,l):i)},renderTableDefault:Pr,renderTableFilter:ia,tableFilterDefaultMethod:na},VxeDateRangePicker:{tableAutoFocus:"input",renderTableEdit(e,t,r){let{startField:l,endField:o}=t,{$table:i,row:n,column:a}=r,s=a.model;var c=Sr(n,a),d={},u={};return l&&o&&(d.startValue=sr().get(n,l),d.endValue=sr().get(n,o),u["update:startValue"]=e=>{l&&sr().set(n,l,e)},u["update:endValue"]=e=>{o&&sr().set(n,o,e)}),[e(_r(t),{props:Vr(t,0,c,d),on:Yn(t,r,{model(e){s.update=!0,s.value=e,Or(n,a,e)},change(){i.updateStatus(r)},blur(){i.handleCellRuleUpdateStatus("blur",r)}},u)})]},renderTableCell(e,t,r){var{startField:l,endField:o}=t,{row:r,column:i}=r;let n="",a="",s=(l&&o?(n=sr().get(r,l),a=sr().get(r,o)):(l=sr().get(r,i.field))&&(a=(sr().isArray(l)?(n=l[0],l):(o=(""+l).split(","),n=o[0],o))[1]),"");return Hr(e,t,0,s=n&&a?n+" ~ "+a:s)}},VxeTextarea:{tableAutoFocus:"textarea",renderTableEdit:Pr},VxeButton:{renderTableDefault:function(e,t,r){return[e(_r(t),{props:Vr(t,0,null),on:Yn(t,r)})]}},VxeButtonGroup:{renderTableDefault(e,t,r){var l=t.options;return[e(_r(t),{props:{options:l,...Vr(t,0,null)},on:Yn(t,r)})]}},VxeSelect:{tableAutoFocus:"input",renderTableEdit:ca,renderTableDefault:ca,renderTableCell(e,t,r){return Hr(e,t,0,pa(t,r))},renderTableFilter(l,o,i){var e=i.column;let{options:n,optionProps:a,optionGroups:s,optionGroupProps:c}=o;return e.filters.map((e,t)=>{var r=e.data;return l(_r(o),{key:t,props:Gn(o,0,r,{options:n,optionProps:a,optionGroups:s,optionGroupProps:c}),on:Kn(o,i,e)})})},tableFilterDefaultMethod:na,tableExportMethod:ha},formatOption:{renderTableDefault(e,t,r){return Hr(e,t,0,pa(t,r))}},FormatSelect:{renderTableDefault(e,t,r){return Hr(e,t,0,pa(t,r))},tableFilterDefaultMethod:na,tableExportMethod:ha},VxeTreeSelect:{tableAutoFocus:"input",renderTableEdit:da,renderTableCell(e,t,r){return Hr(e,t,0,ma(t,r))},tableExportMethod:ga},VxeTableSelect:{tableAutoFocus:"input",renderTableEdit:da,renderTableCell(e,t,r){return Hr(e,t,0,ma(t,r))},tableExportMethod:ga},formatTree:{renderTableDefault(e,t,r){return Hr(e,t,0,ma(t,r))}},FormatTreeSelect:{renderTableDefault(e,t,r){return Hr(e,t,0,ma(t,r))},tableExportMethod:ga},VxeColorPicker:{tableAutoFocus:"input",renderTableEdit(e,t,r){var{row:l,column:o}=r,i=t.options,l=Sr(l,o);return[e(_r(t),{props:Vr(t,0,l,{colors:i}),on:Br(t,r)})]},renderTableCell(e,t,r){var{row:r,column:l}=r;return e("span",{class:"vxe-color-picker--readonly"},[e("div",{class:"vxe-color-picker--readonly-color",style:{backgroundColor:sr().get(r,l.field)}})])}},VxeIconPicker:{tableAutoFocus:"input",renderTableEdit(e,t,r){var{row:l,column:o}=r,i=t.options,l=Sr(l,o);return[e(_r(t),{props:Vr(t,0,l,{icons:i}),on:Br(t,r)})]},renderTableCell(e,t,r){var{row:r,column:l}=r;return e("i",{class:sr().get(r,l.field)})}},VxeRadioGroup:{renderTableDefault:ea},VxeCheckbox:{renderTableDefault:function(e,t,r){var{row:l,column:o}=r,l=Sr(l,o);return[e(_r(t),{props:Vr(t,0,l),on:Br(t,r)})]}},VxeCheckboxGroup:{renderTableDefault:ea},VxeSwitch:{tableAutoFocus:"button",renderTableEdit:Pr,renderTableDefault:Pr},VxeUpload:{renderTableEdit:Pr,renderTableCell:Pr,renderTableDefault:Pr},VxeImage:{renderTableDefault(e,t,r){var{row:l,column:o}=r,i=t.props,l=Sr(l,o);return[e(_r(t),{props:{...i,src:l},on:Br(t,r)})]}},VxeImageGroup:{renderTableDefault(e,t,r){var{row:l,column:o}=r,i=t.props,l=Sr(l,o);return[e(_r(t),{props:{...i,urlList:l},on:Br(t,r)})]}},VxeTextEllipsis:{renderTableDefault(e,t,r){var{row:l,column:o}=r,i=t.props,l=Sr(l,o);return[e(_r(t),{props:{...i,content:l},on:Br(t,r)})]}},VxeRate:{renderTableDefault:Pr},VxeSlider:{renderTableDefault:Pr},$input:{tableAutoFocus:".vxe-input--inner",renderTableEdit:ta,renderTableCell(e,t,r){var{props:l={}}=t,{row:r,column:o}=r,i=l.digits||qt().input?.digits||2;let n=sr().get(r,o.field);if(n)switch(l.type){case"date":case"week":case"month":case"year":n=zn(n,l);break;case"float":n=sr().toFixed(sr().floor(n,i),i)}return Hr(e,t,0,n)},renderTableDefault:ta,renderTableFilter:function(l,o,i){return i.column.filters.map((e,t)=>{var r=e.data;return l(Nn(o),{key:t,props:Gn(o,0,r),on:Kn(o,i,e)})})},tableFilterDefaultMethod:aa},$textarea:{tableAutoFocus:".vxe-textarea--inner"},$button:{renderTableDefault:ra},$buttons:{renderTableDefault:function(t,e,r){return e.children.map(e=>ra(t,e,r)[0])}},$select:{tableAutoFocus:".vxe-input--inner",renderTableEdit:ua,renderTableDefault:ua,renderTableCell(e,t,r){return Hr(e,t,0,pa(t,r))},renderTableFilter(l,o,i){var e=i.column;let{options:n,optionProps:a,optionGroups:s,optionGroupProps:c}=o;return e.filters.map((e,t)=>{var r=e.data;return l(Nn(o),{key:t,props:Gn(o,0,r,{options:n,optionProps:a,optionGroups:s,optionGroupProps:c}),on:Kn(o,i,e)})})},tableFilterDefaultMethod:na,tableExportMethod:ha},$radio:{tableAutoFocus:".vxe-radio--input"},$checkbox:{tableAutoFocus:".vxe-checkbox--input"},$switch:{tableAutoFocus:".vxe-switch--button",renderTableEdit:ta,renderTableDefault:ta}});let Jt=!1,er=Object.assign({},Dn,{install(e){"undefined"!=typeof window&&(window.VxeTableExtendCellArea&&window.VxeTableExtendCellArea.use?window.VxeTableExtendCellArea.use(nr.VxeUI):window.VXETableMixin&&(Dn.mixins.push(window.VXETableMixin),delete window.VXETableMixin),window.VxeTableExtendPivotTable)&&window.VxeTableExtendPivotTable.use&&window.VxeTableExtendPivotTable.use(nr.VxeUI),"undefined"!=typeof window&&window.VxeTableExtendCellArea&&window.VxeTableExtendCellArea.init?(window.VxeTableExtendCellArea.init(nr.VxeUI),delete window.VxeTableExtendCellArea,delete window.VXETablePro):"undefined"!=typeof window&&window.VXETablePro&&window.VXETablePro.init&&(window.VXETablePro.init(nr.VxeUI),delete window.VXETablePro),Bn().prototype.$vxe?(Bn().prototype.$vxe.t=nr.VxeUI.t,Bn().prototype.$vxe._t=nr.VxeUI._t):Bn().prototype.$vxe={t:nr.VxeUI.t,_t:nr.VxeUI._t},Jt||(Jt=!0,nr.VxeUI.dynamicApp&&nr.VxeUI.dynamicApp.component(Dn.name,Dn)),e.component(Dn.name,Dn)}}),tr=(nr.VxeUI.component(Dn),er),rr=Object.assign({},In,{install(e){e.component(In.name,In)}}),lr=(nr.VxeUI.dynamicApp&&nr.VxeUI.dynamicApp.component(In.name,In),nr.VxeUI.component(In),rr),or=[Ce,ye,Ut,er,rr];function va(t,e){nr.VxeUI.setConfig(e),or.forEach(e=>e.install(t))}nr.VxeUI.hasLanguage("zh-CN")||(nr.VxeUI.setI18n("zh-CN",{vxe:{base:{pleaseInput:"请输入",pleaseSelect:"请选择",comma:"，",fullStop:"。"},loading:{text:"加载中..."},error:{downErr:"下载失败",errLargeData:"当绑定的数据量过大时，应该请使用 {0}，否则可能会出现卡顿",groupFixed:"如果使用分组表头，冻结列必须按组设置",groupMouseRange:'分组表头与 "{0}" 不能同时使用，这可能会出现错误',groupTag:'分组列头应该使用 "{0}" 而不是 "{1}"，这可能会出现错误',scrollErrProp:'启用虚拟滚动后不支持该参数 "{0}"',errConflicts:'参数 "{0}" 与 "{1}" 有冲突',notSupportProp:'当启用参数 "{0}" 时不支持 "{1}"，应该为 "{2}"，否则将会出现错误',notConflictProp:'当使用 "{0}" 时，应该设置 "{1}"，否则可能会存在功能冲突',unableInsert:"无法插入到指定位置，请检查参数是否正确",useErr:'安装 "{0}" 模块时发生错误，可能顺序不正确，依赖的模块需要在 Table 之前安装',barUnableLink:"工具栏无法关联表格",expandContent:'展开行的插槽应该是 "content"，请检查是否正确',reqComp:'缺少 "{0}" 组件，请检查是否正确安装。 https://vxeui.com/#/start/useGlobal',reqModule:'缺少 "{0}" 模块',reqProp:'缺少必要的 "{0}" 参数，这可能会导致出现错误',emptyProp:'参数 "{0}" 不允许为空',errProp:'不支持的参数 "{0}"，可能为 "{1}"',colRepet:'column.{0}="{1}" 重复了，这可能会导致某些功能无法使用',notFunc:'方法 "{0}" 不存在',errFunc:'参数 "{0}" 不是一个方法',notValidators:'全局校验 "{0}" 不存在',notFormats:'全局格式化 "{0}" 不存在',notCommands:'全局指令 "{0}" 不存在',notSlot:'插槽 "{0}" 不存在',noTree:'树结构不支持 "{0}"',notProp:'不支持的参数 "{0}"',checkProp:'当数据量过大时可能会导致复选框卡顿，建议设置参数 "{0}" 提升渲染速度',coverProp:'"{0}" 的参数 "{1}" 重复定义，这可能会出现错误',uniField:'字段名 "{0}" 重复定义，这可能会出现错误',repeatKey:'主键重复 {0}="{1}"，这可能会出现错误',delFunc:'方法 "{0}" 已废弃，请使用 "{1}"',delProp:'参数 "{0}" 已废弃，请使用 "{1}"',delEvent:'事件 "{0}" 已废弃，请使用 "{1}"',removeProp:'参数 "{0}" 已废弃，不建议使用，这可能会导致出现错误',errFormat:'全局的格式化内容应该使用 "VXETable.formats" 定义，挂载 "formatter={0}" 的方式已不建议使用',notType:'不支持的文件类型 "{0}"',notExp:"该浏览器不支持导入/导出功能",impFields:"导入失败，请检查字段名和数据格式是否正确",treeNotImp:"树表格不支持导入",treeCrossDrag:"只能拖拽第一层级",treeDragChild:"父级不能拖拽到自己的子级中",reqPlugin:'扩展插件未安装 "{1}" https://vxeui.com/other{0}/#/{1}/install',errMaxRow:"超过支持的最大数据量 {0} 行，这可能会导致出现错误"},table:{emptyText:"暂无数据",allTitle:"全选/取消",seqTitle:"序号",actionTitle:"操作",confirmFilter:"筛选",resetFilter:"重置",allFilter:"全部",sortAsc:"升序：最低到最高",sortDesc:"降序：最高到最低",filter:"对所选的列启用筛选",impSuccess:"成功导入 {0} 条记录",expLoading:"正在导出中",expSuccess:"导出成功",expError:"导出失败",expFilename:"导出_{0}",expOriginFilename:"导出_源_{0}",customTitle:"列设置",customAll:"全部",customConfirm:"确认",customClose:"关闭",customCancel:"取消",customRestore:"恢复默认",maxFixedCol:"最大冻结列的数量不能超过 {0} 个",dragTip:"移动：{0}",resizeColTip:"宽：{0} 像素",resizeRowTip:"高：{0} 像素",rowGroupContentTotal:"{0}（{1}）"},grid:{selectOneRecord:"请至少选择一条记录！",deleteSelectRecord:"您确定要删除所选记录吗？",removeSelectRecord:"您确定要移除所选记录吗？",dataUnchanged:"数据未改动！",delSuccess:"成功删除所选记录！",saveSuccess:"保存成功！",operError:"发生错误，操作失败！"},select:{search:"搜索",loadingText:"加载中",emptyText:"暂无数据"},pager:{goto:"前往",gotoTitle:"页数",pagesize:"{0}条/页",total:"共 {0} 条记录",pageClassifier:"页",homePage:"首页",homePageTitle:"首页",prevPage:"上一页",prevPageTitle:"上一页",nextPage:"下一页",nextPageTitle:"下一页",prevJump:"向上跳页",prevJumpTitle:"向上跳页",nextJump:"向下跳页",nextJumpTitle:"向下跳页",endPage:"末页",endPageTitle:"末页"},alert:{title:"系统提示"},button:{confirm:"确认",cancel:"取消",clear:"清除"},filter:{search:"搜索"},custom:{cstmTitle:"列设置",cstmRestore:"恢复默认",cstmCancel:"取消",cstmConfirm:"确定",cstmConfirmRestore:"请确认是否恢复成默认列配置？",cstmDragTarget:"移动：{0}",setting:{colSort:"排序",sortHelpTip:"点击并拖动图标可以调整列的排序",colTitle:"列标题",colResizable:"列宽（像素）",colVisible:"是否显示",colFixed:"冻结列",colFixedMax:"冻结列（最多 {0} 列）",fixedLeft:"左侧",fixedUnset:"不设置",fixedRight:"右侧"}},import:{modes:{covering:"覆盖方式（直接覆盖表格数据）",insert:"底部追加（在表格的底部追加新数据）",insertTop:"顶部追加（在表格的顶部追加新数据）",insertBottom:"底部追加（在表格的底部追加新数据）"},impTitle:"导入数据",impFile:"文件名",impSelect:"选择文件",impType:"文件类型",impOpts:"参数设置",impMode:"导入模式",impConfirm:"导入",impCancel:"取消"},export:{types:{csv:"CSV (逗号分隔)(*.csv)",html:"网页(*.html)",xml:"XML 数据(*.xml)",txt:"文本文件(制表符分隔)(*.txt)",xls:"Excel 97-2003 工作簿(*.xls)",xlsx:"Excel 工作簿(*.xlsx)",pdf:"PDF (*.pdf)"},modes:{empty:"空数据",current:"当前数据（当前页的数据）",selected:"选中数据（当前页选中的数据）",all:"全量数据（包括所有分页的数据）"},printTitle:"打印数据",expTitle:"导出数据",expName:"文件名",expNamePlaceholder:"请输入文件名",expSheetName:"标题",expSheetNamePlaceholder:"请输入标题",expType:"保存类型",expMode:"选择数据",expCurrentColumn:"全部字段",expColumn:"选择字段",expOpts:"参数设置",expOptHeader:"表头",expHeaderTitle:"是否需要表头",expOptFooter:"表尾",expFooterTitle:"是否需要表尾",expOptColgroup:"分组表头",expOptTitle:"列标题",expTitleTitle:"是否为列标题，否则显示为列的字段名",expColgroupTitle:"如果存在，则支持带有分组结构的表头",expOptMerge:"合并",expMergeTitle:"如果存在，则支持带有合并结构的单元格",expOptAllExpand:"展开树",expAllExpandTitle:"如果存在，则支持将带有层级结构的数据全部展开",expOptUseStyle:"样式",expUseStyleTitle:"如果存在，则支持带样式的单元格",expOptOriginal:"源数据",expOriginalTitle:"如果为源数据，则支持导入到表格中",expPrint:"打印",expConfirm:"导出",expCancel:"取消"},modal:{errTitle:"错误提示",zoomMin:"最小化",zoomIn:"最大化",zoomOut:"还原",close:"关闭",miniMaxSize:"最小化窗口的数量不能超过 {0} 个",footPropErr:"show-footer 仅用于启用表尾，需配合 show-confirm-button | show-cancel-button | 插槽使用"},drawer:{close:"关闭"},form:{folding:"收起",unfolding:"展开"},toolbar:{import:"导入",export:"导出",print:"打印",refresh:"刷新",zoomIn:"全屏",zoomOut:"还原",custom:"列设置",customAll:"全部",customConfirm:"确认",customRestore:"重置",fixedLeft:"冻结在左侧",fixedRight:"冻结在右侧",cancelFixed:"取消冻结列"},datePicker:{yearTitle:"{0} 年"},dateRangePicker:{pleaseRange:"请选择开始日期与结束日期"},input:{date:{m1:"01 月",m2:"02 月",m3:"03 月",m4:"04 月",m5:"05 月",m6:"06 月",m7:"07 月",m8:"08 月",m9:"09 月",m10:"10 月",m11:"11 月",m12:"12 月",quarterLabel:"{0} 年",monthLabel:"{0} 年",dayLabel:"{0} 年 {1}",labelFormat:{date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss",week:"yyyy 年第 WW 周",month:"yyyy-MM",quarter:"yyyy 年第 q 季度",year:"yyyy"},weeks:{w:"",w0:"周日",w1:"周一",w2:"周二",w3:"周三",w4:"周四",w5:"周五",w6:"周六"},months:{m0:"一月",m1:"二月",m2:"三月",m3:"四月",m4:"五月",m5:"六月",m6:"七月",m7:"八月",m8:"九月",m9:"十月",m10:"十一月",m11:"十二月"},quarters:{q1:"第一季度",q2:"第二季度",q3:"第三季度",q4:"第四季度"}}},numberInput:{currencySymbol:"¥"},imagePreview:{popupTitle:"预览",operBtn:{zoomOut:"缩小",zoomIn:"放大",pctFull:"等比例缩放",pct11:"显示原始尺寸",rotateLeft:"向左旋转",rotateRight:"向右旋转",print:"点击打印图片",download:"点击下载图片"}},upload:{fileBtnText:"点击或拖拽上传",imgBtnText:"点击或拖拽上传",dragPlaceholder:"请把文件拖放到这个区域即可上传",imgSizeHint:"单张{0}",imgCountHint:"最多{0}张",fileTypeHint:"支持 {0} 文件类型",fileSizeHint:"单个文件大小不超过{0}",fileCountHint:"最多可上传{0}个文件",uploadTypeErr:"文件类型不匹配！",overCountErr:"最多只能选择{0}个文件！",overCountExtraErr:"已超出最大数量{0}个，超出的{1}个文件将被忽略！",overSizeErr:"文件大小最大不能超过{0}！",reUpload:"重新上传",uploadProgress:"上传中 {0}%",uploadErr:"上传失败",uploadSuccess:"上传成功",moreBtnText:"更多（{0}）",viewItemTitle:"点击查看",morePopup:{readTitle:"查看列表",imageTitle:"上传图片",fileTitle:"上传文件"}},empty:{defText:"暂无数据"},colorPicker:{clear:"清除",confirm:"确认",copySuccess:"已复制到剪贴板：{0}"},formDesign:{formName:"表单名称",defFormTitle:"未命名的表单",widgetPropTab:"控件属性",widgetFormTab:"表单属性",error:{wdFormUni:"该类型的控件在表单中只允许添加一个",wdSubUni:"该类型的控件在子表中只允许添加一个"},styleSetting:{btn:"样式设置",title:"表单的样式设置",layoutTitle:"控件布局",verticalLayout:"上下布局",horizontalLayout:"横向布局",styleTitle:"标题样式",boldTitle:"标题加粗",fontBold:"加粗",fontNormal:"常规",colonTitle:"显示冒号",colonVisible:"显示",colonHidden:"隐藏",alignTitle:"对齐方式",widthTitle:"标题宽度",alignLeft:"居左",alignRight:"居右",unitPx:"像素",unitPct:"百分比"},widget:{group:{base:"基础控件",layout:"布局控件",system:"系统控件",module:"模块控件",chart:"图表控件",advanced:"高级控件"},copyTitle:"副本_{0}",component:{input:"输入框",textarea:"文本域",select:"下拉选择",row:"一行多列",title:"标题",text:"文本",subtable:"子表",VxeSwitch:"是/否",VxeInput:"输入框",VxeNumberInput:"数字",VxeDatePicker:"日期",VxeTextarea:"文本域",VxeSelect:"下拉选择",VxeTreeSelect:"树形选择",VxeRadioGroup:"单选框",VxeCheckboxGroup:"复选框",VxeUploadFile:"文件",VxeUploadImage:"图片",VxeRate:"评分",VxeSlider:"滑块"}},widgetProp:{name:"控件名称",placeholder:"提示语",required:"必填校验",multiple:"允许多选",displaySetting:{name:"显示设置",pc:"电脑端",mobile:"手机端",visible:"显示",hidden:"隐藏"},dataSource:{name:"数据源",defValue:"选项{0}",addOption:"添加选项",batchEditOption:"批量编辑",batchEditTip:"每行对应一个选项，支持从表格、Excel、WPS 中直接复制粘贴。",batchEditSubTip:"每行对应一个选项，如果是分组，子项可以是空格或制表键开头，支持从表格、Excel、WPS 中直接复制粘贴。",buildOption:"生成选项"},rowProp:{colSize:"列数",col2:"两列",col3:"三列",col4:"四列",col6:"六列",layout:"布局"},textProp:{name:"内容",alignTitle:"对齐方式",alignLeft:"居左",alignCenter:"居中",alignRight:"居右",colorTitle:"字体颜色",sizeTitle:"字体大小",boldTitle:"字体加粗",fontNormal:"常规",fontBold:"加粗"},subtableProp:{seqTitle:"序号",showSeq:"显示序号",showCheckbox:"允许多选",errSubDrag:"子表不支持该控件，请使用其他控件",colPlace:"将控件拖拽进来"},uploadProp:{limitFileCount:"文件数量限制",limitFileSize:"文件大小限制",multiFile:"允许上传多个文件",limitImgCount:"图片数量限制",limitImgSize:"图片大小限制",multiImg:"允许上传多张图片"}}},listDesign:{fieldSettingTab:"字段设置",listSettingTab:"参数设置",searchTitle:"查询条件",listTitle:"列表字段",searchField:"查询字段",listField:"列表字段",activeBtn:{ActionButtonUpdate:"编辑",ActionButtonDelete:"删除"},search:{addBtn:"编辑",emptyText:"未配置查询条件",editPopupTitle:"编辑查询字段"},searchPopup:{colTitle:"标题",saveBtn:"保存"}},text:{copySuccess:"已复制到剪贴板",copyError:"当前环境不支持该操作"},countdown:{formats:{yyyy:"年",MM:"月",dd:"天",HH:"时",mm:"分",ss:"秒"}},plugins:{extendCellArea:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",selectErr:"无法操作指定区域的单元格",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作",cpInvalidErr:"该操作无法进行，您选择的区域中存在被禁止的列（{0}）"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},body:{row:"行：{0}",col:"列：{0}"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},filterComplexInput:{menus:{fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧"},cases:{equal:"等于",gt:"大于",lt:"小于",begin:"开头是",endin:"结尾是",include:"包含",isSensitive:"区分大小写"}},filterCombination:{menus:{sort:"排序",clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},empty:"(空白)",notData:"无匹配项"}},pro:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},renderer:{search:"搜索",cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},combination:{menus:{sort:"排序",clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结到左侧",fixedRight:"冻结到右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},empty:"(空白)",notData:"无匹配项"}}}}),nr.VxeUI.setLanguage("zh-CN")),nr.VxeUI.setTheme("light"),"undefined"!=typeof window&&window.Vue&&window.Vue.use(qr);var xa=qr;return Gr}});