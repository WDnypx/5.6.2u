{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\order\\orderList\\components\\tableList.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\order\\orderList\\components\\tableList.vue","mtime":1747128746874},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBleHBhbmRSb3cgZnJvbSAnLi90YWJsZUV4cGFuZC52dWUnOwppbXBvcnQgcHJpbnRKUyBmcm9tICdwcmludC1qcyc7CmltcG9ydCB7CiAgb3JkZXJMaXN0LAogIGdldE9yZGVEYXRhcywKICBnZXREYXRhSW5mbywKICBnZXRSZWZ1bmRGcm9tLAogIGdldG5vUmVmdW5kLAogIHJlZnVuZEludGVncmFsLAogIGdldERpc3RyaWJ1dGlvbiwKICB3cml0ZVVwZGF0ZSwKICBzaGlwbWVudENhbmNlbE9yZGVyLAogIHB1dFdyaXRlLAogIGltcG9ydEV4cHJlc3MsCn0gZnJvbSAnQC9hcGkvb3JkZXInOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBlZGl0RnJvbSBmcm9tICcuLi8uLi8uLi8uLi9jb21wb25lbnRzL2Zyb20vZnJvbSc7CmltcG9ydCBkZXRhaWxzRnJvbSBmcm9tICcuLi9oYW5kbGUvb3JkZXJEZXRhaWxzJzsKaW1wb3J0IG9yZGVyUmVtYXJrIGZyb20gJy4uL2hhbmRsZS9vcmRlclJlbWFyayc7CmltcG9ydCBvcmRlclNlbmQgZnJvbSAnLi4vaGFuZGxlL29yZGVyU2VuZCc7CmltcG9ydCBvcmRlclJlZnVuZCBmcm9tICcuLi9oYW5kbGUvb3JkZXJSZWZ1bmQnOwppbXBvcnQgb3JkZXJTaGlwbWVudCBmcm9tICcuLi9oYW5kbGUvb3JkZXJTaGlwbWVudCc7CmltcG9ydCB7IGV4cG9ydE9yZGVyTGlzdCwgZXhwb3J0T3JkZXJEZWxpdmVyeUxpc3QgfSBmcm9tICdAYXBpL2V4cG9ydCc7CmltcG9ydCBTZXR0aW5nIGZyb20gJ0Avc2V0dGluZyc7CmltcG9ydCB7IGdldENvb2tpZXMgfSBmcm9tICdAL2xpYnMvdXRpbCc7CmltcG9ydCBjcmVhdGVXb3JrQm9vayBmcm9tICdAL3ZlbmRvci9uZXdUb0V4Y2VsLmpzJzsKaW1wb3J0IHsgaXNGaWxlVXBsb2FkIH0gZnJvbSAnQC91dGlscyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3RhYmxlX2xpc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIGV4cGFuZFJvdywKICAgIGVkaXRGcm9tLAogICAgZGV0YWlsc0Zyb20sCiAgICBvcmRlclJlbWFyaywKICAgIG9yZGVyU2VuZCwKICAgIG9yZGVyU2hpcG1lbnQsCiAgICBvcmRlclJlZnVuZCwKICB9LAogIGRhdGEoKSB7CiAgICBjb25zdCBjb2RlTnVtID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35aGr5YaZ5qC46ZSA56CBJykpOwogICAgICB9CiAgICAgIC8vIOaooeaLn+W8guatpemqjOivgeaViOaenAogICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7floavlhpkxMuS9jeaVsOWtlycpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCByZWcgPSAvXGJcZHsxMn1cYi87CiAgICAgICAgaWYgKCFyZWcudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35aGr5YaZMTLkvY3mlbDlrZcnKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgYmF0Y2hTaGlwbWVudE1vZGFsOiBmYWxzZSwKICAgICAgZXhwcmVzc1VybDogU2V0dGluZy5hcGlCYXNlVVJMICsgJy9maWxlL3VwbG9hZC8xJywKICAgICAgaGVhZGVyOiB7fSwKICAgICAgZGVsZnJvbURhdGE6IHt9LAogICAgICBtb2RhbDogZmFsc2UsCiAgICAgIG9yZGVyTGlzdDogW10sCiAgICAgIG9yZGVyQ2FyZHM6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgb3JkZXJJZDogMCwKICAgICAgdG90YWxfbnVtOiAwLAogICAgICB2aXJ0dWFsX3R5cGU6IDAsCiAgICAgIHN0YXR1czogMCwKICAgICAgcGF5X3R5cGU6ICcnLAoKICAgICAgdG90YWw6IDAsIC8vIOaAu+adoeaVsAogICAgICBwYWdlOiB7CiAgICAgICAgcGFnZTogMSwgLy8g5b2T5YmN6aG1CiAgICAgICAgbGltaXQ6IDE1LCAvLyDmr4/pobXmmL7npLrmnaHmlbAKICAgICAgfSwKICAgICAgZGF0YTogW10sCiAgICAgIEZyb21EYXRhOiBudWxsLAogICAgICBvcmRlckRhdGFsaXN0OiBudWxsLAogICAgICAvLyBtb2RhbFRpdGxlU3M6ICcnLAogICAgICBzZWxlY3RlZElkczogW10sIC8v6YCJ5Lit5ZCI5bm26aG555qEaWQKICAgICAgY3VycmVudFRhYjogJ251bGwnLAogICAgICBzcGluU2hvdzogZmFsc2UsCiAgICAgIHRhYmxpc3RzOiB7CiAgICAgICAgYWxsOiAnMCcsCiAgICAgICAgZ2VuZXJhbDogJzAnLAogICAgICAgIHBpbms6ICcwJywKICAgICAgICBzZWNraWxsOiAnMCcsCiAgICAgICAgYmFyZ2FpbjogJzAnLAogICAgICAgIGFkdmFuY2U6ICcwJywKICAgICAgfSwKICAgICAgd3JpdGVPZmZSdWxlczogewogICAgICAgIGNvZGU6IFt7IHZhbGlkYXRvcjogY29kZU51bSwgdHJpZ2dlcjogJ2JsdXInLCByZXF1aXJlZDogdHJ1ZSB9XSwKICAgICAgfSwKICAgICAgd3JpdGVPZmZGcm9tOiB7CiAgICAgICAgY29kZTogJycsCiAgICAgICAgY29uZmlybTogMCwKICAgICAgfSwKICAgICAgbW9kYWxzMjogZmFsc2UsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdvcmRlcicsIFsKICAgICAgJ29yZGVyUGF5VHlwZScsCiAgICAgICdvcmRlclN0YXR1cycsCiAgICAgICdvcmRlclRpbWUnLAogICAgICAncmVhbF9uYW1lJywKICAgICAgJ2ZpZWxkS2V5JywKICAgICAgJ29yZGVyVHlwZScsCiAgICAgICdkZWxJZExpc3QnLAogICAgICAnaXNEZWxzJywKICAgICAgJ29yZGVyQ2hhcnRUeXBlJywKICAgIF0pLAogIH0sCiAgbW91bnRlZCgpIHt9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFRhYnMoKTsKICAgIHRoaXMub25DaGFuZ2VUYWJzKCcnKTsKICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgdGhpcy5nZXRUb2tlbigpOwogIH0sCiAgd2F0Y2g6IHsKICAgIG9yZGVyVHlwZTogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnBhZ2UucGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcE11dGF0aW9ucygnb3JkZXInLCBbJ2dldE9yZGVyU3RhdHVzJywgJ29uQ2hhbmdlVGFicycsICdnZXRJc0RlbCcsICdnZXRpc0RlbElkTGlzdGwnXSksCiAgICBiYXRjaFNoaXBtZW50KCkge30sCiAgICBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICByZXR1cm4gaXNGaWxlVXBsb2FkKGZpbGUpOwogICAgfSwKICAgIC8vIOaTjeS9nAogICAgY2hhbmdlTWVudShyb3csIG5hbWUpIHsKICAgICAgdGhpcy5vcmRlcklkID0gcm93LmlkOwogICAgICBzd2l0Y2ggKG5hbWUpIHsKICAgICAgICBjYXNlICcxJzoKICAgICAgICAgIHRoaXMuZGVsZnJvbURhdGEgPSB7CiAgICAgICAgICAgIHRpdGxlOiAn5L+u5pS56K6i5Y2V5Li65bey5pSv5LuYJywKICAgICAgICAgICAgdXJsOiBgL29yZGVyL3BheV9vZmZsaW5lLyR7cm93LmlkfWAsCiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgICBpZHM6ICcnLAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuJG1vZGFsU3VyZSh0aGlzLmRlbGZyb21EYXRhKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZUdldFRhYnMnKTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIC8vIHRoaXMubW9kYWxUaXRsZVNzID0gJ+S/ruaUueeri+WNs+aUr+S7mCc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICcyJzoKICAgICAgICAgIHRoaXMuZ2V0RGF0YShyb3cuaWQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnNCc6CiAgICAgICAgICB0aGlzLiRyZWZzLnJlbWFya3MubW9kYWxzID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuJHJlZnMucmVtYXJrcy5mb3JtVmFsaWRhdGUucmVtYXJrID0gcm93LnJlbWFyazsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJzUnOgogICAgICAgICAgLy8gdGhpcy5nZXRSZWZ1bmREYXRhKHJvdy5pZCk7CiAgICAgICAgICB0aGlzLiRyZWZzLnJlZnVuZC50b3RhbF9udW0gPSByb3cudG90YWxfbnVtOwogICAgICAgICAgdGhpcy4kcmVmcy5yZWZ1bmQub3JkZXJfaWQgPSByb3cub3JkZXJfaWQ7CiAgICAgICAgICB0aGlzLiRyZWZzLnJlZnVuZC5mb3JtSXRlbS5yZWZ1bmRfcHJpY2UgPSByb3cucGF5X3ByaWNlOwogICAgICAgICAgdGhpcy52aXJ0dWFsX3R5cGUgPSByb3cudmlydHVhbF90eXBlOwogICAgICAgICAgdGhpcy4kcmVmcy5yZWZ1bmQubW9kYWxzID0gdHJ1ZTsKICAgICAgICAgIHRoaXMub3JkZXJJZCA9IHJvdy5pZDsKICAgICAgICAgIHRoaXMuc3RhdHVzID0gcm93Ll9zdGF0dXM7CiAgICAgICAgICB0aGlzLnBheV90eXBlID0gcm93LnBheV90eXBlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy8gY2FzZSAnNic6CiAgICAgICAgLy8gICB0aGlzLmdldFJlZnVuZEludGVncmFsKHJvdy5pZCk7CiAgICAgICAgLy8gICBicmVhazsKICAgICAgICAvLyBjYXNlICc3JzoKICAgICAgICAvLyAgIHRoaXMuZ2V0Tm9SZWZ1bmREYXRhKHJvdy5pZCk7CiAgICAgICAgLy8gICBicmVhazsKICAgICAgICBjYXNlICc4JzoKICAgICAgICAgIHRoaXMuZGVsZnJvbURhdGEgPSB7CiAgICAgICAgICAgIHRpdGxlOiAn5L+u5pS556Gu6K6k5pS26LSnJywKICAgICAgICAgICAgdXJsOiBgL29yZGVyL3Rha2UvJHtyb3cuaWR9YCwKICAgICAgICAgICAgbWV0aG9kOiAncHV0JywKICAgICAgICAgICAgaWRzOiAnJywKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLiRtb2RhbFN1cmUodGhpcy5kZWxmcm9tRGF0YSkKICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIC8vIHRoaXMubW9kYWxUaXRsZVNzID0gJ+S/ruaUueehruiupOaUtui0pyc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICcxMCc6CiAgICAgICAgICB0aGlzLmRlbGZyb21EYXRhID0gewogICAgICAgICAgICB0aXRsZTogJ+eri+WNs+aJk+WNsOiuouWNlScsCiAgICAgICAgICAgIHVybDogYC9vcmRlci9wcmludC8ke3Jvdy5pZH1gLAogICAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgICBpZHM6ICcnLAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuJG1vZGFsU3VyZSh0aGlzLmRlbGZyb21EYXRhKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZUdldFRhYnMnKTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJzExJzoKICAgICAgICAgIHRoaXMuZGVsZnJvbURhdGEgPSB7CiAgICAgICAgICAgIHRpdGxlOiAn56uL5Y2z5omT5Y2w55S15a2Q6Z2i5Y2VJywKICAgICAgICAgICAgaW5mbzogJ+aCqOehruiupOaJk+WNsOatpOeUteWtkOmdouWNleWQlz8nLAogICAgICAgICAgICB1cmw6IGAvb3JkZXIvb3JkZXJfZHVtcC8ke3Jvdy5pZH1gLAogICAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgICBpZHM6ICcnLAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuJG1vZGFsU3VyZSh0aGlzLmRlbGZyb21EYXRhKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnMTInOgogICAgICAgICAgdGhpcy5wcmludEltZyhyb3cua3VhaWRpX2xhYmVsKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJzEzJzoKICAgICAgICAgIGxldCBwYXRoSW5mbyA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsKICAgICAgICAgICAgcGF0aDogU2V0dGluZy5yb3V0ZVByZSArICcvb3JkZXIvcHJpbnQnLAogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIGlkOiByb3cub3JkZXJfaWQsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICAgIHdpbmRvdy5vcGVuKHBhdGhJbmZvLmhyZWYsICdfYmxhbmsnKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aGlzLmRlbGZyb21EYXRhID0gewogICAgICAgICAgICB0aXRsZTogJ+WIoOmZpOiuouWNlScsCiAgICAgICAgICAgIHVybDogYC9vcmRlci9kZWwvJHtyb3cuaWR9YCwKICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJywKICAgICAgICAgICAgaWRzOiAnJywKICAgICAgICAgIH07CiAgICAgICAgICAvLyB0aGlzLm1vZGFsVGl0bGVTcyA9ICfliKDpmaTorqLljZUnOwogICAgICAgICAgdGhpcy5kZWxPcmRlcihyb3csIHRoaXMuZGVsZnJvbURhdGEpOwogICAgICB9CiAgICB9LAogICAgc2hpcG1lbnRDbGVhcihyb3cpIHsKICAgICAgdGhpcy5vcmRlcklkID0gcm93LmlkOwogICAgICB0aGlzLiRyZWZzLnNoaXBtZW50Lm1vZGFscyA9IHRydWU7CiAgICB9LAogICAgcHJpbnRJbWcodXJsKSB7CiAgICAgIHByaW50SlMoewogICAgICAgIHByaW50YWJsZTogdXJsLAogICAgICAgIHR5cGU6ICdpbWFnZScsCiAgICAgICAgZG9jdW1lbnRUaXRsZTogJ+W/q+mAkuS/oeaBrycsCiAgICAgICAgc3R5bGU6IGBpbWd7CiAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgIGhlaWdodDogNDc2cHg7CiAgICAgICAgfWAsCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOeri+WNs+aUr+S7mCAv56Gu6K6k5pS26LSnLy/liKDpmaTljZXmnaHorqLljZUKICAgIHN1Ym1pdE1vZGVsKCkgewogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDorqLljZXliJfooagKICAgIGdldExpc3QocmVzKSB7CiAgICAgIHRoaXMucGFnZS5wYWdlID0gcmVzID09PSAxID8gMSA6IHRoaXMucGFnZS5wYWdlOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBvcmRlckxpc3QoewogICAgICAgIHBhZ2U6IHRoaXMucGFnZS5wYWdlLAogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2UubGltaXQsCiAgICAgICAgc3RhdHVzOiB0aGlzLm9yZGVyU3RhdHVzLAogICAgICAgIHBheV90eXBlOiB0aGlzLm9yZGVyUGF5VHlwZSwKICAgICAgICBkYXRhOiB0aGlzLm9yZGVyVGltZSwKICAgICAgICByZWFsX25hbWU6IHRoaXMucmVhbF9uYW1lLAogICAgICAgIGZpZWxkX2tleTogdGhpcy5maWVsZEtleSwKICAgICAgICB0eXBlOiB0aGlzLm9yZGVyVHlwZSA9PT0gMCA/ICcnIDogdGhpcy5vcmRlclR5cGUsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMub3JkZXJMaXN0ID0gZGF0YS5kYXRhOwogICAgICAgICAgdGhpcy5vcmRlckNhcmRzID0gZGF0YS5zdGF0OwogICAgICAgICAgdGhpcy50b3RhbCA9IGRhdGEuY291bnQ7CiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIC8v56Gu5L+dZG9t5Yqg6L295a6M5q+VCiAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZCgpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRlbWl0KCdvbi1jaGFuZ2VDYXJkcycsIGRhdGEuc3RhdCk7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0Um93KHNlbGVjdGlvbikgewogICAgICBsZXQgaWRzID0gW107CiAgICAgIHNlbGVjdGlvbi5tYXAoKGUpID0+IHsKICAgICAgICBpZHMucHVzaChlLmlkKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc2VsZWN0ZWRJZHMgPSBpZHM7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAvL+ehruS/nWRvbeWKoOi9veWujOavlQogICAgICAgIHRoaXMuc2V0Q2hlY2tlZCgpOwogICAgICB9KTsKICAgIH0sCiAgICBzZXRDaGVja2VkKCkgewogICAgICAvL+Wwhm5ldyBTZXQoKei9rOWMluS4uuaVsOe7hAogICAgICBsZXQgaWRzID0gWy4uLnRoaXMuc2VsZWN0ZWRJZHNdOwogICAgICB0aGlzLmdldGlzRGVsSWRMaXN0bChpZHMpOwogICAgICAvLyDmib7liLDnu5HlrprnmoR0YWJsZeeahHJlZuWvueW6lOeahGRvbe+8jOaJvuWIsHRhYmxl55qEb2JqRGF0YeWvueixoe+8jG9iakRhdGHkv53lrZjnmoTmmK/lvZPliY3pobXnmoTmlbDmja4KICAgICAgbGV0IG9iakRhdGEgPSB0aGlzLiRyZWZzLnRhYmxlLm9iakRhdGE7CiAgICAgIGZvciAobGV0IGluZGV4IGluIG9iakRhdGEpIHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZElkcy5oYXMob2JqRGF0YVtpbmRleF0uaWQpKSB7CiAgICAgICAgICBvYmpEYXRhW2luZGV4XS5faXNDaGVja2VkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBpc0RlbChzZWxlY3Rpb24pIHsKICAgICAgaWYgKHNlbGVjdGlvbi5maW5kSW5kZXgoKHRhcmdldCkgPT4gdGFyZ2V0LmlzX2RlbCA9PT0gMCkgPT0gLTEpIHsKICAgICAgICB0aGlzLmdldElzRGVsKDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZ2V0SXNEZWwoMCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnvJbovpEKICAgIGVkaXQocm93KSB7CiAgICAgIHRoaXMuZ2V0T3JkZXJEYXRhKHJvdy5pZCk7CiAgICB9LAogICAgLy8g5Yig6Zmk5Y2V5p2h6K6i5Y2VCiAgICBkZWxPcmRlcihyb3csIGRhdGEpIHsKICAgICAgaWYgKHJvdy5pc19kZWwgPT09IDEpIHsKICAgICAgICB0aGlzLiRtb2RhbFN1cmUoZGF0YSkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5oKo6YCJ5oup55qE55qE6K6i5Y2V5a2Y5Zyo55So5oi35pyq5Yig6Zmk55qE6K6i5Y2V77yM5peg5rOV5Yig6Zmk55So5oi35pyq5Yig6Zmk55qE6K6i5Y2V77yBJyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDojrflj5bnvJbovpHooajljZXmlbDmja4KICAgIGdldE9yZGVyRGF0YShpZCkgewogICAgICBnZXRPcmRlRGF0YXMoaWQpCiAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgdGhpcy5Gcm9tRGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy4kcmVmcy5lZGl0cy5tb2RhbHMgPSB0cnVlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W6K+m5oOF6KGo5Y2V5pWw5o2uCiAgICBnZXREYXRhKGlkKSB7CiAgICAgIGdldERhdGFJbmZvKGlkKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMuZGV0YWlscy5tb2RhbHMgPSB0cnVlOwogICAgICAgICAgdGhpcy5vcmRlckRhdGFsaXN0ID0gcmVzLmRhdGE7CiAgICAgICAgICBpZiAodGhpcy5vcmRlckRhdGFsaXN0Lm9yZGVySW5mby5yZWZ1bmRfcmVhc29uX3dhcF9pbWcpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICB0aGlzLm9yZGVyRGF0YWxpc3Qub3JkZXJJbmZvLnJlZnVuZF9yZWFzb25fd2FwX2ltZyA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgICB0aGlzLm9yZGVyRGF0YWxpc3Qub3JkZXJJbmZvLnJlZnVuZF9yZWFzb25fd2FwX2ltZywKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgdGhpcy5vcmRlckRhdGFsaXN0Lm9yZGVySW5mby5yZWZ1bmRfcmVhc29uX3dhcF9pbWcgPSBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g5L+u5pS55oiQ5YqfCiAgICBzdWJtaXRGYWlsKCkgewogICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlR2V0VGFicycpOwogICAgfSwKICAgIC8vIOiOt+WPlumAgOasvuihqOWNleaVsOaNrgogICAgZ2V0UmVmdW5kRGF0YShpZCkgewogICAgICB0aGlzLiRtb2RhbEZvcm0oZ2V0UmVmdW5kRnJvbShpZCkpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZUdldFRhYnMnKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W6YCA56ev5YiG6KGo5Y2V5pWw5o2uCiAgICBnZXRSZWZ1bmRJbnRlZ3JhbChpZCkgewogICAgICByZWZ1bmRJbnRlZ3JhbChpZCkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLkZyb21EYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLiRyZWZzLmVkaXRzLm1vZGFscyA9IHRydWU7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDkuI3pgIDmrL7ooajljZXmlbDmja4KICAgIGdldE5vUmVmdW5kRGF0YShpZCkgewogICAgICB0aGlzLiRtb2RhbEZvcm0oZ2V0bm9SZWZ1bmQoaWQpKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB0aGlzLiRlbWl0KCdjaGFuZ2VHZXRUYWJzJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWPkemAgei0pwogICAgc2VuZE9yZGVyKHJvdykgewogICAgICBpZiAocm93LnVzZXJfYWRkcmVzcykgewogICAgICAgIHRoaXMuJHJlZnMuc2VuZC51c2VyU2VuZG1zZyA9IHsKICAgICAgICAgIHJlYWxfbmFtZTogcm93LnJlYWxfbmFtZSwKICAgICAgICAgIHVzZXJfYWRkcmVzczogcm93LnVzZXJfYWRkcmVzcywKICAgICAgICAgIHVzZXJfcGhvbmU6IHJvdy51c2VyX3Bob25lLAogICAgICAgIH07CiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy5zZW5kLnRvdGFsX251bSA9IHJvdy50b3RhbF9udW07CiAgICAgIHRoaXMudmlydHVhbF90eXBlID0gcm93LnZpcnR1YWxfdHlwZTsKICAgICAgdGhpcy4kcmVmcy5zZW5kLm1vZGFscyA9IHRydWU7CiAgICAgIHRoaXMub3JkZXJJZCA9IHJvdy5pZDsKICAgICAgdGhpcy5zdGF0dXMgPSByb3cuX3N0YXR1czsKICAgICAgdGhpcy5wYXlfdHlwZSA9IHJvdy5wYXlfdHlwZTsKICAgICAgdGhpcy4kcmVmcy5zZW5kLmdldExpc3QoKTsKICAgICAgdGhpcy4kcmVmcy5zZW5kLmdldERlbGl2ZXJ5TGlzdCgpOwogICAgICB0aGlzLiRuZXh0VGljaygoZSkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuc2VuZC5nZXRDYXJ0SW5mbyhyb3cuX3N0YXR1cywgcm93LmlkKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6YWN6YCB5L+h5oGv6KGo5Y2V5pWw5o2uCiAgICBkZWxpdmVyeShyb3cpIHsKICAgICAgZ2V0RGlzdHJpYnV0aW9uKHJvdy5pZCkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLkZyb21EYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLiRyZWZzLmVkaXRzLm1vZGFscyA9IHRydWU7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDmoLjplIDorqLljZUKICAgIGJpbmRXcml0ZShyb3cpIHsKICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICB0aGlzLiRtc2dib3goewogICAgICAgIHRpdGxlOiAn5o+Q56S6JywKICAgICAgICBtZXNzYWdlOiAn56Gu5a6a6KaB5qC46ZSA6K+l6K6i5Y2V5ZCX77yfJywKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBpY29uQ2xhc3M6ICdlbC1pY29uLXdhcm5pbmcnLAogICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogJ2J0bi1jdXN0b20tY2FuY2VsJywKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB3cml0ZVVwZGF0ZShyb3cub3JkZXJfaWQpCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICBzZWxmLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICAgICAgc2VsZi5nZXRMaXN0KCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgICAgc2VsZi4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4ge30pOwogICAgfSwKICAgIC8vIOiuouWNleexu+WeiyAgQG9uLWNoYW5nZVRhYnM9ImdldENoYW5nZVRhYnMiCiAgICBnZXRUYWJzKCkgewogICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgdGhpcy4kc3RvcmUKICAgICAgICAuZGlzcGF0Y2goJ29yZGVyL2dldE9yZGVyVGFicycsIHsKICAgICAgICAgIGRhdGE6ICcnLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy50YWJsaXN0cyA9IHJlcy5kYXRhOwogICAgICAgICAgLy8gdGhpcy5vbkNoYW5nZUNoYXJ0KHRoaXMudGFibGlzdHMpCiAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBvbkNsaWNrVGFiKCkgewogICAgICB0aGlzLmdldE9yZGVyU3RhdHVzKHRoaXMuY3VycmVudFRhYiA9PSAnbnVsbCcgPyAnJyA6IHRoaXMuY3VycmVudFRhYik7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8vIOaJuemHj+WIoOmZpAogICAgZGVsQWxsKCkgewogICAgICBpZiAodGhpcy5kZWxJZExpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35YWI6YCJ5oup5Yig6Zmk55qE6K6i5Y2V77yBJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuaXNEZWxzKSB7CiAgICAgICAgICBsZXQgaWRzcyA9IHsKICAgICAgICAgICAgaWRzOiB0aGlzLmRlbElkTGlzdCwKICAgICAgICAgIH07CiAgICAgICAgICBsZXQgZGVsZnJvbURhdGEgPSB7CiAgICAgICAgICAgIHRpdGxlOiAn5Yig6Zmk6K6i5Y2VJywKICAgICAgICAgICAgdXJsOiBgL29yZGVyL2RlbHNgLAogICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgaWRzOiBpZHNzLAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuJG1vZGFsU3VyZShkZWxmcm9tRGF0YSkKICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5oKo6YCJ5oup55qE55qE6K6i5Y2V5a2Y5Zyo55So5oi35pyq5Yig6Zmk55qE6K6i5Y2V77yM5peg5rOV5Yig6Zmk55So5oi35pyq5Yig6Zmk55qE6K6i5Y2V77yBJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5LiL6L295om56YeP5Y+R6LSn5qih54mICiAgICBhc3luYyBleHBvcnREZWxpdmVyeUxpc3QoKSB7CiAgICAgIGxldCBbdGgsIGZpbGVrZXksIGRhdGEsIGZpbGVOYW1lXSA9IFtbXSwgW10sIFtdLCAnJ107CiAgICAgIGxldCBkZWxpdmVyeURhdGEgPSB7IHBhZ2U6IDEsIGxpbWl0OiAyMDAgfTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWxpdmVyeURhdGEucGFnZSArIDE7IGkrKykgewogICAgICAgIGxldCBleHByZXNzRGF0YSA9IGF3YWl0IHRoaXMuZ2V0RGVsaXZlcnlEYXRhKGRlbGl2ZXJ5RGF0YSk7CiAgICAgICAgaWYgKCFmaWxlTmFtZSkgZmlsZU5hbWUgPSBleHByZXNzRGF0YS5maWxlbmFtZTsKICAgICAgICBpZiAoIWZpbGVrZXkubGVuZ3RoKSB7CiAgICAgICAgICBmaWxla2V5ID0gZXhwcmVzc0RhdGEuZmlsZUtleTsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aC5sZW5ndGgpIHRoID0gZXhwcmVzc0RhdGEuaGVhZGVyOwogICAgICAgIGlmIChleHByZXNzRGF0YS5leHBvcnQubGVuZ3RoKSB7CiAgICAgICAgICBkYXRhID0gZGF0YS5jb25jYXQoZXhwcmVzc0RhdGEuZXhwb3J0KTsKICAgICAgICAgIGRlbGl2ZXJ5RGF0YS5wYWdlKys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGV4cG9ydEV4Y2VsKHRoLCBmaWxla2V5LCBmaWxlTmFtZSwgZGF0YSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZ2V0RGVsaXZlcnlEYXRhKGRlbGl2ZXJ5RGF0YSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGV4cG9ydE9yZGVyRGVsaXZlcnlMaXN0KGRlbGl2ZXJ5RGF0YSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICByZXNvbHZlKHJlcy5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5LiK5Lyg5aS06YOodG9rZW4KICAgIGdldFRva2VuKCkgewogICAgICB0aGlzLmhlYWRlclsnQXV0aG9yaS16YXRpb24nXSA9ICdCZWFyZXIgJyArIGdldENvb2tpZXMoJ3Rva2VuJyk7CiAgICB9LAogICAgdXBFeHByZXNzKGRhdGEpIHsKICAgICAgaW1wb3J0RXhwcmVzcyh7IGZpbGU6IGRhdGEuZGF0YS5zcmMgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOWvvOWHugogICAgYXN5bmMgZXhwb3J0TGlzdCgpIHsKICAgICAgbGV0IGV4Y2VsRGF0YSA9IHsKICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICBsaW1pdDogMTAwLAogICAgICAgICAgc3RhdHVzOiB0aGlzLm9yZGVyU3RhdHVzLAogICAgICAgICAgcGF5X3R5cGU6IHRoaXMub3JkZXJQYXlUeXBlLAogICAgICAgICAgZGF0YTogdGhpcy5vcmRlclRpbWUsCiAgICAgICAgICByZWFsX25hbWU6IHRoaXMucmVhbF9uYW1lLAogICAgICAgICAgZmllbGRfa2V5OiB0aGlzLmZpZWxkS2V5LAogICAgICAgICAgdHlwZTogdGhpcy5vcmRlclR5cGUgPT09IDAgPyAnJyA6IHRoaXMub3JkZXJUeXBlLAogICAgICAgICAgaWRzOiB0aGlzLmRlbElkTGlzdCwKICAgICAgICB9LAogICAgICAgIGRhdGEgPSBbXSwKICAgICAgICBsZWJEYXRhID0ge307CiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgZXhjZWxEYXRhLnBhZ2UgKyAxOyBpKyspIHsKICAgICAgICBsZWJEYXRhID0gYXdhaXQgdGhpcy5nZXRFeGNlbERhdGEoZXhjZWxEYXRhKTsKICAgICAgICBpZiAobGViRGF0YS5leHBvcnQubGVuZ3RoKSB7CiAgICAgICAgICBkYXRhID0gZGF0YS5jb25jYXQobGViRGF0YS5leHBvcnQpOwogICAgICAgICAgaWYgKGxlYkRhdGEuZXhwb3J0Lmxlbmd0aCA9PSBleGNlbERhdGEubGltaXQpIGV4Y2VsRGF0YS5wYWdlKys7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNyZWF0ZVdvcmtCb29rKGxlYkRhdGEuaGVhZGVyLCBsZWJEYXRhLmZpbGVuYW1lLCBkYXRhLCAnJywgbGViRGF0YS5maWxlbmFtZSk7CiAgICB9LAogICAgZ2V0RXhjZWxEYXRhKGV4Y2VsRGF0YSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGV4cG9ydE9yZGVyTGlzdChleGNlbERhdGEpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgcmVzb2x2ZShyZXMuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiuouWNleaguOmUgAogICAgd3JpdGVPZmYoKSB7CiAgICAgIHRoaXMubW9kYWxzMiA9IHRydWU7CiAgICB9LAogICAgLy8g6K6i5Y2V5qC46ZSACiAgICBvayhuYW1lKSB7CiAgICAgIGlmICghdGhpcy53cml0ZU9mZkZyb20uY29kZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+35YWI6aqM6K+B6K6i5Y2V77yBJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy53cml0ZU9mZkZyb20uY29uZmlybSA9IDE7CiAgICAgICAgcHV0V3JpdGUodGhpcy53cml0ZU9mZkZyb20pCiAgICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICAgICAgdGhpcy5tb2RhbHMyID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kcmVmc1tuYW1lXS5yZXNldEZpZWxkcygpOwogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBkZWwobmFtZSkgewogICAgICB0aGlzLm1vZGFsczIgPSBmYWxzZTsKICAgICAgdGhpcy53cml0ZU9mZkZyb20uY29kZSA9ICcnOwogICAgICB0aGlzLiRyZWZzW25hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgY2hhbmdlTW9kYWwoKSB7CiAgICAgIHRoaXMud3JpdGVPZmZGcm9tLmNvZGUgPSAnJzsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["tableList.vue"],"names":[],"mappings":";AA+VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tableList.vue","sourceRoot":"src/pages/order/orderList/components","sourcesContent":["<template>\n  <div>\n    <el-tabs v-model=\"currentTab\" @tab-click=\"onClickTab\" v-if=\"tablists\">\n      <el-tab-pane name=\"null\" label=\"全部\"></el-tab-pane>\n      <el-tab-pane\n        name=\"0\"\n        :label=\"orderChartType.un_paid > 0 ? `待支付(${orderChartType.un_paid})` : `待支付`\"\n      ></el-tab-pane>\n      <el-tab-pane\n        name=\"1\"\n        :label=\"orderChartType.un_send > 0 ? `待发货(${orderChartType.un_send})` : `待发货`\"\n      ></el-tab-pane>\n      <el-tab-pane name=\"5\" label=\"待核销\"></el-tab-pane>\n      <el-tab-pane name=\"2\" label=\"待收货\"></el-tab-pane>\n      <el-tab-pane name=\"3\" label=\"待评价\"></el-tab-pane>\n      <el-tab-pane name=\"4\" label=\"已完成\"></el-tab-pane>\n      <el-tab-pane name=\"-2\" label=\"已退款\"></el-tab-pane>\n      <el-tab-pane name=\"-4\" label=\"已删除\"></el-tab-pane>\n    </el-tabs>\n    <div class=\"acea-row\">\n      <el-button v-auth=\"['order-write']\" type=\"primary\" v-db-click @click=\"writeOff\">订单核销</el-button>\n      <el-button v-db-click @click=\"batchShipmentModal = true\">批量发货</el-button>\n      <!-- <el-upload class=\"mr14\" :action=\"expressUrl\" :headers=\"header\" :on-success=\"upExpress\">\n        <el-button class=\"export\" type=\"primary\">批量发货</el-button>\n      </el-upload> -->\n      <el-button v-auth=\"['order-dels']\" v-db-click @click=\"delAll\">批量删除</el-button>\n      <el-button v-auth=\"['export-storeOrder']\" class=\"export\" v-db-click @click=\"exportList\">订单导出</el-button>\n      <!-- <el-button class=\"export\" v-db-click @click=\"exportDeliveryList\">发货单导出</el-button> -->\n    </div>\n    <el-table\n      :data=\"orderList\"\n      ref=\"table\"\n      v-loading=\"loading\"\n      empty-text=\"暂无数据\"\n      @select=\"handleSelectRow\"\n      @select-all=\"handleSelectRow\"\n      class=\"orderData mt14\"\n    >\n      <el-table-column type=\"expand\">\n        <template slot-scope=\"scope\">\n          <expandRow :row=\"scope.row\"></expandRow>\n        </template>\n      </el-table-column>\n      <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\n      <el-table-column label=\"订单号 | 类型\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <div>{{ scope.row.order_id }}</div>\n          <div class=\"pink_name\" :style=\"{ color: scope.row.color }\">{{ scope.row.pink_name }}</div>\n          <span v-if=\"scope.row.is_del === 1\" style=\"color: #ed4014; display: block\">用户已删除</span>\n          <span v-if=\"scope.row.is_cancel === 1 && scope.row.is_del === 0\" style=\"color: #ed4014; display: block\"\n            >用户已取消</span\n          >\n          <span v-if=\"scope.row.refund_type === 6\" style=\"color: #ed4014; display: block\">订单已退款</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"商品信息\" min-width=\"250\">\n        <template slot-scope=\"scope\">\n          <div class=\"tab\" v-for=\"(item, i) in scope.row._info\" :key=\"i\">\n            <img\n              v-lazy=\"\n                item.cart_info.productInfo.attrInfo\n                  ? item.cart_info.productInfo.attrInfo.image\n                  : item.cart_info.productInfo.image\n              \"\n            />\n            <el-tooltip placement=\"top\" :open-delay=\"300\">\n              <div slot=\"content\">\n                <div>\n                  <span>商品名称：</span>\n                  <span>{{ item.cart_info.productInfo.store_name || '--' }}</span>\n                </div>\n                <div>\n                  <span>规格名称：</span>\n                  <span>{{\n                    item.cart_info.productInfo.attrInfo ? item.cart_info.productInfo.attrInfo.suk : '---'\n                  }}</span>\n                </div>\n                <div>\n                  <span>支付价格：</span>\n                  <span>¥{{ item.cart_info.truePrice || '--' }}</span>\n                </div>\n                <div>\n                  <span>购买数量：</span>\n                  <span>{{ item.cart_info.cart_num || '--' }}</span>\n                </div>\n              </div>\n              <span class=\"line2 w-250\">{{ item.cart_info.productInfo.store_name }}</span>\n            </el-tooltip>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"用户信息\" min-width=\"150\">\n        <template slot-scope=\"scope\">\n          <span class=\"nickname\">{{ scope.row.nickname }} | {{ scope.row.uid }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"实际支付\" min-width=\"100\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.paid ? scope.row.pay_price : '未支付' }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"支付方式\" min-width=\"100\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.pay_type_name || '--' }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"支付时间\" min-width=\"150\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row._pay_time || '--' }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"订单状态\" min-width=\"100\">\n        <template slot-scope=\"scope\">\n          <div v-html=\"scope.row.status_name.status_name\" class=\"pt5\"></div>\n          <div v-if=\"!scope.row.is_all_refund && scope.row.refund.length\" class=\"trip\">部分退款中</div>\n          <div\n            v-if=\"\n              scope.row.refund_status == 0 &&\n              scope.row.is_all_refund &&\n              scope.row.refund.length &&\n              scope.row.refund_type != 6\n            \"\n            class=\"trip\"\n          >\n            退款中\n          </div>\n          <div class=\"img\">\n            <template v-if=\"scope.row.status_name.pics\">\n              <div v-viewer class=\"pictrue\" v-for=\"(item, index) in scope.row.status_name.pics || []\" :key=\"index\">\n                <img v-lazy=\"item\" :src=\"item\" />\n              </div>\n            </template>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" fixed=\"right\" width=\"130\">\n        <template slot-scope=\"scope\">\n          <a\n            v-db-click\n            @click=\"edit(scope.row)\"\n            v-if=\"scope.row._status === 1 && scope.row.is_del !== 1 && scope.row.is_cancel !== 1\"\n            >编辑</a\n          >\n          <el-divider\n            direction=\"vertical\"\n            v-if=\"scope.row._status === 1 && scope.row.is_del !== 1 && scope.row.is_cancel !== 1\"\n          />\n          <a\n            v-db-click\n            @click=\"sendOrder(scope.row)\"\n            v-if=\"\n              (scope.row.status === 4 || scope.row._status === 2 || scope.row._status === 8) &&\n              scope.row.shipping_type === 1 &&\n              (scope.row.pinkStatus === null || scope.row.pinkStatus === 2) &&\n              scope.row.is_del !== 1 &&\n              scope.row.is_cancel !== 1 &&\n              !scope.row.refund.length\n            \"\n            >发送货</a\n          >\n          <el-divider\n            direction=\"vertical\"\n            v-if=\"\n              (scope.row.status === 4 || scope.row._status === 2 || scope.row._status === 8) &&\n              scope.row.shipping_type === 1 &&\n              (scope.row.pinkStatus === null || scope.row.pinkStatus === 2) &&\n              scope.row.is_del !== 1 &&\n              scope.row.is_cancel !== 1 &&\n              !scope.row.refund.length\n            \"\n          />\n          <a v-db-click @click=\"delivery(scope.row)\" v-if=\"scope.row._status === 4 && !scope.row.split.length\"\n            >配送信息</a\n          >\n          <el-divider direction=\"vertical\" v-if=\"scope.row._status === 4 && !scope.row.split.length\" />\n          <a\n            v-db-click\n            @click=\"bindWrite(scope.row)\"\n            v-if=\"\n              scope.row.shipping_type == 2 &&\n              scope.row.status == 0 &&\n              scope.row.paid == 1 &&\n              scope.row.refund_status === 0\n            \"\n            >立即核销</a\n          >\n          <el-divider\n            direction=\"vertical\"\n            v-if=\"\n              scope.row.shipping_type == 2 &&\n              scope.row.status == 0 &&\n              scope.row.paid == 1 &&\n              scope.row.refund_status === 0\n            \"\n          />\n          <template>\n            <el-dropdown size=\"small\" @command=\"changeMenu(scope.row, $event)\" :transfer=\"true\">\n              <span class=\"el-dropdown-link\"> 更多<i class=\"el-icon-arrow-down el-icon--right\"></i> </span>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item\n                  command=\"1\"\n                  v-show=\"\n                    scope.row._status === 1 &&\n                    scope.row.paid === 0 &&\n                    scope.row.pay_type === 'offline' &&\n                    scope.row.is_del !== 1 &&\n                    scope.row.is_cancel !== 1\n                  \"\n                  >确认付款</el-dropdown-item\n                >\n                <el-dropdown-item command=\"2\">订单详情</el-dropdown-item>\n                <el-dropdown-item command=\"11\" v-show=\"scope.row._status >= 3 && scope.row.express_dump\"\n                  >电子面单打印</el-dropdown-item\n                >\n                <el-dropdown-item command=\"10\" v-show=\"scope.row._status >= 2\">小票打印</el-dropdown-item>\n                <el-dropdown-item\n                  command=\"4\"\n                  v-show=\"\n                    scope.row._status !== 1 ||\n                    (scope.row._status === 3 &&\n                      scope.row.use_integral > 0 &&\n                      scope.row.use_integral >= scope.row.back_integral)\n                  \"\n                  >订单备注</el-dropdown-item\n                >\n                <el-dropdown-item\n                  command=\"5\"\n                  v-show=\"scope.row.paid == 1 && scope.row.refund_status == 0 && !scope.row.refund.length\"\n                  >立即退款</el-dropdown-item\n                >\n                <!--                            <el-dropdown-item command=\"6\"  v-show='scope.row._status !==1 && (scope.row.use_integral > 0 && scope.row.use_integral >= scope.row.back_integral) '>退积分</el-dropdown-item>-->\n                <!--                            <el-dropdown-item command=\"7\"  v-show='scope.row._status === 3'>不退款</el-dropdown-item>-->\n                <el-dropdown-item command=\"8\" v-show=\"scope.row._status === 4\">已收货</el-dropdown-item>\n                <el-dropdown-item command=\"9\">删除订单</el-dropdown-item>\n                <el-dropdown-item command=\"12\" v-show=\"scope.row.kuaidi_label\">快递面单打印</el-dropdown-item>\n                <el-dropdown-item command=\"13\" v-show=\"scope.row.paid\">配货单打印</el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n          </template>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"acea-row row-right page\">\n      <pagination v-if=\"total\" :total=\"total\" :page.sync=\"page.page\" :limit.sync=\"page.limit\" @pagination=\"getList\" />\n    </div>\n    <!-- 编辑 退款 退积分 不退款-->\n    <edit-from ref=\"edits\" :FromData=\"FromData\" @submitFail=\"submitFail\"></edit-from>\n    <!-- 详情 -->\n    <details-from ref=\"details\" :orderDatalist=\"orderDatalist\" :orderId=\"orderId\"></details-from>\n    <!-- 备注 -->\n    <order-remark ref=\"remarks\" :orderId=\"orderId\" @submitFail=\"submitFail\"></order-remark>\n    <!-- 取消寄件 -->\n    <order-shipment ref=\"shipment\" :orderId=\"orderId\" @submitFail=\"submitFail\"></order-shipment>\n    <!-- 发送货 -->\n    <order-send\n      ref=\"send\"\n      :orderId=\"orderId\"\n      :status=\"status\"\n      :pay_type=\"pay_type\"\n      :virtual_type=\"virtual_type\"\n      @submitFail=\"submitFail\"\n      @clearId=\"\n        () => {\n          orderId = 0;\n          virtual_type = null;\n        }\n      \"\n    ></order-send>\n    <order-refund\n      ref=\"refund\"\n      :orderId=\"orderId\"\n      :status=\"status\"\n      :pay_type=\"pay_type\"\n      :virtual_type=\"virtual_type\"\n      @submitFail=\"submitFail\"\n      @clearId=\"\n        () => {\n          orderId = 0;\n          virtual_type = null;\n        }\n      \"\n    ></order-refund>\n    <!--    -->\n    <el-dialog\n      :visible.sync=\"modals2\"\n      title=\"订单核销\"\n      class=\"paymentFooter\"\n      :show-close=\"true\"\n      width=\"540px\"\n      @closed=\"changeModal\"\n    >\n      <el-form\n        ref=\"writeOffFrom\"\n        :model=\"writeOffFrom\"\n        :rules=\"writeOffRules\"\n        label-width=\"80px\"\n        label-position=\"right\"\n        class=\"tabform\"\n        @submit.native.prevent\n      >\n        <el-form-item prop=\"code\" label=\"核销码：\">\n          <el-input\n            style=\"width: 414px\"\n            type=\"text\"\n            placeholder=\"请输入12位核销码\"\n            v-model.number=\"writeOffFrom.code\"\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button type=\"primary\" v-db-click @click=\"ok('writeOffFrom')\">立即核销</el-button>\n        <el-button v-db-click @click=\"del('writeOffFrom')\">取消</el-button>\n      </div>\n    </el-dialog>\n    <el-dialog\n      :visible.sync=\"batchShipmentModal\"\n      title=\"批量发货\"\n      class=\"paymentFooter\"\n      :show-close=\"true\"\n      width=\"540px\"\n      @closed=\"changeModal\"\n    >\n      <!-- <el-upload :action=\"expressUrl\" :headers=\"header\" :on-success=\"upExpress\">\n        <el-button class=\"export\" type=\"primary\">批量发货</el-button>\n      </el-upload> -->\n      <el-alert type=\"warning\" :closable=\"false\">\n        <p>步骤一 导出发货单</p>\n        <p>步骤二 发货单中填写物流单号</p>\n        <p>步骤三 将发货单上传</p>\n      </el-alert>\n      <div class=\"acea-row row-middle mb10 mt10\">\n        <el-button v-db-click @click=\"exportDeliveryList\">导出发货单</el-button>\n        <div class=\"pl20 tips\"></div>\n      </div>\n      <el-upload\n        class=\"upload-demo\"\n        accept=\".doc,.docx,.xls,.xlsx\"\n        drag\n        :action=\"expressUrl\"\n        :headers=\"header\"\n        :on-success=\"upExpress\"\n        :before-upload=\"beforeUpload\"\n      >\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">批量发货单,拖入上传或<em>点击上传</em></div>\n      </el-upload>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport expandRow from './tableExpand.vue';\nimport printJS from 'print-js';\nimport {\n  orderList,\n  getOrdeDatas,\n  getDataInfo,\n  getRefundFrom,\n  getnoRefund,\n  refundIntegral,\n  getDistribution,\n  writeUpdate,\n  shipmentCancelOrder,\n  putWrite,\n  importExpress,\n} from '@/api/order';\nimport { mapState, mapMutations } from 'vuex';\nimport editFrom from '../../../../components/from/from';\nimport detailsFrom from '../handle/orderDetails';\nimport orderRemark from '../handle/orderRemark';\nimport orderSend from '../handle/orderSend';\nimport orderRefund from '../handle/orderRefund';\nimport orderShipment from '../handle/orderShipment';\nimport { exportOrderList, exportOrderDeliveryList } from '@api/export';\nimport Setting from '@/setting';\nimport { getCookies } from '@/libs/util';\nimport createWorkBook from '@/vendor/newToExcel.js';\nimport { isFileUpload } from '@/utils';\n\nexport default {\n  name: 'table_list',\n  components: {\n    expandRow,\n    editFrom,\n    detailsFrom,\n    orderRemark,\n    orderSend,\n    orderShipment,\n    orderRefund,\n  },\n  data() {\n    const codeNum = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请填写核销码'));\n      }\n      // 模拟异步验证效果\n      if (!Number.isInteger(value)) {\n        callback(new Error('请填写12位数字'));\n      } else {\n        const reg = /\\b\\d{12}\\b/;\n        if (!reg.test(value)) {\n          callback(new Error('请填写12位数字'));\n        } else {\n          callback();\n        }\n      }\n    };\n    return {\n      batchShipmentModal: false,\n      expressUrl: Setting.apiBaseURL + '/file/upload/1',\n      header: {},\n      delfromData: {},\n      modal: false,\n      orderList: [],\n      orderCards: [],\n      loading: false,\n      orderId: 0,\n      total_num: 0,\n      virtual_type: 0,\n      status: 0,\n      pay_type: '',\n\n      total: 0, // 总条数\n      page: {\n        page: 1, // 当前页\n        limit: 15, // 每页显示条数\n      },\n      data: [],\n      FromData: null,\n      orderDatalist: null,\n      // modalTitleSs: '',\n      selectedIds: [], //选中合并项的id\n      currentTab: 'null',\n      spinShow: false,\n      tablists: {\n        all: '0',\n        general: '0',\n        pink: '0',\n        seckill: '0',\n        bargain: '0',\n        advance: '0',\n      },\n      writeOffRules: {\n        code: [{ validator: codeNum, trigger: 'blur', required: true }],\n      },\n      writeOffFrom: {\n        code: '',\n        confirm: 0,\n      },\n      modals2: false,\n    };\n  },\n  computed: {\n    ...mapState('order', [\n      'orderPayType',\n      'orderStatus',\n      'orderTime',\n      'real_name',\n      'fieldKey',\n      'orderType',\n      'delIdList',\n      'isDels',\n      'orderChartType',\n    ]),\n  },\n  mounted() {},\n  created() {\n    this.getTabs();\n    this.onChangeTabs('');\n    this.getList();\n    this.getToken();\n  },\n  watch: {\n    orderType: function () {\n      this.page.page = 1;\n      this.getList();\n    },\n  },\n  methods: {\n    ...mapMutations('order', ['getOrderStatus', 'onChangeTabs', 'getIsDel', 'getisDelIdListl']),\n    batchShipment() {},\n    beforeUpload(file) {\n      return isFileUpload(file);\n    },\n    // 操作\n    changeMenu(row, name) {\n      this.orderId = row.id;\n      switch (name) {\n        case '1':\n          this.delfromData = {\n            title: '修改订单为已支付',\n            url: `/order/pay_offline/${row.id}`,\n            method: 'post',\n            ids: '',\n          };\n          this.$modalSure(this.delfromData)\n            .then((res) => {\n              this.$message.success(res.msg);\n              this.$emit('changeGetTabs');\n              this.getList();\n            })\n            .catch((res) => {\n              this.$message.error(res.msg);\n            });\n          // this.modalTitleSs = '修改立即支付';\n          break;\n        case '2':\n          this.getData(row.id);\n          break;\n        case '4':\n          this.$refs.remarks.modals = true;\n          this.$refs.remarks.formValidate.remark = row.remark;\n          break;\n        case '5':\n          // this.getRefundData(row.id);\n          this.$refs.refund.total_num = row.total_num;\n          this.$refs.refund.order_id = row.order_id;\n          this.$refs.refund.formItem.refund_price = row.pay_price;\n          this.virtual_type = row.virtual_type;\n          this.$refs.refund.modals = true;\n          this.orderId = row.id;\n          this.status = row._status;\n          this.pay_type = row.pay_type;\n          break;\n        // case '6':\n        //   this.getRefundIntegral(row.id);\n        //   break;\n        // case '7':\n        //   this.getNoRefundData(row.id);\n        //   break;\n        case '8':\n          this.delfromData = {\n            title: '修改确认收货',\n            url: `/order/take/${row.id}`,\n            method: 'put',\n            ids: '',\n          };\n          this.$modalSure(this.delfromData)\n            .then((res) => {\n              this.$message.success(res.msg);\n              this.getList();\n            })\n            .catch((res) => {\n              this.$message.error(res.msg);\n            });\n          // this.modalTitleSs = '修改确认收货';\n          break;\n        case '10':\n          this.delfromData = {\n            title: '立即打印订单',\n            url: `/order/print/${row.id}`,\n            method: 'get',\n            ids: '',\n          };\n          this.$modalSure(this.delfromData)\n            .then((res) => {\n              this.$message.success(res.msg);\n              this.$emit('changeGetTabs');\n              this.getList();\n            })\n            .catch((res) => {\n              this.$message.error(res.msg);\n            });\n          break;\n        case '11':\n          this.delfromData = {\n            title: '立即打印电子面单',\n            info: '您确认打印此电子面单吗?',\n            url: `/order/order_dump/${row.id}`,\n            method: 'get',\n            ids: '',\n          };\n          this.$modalSure(this.delfromData)\n            .then((res) => {\n              this.$message.success(res.msg);\n              this.getList();\n            })\n            .catch((res) => {\n              this.$message.error(res.msg);\n            });\n          break;\n        case '12':\n          this.printImg(row.kuaidi_label);\n          break;\n        case '13':\n          let pathInfo = this.$router.resolve({\n            path: Setting.routePre + '/order/print',\n            query: {\n              id: row.order_id,\n            },\n          });\n          window.open(pathInfo.href, '_blank');\n          break;\n        default:\n          this.delfromData = {\n            title: '删除订单',\n            url: `/order/del/${row.id}`,\n            method: 'DELETE',\n            ids: '',\n          };\n          // this.modalTitleSs = '删除订单';\n          this.delOrder(row, this.delfromData);\n      }\n    },\n    shipmentClear(row) {\n      this.orderId = row.id;\n      this.$refs.shipment.modals = true;\n    },\n    printImg(url) {\n      printJS({\n        printable: url,\n        type: 'image',\n        documentTitle: '快递信息',\n        style: `img{\n          width: 100%;\n          height: 476px;\n        }`,\n      });\n    },\n    // 立即支付 /确认收货//删除单条订单\n    submitModel() {\n      this.getList();\n    },\n    // 订单列表\n    getList(res) {\n      this.page.page = res === 1 ? 1 : this.page.page;\n      this.loading = true;\n      orderList({\n        page: this.page.page,\n        limit: this.page.limit,\n        status: this.orderStatus,\n        pay_type: this.orderPayType,\n        data: this.orderTime,\n        real_name: this.real_name,\n        field_key: this.fieldKey,\n        type: this.orderType === 0 ? '' : this.orderType,\n      })\n        .then(async (res) => {\n          let data = res.data;\n          this.orderList = data.data;\n          this.orderCards = data.stat;\n          this.total = data.count;\n          this.$nextTick(() => {\n            //确保dom加载完毕\n            this.setChecked();\n          });\n          this.$emit('on-changeCards', data.stat);\n          this.loading = false;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$message.error(res.msg);\n        });\n    },\n    handleSelectRow(selection) {\n      let ids = [];\n      selection.map((e) => {\n        ids.push(e.id);\n      });\n      this.selectedIds = ids;\n      this.$nextTick(() => {\n        //确保dom加载完毕\n        this.setChecked();\n      });\n    },\n    setChecked() {\n      //将new Set()转化为数组\n      let ids = [...this.selectedIds];\n      this.getisDelIdListl(ids);\n      // 找到绑定的table的ref对应的dom，找到table的objData对象，objData保存的是当前页的数据\n      let objData = this.$refs.table.objData;\n      for (let index in objData) {\n        if (this.selectedIds.has(objData[index].id)) {\n          objData[index]._isChecked = true;\n        }\n      }\n    },\n    isDel(selection) {\n      if (selection.findIndex((target) => target.is_del === 0) == -1) {\n        this.getIsDel(1);\n      } else {\n        this.getIsDel(0);\n      }\n    },\n    // 编辑\n    edit(row) {\n      this.getOrderData(row.id);\n    },\n    // 删除单条订单\n    delOrder(row, data) {\n      if (row.is_del === 1) {\n        this.$modalSure(data)\n          .then((res) => {\n            this.$message.success(res.msg);\n            this.getList();\n          })\n          .catch((res) => {\n            this.$message.error(res.msg);\n          });\n      } else {\n        this.$message.error('您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！');\n      }\n    },\n    // 获取编辑表单数据\n    getOrderData(id) {\n      getOrdeDatas(id)\n        .then(async (res) => {\n          this.FromData = res.data;\n          this.$refs.edits.modals = true;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 获取详情表单数据\n    getData(id) {\n      getDataInfo(id)\n        .then(async (res) => {\n          this.$refs.details.modals = true;\n          this.orderDatalist = res.data;\n          if (this.orderDatalist.orderInfo.refund_reason_wap_img) {\n            try {\n              this.orderDatalist.orderInfo.refund_reason_wap_img = JSON.parse(\n                this.orderDatalist.orderInfo.refund_reason_wap_img,\n              );\n            } catch (e) {\n              this.orderDatalist.orderInfo.refund_reason_wap_img = [];\n            }\n          }\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 修改成功\n    submitFail() {\n      this.getList();\n      this.$emit('changeGetTabs');\n    },\n    // 获取退款表单数据\n    getRefundData(id) {\n      this.$modalForm(getRefundFrom(id)).then(() => {\n        this.getList();\n        this.$emit('changeGetTabs');\n      });\n    },\n    // 获取退积分表单数据\n    getRefundIntegral(id) {\n      refundIntegral(id)\n        .then(async (res) => {\n          this.FromData = res.data;\n          this.$refs.edits.modals = true;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 不退款表单数据\n    getNoRefundData(id) {\n      this.$modalForm(getnoRefund(id)).then(() => {\n        this.getList();\n        this.$emit('changeGetTabs');\n      });\n    },\n    // 发送货\n    sendOrder(row) {\n      if (row.user_address) {\n        this.$refs.send.userSendmsg = {\n          real_name: row.real_name,\n          user_address: row.user_address,\n          user_phone: row.user_phone,\n        };\n      }\n      this.$refs.send.total_num = row.total_num;\n      this.virtual_type = row.virtual_type;\n      this.$refs.send.modals = true;\n      this.orderId = row.id;\n      this.status = row._status;\n      this.pay_type = row.pay_type;\n      this.$refs.send.getList();\n      this.$refs.send.getDeliveryList();\n      this.$nextTick((e) => {\n        this.$refs.send.getCartInfo(row._status, row.id);\n      });\n    },\n    // 配送信息表单数据\n    delivery(row) {\n      getDistribution(row.id)\n        .then(async (res) => {\n          this.FromData = res.data;\n          this.$refs.edits.modals = true;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 核销订单\n    bindWrite(row) {\n      let self = this;\n      this.$msgbox({\n        title: '提示',\n        message: '确定要核销该订单吗？',\n        showCancelButton: true,\n        cancelButtonText: '取消',\n        confirmButtonText: '确定',\n        iconClass: 'el-icon-warning',\n        confirmButtonClass: 'btn-custom-cancel',\n      })\n        .then(() => {\n          writeUpdate(row.order_id)\n            .then((res) => {\n              self.$message.success(res.msg);\n              self.getList();\n            })\n            .catch((res) => {\n              self.$message.error(res.msg);\n            });\n        })\n        .catch(() => {});\n    },\n    // 订单类型  @on-changeTabs=\"getChangeTabs\"\n    getTabs() {\n      this.spinShow = true;\n      this.$store\n        .dispatch('order/getOrderTabs', {\n          data: '',\n        })\n        .then((res) => {\n          this.tablists = res.data;\n          // this.onChangeChart(this.tablists)\n          this.spinShow = false;\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$message.error(res.msg);\n        });\n    },\n    onClickTab() {\n      this.getOrderStatus(this.currentTab == 'null' ? '' : this.currentTab);\n      this.getList();\n    },\n    // 批量删除\n    delAll() {\n      if (this.delIdList.length === 0) {\n        this.$message.error('请先选择删除的订单！');\n      } else {\n        if (this.isDels) {\n          let idss = {\n            ids: this.delIdList,\n          };\n          let delfromData = {\n            title: '删除订单',\n            url: `/order/dels`,\n            method: 'post',\n            ids: idss,\n          };\n          this.$modalSure(delfromData)\n            .then((res) => {\n              this.$message.success(res.msg);\n              this.getList();\n            })\n            .catch((res) => {\n              this.$message.error(res.msg);\n            });\n        } else {\n          this.$message.error('您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！');\n        }\n      }\n    },\n    // 下载批量发货模版\n    async exportDeliveryList() {\n      let [th, filekey, data, fileName] = [[], [], [], ''];\n      let deliveryData = { page: 1, limit: 200 };\n      for (let i = 0; i < deliveryData.page + 1; i++) {\n        let expressData = await this.getDeliveryData(deliveryData);\n        if (!fileName) fileName = expressData.filename;\n        if (!filekey.length) {\n          filekey = expressData.fileKey;\n        }\n        if (!th.length) th = expressData.header;\n        if (expressData.export.length) {\n          data = data.concat(expressData.export);\n          deliveryData.page++;\n        } else {\n          this.$exportExcel(th, filekey, fileName, data);\n          return;\n        }\n      }\n    },\n    getDeliveryData(deliveryData) {\n      return new Promise((resolve, reject) => {\n        exportOrderDeliveryList(deliveryData).then((res) => {\n          resolve(res.data);\n        });\n      });\n    },\n    // 上传头部token\n    getToken() {\n      this.header['Authori-zation'] = 'Bearer ' + getCookies('token');\n    },\n    upExpress(data) {\n      importExpress({ file: data.data.src })\n        .then((res) => {\n          this.$message.success(res.msg);\n          this.getList();\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 导出\n    async exportList() {\n      let excelData = {\n          page: 1,\n          limit: 100,\n          status: this.orderStatus,\n          pay_type: this.orderPayType,\n          data: this.orderTime,\n          real_name: this.real_name,\n          field_key: this.fieldKey,\n          type: this.orderType === 0 ? '' : this.orderType,\n          ids: this.delIdList,\n        },\n        data = [],\n        lebData = {};\n      for (let i = 1; i < excelData.page + 1; i++) {\n        lebData = await this.getExcelData(excelData);\n        if (lebData.export.length) {\n          data = data.concat(lebData.export);\n          if (lebData.export.length == excelData.limit) excelData.page++;\n        }\n      }\n      createWorkBook(lebData.header, lebData.filename, data, '', lebData.filename);\n    },\n    getExcelData(excelData) {\n      return new Promise((resolve, reject) => {\n        exportOrderList(excelData).then((res) => {\n          resolve(res.data);\n        });\n      });\n    },\n    // 订单核销\n    writeOff() {\n      this.modals2 = true;\n    },\n    // 订单核销\n    ok(name) {\n      if (!this.writeOffFrom.code) {\n        this.$message.warning('请先验证订单！');\n      } else {\n        this.writeOffFrom.confirm = 1;\n        putWrite(this.writeOffFrom)\n          .then(async (res) => {\n            if (res.status === 200) {\n              this.$message.success(res.msg);\n              this.modals2 = false;\n              this.$refs[name].resetFields();\n              this.getList();\n            } else {\n              this.$message.error(res.msg);\n            }\n          })\n          .catch((res) => {\n            this.$message.error(res.msg);\n          });\n      }\n    },\n    del(name) {\n      this.modals2 = false;\n      this.writeOffFrom.code = '';\n      this.$refs[name].resetFields();\n    },\n    changeModal() {\n      this.writeOffFrom.code = '';\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .el-upload,\n::v-deep .el-upload-dragger {\n  width: 100%;\n}\n\n::v-deep .el-upload-list {\n  display: none;\n}\n\n::v-deep .el-tabs__item {\n  height: 54px;\n  line-height: 54px;\n}\n\nimg {\n  height: 36px;\n  display: block;\n}\n\n.tabBox {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  margin-bottom: 2px;\n\n  .tabBox_img {\n    width: 36px;\n    height: 36px;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n\n  .tabBox_tit {\n    width: 60%;\n    font-size: 12px !important;\n    margin: 0 10px 0 10px;\n    letter-spacing: 1px;\n    padding: 5px 0;\n    box-sizing: border-box;\n  }\n}\n\n.orderData ::v-deep .ivu-table-cell {\n  padding-left: 0 !important;\n}\n\n.vertical-center-modal {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.nickname {\n}\n\n.uid {\n  color: #2d8cf0;\n}\n\n.pink_name {\n  color: #666;\n}\n\n.tab {\n  display: flex;\n  align-items: center;\n\n  img {\n    width: 36px;\n    height: 36px;\n    margin-right: 10px;\n  }\n}\n\n.w-250 {\n  max-width: 250px;\n}\n\n.w-120 {\n  width: 120px;\n}\n\n.tips {\n  color: #c0c4cc;\n  font-size: 12px;\n}\n</style>\n"]}]}