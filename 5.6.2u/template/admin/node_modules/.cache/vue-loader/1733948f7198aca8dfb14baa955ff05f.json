{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\user\\list\\handle\\userDetails.vue?vue&type=style&index=0&id=2b718961&lang=scss&scoped=true","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\user\\list\\handle\\userDetails.vue","mtime":1745474910466},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\css-loader\\index.js","mtime":1753254259822},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1753254262918},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1753254258547},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1753254255270},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5hdmF0YXIgewogIHdpZHRoOiA2MHB4OwogIGhlaWdodDogNjBweDsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBpbWcgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgfQp9Cjo6di1kZWVwIC5lbC1kcmF3ZXJfX2JvZHkgewogIHBhZGRpbmc6IDIwcHggMCAhaW1wb3J0YW50Owp9Cjo6di1kZWVwIC5lbC10YWJzLS1ib3JkZXItY2FyZCA+IC5lbC10YWJzX19jb250ZW50IHsKICBwYWRkaW5nOiAwIDM1cHg7Cn0KOjp2LWRlZXAgLmVsLXRhYnMtLWJvcmRlci1jYXJkID4gLmVsLXRhYnNfX2hlYWRlciwKOjp2LWRlZXAgLmVsLXRhYnMtLWJvcmRlci1jYXJkID4gLmVsLXRhYnNfX2hlYWRlciAuZWwtdGFic19faXRlbTphY3RpdmUgewogIGJvcmRlcjogbm9uZTsKICBoZWlnaHQ6IDQwcHg7Cn0KOjp2LWRlZXAgLmVsLXRhYnMtLWJvcmRlci1jYXJkID4gLmVsLXRhYnNfX2hlYWRlciAuZWwtdGFic19faXRlbS5pcy1hY3RpdmUgewogIGJvcmRlcjogbm9uZTsKICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tcHJldi1jb2xvci1wcmltYXJ5KTsKICBmb250LXNpemU6IDEzcHg7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBjb2xvcjogIzMwMzEzMzsKICBsaW5lLWhlaWdodDogMTZweDsKfQo6OnYtZGVlcCAuZWwtdGFicy0tYm9yZGVyLWNhcmQgPiAuZWwtdGFic19faGVhZGVyIC5lbC10YWJzX19pdGVtIHsKICBib3JkZXI6IG5vbmU7Cn0KOjp2LWRlZXAgLmVsLXRhYnMtLWJvcmRlci1jYXJkID4gLmVsLXRhYnNfX2hlYWRlciAuZWwtdGFic19faXRlbSB7CiAgbWFyZ2luLXRvcDogMDsKICB0cmFuc2l0aW9uOiBub25lOwogIGhlaWdodDogNDBweCAhaW1wb3J0YW50OwogIGxpbmUtaGVpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7CiAgd2lkdGg6IDkycHggIWltcG9ydGFudDsKICBmb250LXNpemU6IDEzcHg7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBjb2xvcjogIzMwMzEzMzsKICBsaW5lLWhlaWdodDogMTZweDsKfQo6OnYtZGVlcCAuZWwtdGFicy0tYm9yZGVyLWNhcmQgewogIGJvcmRlcjogbm9uZTsKICBib3gtc2hhZG93OiBub25lOwp9Ci5oZWFkIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgcGFkZGluZzogMCAxNXB4OwogIC5lZGl0LWJ0biB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICByaWdodDogMjBweDsKICAgIHRvcDogMHB4OwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgfQp9Ci5kYXNoYm9hcmQtd29ya3BsYWNlIHsKICAmLWhlYWRlciB7CiAgICAmLWF2YXRhciB7CiAgICAgIHdpZHRoOiA2NHB4OwogICAgICBoZWlnaHQ6IDY0cHg7CiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgbWFyZ2luLXJpZ2h0OiAxNnB4OwogICAgICBmb250LXdlaWdodDogNjAwOwogICAgfQoKICAgICYtdGlwIHsKICAgICAgd2lkdGg6IDgyJTsKICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwoKICAgICAgJi10aXRsZSB7CiAgICAgICAgZm9udC1zaXplOiAxM3B4OwogICAgICAgIGNvbG9yOiAjMDAwMDAwOwogICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7CiAgICAgIH0KCiAgICAgICYtZGVzYyB7CiAgICAgICAgJi1zcCB7CiAgICAgICAgICB3aWR0aDogMzMuMzMlOwogICAgICAgICAgY29sb3I6ICMxNzIzM2Q7CiAgICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgJi1leHRyYSB7CiAgICAgIC5pdnUtY29sIHsKICAgICAgICBwIHsKICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0OwogICAgICAgIH0KCiAgICAgICAgcDpmaXJzdC1jaGlsZCB7CiAgICAgICAgICBzcGFuOmZpcnN0LWNoaWxkIHsKICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7CiAgICAgICAgICB9CgogICAgICAgICAgc3BhbjpsYXN0LWNoaWxkIHsKICAgICAgICAgICAgY29sb3I6ICM4MDg2OTU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwOmxhc3QtY2hpbGQgewogICAgICAgICAgZm9udC1zaXplOiAyMnB4OwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["userDetails.vue"],"names":[],"mappings":";AA4VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userDetails.vue","sourceRoot":"src/pages/user/list/handle","sourcesContent":["<template>\n  <div style=\"width: 100%\">\n    <el-drawer :visible.sync=\"modals\" title=\"用户详情\" :wrapperClosable=\"false\" :size=\"1100\" @closed=\"draChange\">\n      <div class=\"acea-row head\">\n        <div class=\"avatar mr15\"><img :src=\"psInfo.avatar\" /></div>\n        <div class=\"dashboard-workplace-header-tip\">\n          <p class=\"dashboard-workplace-header-tip-title f-w-b\" v-text=\"psInfo.nickname || '-'\"></p>\n          <div class=\"dashboard-workplace-header-tip-desc\">\n            <span class=\"dashboard-workplace-header-tip-desc-sp\" v-for=\"(item, index) in detailsData\" :key=\"index\">{{\n              item.title + '：' + item.value\n            }}</span>\n          </div>\n        </div>\n        <div class=\"edit-btn\" v-if=\"!this.psInfo.is_del\">\n          <el-button v-if=\"!isEdit\" type=\"primary\" v-db-click @click=\"edit\">编辑</el-button>\n          <el-button v-if=\"isEdit\" v-db-click @click=\"edit\">取消</el-button>\n          <el-button v-if=\"isEdit\" type=\"primary\" v-db-click @click=\"editSave\">保存</el-button>\n        </div>\n      </div>\n      <el-row justify=\"space-between\" class=\"mt14\">\n        <el-col :span=\"24\">\n          <el-tabs type=\"border-card\" v-model=\"activeName\" @tab-click=\"changeTab\">\n            <el-tab-pane name=\"user\" label=\"用户信息\">\n              <userEditForm ref=\"editForm\" :userId=\"userId\" @success=\"getDetails(userId)\" v-if=\"isEdit\"></userEditForm>\n              <user-info :ps-info=\"psInfo\" v-else></user-info>\n            </el-tab-pane>\n            <el-tab-pane :name=\"item.val\" v-for=\"(item, index) in list\" :key=\"index\" :label=\"item.label\">\n              <template>\n                <el-table\n                  class=\"mt20\"\n                  :data=\"userLists\"\n                  max-height=\"400\"\n                  ref=\"table\"\n                  v-loading=\"loading\"\n                  no-userFrom-text=\"暂无数据\"\n                  no-filtered-userFrom-text=\"暂无筛选结果\"\n                >\n                  <el-table-column :label=\"item.title\" min-width=\"120\" v-for=\"(item, index) in columns\" :key=\"index\">\n                    <template slot-scope=\"scope\">\n                      <template v-if=\"item.key\">\n                        <div>\n                          <span>{{ scope.row[item.key] }}</span>\n                        </div>\n                      </template>\n                      <template v-else-if=\"item.slot === 'number'\">\n                        <div :class=\"scope.row.pm ? 'plusColor' : 'reduceColor'\">\n                          {{ scope.row.pm ? '+' + scope.row.number : '-' + scope.row.number }}\n                        </div>\n                      </template>\n                    </template>\n                  </el-table-column>\n                </el-table>\n                <div class=\"acea-row row-right page\">\n                  <pagination\n                    v-if=\"total\"\n                    :total=\"total\"\n                    :page.sync=\"userFrom.page\"\n                    :limit.sync=\"userFrom.limit\"\n                    @pagination=\"changeType\"\n                  />\n                </div>\n              </template>\n            </el-tab-pane>\n          </el-tabs>\n        </el-col>\n\n        <!-- <el-col :span=\"24\">\n          \n        </el-col> -->\n      </el-row>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport { detailsApi, infoApi } from '@/api/user';\nimport userInfo from './userInfo';\nimport userEditForm from './userEditForm';\n\nexport default {\n  name: 'userDetails',\n  components: { userInfo, userEditForm },\n  data() {\n    return {\n      isEdit: false,\n      theme2: 'light',\n      list: [\n        { val: 'order', label: '消费记录' },\n        { val: 'integral', label: '积分明细' },\n        { val: 'sign', label: '签到记录' },\n        { val: 'coupon', label: '持有优惠券' },\n        { val: 'balance_change', label: '余额变动' },\n        { val: 'spread', label: '好友关系' },\n      ],\n      modals: false,\n      spinShow: false,\n      detailsData: [],\n      userId: 0,\n      loading: false,\n      userFrom: {\n        type: 'order',\n        page: 1, // 当前页\n        limit: 20, // 每页显示条数\n      },\n      total: 0,\n      columns: [],\n      userLists: [],\n      psInfo: {},\n      activeName: 'user',\n    };\n  },\n  created() {},\n  methods: {\n    edit() {\n      this.activeName = 'user';\n      this.isEdit = !this.isEdit;\n    },\n    editSave() {\n      this.$refs.editForm.setUser();\n    },\n    draChange() {\n      this.isEdit = false;\n    },\n    // 会员详情\n    getDetails(id) {\n      this.activeName = 'user';\n      this.userId = id;\n      this.spinShow = true;\n      this.isEdit = false;\n      detailsApi(id)\n        .then(async (res) => {\n          if (res.status === 200) {\n            let data = res.data;\n            this.detailsData = data.headerList;\n            this.psInfo = data.ps_info;\n            // this.changeType('user');\n            this.spinShow = false;\n          } else {\n            this.spinShow = false;\n            this.$message.error(res.msg);\n          }\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$message.error(res.msg);\n        });\n    },\n    changeTab(tab) {\n      this.activeName = tab.name;\n      this.changeType();\n    },\n    // tab选项\n    changeType() {\n      this.loading = true;\n      this.userFrom.type = this.activeName;\n      this.isEdit = false;\n      if (this.activeName == 'user') return;\n      if (this.userFrom.type === '') {\n        this.userFrom.type = 'order';\n      }\n      let data = {\n        id: this.userId,\n        datas: this.userFrom,\n      };\n      infoApi(data)\n        .then(async (res) => {\n          if (res.status === 200) {\n            switch (this.userFrom.type) {\n              case 'order':\n                this.columns = [\n                  {\n                    title: '订单ID',\n                    key: 'order_id',\n                    minWidth: 160,\n                  },\n                  {\n                    title: '收货人',\n                    key: 'real_name',\n                    minWidth: 100,\n                  },\n                  {\n                    title: '商品数量',\n                    key: 'total_num',\n                    minWidth: 90,\n                  },\n                  {\n                    title: '实付金额',\n                    key: 'pay_price',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '交易完成时间',\n                    key: 'pay_time',\n                    minWidth: 120,\n                  },\n                ];\n                break;\n              case 'integral':\n                this.columns = [\n                  {\n                    title: '来源/用途',\n                    key: 'title',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '积分变化',\n                    slot: 'number',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '变化后积分',\n                    key: 'balance',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '日期',\n                    key: 'add_time',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '备注',\n                    key: 'mark',\n                    minWidth: 120,\n                  },\n                ];\n                break;\n              case 'sign':\n                this.columns = [\n                  {\n                    title: '动作',\n                    key: 'title',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '获得积分',\n                    key: 'number',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '签到时间',\n                    key: 'add_time',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '备注',\n                    key: 'mark',\n                    minWidth: 120,\n                  },\n                ];\n                break;\n              case 'coupon':\n                this.columns = [\n                  {\n                    title: '优惠券名称',\n                    key: 'coupon_title',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '面值',\n                    key: 'coupon_price',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '有效期(天)',\n                    key: 'coupon_time',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '领取时间',\n                    key: '_add_time',\n                    minWidth: 120,\n                  },\n                ];\n                break;\n              case 'balance_change':\n                this.columns = [\n                  {\n                    title: '动作',\n                    key: 'title',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '余额变动',\n                    slot: 'number',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '当前余额',\n                    key: 'balance',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '创建时间',\n                    key: 'add_time',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '备注',\n                    key: 'mark',\n                    minWidth: 120,\n                  },\n                ];\n                break;\n              default:\n                this.columns = [\n                  {\n                    title: 'ID',\n                    key: 'uid',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '昵称',\n                    key: 'nickname',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '等级',\n                    key: 'type',\n                    minWidth: 120,\n                  },\n                  {\n                    title: '加入时间',\n                    key: 'add_time',\n                    minWidth: 120,\n                  },\n                ];\n            }\n            this.$nextTick((e) => {\n              let data = res.data;\n              this.userLists = data.list;\n              this.total = data.count;\n            });\n            this.loading = false;\n          } else {\n            this.loading = false;\n            this.$message.error(res.msg);\n          }\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$message.error(res.msg);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.avatar {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  overflow: hidden;\n  img {\n    width: 100%;\n    height: 100%;\n  }\n}\n::v-deep .el-drawer__body {\n  padding: 20px 0 !important;\n}\n::v-deep .el-tabs--border-card > .el-tabs__content {\n  padding: 0 35px;\n}\n::v-deep .el-tabs--border-card > .el-tabs__header,\n::v-deep .el-tabs--border-card > .el-tabs__header .el-tabs__item:active {\n  border: none;\n  height: 40px;\n}\n::v-deep .el-tabs--border-card > .el-tabs__header .el-tabs__item.is-active {\n  border: none;\n  border-top: 2px solid var(--prev-color-primary);\n  font-size: 13px;\n  font-weight: 500;\n  color: #303133;\n  line-height: 16px;\n}\n::v-deep .el-tabs--border-card > .el-tabs__header .el-tabs__item {\n  border: none;\n}\n::v-deep .el-tabs--border-card > .el-tabs__header .el-tabs__item {\n  margin-top: 0;\n  transition: none;\n  height: 40px !important;\n  line-height: 40px !important;\n  width: 92px !important;\n  font-size: 13px;\n  font-weight: 400;\n  color: #303133;\n  line-height: 16px;\n}\n::v-deep .el-tabs--border-card {\n  border: none;\n  box-shadow: none;\n}\n.head {\n  position: relative;\n  padding: 0 15px;\n  .edit-btn {\n    position: absolute;\n    right: 20px;\n    top: 0px;\n    display: flex;\n    align-items: center;\n  }\n}\n.dashboard-workplace {\n  &-header {\n    &-avatar {\n      width: 64px;\n      height: 64px;\n      border-radius: 50%;\n      margin-right: 16px;\n      font-weight: 600;\n    }\n\n    &-tip {\n      width: 82%;\n      display: inline-block;\n      vertical-align: middle;\n\n      &-title {\n        font-size: 13px;\n        color: #000000;\n        margin-bottom: 12px;\n      }\n\n      &-desc {\n        &-sp {\n          width: 33.33%;\n          color: #17233d;\n          font-size: 13px;\n          display: inline-block;\n        }\n      }\n    }\n\n    &-extra {\n      .ivu-col {\n        p {\n          text-align: right;\n        }\n\n        p:first-child {\n          span:first-child {\n            margin-right: 4px;\n          }\n\n          span:last-child {\n            color: #808695;\n          }\n        }\n\n        p:last-child {\n          font-size: 22px;\n        }\n      }\n    }\n  }\n}\n</style>\n<style lang=\"scss\" scoped>\n.user_menu ::v-deep .ivu-menu {\n  width: 100% !important;\n}\n</style>\n"]}]}