{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\app\\wechat\\reply\\follow.vue?vue&type=style&index=0&id=d3c80f06&lang=scss&scoped=true","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\app\\wechat\\reply\\follow.vue","mtime":1731313973063},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\css-loader\\index.js","mtime":1753254259822},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1753254262918},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1753254258547},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1753254255270},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiogewogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC8qIOeBq+eLkCAqLwogIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC8qIHdlYmtpdOa1j+iniOWZqCAqLwogIC1tcy11c2VyLXNlbGVjdDogbm9uZTsgLyogSUUxMCAqLwogIC1raHRtbC11c2VyLXNlbGVjdDogbm9uZTsgLyog5pep5pyf5rWP6KeI5ZmoICovCiAgdXNlci1zZWxlY3Q6IG5vbmU7Cn0KLmFycmJveCB7CiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgZm9udC1zaXplOiAxMnB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNkY2RlZTI7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIG1hcmdpbi1ib3R0b206IDBweDsKICBwYWRkaW5nOiAwIDVweDsKICB0ZXh0LWFsaWduOiBsZWZ0OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgd2lkdGg6IDkwJTsKICAuZWwtdGFnIHsKICAgIG1hcmdpbi1yaWdodDogM3B4OwogIH0KfQouYXJyYm94X2lwIHsKICBmb250LXNpemU6IDEycHg7CiAgYm9yZGVyOiBub25lOwogIGJveC1zaGFkb3c6IG5vbmU7CiAgb3V0bGluZTogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBwYWRkaW5nOiAwOwogIG1hcmdpbjogMDsKICB3aWR0aDogYXV0byAhaW1wb3J0YW50OwogIG1heC13aWR0aDogaW5oZXJpdDsKICBtaW4td2lkdGg6IDgwcHg7CiAgdmVydGljYWwtYWxpZ246IHRvcDsKICBoZWlnaHQ6IDMwcHg7CiAgY29sb3I6ICMzNDQ5NWU7CiAgbWFyZ2luOiAycHg7CiAgbGluZS1oZWlnaHQ6IDMwcHg7Cn0KLmxlZnQgewogIG1pbi13aWR0aDogMzkwcHg7CiAgbWluLWhlaWdodDogNTUwcHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHBhZGRpbmctbGVmdDogNDBweDsKfQoudG9wIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwcHg7Cn0KLmJvdHRvbSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogMHB4Owp9Ci5jZW50ZW50IHsKICBiYWNrZ3JvdW5kOiAjZjRmNWY5OwogIG1pbi1oZWlnaHQ6IDQzOHB4OwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDYzcHg7CiAgd2lkdGg6IDMyMHB4OwogIGhlaWdodDogNjAlOwogIG92ZXJmbG93LXk6IGF1dG87CiAgcGFkZGluZzogMTVweDsKICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoucmlnaHQgewogIGJhY2tncm91bmQ6ICNmZmY7CiAgbWluLWhlaWdodDogMzAwcHg7Cn0KLmJveC1jb250ZW50IHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgbWF4LXdpZHRoOiA2MCU7CiAgbWluLWhlaWdodDogNDBweDsKICBtYXJnaW4tbGVmdDogMTVweDsKICBwYWRkaW5nOiAxMHB4OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICB3b3JkLWJyZWFrOiBicmVhay1hbGw7CiAgd29yZC13cmFwOiBicmVhay13b3JkOwogIGxpbmUtaGVpZ2h0OiAxLjU7CiAgYm9yZGVyLXJhZGl1czogNXB4Owp9Ci5ib3gtY29udGVudF9waWMgewogIHdpZHRoOiAxMDAlOwp9Ci5ib3gtY29udGVudF9waWMgaW1nIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87Cn0KLmJveC1jb250ZW50OmJlZm9yZSB7CiAgY29udGVudDogJyc7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IC0xM3B4OwogIHRvcDogMTFweDsKICBkaXNwbGF5OiBibG9jazsKICB3aWR0aDogMDsKICBoZWlnaHQ6IDA7CiAgYm9yZGVyLWxlZnQ6IDhweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItcmlnaHQ6IDhweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItdG9wOiAxMHB4IHNvbGlkICNjY2M7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7CiAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOwp9Ci5ib3gtY29udGVudDphZnRlciB7CiAgY29udGVudDogJyc7CiAgY29udGVudDogJyc7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IC0xMnB4OwogIHRvcDogMTFweDsKICBkaXNwbGF5OiBibG9jazsKICB3aWR0aDogMDsKICBoZWlnaHQ6IDA7CiAgYm9yZGVyLWxlZnQ6IDhweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItcmlnaHQ6IDhweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItdG9wOiAxMHB4IHNvbGlkICNmNWY1ZjU7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7CiAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOwp9Ci50aW1lLXdyYXBwZXIgewogIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci50aW1lIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgY29sb3I6ICNmNWY1ZjU7CiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjMpOwogIHBhZGRpbmc6IDNweCA4cHg7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIGZvbnQtc2l6ZTogMTJweDsKfQoudGV4dC1ib3ggewogIGRpc3BsYXk6IGZsZXg7Cn0KLmF2YXRhciB7CiAgd2lkdGg6IDQwcHg7CiAgaGVpZ2h0OiA0MHB4Owp9Ci5hdmF0YXIgaW1nIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7Cn0KLm1vZGVsQm94IHsKICA6OnYtZGVlcCAuaXZ1LW1vZGFsLWJvZHkgewogICAgcGFkZGluZzogMCAxNnB4IDE2cHggMTZweCAhaW1wb3J0YW50OwogIH0KfQoubmV3c19waWMgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTUwcHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgYmFja2dyb3VuZC1zaXplOiAxMDAlOwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwIDA7CiAgcGFkZGluZzogMTBweDsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBhbGlnbi1pdGVtczogZmxleC1lbmQ7Cn0KLm5ld3Nfc3AgewogIGZvbnQtc2l6ZTogMTJweDsKICBjb2xvcjogIzAwMDAwMDsKICBiYWNrZ3JvdW5kOiAjZmZmOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMzhweDsKICBsaW5lLWhlaWdodDogMzhweDsKICBwYWRkaW5nOiAwIDEycHg7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBkaXNwbGF5OiBibG9jazsKfQoubmV3c19jZW50IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87CiAgYmFja2dyb3VuZDogI2ZmZjsKICBib3JkZXItdG9wOiAxcHggZGFzaGVkICNlZWU7CiAgZGlzcGxheTogZmxleDsKICBwYWRkaW5nOiAxMHB4OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIC5uZXdzX3NwMSB7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogIzAwMDAwMDsKICAgIHdpZHRoOiA3MSU7CiAgfQogIC5uZXdzX2NlbnRfaW1nIHsKICAgIHdpZHRoOiA4MXB4OwogICAgaGVpZ2h0OiA0NnB4OwogICAgYm9yZGVyLXJhZGl1czogNnB4OwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKCiAgICBpbWcgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgfQogIH0KfQo="},{"version":3,"sources":["follow.vue"],"names":[],"mappings":";AAgbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"follow.vue","sourceRoot":"src/pages/app/wechat/reply","sourcesContent":["<template>\n  <div>\n    <pages-header\n      ref=\"pageHeader\"\n      :title=\"$route.meta.title\"\n      :backUrl=\"$routeProStr + '/app/wechat/reply/keyword'\"\n    ></pages-header>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt-16\">\n      <!-- 公众号设置 -->\n      <el-row :gutter=\"24\">\n        <el-col :span=\"24\" class=\"ml40\">\n          <!-- 预览功能 -->\n          <el-col :span=\"24\">\n            <el-col :xl=\"7\" :lg=\"7\" :md=\"22\" :sm=\"22\" :xs=\"22\" class=\"left mb15\">\n              <img class=\"top\" src=\"../../../../assets/images/mobilehead.png\" />\n              <img class=\"bottom\" src=\"../../../../assets/images/mobilefoot.png\" />\n              <div class=\"centent\">\n                <div class=\"time-wrapper\"><span class=\"time\">9:36</span></div>\n                <div class=\"view-item text-box clearfix\" v-if=\"formValidate.type !== 'news'\">\n                  <div class=\"avatar fl\"><img src=\"../../../../assets/images/head.gif\" /></div>\n                  <div class=\"box-content fl\">\n                    <span v-text=\"formValidate.data.content\" v-if=\"formValidate.type === 'text'\"></span>\n                    <div class=\"box-content_pic\" v-if=\"formValidate.data.src\">\n                      <img :src=\"formValidate.data.src ? imgUrl + formValidate.data.src : ''\" />\n                    </div>\n                  </div>\n                </div>\n                <div v-if=\"formValidate.type === 'news'\">\n                  <div v-for=\"(j, i) in formValidate.data.list\" :key=\"i\">\n                    <div v-if=\"i === 0\">\n                      <div\n                        class=\"news_pic\"\n                        :style=\"{ backgroundImage: 'url(' + j.image_input[0] + ')', backgroundSize: '100% 100%' }\"\n                      ></div>\n                      <span class=\"news_sp\">{{ j.title }}</span>\n                    </div>\n                    <div v-else class=\"news_cent\">\n                      <span class=\"news_sp1\" v-if=\"j.synopsis\">{{ j.title }}</span>\n                      <div class=\"news_cent_img\" v-if=\"j.image_input.length !== 0\"><img :src=\"j.image_input[0]\" /></div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </el-col>\n            <el-col :xl=\"11\" :lg=\"12\" :md=\"22\" :sm=\"22\" :xs=\"22\">\n              <el-col :span=\"24\" class=\"userAlert\">\n                <div class=\"box-card right\">\n                  <el-form\n                    ref=\"formValidate\"\n                    :model=\"formValidate\"\n                    :rules=\"ruleValidate\"\n                    label-width=\"100px\"\n                    class=\"mt20\"\n                    @submit.native.prevent\n                  >\n                    <el-form-item label=\"关键字：\" prop=\"val\" v-if=\"$route.params.id\">\n                      <div class=\"arrbox\">\n                        <!--:closable=\"$route.params.id==='0'? true : false\"-->\n                        <el-tag\n                          @close=\"handleClose(item)\"\n                          :name=\"item\"\n                          :closable=\"true\"\n                          v-for=\"(item, index) in labelarr\"\n                          :key=\"index\"\n                          >{{ item }}\n                        </el-tag>\n                        <!--:readonly=\"$route.params.id!=='0'\"-->\n                        <input\n                          class=\"arrbox_ip\"\n                          v-model=\"val\"\n                          placeholder=\"输入后回车\"\n                          style=\"width: 90%\"\n                          @keyup.enter=\"addlabel\"\n                        />\n                      </div>\n                    </el-form-item>\n                    <el-form-item label=\"消息状态：\">\n                      <el-radio-group v-model=\"formValidate.status\">\n                        <el-radio :label=\"1\">启用</el-radio>\n                        <el-radio :label=\"0\">禁用</el-radio>\n                      </el-radio-group>\n                    </el-form-item>\n                    <el-form-item label=\"消息类型：\" prop=\"type\">\n                      <el-select\n                        v-model=\"formValidate.type\"\n                        placeholder=\"请选择规则状态\"\n                        style=\"width: 90%\"\n                        @change=\"RuleFactor(formValidate.type)\"\n                      >\n                        <el-option value=\"text\" label=\"文字消息\"></el-option>\n                        <el-option value=\"image\" label=\"图片消息\"></el-option>\n                        <el-option value=\"news\" label=\"图文消息\"></el-option>\n                        <el-option value=\"voice\" label=\"声音消息\"></el-option>\n                      </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"消息内容：\" prop=\"content\" v-if=\"formValidate.type === 'text'\">\n                      <el-input\n                        v-model=\"formValidate.data.content\"\n                        placeholder=\"请填写消息内容\"\n                        style=\"width: 90%\"\n                        type=\"textarea\"\n                        :rows=\"4\"\n                      ></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"选取图文：\" v-if=\"formValidate.type === 'news'\">\n                      <el-button v-db-click @click=\"changePic\">选择图文消息</el-button>\n                    </el-form-item>\n\n                    <el-form-item\n                      :label=\"formValidate.type === 'image' ? '图片地址：' : '语音地址：'\"\n                      prop=\"src\"\n                      v-if=\"formValidate.type === 'image' || formValidate.type === 'voice'\"\n                    >\n                      <div class=\"acea-row row-middle\">\n                        <el-input\n                          readonly=\"readonly\"\n                          placeholder=\"default size\"\n                          style=\"width: 75%\"\n                          class=\"mr15\"\n                          v-model=\"formValidate.data.src\"\n                        />\n                        <el-upload\n                          :show-file-list=\"false\"\n                          :action=\"fileUrl\"\n                          :on-success=\"handleSuccess\"\n                          :accept=\"formValidate.type === 'image' ? formatImg : formatVoice\"\n                          :max-size=\"2048\"\n                          :headers=\"header\"\n                          :on-format-error=\"handleFormatError\"\n                          :on-exceeded-size=\"handleMaxSize\"\n                          :before-upload=\"beforeUpload\"\n                          class=\"mr20\"\n                          style=\"margin-top: 1px\"\n                        >\n                          <el-button type=\"primary\">上传</el-button>\n                        </el-upload>\n                      </div>\n                      <span v-show=\"formValidate.type === 'image'\">文件最大2Mb，支持bmp/png/jpeg/jpg/gif格式</span>\n                      <span v-show=\"formValidate.type === 'voice'\">文件最大2Mb，支持mp3格式,播放长度不超过60s</span>\n                    </el-form-item>\n                    <el-form-item>\n                      <el-button type=\"primary\" class=\"mr20\" v-db-click @click=\"submenus('formValidate')\"\n                        >保存并发布\n                      </el-button>\n                    </el-form-item>\n                  </el-form>\n                </div>\n              </el-col>\n              <!-- <el-col :span=\"24\">\n                <div class=\"acea-row row-center\">\n                  <el-button type=\"primary\" class=\"mr20\" v-db-click @click=\"submenus('formValidate')\">保存并发布 </el-button>\n                </div>\n              </el-col> -->\n            </el-col>\n          </el-col>\n        </el-col>\n      </el-row>\n    </el-card>\n\n    <!--图文消息 -->\n    <el-dialog :visible.sync=\"modals\" title=\"发送消息\" width=\"1200px\" :lock-scroll=\"false\" class=\"modelBox\">\n      <news-category\n        v-if=\"modals\"\n        @getCentList=\"getCentList\"\n        :scrollerHeight=\"scrollerHeight\"\n        :contentTop=\"contentTop\"\n        :contentWidth=\"contentWidth\"\n        :maxCols=\"maxCols\"\n      ></news-category>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport Setting from '@/setting';\nimport { replyApi, keywordsinfoApi } from '@/api/app';\n// import { mapActions } from 'vuex'\nimport newsCategory from '@/components/newsCategory/index';\nimport { getCookies } from '@/libs/util';\nimport { isPicUpload } from '@/utils';\n\nexport default {\n  name: 'follow',\n  components: { newsCategory },\n  data() {\n    const validateContent = (rule, value, callback) => {\n      if (this.formValidate.type === 'text') {\n        if (this.formValidate.data.content === '') {\n          callback(new Error('请填写规则内容'));\n        } else {\n          callback();\n        }\n      }\n    };\n    const validateSrc = (rule, value, callback) => {\n      if (this.formValidate.type === 'image' && this.formValidate.data.src === '') {\n        callback(new Error('请上传'));\n      } else {\n        callback();\n      }\n    };\n    const validateVal = (rule, value, callback) => {\n      if (this.labelarr.length === 0) {\n        callback(new Error('请输入后回车'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      delfromData: {},\n      isShow: false,\n      maxCols: 4,\n      scrollerHeight: '600',\n      contentTop: '130',\n      contentWidth: '98%',\n      modals: false,\n      val: '',\n      formatImg: ['jpg', 'jpeg', 'png', 'bmp', 'gif'],\n      formatVoice: ['mp3', 'wma', 'wav', 'amr'],\n      header: {},\n      formValidate: {\n        status: -1,\n        type: '',\n        key: this.$route.params.key || '',\n        data: {\n          content: '',\n          src: '',\n          list: [],\n        },\n        id: 0,\n      },\n      fileUrl: Setting.apiBaseURL + '/file/upload/1',\n      ruleValidate: {\n        val: [{ required: true, validator: validateVal, trigger: 'change' }],\n        type: [{ required: true, message: '请选择消息类型', trigger: 'change' }],\n        content: [{ required: true, validator: validateContent, trigger: 'blur' }],\n        src: [{ required: true, validator: validateSrc, trigger: 'change' }],\n      },\n      labelarr: [],\n    };\n  },\n  watch: {\n    $route(to, from) {\n      if (this.$route.params.key || this.$route.params.id !== '0') {\n        this.formValidate.key = this.$route.params.key;\n        this.details();\n      } else {\n        this.labelarr = [];\n        this.$refs['formValidate'].resetFields();\n      }\n    },\n  },\n  computed: {\n    imgUrl() {\n      const search = '/adminapi/';\n      const start = Setting.apiBaseURL.indexOf(search);\n      return Setting.apiBaseURL.substring(0, start); // 截取字符串\n    },\n  },\n  mounted() {\n    this.getToken();\n    if (this.$route.params.key || (this.$route.params.id && this.$route.params.id !== '0')) {\n      this.details();\n    }\n  },\n  methods: {\n    beforeUpload(file) {},\n    getCentList(val) {\n      this.formValidate.data.list = val.new;\n      this.modals = false;\n    },\n    addlabel() {\n      let count = this.labelarr.indexOf(this.val);\n      if (count === -1) {\n        this.labelarr.push(this.val);\n      }\n      this.val = '';\n    },\n    handleClose(name) {\n      const index = this.labelarr.indexOf(name);\n      this.labelarr.splice(index, 1);\n    },\n    // 详情\n    details() {\n      let url = '';\n      let data = {};\n      if (this.$route.params.id) {\n        url = 'app/wechat/keyword/' + this.$route.params.id;\n        data = {};\n      } else {\n        url = 'app/wechat/reply';\n        data = {\n          key: {\n            key: this.formValidate.key,\n          },\n        };\n      }\n      keywordsinfoApi(url, data)\n        .then(async (res) => {\n          if (res.data.info.data instanceof Array) {\n            this.formValidate.status = 0;\n            return;\n          }\n          let info = res.data.info || {};\n          let data = info.data || {};\n          this.formValidate = {\n            status: info.status,\n            type: info.type,\n            key: info.key,\n            data: {\n              content: data.content,\n              src: data.src,\n              list: data.list,\n            },\n            id: info.id,\n          };\n          if (this.$route.params.id) {\n            this.labelarr = this.formValidate.key.split(',') || [];\n          }\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 选择图文\n    changePic() {\n      this.modals = true;\n    },\n    // 下拉选择\n    RuleFactor(type) {\n      switch (type) {\n        case 'text':\n          this.formValidate.data.src = '';\n          this.formValidate.data.list = [];\n          break;\n        case 'news':\n          this.formValidate.data.src = '';\n          this.formValidate.data.content = '';\n          break;\n        default:\n          this.formValidate.data.list = [];\n          this.formValidate.data.content = '';\n          this.formValidate.data.src = '';\n      }\n      // this.$refs['formValidate'].resetFields();\n    },\n    // 上传头部token\n    getToken() {\n      this.header['Authori-zation'] = 'Bearer ' + getCookies('token');\n    },\n    // 上传成功\n    handleSuccess(res, file) {\n      if (res.status === 200) {\n        this.formValidate.data.src = res.data.src;\n        this.$message.success(res.msg);\n      } else {\n        this.$message.error(res.msg);\n      }\n    },\n    handleFormatError(file) {\n      if (this.formValidate.type === 'image') {\n        this.$message.warning('请上传bmp/png/jpeg/jpg/gif格式的图片');\n      } else {\n        this.$message.warning('请上传mp3/wma/wav/amr格式的语音');\n      }\n    },\n    handleMaxSize(file) {\n      this.$message.warning('请上传文件2M以内的文件');\n    },\n    // 保存\n    submenus(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          let data = {};\n          if (this.$route.params.id) {\n            this.formValidate.key = this.labelarr.join(',');\n            data = {\n              url: 'app/wechat/keyword/' + this.$route.params.id,\n              key: this.formValidate,\n            };\n          } else {\n            data = {\n              url: 'app/wechat/keyword/' + this.formValidate.id,\n              key: this.formValidate,\n            };\n          }\n          replyApi(data)\n            .then(async (res) => {\n              this.operation();\n              this.$message.success(res.msg);\n            })\n            .catch((res) => {\n              this.$message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 保存成功操作\n    operation() {\n      if (this.$route.params.id && this.$route.params.id === '0') {\n        this.$msgbox({\n          title: '提示',\n          message: '是否继续添加',\n          showCancelButton: true,\n          cancelButtonText: '否',\n          confirmButtonText: '是',\n          iconClass: 'el-icon-warning',\n          confirmButtonClass: 'btn-custom-cancel',\n        })\n          .then(() => {\n            setTimeout(() => {\n              this.labelarr = [];\n              this.val = '';\n              this.$refs['formValidate'].resetFields();\n            }, 1000);\n          })\n          .catch(() => {\n            setTimeout(() => {\n              this.$router.push({ path: this.$routeProStr + '/app/wechat/reply/keyword' });\n            }, 500);\n          });\n      } else if (this.$route.params.id && this.$route.params.id !== '0') {\n        this.$router.push({ path: this.$routeProStr + '/app/wechat/reply/keyword' });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n* {\n  -moz-user-select: none; /* 火狐 */\n  -webkit-user-select: none; /* webkit浏览器 */\n  -ms-user-select: none; /* IE10 */\n  -khtml-user-select: none; /* 早期浏览器 */\n  user-select: none;\n}\n.arrbox {\n  background-color: white;\n  font-size: 12px;\n  border: 1px solid #dcdee2;\n  border-radius: 6px;\n  margin-bottom: 0px;\n  padding: 0 5px;\n  text-align: left;\n  box-sizing: border-box;\n  width: 90%;\n  .el-tag {\n    margin-right: 3px;\n  }\n}\n.arrbox_ip {\n  font-size: 12px;\n  border: none;\n  box-shadow: none;\n  outline: none;\n  background-color: transparent;\n  padding: 0;\n  margin: 0;\n  width: auto !important;\n  max-width: inherit;\n  min-width: 80px;\n  vertical-align: top;\n  height: 30px;\n  color: #34495e;\n  margin: 2px;\n  line-height: 30px;\n}\n.left {\n  min-width: 390px;\n  min-height: 550px;\n  position: relative;\n  padding-left: 40px;\n}\n.top {\n  position: absolute;\n  top: 0px;\n}\n.bottom {\n  position: absolute;\n  bottom: 0px;\n}\n.centent {\n  background: #f4f5f9;\n  min-height: 438px;\n  position: absolute;\n  top: 63px;\n  width: 320px;\n  height: 60%;\n  overflow-y: auto;\n  padding: 15px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.right {\n  background: #fff;\n  min-height: 300px;\n}\n.box-content {\n  position: relative;\n  max-width: 60%;\n  min-height: 40px;\n  margin-left: 15px;\n  padding: 10px;\n  box-sizing: border-box;\n  border: 1px solid #ccc;\n  word-break: break-all;\n  word-wrap: break-word;\n  line-height: 1.5;\n  border-radius: 5px;\n}\n.box-content_pic {\n  width: 100%;\n}\n.box-content_pic img {\n  width: 100%;\n  height: auto;\n}\n.box-content:before {\n  content: '';\n  position: absolute;\n  left: -13px;\n  top: 11px;\n  display: block;\n  width: 0;\n  height: 0;\n  border-left: 8px solid transparent;\n  border-right: 8px solid transparent;\n  border-top: 10px solid #ccc;\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.box-content:after {\n  content: '';\n  content: '';\n  position: absolute;\n  left: -12px;\n  top: 11px;\n  display: block;\n  width: 0;\n  height: 0;\n  border-left: 8px solid transparent;\n  border-right: 8px solid transparent;\n  border-top: 10px solid #f5f5f5;\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.time-wrapper {\n  margin-bottom: 10px;\n  text-align: center;\n}\n.time {\n  display: inline-block;\n  color: #f5f5f5;\n  background: rgba(0, 0, 0, 0.3);\n  padding: 3px 8px;\n  border-radius: 3px;\n  font-size: 12px;\n}\n.text-box {\n  display: flex;\n}\n.avatar {\n  width: 40px;\n  height: 40px;\n}\n.avatar img {\n  width: 100%;\n  height: 100%;\n}\n.modelBox {\n  ::v-deep .ivu-modal-body {\n    padding: 0 16px 16px 16px !important;\n  }\n}\n.news_pic {\n  width: 100%;\n  height: 150px;\n  overflow: hidden;\n  position: relative;\n  background-size: 100%;\n  background-position: center center;\n  border-radius: 5px 5px 0 0;\n  padding: 10px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n}\n.news_sp {\n  font-size: 12px;\n  color: #000000;\n  background: #fff;\n  width: 100%;\n  height: 38px;\n  line-height: 38px;\n  padding: 0 12px;\n  box-sizing: border-box;\n  display: block;\n}\n.news_cent {\n  width: 100%;\n  height: auto;\n  background: #fff;\n  border-top: 1px dashed #eee;\n  display: flex;\n  padding: 10px;\n  box-sizing: border-box;\n  justify-content: space-between;\n  .news_sp1 {\n    font-size: 12px;\n    color: #000000;\n    width: 71%;\n  }\n  .news_cent_img {\n    width: 81px;\n    height: 46px;\n    border-radius: 6px;\n    overflow: hidden;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n}\n</style>\n"]}]}