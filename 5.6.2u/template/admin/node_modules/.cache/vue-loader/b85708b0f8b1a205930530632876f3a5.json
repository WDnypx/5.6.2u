{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\lottery\\addGoods.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\lottery\\addGoods.vue","mtime":1745474910463},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBjb3Vwb25MaXN0IGZyb20gJ0AvY29tcG9uZW50cy9jb3Vwb25MaXN0JzsKaW1wb3J0IHVwbG9hZFBpY3R1cmVzIGZyb20gJ0AvY29tcG9uZW50cy91cGxvYWRQaWN0dXJlcyc7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAnQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCc7CmltcG9ydCBmcmVpZ2h0VGVtcGxhdGUgZnJvbSAnQC9jb21wb25lbnRzL2ZyZWlnaHRUZW1wbGF0ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IHVwbG9hZFBpY3R1cmVzLCBnb29kc0xpc3QsIGZyZWlnaHRUZW1wbGF0ZSwgY291cG9uTGlzdCB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RhbFBpYzogZmFsc2UsCiAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgIGlzQ2hvaWNlOiAn5Y2V6YCJJywKICAgICAgdXBkYXRlSWRzOiBbXSwKICAgICAgdXBkYXRlTmFtZTogW10sCiAgICAgIGdvb2RzRGF0YTogewogICAgICAgIHBpYzogJycsCiAgICAgICAgcHJvZHVjdF9pZDogJycsCiAgICAgICAgaW1nOiAnJywKICAgICAgICBjb3ZlckltZzogJycsCiAgICAgIH0sCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIHR5cGU6IDUsIC8v57G75Z6LIDHvvJrmnKrkuK3lpZYy77ya56ev5YiGICAzOuS9meminSAgNO+8mue6ouWMhSA1OuS8mOaDoOWIuCA277ya56uZ5YaF5ZWG5ZOBCiAgICAgICAgbmFtZTogJycsIC8v5rS75Yqo5ZCN56ewCiAgICAgICAgbnVtOiAwLCAvL+WlluWTgeaVsOmHjwogICAgICAgIGltYWdlOiAnJywgLy/lpZblk4Hlm77niYcKICAgICAgICBjaGFuY2U6IDEsIC8v5Lit5aWW5p2D6YeNCiAgICAgICAgcHJvZHVjdF9pZDogMCwgLy/llYblk4FpZAogICAgICAgIGNvdXBvbl9pZDogMCwgLy/kvJjmg6DliLhpZAogICAgICAgIHRvdGFsOiAwLCAvL+WlluWTgeaVsOmHjwogICAgICAgIHByb21wdDogJycsIC8v5o+Q56S66K+tCiAgICAgICAgZ29vZHNfaW1hZ2U6ICcnLCAvL+iHqueUqOWVhuWTgeWbvgogICAgICAgIGNvdXBvbl90aXRsZTogJycsIC8v5LyY5oOg5Yi45ZCN56ewCiAgICAgIH0sCiAgICAgIHJ1bGVWYWxpZGF0ZTogewogICAgICAgIG5hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfllYblk4HlkI3np7AnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgZ29vZHNfaW1hZ2U6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fmt7vliqDllYblk4EnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgbnVtOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0eXBlOiAnbnVtYmVyJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemHkemineaVsOmHjycsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBjaGFuY2U6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5ZWG5ZOB5p2D6YeNJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIGltYWdlOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5aWW5ZOB5Zu+54mHJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHByb21wdDogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaPkOekuuivrScsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgY291cG9uTmFtZTogW10sCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIGVkaXREYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4ge30sCiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGVkaXREYXRhKGRhdGEpIHt9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5lZGl0RGF0YSk7CiAgICBrZXlzLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGVbaXRlbV0gPSB0aGlzLmVkaXREYXRhW2l0ZW1dOwogICAgICBpZiAoaXRlbSA9PT0gJ2NvdXBvbl90aXRsZScgJiYgdGhpcy5lZGl0RGF0YVtpdGVtXSkgewogICAgICAgIHRoaXMuY291cG9uTmFtZS5wdXNoKHsKICAgICAgICAgIHRpdGxlOiB0aGlzLmVkaXREYXRhW2l0ZW1dLAogICAgICAgICAgaWQ6IHRoaXMuZWRpdERhdGEuY291cG9uX2lkLAogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOmAieaLqeWVhuWTgQogICAgY2hhbmdlR29vZHMoKSB7CiAgICAgIHRoaXMubW9kYWxzID0gdHJ1ZTsKICAgICAgdGhpcy4kcmVmcy5nb29kc2xpc3QuZ2V0TGlzdCgpOwogICAgICB0aGlzLiRyZWZzLmdvb2RzbGlzdC5nb29kc0NhdGVnb3J5KCk7CiAgICB9LAogICAgZ2V0Q291cG9uSWQoZSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWQgPSBlLmlkOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25fdGl0bGUgPSBlLmNvdXBvbl90aXRsZTsKICAgICAgbGV0IGNvdXBvbk5hbWUgPSBbXTsKICAgICAgY291cG9uTmFtZS5wdXNoKGUpOwogICAgICB0aGlzLmNvdXBvbk5hbWUgPSBjb3Vwb25OYW1lOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdChuYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdhZGRHb29kc0RhdGEnLCB0aGlzLmZvcm1WYWxpZGF0ZSk7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOaIkOWKnycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+WujOWWhOaVsOaNricpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W5Y2V5byg5Zu+54mH5L+h5oGvCiAgICBnZXRQaWMocGMpIHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2UgPSBwYy5hdHRfZGlyOwogICAgICB0aGlzLm1vZGFsUGljID0gZmFsc2U7CiAgICB9LAogICAgLy8g54K55Ye75ZWG5ZOB5Zu+CiAgICBtb2RhbFBpY1RhcCgpIHsKICAgICAgdGhpcy5tb2RhbFBpYyA9IHRydWU7CiAgICB9LAogICAgY2FuY2VsKCkgewogICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOmAieaLqeeahOWVhuWTgQogICAgZ2V0UHJvZHVjdElkKHByb2R1Y3RMaXN0KSB7CiAgICAgIC8vIGlmIChwcm9kdWN0TGlzdC5sZW5ndGggPiAxKSB7CiAgICAgIC8vICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLmnIDlpJrmt7vliqDkuIDkuKrllYblk4EiKTsKICAgICAgLy8gICByZXR1cm47CiAgICAgIC8vIH0KICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucHJvZHVjdF9pZCA9IHByb2R1Y3RMaXN0LmlkOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5nb29kc19pbWFnZSA9IHByb2R1Y3RMaXN0LmltYWdlOwogICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgICAvLyBwcm9kdWN0TGlzdC5mb3JFYWNoKCh2YWx1ZSkgPT4gewogICAgICAvLyAgIHRoaXMuZm9ybVZhbGlkYXRlLnByb2R1Y3RfaWQgPSB2YWx1ZS5wcm9kdWN0X2lkOwogICAgICAvLyAgIHRoaXMuZm9ybVZhbGlkYXRlLmdvb2RzX2ltYWdlID0gdmFsdWUuaW1hZ2U7CiAgICAgIC8vIH0pOwogICAgfSwKICAgIHJlbW92ZUdvb2RzKCkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5wcm9kdWN0X2lkID0gJyc7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmdvb2RzX2ltYWdlID0gJyc7CiAgICB9LAogICAgcmVtb3ZlKCkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZSA9ICcnOwogICAgfSwKICAgIC8vIOa3u+WKoOS8mOaDoOWIuAogICAgYWRkQ291cG9uKCkgewogICAgICB0aGlzLiRyZWZzLmNvdXBvblRlbXBsYXRlcy5pc1RlbXBsYXRlID0gdHJ1ZTsKICAgICAgdGhpcy4kcmVmcy5jb3Vwb25UZW1wbGF0ZXMudGFibGVMaXN0KCk7CiAgICB9LAogICAgaGFuZGxlQ2xvc2UobmFtZSkgewogICAgICB0aGlzLmNvdXBvbk5hbWUuc3BsaWNlKDAsIDEpOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWQgPSAwOwogICAgfSwKICAgIC8v5a+56LGh5pWw57uE5Y676YeN77ybCiAgICB1bmlxdWUoYXJyKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBNYXAoKTsKICAgICAgcmV0dXJuIGFyci5maWx0ZXIoKGFycikgPT4gIXJlcy5oYXMoYXJyLmlkKSAmJiByZXMuc2V0KGFyci5pZCwgMSkpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["addGoods.vue"],"names":[],"mappings":";AA+HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addGoods.vue","sourceRoot":"src/pages/marketing/lottery","sourcesContent":["<template>\n  <div>\n    <el-form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" label-width=\"90px\">\n      <el-form-item label=\"奖品：\" prop=\"type\">\n        <el-radio-group v-model=\"formValidate.type\">\n          <el-radio :label=\"1\">未中奖</el-radio>\n          <el-radio :label=\"5\">优惠券</el-radio>\n          <el-radio :label=\"2\">积分</el-radio>\n          <el-radio :label=\"6\">商品</el-radio>\n          <el-radio :label=\"4\">红包</el-radio>\n          <el-radio :label=\"3\">余额</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"赠送优惠券：\" v-if=\"formValidate.type == 5\">\n        <div v-if=\"couponName.length\" class=\"mb20\">\n          <el-tag closable v-for=\"(item, index) in couponName\" :key=\"index\" @close=\"handleClose(item)\">{{\n            item.title\n          }}</el-tag>\n        </div>\n        <el-button type=\"primary\" v-db-click @click=\"addCoupon\" v-if=\"!couponName.length\">添加优惠券</el-button>\n      </el-form-item>\n      <el-form-item\n        :label=\"[3, 4].includes(formValidate.type) ? '金额信息' : '积分数量'\"\n        prop=\"num\"\n        v-if=\"[2, 3, 4].includes(formValidate.type)\"\n      >\n        <el-input-number\n          :controls=\"false\"\n          v-model=\"formValidate.num\"\n          placeholder=\"请输入金额数量\"\n          :max=\"9999999999\"\n          :min=\"0.1\"\n          style=\"width: 300px\"\n        ></el-input-number>\n        <div class=\"ml100 grey\">\n          {{\n            formValidate.type == 3\n              ? '用户领取余额后会自动到账余额账户'\n              : formValidate.type == 4\n              ? '用户抽到之后需要在抽奖列表中手动领取，需要开通微信支付的商家转账功能，金额不能小于0.1元'\n              : ''\n          }}\n        </div>\n      </el-form-item>\n      <el-form-item v-if=\"formValidate.type == 6\" label=\"商品：\" prop=\"goods_image\">\n        <template v-if=\"formValidate.goods_image\">\n          <div class=\"upload-list\">\n            <img :src=\"formValidate.goods_image\" />\n            <i class=\"el-icon-error\" v-db-click @click=\"removeGoods()\" style=\"font-size: 16px\"></i>\n          </div>\n        </template>\n        <div v-else class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-db-click @click=\"changeGoods\">\n          <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n        </div>\n      </el-form-item>\n      <el-form-item label=\"奖品名称：\" prop=\"name\">\n        <el-input\n          v-model=\"formValidate.name\"\n          :maxlength=\"10\"\n          placeholder=\"请输入奖品名称\"\n          style=\"width: 300px\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"奖品图片：\" prop=\"image\">\n        <template v-if=\"formValidate.image\">\n          <div class=\"upload-list\">\n            <img :src=\"formValidate.image\" />\n            <i class=\"el-icon-error\" v-db-click @click=\"remove()\" style=\"font-size: 16px\"></i>\n          </div>\n        </template>\n        <div v-else class=\"upLoad pictrueTab acea-row row-center-wrapper\">\n          <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\" v-db-click @click=\"modalPic = true\"></i>\n        </div>\n        <!-- <div class=\"info\">选择商品</div> -->\n      </el-form-item>\n      <el-form-item label=\"奖品数量：\" prop=\"total\">\n        <el-input-number\n          :controls=\"false\"\n          v-model=\"formValidate.total\"\n          placeholder=\"请输入奖品数量\"\n          :max=\"9999999999\"\n          :min=\"0\"\n          :precision=\"0\"\n          style=\"width: 300px\"\n        ></el-input-number>\n      </el-form-item>\n      <el-form-item label=\"奖品概率(%)：\" prop=\"percent\">\n        <el-input-number\n          :controls=\"false\"\n          v-model=\"formValidate.percent\"\n          placeholder=\"请输入奖品概率\"\n          :max=\"100\"\n          :min=\"0\"\n          :precision=\"2\"\n          style=\"width: 300px\"\n        ></el-input-number>\n      </el-form-item>\n      <el-form-item label=\"提示语：\" prop=\"prompt\">\n        <el-input\n          v-model=\"formValidate.prompt\"\n          :maxlength=\"15\"\n          placeholder=\"请输入提示语\"\n          style=\"width: 300px\"\n        ></el-input>\n      </el-form-item>\n      <!-- <el-form-item>\n        <el-button type=\"primary\" v-db-click @click=\"handleSubmit('formValidate')\">提交</el-button>\n      </el-form-item> -->\n    </el-form>\n    <!-- 上传图片-->\n    <el-dialog :visible.sync=\"modalPic\" :modal=\"false\" width=\"1024px\" title=\"上传图片\" :close-on-click-modal=\"false\">\n      <uploadPictures :isChoice=\"isChoice\" @getPic=\"getPic\" v-if=\"modalPic\"></uploadPictures>\n    </el-dialog>\n    <el-dialog :visible.sync=\"modals\" :modal=\"false\" title=\"商品列表\" class=\"paymentFooter\" width=\"1000px\">\n      <goods-list ref=\"goodslist\" @getProductId=\"getProductId\"></goods-list>\n    </el-dialog>\n    <coupon-list ref=\"couponTemplates\" :luckDraw=\"true\" @getCouponId=\"getCouponId\"></coupon-list>\n    <!--<coupon-list-->\n    <!--ref=\"couponTemplates\"-->\n    <!--@nameId=\"nameId\"-->\n    <!--:updateIds=\"updateIds\"-->\n    <!--:updateName=\"updateName\"-->\n    <!--&gt;</coupon-list>-->\n  </div>\n</template>\n\n<script>\nimport couponList from '@/components/couponList';\nimport uploadPictures from '@/components/uploadPictures';\nimport goodsList from '@/components/goodsList/index';\nimport freightTemplate from '@/components/freightTemplate';\nexport default {\n  components: { uploadPictures, goodsList, freightTemplate, couponList },\n  data() {\n    return {\n      modalPic: false,\n      modals: false,\n      isChoice: '单选',\n      updateIds: [],\n      updateName: [],\n      goodsData: {\n        pic: '',\n        product_id: '',\n        img: '',\n        coverImg: '',\n      },\n      formValidate: {\n        type: 5, //类型 1：未中奖2：积分  3:余额  4：红包 5:优惠券 6：站内商品\n        name: '', //活动名称\n        num: 0, //奖品数量\n        image: '', //奖品图片\n        chance: 1, //中奖权重\n        product_id: 0, //商品id\n        coupon_id: 0, //优惠券id\n        total: 0, //奖品数量\n        prompt: '', //提示语\n        goods_image: '', //自用商品图\n        coupon_title: '', //优惠券名称\n      },\n      ruleValidate: {\n        name: [\n          {\n            required: true,\n            message: '商品名称',\n            trigger: 'blur',\n          },\n        ],\n        goods_image: [\n          {\n            required: true,\n            message: '请添加商品',\n            trigger: 'blur',\n          },\n        ],\n        num: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入金额数量',\n            trigger: 'blur',\n          },\n        ],\n        chance: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入商品权重',\n            trigger: 'blur',\n          },\n        ],\n        image: [\n          {\n            required: true,\n            message: '请选择奖品图片',\n            trigger: 'blur',\n          },\n        ],\n        prompt: [\n          {\n            required: true,\n            message: '请输入提示语',\n            trigger: 'blur',\n          },\n        ],\n      },\n      couponName: [],\n    };\n  },\n  props: {\n    editData: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  watch: {\n    editData(data) {},\n  },\n  mounted() {\n    let keys = Object.keys(this.editData);\n    keys.forEach((item) => {\n      this.formValidate[item] = this.editData[item];\n      if (item === 'coupon_title' && this.editData[item]) {\n        this.couponName.push({\n          title: this.editData[item],\n          id: this.editData.coupon_id,\n        });\n      }\n    });\n  },\n  methods: {\n    // 选择商品\n    changeGoods() {\n      this.modals = true;\n      this.$refs.goodslist.getList();\n      this.$refs.goodslist.goodsCategory();\n    },\n    getCouponId(e) {\n      this.formValidate.coupon_id = e.id;\n      this.formValidate.coupon_title = e.coupon_title;\n      let couponName = [];\n      couponName.push(e);\n      this.couponName = couponName;\n    },\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.$emit('addGoodsData', this.formValidate);\n          this.$message.success('添加成功');\n        } else {\n          this.$message.warning('请完善数据');\n        }\n      });\n    },\n    // 获取单张图片信息\n    getPic(pc) {\n      this.formValidate.image = pc.att_dir;\n      this.modalPic = false;\n    },\n    // 点击商品图\n    modalPicTap() {\n      this.modalPic = true;\n    },\n    cancel() {\n      this.modals = false;\n    },\n    // 选择的商品\n    getProductId(productList) {\n      // if (productList.length > 1) {\n      //   this.$message.warning(\"最多添加一个商品\");\n      //   return;\n      // }\n      this.formValidate.product_id = productList.id;\n      this.formValidate.goods_image = productList.image;\n      this.modals = false;\n      // productList.forEach((value) => {\n      //   this.formValidate.product_id = value.product_id;\n      //   this.formValidate.goods_image = value.image;\n      // });\n    },\n    removeGoods() {\n      this.formValidate.product_id = '';\n      this.formValidate.goods_image = '';\n    },\n    remove() {\n      this.formValidate.image = '';\n    },\n    // 添加优惠券\n    addCoupon() {\n      this.$refs.couponTemplates.isTemplate = true;\n      this.$refs.couponTemplates.tableList();\n    },\n    handleClose(name) {\n      this.couponName.splice(0, 1);\n      this.formValidate.coupon_id = 0;\n    },\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.pictrueBox {\n  display: inline-block;\n}\n.pictrue {\n  width: 60px;\n  height: 60px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  margin-right: 15px;\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n  .btndel {\n    position: absolute;\n    z-index: 1;\n    width: 20px !important;\n    height: 20px !important;\n    left: 46px;\n    top: -4px;\n  }\n}\n.upload-list {\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n  position: relative;\n  .el-icon-error {\n    position: absolute;\n    right: -8px;\n    top: -8px;\n  }\n}\n.upload-list img {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.upLoad {\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n}\n.ivu-icon-ios-close-circle {\n  position: absolute;\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n}\n.grey {\n  color: #999;\n}\n</style>\n"]}]}