{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\finance\\billingRecords\\index.vue?vue&type=style&index=0&id=3c1e7e23&scoped=true&lang=scss","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\finance\\billingRecords\\index.vue","mtime":1729039381090},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\css-loader\\index.js","mtime":1753254259822},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1753254262918},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1753254258547},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1753254255270},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Cjo6di1kZWVwIC5lbC10YWJzX19pdGVtIHsKICBoZWlnaHQ6IDU0cHggIWltcG9ydGFudDsKICBsaW5lLWhlaWdodDogNTRweCAhaW1wb3J0YW50Owp9Cjo6di1kZWVwIC5pdnUtY2FyZC1ib2R5IHsKICBwYWRkaW5nOiAwOwp9CgoudGFiYm94IHsKICBwYWRkaW5nOiAxNnB4IDIwcHggMHB4Owp9Ci5ib3ggewogIHBhZGRpbmc6IDIwcHg7CiAgcGFkZGluZy1ib3R0b206IDFweDsKfQoudGFibGVib3ggewogIG1hcmdpbi10b3A6IDE1cHg7CiAgcGFkZGluZy1ib3R0b206IDEwcHg7Cn0KLmJ0bmJveCB7CiAgcGFkZGluZzogMjBweCAwcHggMHB4IDMwcHg7CiAgLmJ0bnMgewogICAgd2lkdGg6IDk5cHg7CiAgICBoZWlnaHQ6IDMycHg7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmV2LWNvbG9yLXByaW1hcnkpOwogICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbGluZS1oZWlnaHQ6IDMycHg7CiAgICBjb2xvcjogI2ZmZmZmZjsKICAgIGN1cnNvcjogcG9pbnRlcjsKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAkOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/finance/billingRecords","sourcesContent":["<template>\n  <div>\n    <el-card :bordered=\"false\" shadow=\"never\" :body-style=\"{ padding: 0 }\">\n      <div class=\"padding-add\">\n        <el-form\n          ref=\"formValidate\"\n          :model=\"formValidate\"\n          :label-width=\"labelWidth\"\n          :label-position=\"labelPosition\"\n          @submit.native.prevent\n        >\n          <el-form-item label=\"创建时间：\">\n            <el-date-picker\n              clearable\n              v-model=\"timeVal\"\n              type=\"daterange\"\n              :editable=\"false\"\n              @change=\"onchangeTime\"\n              format=\"yyyy/MM/dd\"\n              value-format=\"yyyy/MM/dd\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              :picker-options=\"pickerOptions\"\n              style=\"width: 250px\"\n              class=\"mr20\"\n            ></el-date-picker>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"mt16\" :body-style=\"{ padding: '0 20px 20px' }\">\n      <div class=\"ivu-mt\">\n        <el-tabs v-model=\"tab\" @tab-click=\"onClickTab\">\n          <el-tab-pane label=\"日账单\" name=\"day\" />\n          <el-tab-pane label=\"周账单\" name=\"week\" />\n          <el-tab-pane label=\"月账单\" name=\"month\" />\n        </el-tabs>\n      </div>\n      <div class=\"table\">\n        <el-table\n          :data=\"orderList\"\n          ref=\"table\"\n          v-loading=\"loading\"\n          highlight-current-row\n          no-userFrom-text=\"暂无数据\"\n          no-filtered-userFrom-text=\"暂无筛选结果\"\n        >\n          <el-table-column label=\"ID\" width=\"80\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.id }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"标题\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.title }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"日期\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.add_time }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"收入金额\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span style=\"color: #f5222d\">￥{{ scope.row.income_price }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"支出金额\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span style=\"color: #00c050\">￥{{ scope.row.exp_price }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"入账金额\" min-width=\"130\">\n            <template slot-scope=\"scope\">\n              <span>￥{{ scope.row.entry_price }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" fixed=\"right\" width=\"170\">\n            <template slot-scope=\"scope\">\n              <a v-db-click @click=\"Info(scope.row)\">账单详情</a>\n              <el-divider direction=\"vertical\"></el-divider>\n              <a v-db-click @click=\"download(scope.row)\">下载</a>\n            </template>\n          </el-table-column>\n        </el-table>\n        <div class=\"acea-row row-right page\">\n          <pagination\n            v-if=\"total\"\n            :total=\"total\"\n            :page.sync=\"formValidate.page\"\n            :limit.sync=\"formValidate.limit\"\n            @pagination=\"getList\"\n          />\n        </div>\n      </div>\n    </el-card>\n    <el-dialog :visible.sync=\"modals\" title=\"账单详情\" width=\"1000px\">\n      <commission-details v-if=\"modals\" ref=\"commission\" :ids=\"ids\" :time=\"formValidate.time\"></commission-details>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport exportExcel from '@/utils/newToExcel.js';\nimport commissionDetails from '../components/commissionDetails';\nimport { getRecord } from '@/api/statistic.js';\nimport { getFlowList } from '@/api/finance';\n\nexport default {\n  name: 'bill',\n  components: {\n    commissionDetails,\n  },\n  data() {\n    return {\n      modals: false,\n      pickerOptions: this.$timeOptions,\n      ids: '',\n      total: 0,\n      loading: false,\n      tab: 'day',\n      orderList: [\n        {\n          id: '1',\n          order_id: '200',\n          pay_price: '200',\n          status: 1,\n          phone: '13000000000',\n          address: '100',\n        },\n      ],\n      formValidate: {\n        store_id: '',\n        time: '',\n        page: 1,\n        limit: 15,\n      },\n      timeVal: [],\n    };\n  },\n  computed: {\n    labelWidth() {\n      return this.isMobile ? undefined : '80px';\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  mounted() {\n    this.onClickTab(this.tab);\n  },\n  methods: {\n    onClickTab() {\n      this.getList();\n    },\n    search() {\n      this.getList();\n    },\n    getList() {\n      this.loading = true;\n      let data = {\n        type: this.tab,\n        time: this.formValidate.time,\n        page: this.formValidate.page,\n        limit: this.formValidate.limit,\n        store_id: this.formValidate.store_id,\n      };\n      getRecord(data).then((res) => {\n        this.orderList = res.data.list;\n        this.loading = false;\n        this.total = res.data.count;\n      });\n    },\n    // 选择时间\n    selectChange(tab) {\n      this.formValidate.page = 1;\n      this.formValidate.time = tab;\n      this.timeVal = [];\n      this.getList();\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e || [];\n      this.formValidate.time = this.timeVal[0] ? (this.timeVal ? this.timeVal.join('-') : '') : '';\n      this.formValidate.page = 1;\n      this.getList();\n    },\n    // 账单详情\n    Info(row) {\n      this.ids = row.ids || '';\n      this.modals = true;\n    },\n    cancel() {\n      this.modals = false;\n    },\n    //下载\n    async download(row) {\n      let [th, fileKey, data, fileName] = [[], [], [], ''];\n      let excelData = {\n        ids: row.ids,\n        page: 1,\n        export: 1,\n        time: this.formValidate.time,\n      };\n      let lebData = await this.getExcelData(excelData);\n      if (!fileName) fileName = lebData.fileName;\n      if (!fileKey.length) {\n        fileKey = lebData.fileKey;\n      }\n      if (!th.length) th = lebData.header;\n      data = data.concat(lebData.list);\n      exportExcel(th, fileKey, fileName, data);\n      return;\n    },\n    getExcelData(excelData) {\n      return new Promise((resolve, reject) => {\n        getFlowList(excelData).then((res) => {\n          return resolve(res.data);\n        });\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n::v-deep .el-tabs__item {\n  height: 54px !important;\n  line-height: 54px !important;\n}\n::v-deep .ivu-card-body {\n  padding: 0;\n}\n\n.tabbox {\n  padding: 16px 20px 0px;\n}\n.box {\n  padding: 20px;\n  padding-bottom: 1px;\n}\n.tablebox {\n  margin-top: 15px;\n  padding-bottom: 10px;\n}\n.btnbox {\n  padding: 20px 0px 0px 30px;\n  .btns {\n    width: 99px;\n    height: 32px;\n    background: var(--prev-color-primary);\n    border-radius: 4px;\n    text-align: center;\n    line-height: 32px;\n    color: #ffffff;\n    cursor: pointer;\n  }\n}\n</style>\n"]}]}