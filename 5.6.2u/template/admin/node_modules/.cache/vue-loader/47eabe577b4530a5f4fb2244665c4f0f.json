{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\productAdd\\components\\SpecStock.vue?vue&type=style&index=0&id=efbd38ea&lang=scss&scoped=true","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\productAdd\\components\\SpecStock.vue","mtime":1751246651273},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\css-loader\\index.js","mtime":1753254259822},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1753254262918},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1753254258547},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1753254255270},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkB1c2UgJy4uL3Byb2R1Y3RBZGQuc2NzcycgYXMgKjsK"},{"version":3,"sources":["SpecStock.vue"],"names":[],"mappings":";AA2tBA","file":"SpecStock.vue","sourceRoot":"src/pages/product/productAdd/components","sourcesContent":["<template>\n  <!-- 规格库存 -->\n  <el-row :gutter=\"24\">\n    <el-col :span=\"24\">\n      <el-form-item label=\"规格类型：\" props=\"spec_type\">\n        <el-radio-group v-model=\"formValidate.spec_type\" @input=\"changeSpec\">\n          <el-radio :label=\"0\" class=\"radio\">单规格</el-radio>\n          <el-radio :label=\"1\">多规格</el-radio>\n        </el-radio-group>\n        <el-dropdown v-if=\"formValidate.spec_type == 1\" class=\"ml20\" @command=\"confirm\" trigger=\"hover\">\n          <span class=\"el-dropdown-link\"> 选择规格模版<i class=\"el-icon-arrow-down el-icon--right\"></i> </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item v-for=\"(item, index) in ruleList\" :key=\"index\" :command=\"item.rule_name\">{{\n              item.rule_name\n            }}</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </el-form-item>\n    </el-col>\n    <!-- 规格设置 -->\n    <el-col :span=\"24\" v-if=\"formValidate.spec_type === 1\" class=\"noForm\">\n      <el-form-item label=\"商品规格：\" prop=\"\">\n        <div class=\"specifications\">\n          <draggable\n            group=\"specifications\"\n            :disabled=\"attrs.length < 2\"\n            :list=\"attrs\"\n            handle=\".move-icon\"\n            @end=\"onMoveSpec\"\n            animation=\"300\"\n          >\n            <div\n              class=\"specifications-item active\"\n              v-for=\"(item, index) in attrs\"\n              :key=\"index\"\n              @click=\"changeCurrentIndex(index)\"\n            >\n              <div class=\"move-icon\">\n                <span class=\"iconfont icondrag2\"></span>\n              </div>\n              <i class=\"del el-icon-error\" @click=\"handleRemoveRole(index, item.value)\"></i>\n              <div class=\"specifications-item-box\">\n                <div class=\"lineBox\"></div>\n                <div class=\"specifications-item-name mb18\">\n                  <el-input\n                    v-model=\"item.value\"\n                    placeholder=\"规格名称\"\n                    @change=\"attrChangeValue(index, item.value)\"\n                    @focus=\"handleFocus(item.value)\"\n                    class=\"specifications-item-name-input\"\n                    maxlength=\"30\"\n                    show-word-limit\n                  ></el-input>\n                  <el-checkbox\n                    class=\"ml20\"\n                    v-model=\"item.add_pic\"\n                    :disabled=\"!item.add_pic && !canSel\"\n                    :true-label=\"1\"\n                    :false-label=\"0\"\n                    @change=\"(e) => addPic(e, index)\"\n                    >添加规格图</el-checkbox\n                  >\n                  <el-tooltip\n                    class=\"item\"\n                    effect=\"dark\"\n                    content=\"添加规格图片, 仅支持打开一个(建议尺寸:800*800)\"\n                    placement=\"right\"\n                  >\n                    <i class=\"el-icon-info\"></i>\n                  </el-tooltip>\n                </div>\n                <div class=\"rulesBox ml30\">\n                  <draggable\n                    class=\"item\"\n                    :list=\"item.detail\"\n                    :disabled=\"item.detail.length < 2\"\n                    handle=\".drag\"\n                    @end=\"onMoveSpec\"\n                  >\n                    <div v-for=\"(det, indexn) in item.detail\" :key=\"indexn\" class=\"mr10 spec drag\">\n                      <i class=\"el-icon-error\" @click=\"handleRemove2(item.detail, indexn, det.value)\"></i>\n\n                      <el-input\n                        style=\"width: 120px\"\n                        v-model=\"det.value\"\n                        placeholder=\"规格值\"\n                        @change=\"attrDetailChangeValue(det.value, index)\"\n                        @focus=\"handleFocus(det.value)\"\n                        maxlength=\"30\"\n                        @blur=\"handleBlur()\"\n                      >\n                        <template slot=\"prefix\">\n                          <span class=\"iconfont icondrag2\"></span>\n                        </template>\n                      </el-input>\n                      <div class=\"img-popover\" v-if=\"item.add_pic\">\n                        <div class=\"popper-arrow\"></div>\n                        <div class=\"popper\" @click=\"handleSelImg(det, indexn)\">\n                          <img class=\"img\" v-if=\"det.pic\" :src=\"det.pic\" />\n                          <i v-else class=\"el-icon-plus\"></i>\n                        </div>\n                        <i v-if=\"det.pic\" class=\"img-del el-icon-error\" @click=\"handleRemoveImg(det)\"></i>\n                      </div>\n                    </div>\n                    <el-popover\n                      :ref=\"'popoverRef_' + index\"\n                      placement=\"\"\n                      width=\"210\"\n                      trigger=\"click\"\n                      @after-enter=\"handleShowPop(index)\"\n                    >\n                      <el-input\n                        :ref=\"'inputRef_' + index\"\n                        placeholder=\"请输入规格值\"\n                        v-model=\"formDynamic.attrsVal\"\n                        @keyup.enter.native=\"createAttr(formDynamic.attrsVal, index)\"\n                        @blur=\"createAttr(formDynamic.attrsVal, index)\"\n                        maxlength=\"30\"\n                        show-word-limit\n                      >\n                      </el-input>\n                      <div class=\"addfont\" slot=\"reference\" type=\"text\" v-db-click>添加规格值</div>\n                    </el-popover>\n                  </draggable>\n                </div>\n              </div>\n            </div>\n          </draggable>\n          <el-button v-if=\"attrs.length < 4\" v-db-click @click=\"handleAddRole()\">添加新规格</el-button>\n          <el-button v-if=\"attrs.length >= 1\" type=\"text\" v-db-click @click=\"handleSaveAsTemplate()\"\n            >另存为模板</el-button\n          >\n        </div>\n      </el-form-item>\n    </el-col>\n    <el-col :span=\"24\" v-if=\"formValidate.spec_type === 1\">\n      <el-form-item label=\"商品属性：\" class=\"labeltop\" v-if=\"manyFormValidate.length\">\n        <VirtualScroll\n          :data=\"manyFormValidate\"\n          :buffer=\"50\"\n          :height=\"62\"\n          key-prop=\"index\"\n          @change=\"(renderData) => (virtualList = renderData)\"\n        >\n          <!-- <el-table row-key=\"id\" :data=\"virtualList\" height=\"500px\"> </el-table> -->\n          <el-table\n            row-key=\"index\"\n            height=\"700px\"\n            :data=\"manyFormValidate\"\n            style=\"width: 100%\"\n            :cell-class-name=\"tableCellClassName\"\n            :span-method=\"objectSpanMethod\"\n            border\n            :key=\"tableKey\"\n          >\n            <el-table-column\n              v-for=\"(item, index) in formValidate.header\"\n              :key=\"index\"\n              :label=\"item.title\"\n              :min-width=\"item.minWidth || '100'\"\n              :fixed=\"item.fixed\"\n            >\n              <template slot-scope=\"scope\">\n                <!-- 批量设置 -->\n                <template v-if=\"scope.$index == 0\">\n                  <template v-if=\"item.key\">\n                    <div v-if=\"attrs.length && attrs[scope.column.index] && manyFormValidate.length\">\n                      <el-select v-model=\"oneFormBatch[0][item.title]\" :placeholder=\"`请选择${item.title}`\" clearable>\n                        <el-option\n                          v-for=\"val in attrs[scope.column.index].detail\"\n                          :key=\"val.value\"\n                          :label=\"val.value\"\n                          :value=\"val.value\"\n                        >\n                        </el-option>\n                      </el-select>\n                    </div>\n                  </template>\n                  <template v-else-if=\"item.slot === 'pic'\">\n                    <div class=\"acea-row row-middle\" v-db-click @click=\"modalPicTap('dan', 'duopi', scope.$index)\">\n                      <div class=\"pictrue pictrueTab\" v-if=\"oneFormBatch[0].pic\">\n                        <img v-lazy=\"oneFormBatch[0].pic\" />\n                      </div>\n                      <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                        <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                      </div>\n                    </div>\n                  </template>\n                  <template v-else-if=\"item.slot === 'price'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"oneFormBatch[0].price\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                      clearable\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'cost'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"oneFormBatch[0].cost\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                      clearable\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'ot_price'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"oneFormBatch[0].ot_price\"\n                      :min=\"0\"\n                      class=\"priceBox\"\n                      clearable\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'stock'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"oneFormBatch[0].stock\"\n                      :disabled=\"formValidate.virtual_type == 1\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                      clearable\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'fictitious'\"> -- </template>\n                  <template v-else-if=\"item.slot === 'bar_code'\">\n                    <el-input v-model=\"oneFormBatch[0].bar_code\"></el-input>\n                  </template>\n                  <template v-else-if=\"item.slot === 'bar_code_number'\">\n                    <el-input v-model=\"oneFormBatch[0].bar_code_number\"></el-input>\n                  </template>\n                  <template v-else-if=\"item.slot === 'weight'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"oneFormBatch[0].weight\"\n                      :step=\"0.1\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                      clearable\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'volume'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"oneFormBatch[0].volume\"\n                      :step=\"0.1\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                      clearable\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'selected_spec'\"> -- </template>\n                  <template v-else-if=\"item.slot === 'action'\">\n                    <a v-db-click @click=\"batchAdd\">批量修改</a>\n                    <el-divider direction=\"vertical\"></el-divider>\n                    <a v-db-click @click=\"batchDel\">清空</a>\n                  </template>\n                </template>\n                <template v-else>\n                  <template v-if=\"item.key\">\n                    <div>\n                      <span>{{ scope.row.detail[item.key] }}</span>\n                    </div>\n                  </template>\n                  <template v-if=\"item.slot === 'pic'\">\n                    <div class=\"acea-row row-middle\" v-db-click @click=\"modalPicTap('dan', 'duoTable', scope.$index)\">\n                      <div class=\"pictrue pictrueTab\" v-if=\"manyFormValidate[scope.$index].pic\">\n                        <img v-lazy=\"manyFormValidate[scope.$index].pic\" />\n                      </div>\n                      <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                        <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                      </div>\n                    </div>\n                  </template>\n                  <template v-if=\"item.slot === 'price'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"manyFormValidate[scope.$index].price\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'cost'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"manyFormValidate[scope.$index].cost\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'ot_price'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"manyFormValidate[scope.$index].ot_price\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'stock'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"manyFormValidate[scope.$index].stock\"\n                      :disabled=\"formValidate.virtual_type == 1\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      :precision=\"0\"\n                      class=\"priceBox\"\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'bar_code'\">\n                    <el-input v-model=\"manyFormValidate[scope.$index].bar_code\"></el-input>\n                  </template>\n                  <template v-else-if=\"item.slot === 'bar_code_number'\">\n                    <el-input v-model=\"manyFormValidate[scope.$index].bar_code_number\"></el-input>\n                  </template>\n                  <template v-else-if=\"item.slot === 'weight'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"manyFormValidate[scope.$index].weight\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'volume'\">\n                    <el-input-number\n                      :controls=\"false\"\n                      v-model=\"manyFormValidate[scope.$index].volume\"\n                      :min=\"0\"\n                      :max=\"9999999999\"\n                      class=\"priceBox\"\n                    ></el-input-number>\n                  </template>\n                  <template v-else-if=\"item.slot === 'fictitious'\">\n                    <el-button\n                      v-if=\"!manyFormValidate[scope.$index].coupon_id && formValidate.virtual_type == 2\"\n                      v-db-click\n                      @click=\"addGoodsCoupon(scope.$index, 'manyFormValidate')\"\n                      >选择优惠券</el-button\n                    >\n                    <span\n                      class=\"see\"\n                      v-else-if=\"manyFormValidate[scope.$index].coupon_id && formValidate.virtual_type == 2\"\n                      v-db-click\n                      @click=\"see(manyFormValidate[scope.$index], 'manyFormValidate', scope.$index)\"\n                      >{{ manyFormValidate[scope.$index].coupon_name }}</span\n                    >\n                    <el-button\n                      v-else-if=\"\n                        !manyFormValidate[scope.$index].virtual_list.length &&\n                        !manyFormValidate[scope.$index].stock &&\n                        formValidate.virtual_type == 1\n                      \"\n                      v-db-click\n                      @click=\"addVirtual(scope.$index, 'manyFormValidate')\"\n                      >添加卡密</el-button\n                    >\n                    <span\n                      class=\"see\"\n                      v-else-if=\"\n                        (manyFormValidate[scope.$index].virtual_list.length || manyFormValidate[scope.$index].stock) &&\n                        formValidate.virtual_type == 1\n                      \"\n                      v-db-click\n                      @click=\"see(manyFormValidate[scope.$index], 'manyFormValidate', scope.$index)\"\n                      >已设置</span\n                    >\n                  </template>\n\n                  <template v-else-if=\"item.slot === 'selected_spec'\">\n                    <el-switch\n                      v-model=\"manyFormValidate[scope.$index].is_default_select\"\n                      :active-value=\"1\"\n                      :inactive-value=\"0\"\n                      @change=\"(e) => changeDefaultSelect(e, scope.$index)\"\n                    />\n                  </template>\n                  <template v-else-if=\"item.slot === 'action'\">\n                    <el-switch\n                      class=\"defineSwitch\"\n                      v-model=\"manyFormValidate[scope.$index].is_show\"\n                      active-text=\"显示\"\n                      inactive-text=\"隐藏\"\n                      :active-value=\"1\"\n                      :inactive-value=\"0\"\n                      @change=\"changeDefaultShow(scope.$index)\"\n                    />\n                  </template>\n                </template>\n              </template>\n            </el-table-column>\n          </el-table>\n        </VirtualScroll>\n      </el-form-item>\n    </el-col>\n    <!-- ------------------------------------------------- -->\n    <!-- 单规格表格-->\n    <div v-if=\"formValidate.spec_type === 0\">\n      <el-col :span=\"24\">\n        <el-form-item label=\"图片：\">\n          <div class=\"pictrueBox\" v-db-click @click=\"modalPicTap('dan', 'danTable', 0)\">\n            <div class=\"pictrue\" v-if=\"oneFormValidate[0].pic\">\n              <img v-lazy=\"oneFormValidate[0].pic\" />\n              <el-input v-model=\"oneFormValidate[0].pic\" style=\"display: none\"></el-input>\n            </div>\n            <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n              <el-input v-model=\"oneFormValidate[0].pic\" style=\"display: none\"></el-input>\n              <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n            </div>\n          </div>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"24\">\n        <el-form-item label=\"售价：\">\n          <el-input-number\n            :controls=\"false\"\n            v-model=\"oneFormValidate[0].price\"\n            :min=\"0\"\n            :precision=\"2\"\n            :max=\"9999999999\"\n            class=\"input_width input-number-unit-class\"\n            :active-change=\"false\"\n            class-unit=\"元\"\n          ></el-input-number>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"24\">\n        <el-form-item label=\"成本价：\">\n          <el-input-number\n            :controls=\"false\"\n            v-model=\"oneFormValidate[0].cost\"\n            :min=\"0\"\n            :max=\"9999999999\"\n            :precision=\"2\"\n            :active-change=\"false\"\n            class=\"input_width input-number-unit-class\"\n            class-unit=\"元\"\n          ></el-input-number>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"24\">\n        <el-form-item label=\"划线价：\">\n          <el-input-number\n            :controls=\"false\"\n            v-model=\"oneFormValidate[0].ot_price\"\n            :min=\"0\"\n            :max=\"9999999999\"\n            :precision=\"2\"\n            :active-change=\"false\"\n            class=\"input_width input-number-unit-class\"\n            class-unit=\"元\"\n          ></el-input-number>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"24\">\n        <el-form-item label=\"库存：\">\n          <el-input-number\n            :controls=\"false\"\n            v-model=\"oneFormValidate[0].stock\"\n            :min=\"0\"\n            :max=\"9999999999\"\n            :disabled=\"formValidate.virtual_type == 1\"\n            :precision=\"0\"\n            class=\"input_width input-number-unit-class\"\n            :class-unit=\"formValidate.unit_name || '件'\"\n          ></el-input-number>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"24\">\n        <el-form-item label=\"商品编码：\">\n          <el-input v-model.trim=\"oneFormValidate[0].bar_code\" class=\"input_width\"></el-input>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"24\">\n        <el-form-item label=\"条形码：\">\n          <el-input v-model.trim=\"oneFormValidate[0].bar_code_number\" class=\"input_width\"></el-input>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"24\" v-if=\"formValidate.virtual_type == 0\">\n        <el-form-item label=\"重量：\">\n          <el-input-number\n            :controls=\"false\"\n            v-model=\"oneFormValidate[0].weight\"\n            :min=\"0\"\n            :max=\"9999999999\"\n            class=\"input_width input-number-unit-class\"\n            class-unit=\"kg\"\n          ></el-input-number>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"24\">\n        <el-form-item label=\"体积：\" v-if=\"formValidate.virtual_type == 0\">\n          <el-input-number\n            :controls=\"false\"\n            v-model=\"oneFormValidate[0].volume\"\n            :min=\"0\"\n            :max=\"9999999999\"\n            class=\"input_width input-number-unit-class\"\n            class-unit=\"m³\"\n          ></el-input-number>\n        </el-form-item>\n      </el-col>\n\n      <el-col :span=\"24\">\n        <el-form-item\n          :label=\"formValidate.virtual_type == 1 ? '添加卡密/网盘：' : '选择优惠券：'\"\n          v-if=\"formValidate.virtual_type == 1 || formValidate.virtual_type == 2\"\n        >\n          <el-button\n            v-if=\"!oneFormValidate[0].coupon_id && formValidate.virtual_type == 2\"\n            v-db-click\n            @click=\"addGoodsCoupon(0, 'oneFormValidate')\"\n            >选择优惠券</el-button\n          >\n          <span\n            class=\"see\"\n            v-else-if=\"oneFormValidate[0].coupon_id && formValidate.virtual_type == 2\"\n            v-db-click\n            @click=\"see(oneFormValidate[0], 'oneFormValidate', 0)\"\n            >{{ oneFormValidate[0].coupon_name }}</span\n          >\n          <el-button\n            v-if=\"\n              !oneFormValidate[0].virtual_list.length && !oneFormValidate[0].stock && formValidate.virtual_type == 1\n            \"\n            v-db-click\n            @click=\"addVirtual(0, 'oneFormValidate')\"\n            >添加卡密</el-button\n          >\n          <span\n            class=\"see\"\n            v-else-if=\"\n              (oneFormValidate[0].virtual_list.length || oneFormValidate[0].stock > 0) && formValidate.virtual_type == 1\n            \"\n            v-db-click\n            @click=\"see(oneFormValidate[0], 'oneFormValidate', 0)\"\n            >已设置</span\n          >\n        </el-form-item>\n      </el-col>\n    </div>\n  </el-row>\n</template>\n\n<script>\nimport vuedraggable from 'vuedraggable';\nimport VirtualScroll from './virtualTabel.vue';\nexport default {\n  name: 'SpecStock',\n  components: {\n    draggable: vuedraggable,\n    VirtualScroll,\n  },\n  props: {\n    formValidate: {\n      type: Object,\n      required: true,\n    },\n    ruleList: {\n      type: Array,\n      required: true,\n    },\n    attrs: {\n      type: Array,\n      required: true,\n    },\n    manyFormValidate: {\n      type: Array,\n      required: true,\n    },\n    oneFormValidate: {\n      type: Array,\n      required: true,\n    },\n    tableKey: {\n      type: Number,\n      required: true,\n    },\n    canSel: {\n      type: Boolean,\n      required: true,\n    },\n    formDynamic: {\n      type: Object,\n      required: true,\n    },\n    oneFormBatch: {\n      type: Array,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      virtualList: [],\n    };\n  },\n  methods: {\n    changeSpec(val) {\n      this.$emit('changeSpec', val);\n    },\n    confirm(name) {\n      this.$emit('confirm', name);\n    },\n    onMoveSpec(val) {\n      this.$emit('onMoveSpec', val);\n    },\n    changeDefaultSelect(e, index) {\n      this.$emit('changeDefaultSelect', e, index);\n    },\n    changeDefaultShow(index) {\n      this.$emit('changeDefaultShow', index);\n    },\n    modalPicTap(type, tableName, index) {\n      this.$emit('modalPicTap', type, tableName, index);\n    },\n    handleRemove2(index, type, tableName) {\n      this.$emit('handleRemove2', index, type, tableName);\n    },\n    batchAdd() {\n      this.$emit('batchAdd');\n    },\n    handleAddRole() {\n      this.$emit('handleAddRole');\n    },\n    batchDel() {\n      this.$emit('batchDel');\n    },\n    handleFocus(e) {\n      this.$emit('handleFocus', e);\n    },\n    attrDetailChangeValue(val, index) {\n      this.$emit('attrDetailChangeValue', val, index);\n    },\n    handleBlur(e) {\n      this.$emit('handleBlur', e);\n    },\n    attrChangeValue(val, index) {\n      this.$emit('attrChangeValue', val, index);\n    },\n    handleShowPop(e) {\n      this.$emit('handleShowPop', e);\n    },\n    handleSelImg(e) {\n      this.$emit('handleSelImg', e);\n    },\n    handleSaveAsTemplate() {\n      this.$emit('handleSaveAsTemplate');\n    },\n    addGoodsCoupon(index, type) {\n      this.$emit('addGoodsCoupon', index, type);\n    },\n    changeCurrentIndex(index) {\n      this.$emit('changeCurrentIndex', index);\n    },\n    addVirtual(index, type) {\n      this.$emit('addVirtual', index, type);\n    },\n    handleRemoveImg(index) {\n      this.$emit('handleRemoveImg', index);\n    },\n    handleRemoveRole(index) {\n      this.$emit('handleRemoveRole', index);\n    },\n    see(val, type, index) {\n      this.$emit('see', val, type, index);\n    },\n    createAttr(data, index) {\n      this.$emit('createAttr', data, index);\n    },\n    // 生成列表 行 列 数据\n    tableCellClassName({ row, column, rowIndex, columnIndex }) {\n      //注意这里是解构\n      //利用单元格的 className 的回调方法，给行列索引赋值\n      row.index = rowIndex || '';\n      column.index = columnIndex;\n    },\n    // 规格图片添加开关\n    addPic(e, i) {\n      if (e) {\n        this.attrs.map((item, ii) => {\n          if (ii !== i) {\n            this.$set(item, 'add_pic', 0);\n          }\n        });\n        this.canSel = false;\n      } else {\n        this.canSel = true;\n      }\n    },\n    // 合并单元格\n    objectSpanMethod({ row, column, rowIndex, columnIndex }) {\n      if (columnIndex === 0 && rowIndex > 0) {\n        let lable = column.label;\n        //这里判断第几列需要合并\n        const tagFamily = this.manyFormValidate[rowIndex].detail[lable];\n        const index = this.manyFormValidate.findIndex((item, index) => {\n          if (index > 0) return item.detail[lable] == tagFamily;\n        });\n        if (rowIndex == index) {\n          let len = 1;\n          for (let i = index + 1; i < this.manyFormValidate.length; i++) {\n            if (this.manyFormValidate[i].detail[lable] !== tagFamily) {\n              break;\n            }\n            len++;\n          }\n          return {\n            rowspan: len,\n            colspan: 1,\n          };\n        } else {\n          return {\n            rowspan: 0,\n            colspan: 0,\n          };\n        }\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@use '../productAdd.scss' as *;\n</style>\n"]}]}