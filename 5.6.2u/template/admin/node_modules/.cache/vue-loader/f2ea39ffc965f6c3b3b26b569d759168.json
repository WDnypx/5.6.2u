{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\maintain\\systemFile\\login.vue?vue&type=style&index=0&id=3f04a666&lang=scss&scoped=true","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\maintain\\systemFile\\login.vue","mtime":1750843118516},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\css-loader\\index.js","mtime":1753254259822},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1753254262918},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1753254258547},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1753254255270},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5tYXhJbnB0IHsKICBtYXgtd2lkdGg6IDUwMHB4OwogIG1hcmdpbi1sZWZ0OiBhdXRvOwogIG1hcmdpbi1yaWdodDogYXV0bzsKfQouaW5kZXhfZnJvbSB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLnRyaXAgewogIHdpZHRoOiA1ODBweDsKICB0ZXh0LWFsaWduOiBsZWZ0OwogIGNvbG9yOiAjYWFhOwp9Ci5wYWdlLWFjY291bnQtY29udGFpbmVyIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgcGFkZGluZzogMjAwcHggMDsKfQoucGFnZS1hY2NvdW50LXRvcCB7CiAgbWFyZ2luLWJvdHRvbTogNTBweDsKfQoucGFnZS1hY2NvdW50LXRvcC10aXQgewogIGZvbnQtc2l6ZTogMzBweDsKICBjb2xvcjogdmFyKC0tcHJldi1jb2xvci1wcmltYXJ5KTsKICBmb250LXdlaWdodDogNTAwOwp9Ci5wYWdlLWFjY291bnQtb3RoZXIgewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogdmFyKC0tcHJldi1jb2xvci1wcmltYXJ5KTsKICBmb250LXNpemU6IDEycHg7CiAgc3BhbiB7CiAgICBjdXJzb3I6IHBvaW50ZTsKICB9Cn0KOjp2LWRlZXAgLmJ0biB7CiAgZm9udC1zaXplOiAxNXB4ICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/pages/system/maintain/systemFile","sourcesContent":["<template>\n  <div>\n    <el-row>\n      <el-col :span=\"24\">\n        <div class=\"index_from page-account-container\">\n          <div class=\"page-account-top\">\n            <span class=\"page-account-top-tit\">文件管理登录</span>\n          </div>\n          <el-form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\" @submit.native.prevent>\n            <!-- <el-form-item prop=\"sms_account\" class=\"maxInpt\">\n            <el-input type=\"text\" v-model=\"formInline.account\" prefix=\"ios-contact-outline\" placeholder=\"请输入手机号\" />\n          </el-form-item> -->\n            <el-form-item prop=\"sms_token\" class=\"maxInpt\">\n              <el-input\n                type=\"password\"\n                size=\"large\"\n                v-model=\"formInline.password\"\n                prefix=\"ios-lock-outline\"\n                placeholder=\"请输入密码\"\n              />\n              <div class=\"trip\">提示：密码配置在 /config/filesystem.php 文件中修改 'password' => '密码'</div>\n            </el-form-item>\n            <el-form-item class=\"maxInpt\">\n              <el-button type=\"primary\" long size=\"large\" v-db-click @click=\"handleSubmit('formInline')\" class=\"btn\"\n                >登录</el-button\n              >\n            </el-form-item>\n          </el-form>\n        </div>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { opendirLoginApi } from '@/api/system';\nimport { setCookies } from '@/libs/util';\n\nexport default {\n  name: 'file_login',\n  data() {\n    const validatePhone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请填写手机号'));\n      } else if (!/^1[3456789]\\d{9}$/.test(value)) {\n        callback(new Error('手机号格式不正确!'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      formInline: {\n        // account: '',\n        password: '',\n      },\n      ruleInline: {\n        // account: [{ required: true, validator: validatePhone, trigger: 'blur' }],\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n      },\n    };\n  },\n  created() {\n    var _this = this;\n    document.onkeydown = function (e) {\n      let key = window.event.keyCode;\n      if (key === 13) {\n        _this.handleSubmit('formInline');\n      }\n    };\n  },\n  methods: {\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          opendirLoginApi(this.formInline)\n            .then(async (res) => {\n              this.$message.success('登录成功!');\n              //   this.$emit('on-Login', res.data);\n              let expires = this.getExpiresTime(res.data.expires_time);\n              // 记录用户登录信息\n              setCookies('file_token', res.data.token, expires);\n              this.$router.push({\n                path: this.$routeProStr + '/system/maintain/system_file/opendir',\n              });\n            })\n            .catch((res) => {\n              this.$message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    //计算token过期时间\n    getExpiresTime(expiresTime) {\n      let nowTimeNum = Math.round(new Date() / 1000);\n      let expiresTimeNum = expiresTime - nowTimeNum;\n      return parseFloat(parseFloat(parseFloat(expiresTimeNum / 60) / 60) / 24);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.maxInpt {\n  max-width: 500px;\n  margin-left: auto;\n  margin-right: auto;\n}\n.index_from {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.trip {\n  width: 580px;\n  text-align: left;\n  color: #aaa;\n}\n.page-account-container {\n  text-align: center;\n  padding: 200px 0;\n}\n.page-account-top {\n  margin-bottom: 50px;\n}\n.page-account-top-tit {\n  font-size: 30px;\n  color: var(--prev-color-primary);\n  font-weight: 500;\n}\n.page-account-other {\n  text-align: center;\n  color: var(--prev-color-primary);\n  font-size: 12px;\n  span {\n    cursor: pointe;\n  }\n}\n::v-deep .btn {\n  font-size: 15px !important;\n}\n</style>\n"]}]}