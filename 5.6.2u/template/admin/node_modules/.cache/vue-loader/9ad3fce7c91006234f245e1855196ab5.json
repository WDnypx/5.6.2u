{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\lottery\\recordingList.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\lottery\\recordingList.vue","mtime":1734333938700},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGxvdHRlcnlSZWNvcmRMaXN0LCBsb3R0ZXJ5UmVjb3JkRGVsaXZlciB9IGZyb20gJ0AvYXBpL2xvdHRlcnknOwppbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnQC91dGlscy92YWxpZGF0ZSc7CmltcG9ydCB7IGdldEV4cHJlc3NEYXRhIH0gZnJvbSAnQC9hcGkvb3JkZXInOwppbXBvcnQgeyBydWxlU2hpcCwgcnVsZU1hcmsgfSBmcm9tICcuL2Zvcm1SdWxlL3J1bGVTaGlwJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdsb3R0ZXJ5UmVjb3JkTGlzdCcsCiAgZmlsdGVyczogewogICAgZm9ybWF0RGF0ZSh0aW1lKSB7CiAgICAgIGlmICh0aW1lICE9PSAwKSB7CiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lICogMTAwMCk7CiAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW0nKTsKICAgICAgfQogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaGlwTW9kZWw6IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbG9jYXRpb25MaXN0OiBbXSwKICAgICAgc2hpcEZvcm06IHsKICAgICAgICBpZDogJycsCiAgICAgICAgZGVsaXZlcl9uYW1lOiAnJywKICAgICAgICBkZWxpdmVyX251bWJlcjogbnVsbCwKICAgICAgfSwKICAgICAgbWFya0Zvcm06IHsKICAgICAgICBpZDogJycsCiAgICAgICAgbWFyazogJycsCiAgICAgIH0sCiAgICAgIHJ1bGVTaGlwOiBydWxlU2hpcCwKICAgICAgcnVsZU1hcms6IHJ1bGVNYXJrLAogICAgICBwaWNrZXJPcHRpb25zOiB0aGlzLiR0aW1lT3B0aW9ucywKICAgICAgdHlwZUxpc3Q6IFsKICAgICAgICB7IHRleHQ6ICflhajpg6gnLCB2YWw6ICcnIH0sCiAgICAgICAgeyB0ZXh0OiAn5pyq5Lit5aWWJywgdmFsOiAnMScgfSwKICAgICAgICB7IHRleHQ6ICfnp6/liIYnLCB2YWw6ICcyJyB9LAogICAgICAgIHsgdGV4dDogJ+S9meminScsIHZhbDogJzMnIH0sCiAgICAgICAgeyB0ZXh0OiAn57qi5YyFJywgdmFsOiAnNCcgfSwKICAgICAgICB7IHRleHQ6ICfkvJjmg6DliLgnLCB2YWw6ICc1JyB9LAogICAgICAgIHsgdGV4dDogJ+WVhuWTgScsIHZhbDogJzYnIH0sCiAgICAgIF0sCiAgICAgIHRhYmxlTGlzdDogW10sCiAgICAgIGdyaWQ6IHsKICAgICAgICB4bDogNywKICAgICAgICBsZzogMTAsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIHRhYmxlRnJvbTogewogICAgICAgIGtleXdvcmQ6ICcnLAogICAgICAgIHRpbWU6IFtdLAogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgbGltaXQ6IDE1LAogICAgICAgIGxvdHRlcnlfaWQ6IDAsCiAgICAgIH0sCiAgICAgIHRvdGFsOiAwLAogICAgICB0aW1lVmFsOiBbXSwKICAgICAgbW9kZWxUeXBlOiAxLAogICAgICBsb3R0ZXJ5X2lkOiAnJywKICAgICAgbW9kZWxUaXRsZTogJycsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdhZG1pbi9sYXlvdXQnLCBbJ2lzTW9iaWxlJ10pLAogICAgbGFiZWxXaWR0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB1bmRlZmluZWQgOiAnODBweCc7CiAgICB9LAogICAgbGFiZWxQb3NpdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyAndG9wJyA6ICdyaWdodCc7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMudGFibGVGcm9tLmxvdHRlcnlfaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgIHRoaXMubG90dGVyeV9pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgdGhpcy5nZXRMaXN0KCk7CiAgICB0aGlzLmdldEV4cHJlc3NEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZWxpdmVyKHJvdywgdHlwZSkgewogICAgICB0aGlzLm1hcmtGb3JtLmlkID0gcm93LmlkOwogICAgICB0aGlzLnNoaXBGb3JtLmlkID0gcm93LmlkOwogICAgICB0aGlzLnNoaXBGb3JtLmRlbGl2ZXJfbmFtZSA9ICcnOwogICAgICB0aGlzLnNoaXBGb3JtLmRlbGl2ZXJfbnVtYmVyID0gJyc7CiAgICAgIHRoaXMubWFya0Zvcm0ubWFyayA9IHJvdy5kZWxpdmVyX2luZm8ubWFyazsKICAgICAgdGhpcy5tb2RlbFR5cGUgPSB0eXBlOwogICAgICB0aGlzLnNoaXBNb2RlbCA9IHRydWU7CiAgICB9LAogICAgaXNEZWxpdmVyKHJvdykgewogICAgICB0aGlzLm1hcmtGb3JtLmlkID0gcm93LmlkOwogICAgICB0aGlzLnNoaXBGb3JtLmlkID0gcm93LmlkOwogICAgICB0aGlzLm1vZGVsVHlwZSA9IDE7CiAgICAgIHRoaXMubW9kZWxUaXRsZSA9ICfphY3pgIHkv6Hmga8nOwogICAgICB0aGlzLnNoaXBNb2RlbCA9IHRydWU7CiAgICAgIHRoaXMuc2hpcEZvcm0uZGVsaXZlcl9uYW1lID0gcm93LmRlbGl2ZXJfaW5mby5kZWxpdmVyX25hbWU7CiAgICAgIHRoaXMuc2hpcEZvcm0uZGVsaXZlcl9udW1iZXIgPSByb3cuZGVsaXZlcl9pbmZvLmRlbGl2ZXJfbnVtYmVyOwogICAgfSwKICAgIG9rKG5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBsb3R0ZXJ5UmVjb3JkRGVsaXZlcih0aGlzLm1vZGVsVHlwZSA9PSAxID8gdGhpcy5zaGlwRm9ybSA6IHRoaXMubWFya0Zvcm0pCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pON5L2c5oiQ5YqfJyk7CiAgICAgICAgICAgIHRoaXMuc2hpcE1vZGVsID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICB0aGlzLnNoaXBGb3JtID0gewogICAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgICBkZWxpdmVyX25hbWU6ICcnLAogICAgICAgICAgICAgIGRlbGl2ZXJfbnVtYmVyOiBudWxsLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLm1vZGVsVGl0bGUgPSAnJzsKICAgICAgICAgICAgdGhpcy5tYXJrRm9ybSA9IHsKICAgICAgICAgICAgICBpZDogJycsCiAgICAgICAgICAgICAgbWFyazogJycsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIubXNnKTsKICAgICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMubW9kZWxUeXBlID0gMTsKICAgICAgdGhpcy5tb2RlbFRpdGxlID0gJyc7CiAgICAgIHRoaXMuc2hpcE1vZGVsID0gZmFsc2U7CiAgICB9LAogICAgLy8g54mp5rWB5YWs5Y+45YiX6KGoCiAgICBnZXRFeHByZXNzRGF0YSgpIHsKICAgICAgZ2V0RXhwcmVzc0RhdGEoKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIHRoaXMubG9jYXRpb25MaXN0ID0gcmVzLmRhdGE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDlhbfkvZPml6XmnJ8KICAgIG9uY2hhbmdlVGltZShlKSB7CiAgICAgIHRoaXMudGltZVZhbCA9IGUgfHwgW107CiAgICAgIHRoaXMudGFibGVGcm9tLnRpbWUgPSB0aGlzLnRpbWVWYWxbMF0gPyAodGhpcy50aW1lVmFsID8gdGhpcy50aW1lVmFsLmpvaW4oJy0nKSA6ICcnKSA6ICcnOwogICAgICB0aGlzLnRhYmxlRnJvbS5wYWdlID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgLy8g6YCJ5oup5pe26Ze0CiAgICBzZWxlY3RDaGFuZ2UodGFiKSB7CiAgICAgIHRoaXMudGFibGVGcm9tLnBhZ2UgPSAxOwogICAgICB0aGlzLnRhYmxlRnJvbS50aW1lID0gdGFiOwogICAgICB0aGlzLnRpbWVWYWwgPSBbXTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgc2VsZWN0VHlwZSh0eXBlKSB7CiAgICAgIHRoaXMudGFibGVGcm9tLnBhZ2UgPSAxOwogICAgICB0aGlzLnRpbWVWYWwgPSBbXTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgc2VsZWN0Q2hhbmdlRmFjdG9yKCkgewogICAgICB0aGlzLnRhYmxlRnJvbS5wYWdlID0gMTsKICAgICAgdGhpcy50aW1lVmFsID0gW107CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8vIOWIl+ihqAogICAgZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgbG90dGVyeVJlY29yZExpc3QodGhpcy50YWJsZUZyb20pCiAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMudGFibGVMaXN0ID0gZGF0YS5saXN0OwogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmNvdW50OwogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOihqOagvOaQnOe0ogogICAgdXNlclNlYXJjaHMoKSB7CiAgICAgIHRoaXMudGFibGVGcm9tLnBhZ2UgPSAxOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["recordingList.vue"],"names":[],"mappings":";AAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"recordingList.vue","sourceRoot":"src/pages/marketing/lottery","sourcesContent":["<template>\n  <div>\n    <div class=\"i-layout-page-header header-title\">\n      <div class=\"fl_header\">\n        <el-button\n          class=\"btn-back\"\n          icon=\"el-icon-arrow-left\"\n          size=\"small\"\n          type=\"text\"\n          v-db-click\n          @click=\"$router.go(-1)\"\n          >返回</el-button\n        >\n        <el-divider direction=\"vertical\"></el-divider>\n        <span class=\"ivu-page-header-title\">{{ $route.meta.title }}</span>\n      </div>\n    </div>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt\" :body-style=\"{ padding: 0 }\">\n      <div class=\"padding-add\">\n        <el-form\n          ref=\"tableFrom\"\n          :model=\"tableFrom\"\n          :label-width=\"labelWidth\"\n          label-position=\"right\"\n          @submit.native.prevent\n          inline\n        >\n          <el-form-item label=\"时间选择：\">\n            <el-date-picker\n              clearable\n              v-model=\"timeVal\"\n              type=\"daterange\"\n              :editable=\"false\"\n              @change=\"onchangeTime\"\n              format=\"yyyy/MM/dd\"\n              value-format=\"yyyy/MM/dd\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              :picker-options=\"pickerOptions\"\n              style=\"width: 250px\"\n            ></el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"奖品类型：\">\n            <el-select type=\"button\" v-model=\"tableFrom.type\" @change=\"selectType\" class=\"form_content_width\" clearable>\n              <el-option v-for=\"(item, i) in typeList\" :key=\"i\" :label=\"item.text\" :value=\"item.val\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"搜索用户：\" label-for=\"store_name\">\n            <el-input clearable placeholder=\"请输入用户信息\" v-model=\"tableFrom.keyword\" class=\"form_content_width\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" v-db-click @click=\"userSearchs\">查询</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt mt16\">\n      <el-table\n        :data=\"tableList\"\n        v-loading=\"loading\"\n        highlight-current-row\n        no-userFrom-text=\"暂无数据\"\n        no-filtered-userFrom-text=\"暂无筛选结果\"\n      >\n        <el-table-column label=\"ID\" width=\"80\">\n          <template slot-scope=\"scope\">\n            <div>{{ scope.row.id }}</div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"用户信息\" min-width=\"90\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.user.nickname }} </span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"奖品信息\" min-width=\"130\">\n          <template slot-scope=\"scope\">\n            <div class=\"prize\">\n              <img :src=\"scope.row.prize.image\" alt=\"\" />\n              <span>{{ scope.row.prize.name }}</span>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"抽奖时间\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <div>{{ scope.row.add_time }}</div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"收货信息\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <div v-if=\"scope.row.receive_info.name\">\n              <div>姓名：{{ scope.row.receive_info.name }}</div>\n              <div>电话：{{ scope.row.receive_info.phone }}</div>\n              <div>地址：{{ scope.row.receive_info.address }}</div>\n              <div v-if=\"scope.row.receive_info.mark\">备注：{{ scope.row.receive_info.mark }}</div>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"备注\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.deliver_info.mark }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" fixed=\"right\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <a v-db-click @click=\"deliver(scope.row, 1)\" v-if=\"scope.row.type == 6 && scope.row.is_deliver === 0\"\n              >发货</a\n            >\n            <a v-else-if=\"scope.row.type == 6 && scope.row.is_deliver === 1\" v-db-click @click=\"isDeliver(scope.row)\"\n              >配送信息</a\n            >\n            <el-divider direction=\"vertical\" v-if=\"scope.row.type == 6\" />\n            <a v-db-click @click=\"deliver(scope.row, 2)\">备注</a>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"acea-row row-right page\">\n        <pagination\n          v-if=\"total\"\n          :total=\"total\"\n          :page.sync=\"tableFrom.page\"\n          :limit.sync=\"tableFrom.limit\"\n          @pagination=\"getList\"\n        />\n      </div>\n    </el-card>\n    <!-- 发货-->\n    <el-dialog\n      :visible.sync=\"shipModel\"\n      width=\"540px\"\n      :title=\"!modelTitle ? (modelType === 1 ? '发货' : '备注') : modelTitle\"\n      :close-on-click-modal=\"false\"\n    >\n      <el-form\n        v-model=\"shipModel\"\n        :ref=\"modelType === 1 ? 'shipForm' : 'markForm'\"\n        :model=\"modelType === 1 ? shipForm : markForm\"\n        :rules=\"modelType === 1 ? ruleShip : ruleMark\"\n        label-width=\"90px\"\n      >\n        <el-form-item v-if=\"modelType === 1\" label=\"快递公司：\" prop=\"deliver_name\">\n          <el-select v-model=\"shipForm.deliver_name\" class=\"w100\">\n            <el-option v-for=\"item in locationList\" :value=\"item.value\" :key=\"item.id\" :label=\"item.value\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item v-if=\"modelType === 1\" label=\"快递单号：\" prop=\"deliver_number\">\n          <el-input v-model=\"shipForm.deliver_number\" placeholder=\"请输入快递单号\" class=\"w100\"></el-input>\n          <div class=\"tips-info\" v-if=\"shipForm.deliver_name == '顺丰速运'\">\n            <p>顺丰请输入单号 :收件人或寄件人手机号后四位</p>\n            <p>例如：SF000000000000:3941</p>\n          </div>\n        </el-form-item>\n        <el-form-item v-if=\"modelType === 2\" label=\"备注：\">\n          <el-input v-model=\"markForm.mark\" placeholder=\"请输入备注\" class=\"w100\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <div class=\"acea-row row-right\">\n            <el-button v-db-click @click=\"cancel('formValidate')\">关闭</el-button>\n            <el-button type=\"primary\" v-db-click @click=\"ok(modelType === 1 ? 'shipForm' : 'markForm')\">提交</el-button>\n          </div>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { lotteryRecordList, lotteryRecordDeliver } from '@/api/lottery';\nimport { formatDate } from '@/utils/validate';\nimport { getExpressData } from '@/api/order';\nimport { ruleShip, ruleMark } from './formRule/ruleShip';\nexport default {\n  name: 'lotteryRecordList',\n  filters: {\n    formatDate(time) {\n      if (time !== 0) {\n        let date = new Date(time * 1000);\n        return formatDate(date, 'yyyy-MM-dd hh:mm');\n      }\n    },\n  },\n  data() {\n    return {\n      shipModel: false,\n      loading: false,\n      locationList: [],\n      shipForm: {\n        id: '',\n        deliver_name: '',\n        deliver_number: null,\n      },\n      markForm: {\n        id: '',\n        mark: '',\n      },\n      ruleShip: ruleShip,\n      ruleMark: ruleMark,\n      pickerOptions: this.$timeOptions,\n      typeList: [\n        { text: '全部', val: '' },\n        { text: '未中奖', val: '1' },\n        { text: '积分', val: '2' },\n        { text: '余额', val: '3' },\n        { text: '红包', val: '4' },\n        { text: '优惠券', val: '5' },\n        { text: '商品', val: '6' },\n      ],\n      tableList: [],\n      grid: {\n        xl: 7,\n        lg: 10,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      tableFrom: {\n        keyword: '',\n        time: [],\n        page: 1,\n        limit: 15,\n        lottery_id: 0,\n      },\n      total: 0,\n      timeVal: [],\n      modelType: 1,\n      lottery_id: '',\n      modelTitle: '',\n    };\n  },\n  computed: {\n    ...mapState('admin/layout', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : '80px';\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  created() {\n    this.tableFrom.lottery_id = this.$route.query.id;\n    this.lottery_id = this.$route.query.id;\n    this.getList();\n    this.getExpressData();\n  },\n  methods: {\n    deliver(row, type) {\n      this.markForm.id = row.id;\n      this.shipForm.id = row.id;\n      this.shipForm.deliver_name = '';\n      this.shipForm.deliver_number = '';\n      this.markForm.mark = row.deliver_info.mark;\n      this.modelType = type;\n      this.shipModel = true;\n    },\n    isDeliver(row) {\n      this.markForm.id = row.id;\n      this.shipForm.id = row.id;\n      this.modelType = 1;\n      this.modelTitle = '配送信息';\n      this.shipModel = true;\n      this.shipForm.deliver_name = row.deliver_info.deliver_name;\n      this.shipForm.deliver_number = row.deliver_info.deliver_number;\n    },\n    ok(name) {\n      this.$refs[name].validate((valid) => {\n        lotteryRecordDeliver(this.modelType == 1 ? this.shipForm : this.markForm)\n          .then((res) => {\n            this.$message.success('操作成功');\n            this.shipModel = false;\n            this.getList();\n            this.shipForm = {\n              id: '',\n              deliver_name: '',\n              deliver_number: null,\n            };\n            this.modelTitle = '';\n            this.markForm = {\n              id: '',\n              mark: '',\n            };\n          })\n          .catch((err) => {\n            this.$message.error(err.msg);\n          });\n      });\n    },\n    cancel() {\n      this.modelType = 1;\n      this.modelTitle = '';\n      this.shipModel = false;\n    },\n    // 物流公司列表\n    getExpressData() {\n      getExpressData()\n        .then(async (res) => {\n          this.locationList = res.data;\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e || [];\n      this.tableFrom.time = this.timeVal[0] ? (this.timeVal ? this.timeVal.join('-') : '') : '';\n      this.tableFrom.page = 1;\n      this.getList();\n    },\n    // 选择时间\n    selectChange(tab) {\n      this.tableFrom.page = 1;\n      this.tableFrom.time = tab;\n      this.timeVal = [];\n      this.getList();\n    },\n    selectType(type) {\n      this.tableFrom.page = 1;\n      this.timeVal = [];\n      this.getList();\n    },\n    selectChangeFactor() {\n      this.tableFrom.page = 1;\n      this.timeVal = [];\n      this.getList();\n    },\n    // 列表\n    getList() {\n      this.loading = true;\n      lotteryRecordList(this.tableFrom)\n        .then(async (res) => {\n          let data = res.data;\n          this.tableList = data.list;\n          this.total = res.data.count;\n          this.loading = false;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$message.error(res.msg);\n        });\n    },\n    // 表格搜索\n    userSearchs() {\n      this.tableFrom.page = 1;\n      this.getList();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.tabBox_img {\n  width: 36px;\n  height: 36px;\n  border-radius: 4px;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n}\n.prize {\n  display: flex;\n  align-items: center;\n}\n.prize img {\n  width: 36px;\n  height: 36px;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-right: 5px;\n}\n.trips {\n  color: #ccc;\n}\n.w414 {\n  width: 414px;\n}\n</style>\n"]}]}