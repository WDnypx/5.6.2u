{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\user\\list\\handle\\userEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\user\\list\\handle\\userEdit.vue","mtime":1750213876110},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB1c2VyTGFiZWwgZnJvbSAnQC9jb21wb25lbnRzL3VzZXJMYWJlbCc7CgppbXBvcnQgeyB1c2VyTGFiZWxBZGRBcGkgfSBmcm9tICdAL2FwaS91c2VyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd1c2VyRWRpdCcsCiAgY29tcG9uZW50czogeyB1c2VyTGFiZWwgfSwKICBwcm9wczogewogICAgLy8gbW9kYWxzOiB7CiAgICAvLyAgIGRlZmF1bHQ6IGZhbHNlLAogICAgLy8gICB0eXBlOiBCb29sZWFuLAogICAgLy8gfSwKICAgIHVzZXJEYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4ge30sCiAgICB9LAogIH0sCiAgd2F0Y2g6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RhbHM6IGZhbHNlLAogICAgICBsYWJlbFNob3c6IGZhbHNlLAogICAgICBmb3JtSXRlbTogewogICAgICAgIHVpZDogMCwKICAgICAgICByZWFsX25hbWU6ICcnLAogICAgICAgIHBob25lOiAnJywKICAgICAgICBiaXJ0aGRheTogJycsCiAgICAgICAgY2FyZF9pZDogJycsCiAgICAgICAgYWRkcmVzOiAnJywKICAgICAgICBtYXJrOiAnJywKICAgICAgICBwd2Q6ICcnLAogICAgICAgIHRydWVfcHdkOiAnJywKICAgICAgICBsZXZlbDogJycsCiAgICAgICAgZ3JvdXBfaWQ6ICcnLAogICAgICAgIGxhYmVsX2lkOiBbXSwKICAgICAgICBzcHJlYWRfb3BlbjogMSwKICAgICAgICBpc19wcm9tb3RlcjogMCwKICAgICAgICBzdGF0dXM6IDEsCiAgICAgIH0sCiAgICAgIGdyb3VwSW5mbzogW10sCiAgICAgIGxhYmVsSW5mbzogW10sCiAgICAgIGxldmVsSW5mbzogW10sCiAgICAgIGluZm9EYXRhOiB7CiAgICAgICAgZ3JvdXBJbmZvOiBbXSwKICAgICAgICBsYWJlbEluZm86IFtdLAogICAgICAgIGxldmVsSW5mbzogW10sCiAgICAgIH0sCiAgICAgIHJ1bGVWYWxpZGF0ZTogewogICAgICAgIHJlYWxfbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICcgJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIHBob25lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJyAnLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgcHdkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJyAnLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgdHJ1ZV9wd2Q6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAnICcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgfSwKICAgICAgZGF0YUxhYmVsOiBbXSwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy4kc2V0KHRoaXMuaW5mb0RhdGEsICdncm91cEluZm8nLCB0aGlzLnVzZXJEYXRhLmdyb3VwSW5mbyk7CiAgICB0aGlzLiRzZXQodGhpcy5pbmZvRGF0YSwgJ2xldmVsSW5mbycsIHRoaXMudXNlckRhdGEubGV2ZWxJbmZvKTsKICAgIHRoaXMuJHNldCh0aGlzLmluZm9EYXRhLCAnbGFiZWxJbmZvJywgdGhpcy51c2VyRGF0YS5sYWJlbEluZm8pOwogICAgbGV0IGFyciA9IE9iamVjdC5rZXlzKHRoaXMuZm9ybUl0ZW0pOwogICAgaWYgKHRoaXMudXNlckRhdGEudXNlckluZm8pIHsKICAgICAgYXJyLm1hcCgoaSkgPT4gewogICAgICAgIHRoaXMuZm9ybUl0ZW1baV0gPSB0aGlzLnVzZXJEYXRhLnVzZXJJbmZvW2ldOwogICAgICB9KTsKICAgICAgaWYgKCF0aGlzLmZvcm1JdGVtLmJpcnRoZGF5KSB0aGlzLmZvcm1JdGVtLmJpcnRoZGF5ID0gJyc7CiAgICAgIGlmICh0aGlzLmZvcm1JdGVtLmxhYmVsX2lkLmxlbmd0aCkgewogICAgICAgIHRoaXMuZGF0YUxhYmVsID0gdGhpcy5mb3JtSXRlbS5sYWJlbF9pZDsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfQoKICAgIC8vIHRoaXMuZm9ybUl0ZW0gPSB0aGlzLnVzZXJEYXRhLnVzZXJJbmZvOwogIH0sCiAgbWV0aG9kczogewogICAgYWRkTGFiZWwoKSB7CiAgICAgIHRoaXMuJG1vZGFsRm9ybSh1c2VyTGFiZWxBZGRBcGkoMCkpLnRoZW4oKCkgPT4ge30pOwogICAgfSwKICAgIGNoYW5nZU1vZGFsKHN0YXR1cykgewogICAgICBpZiAoIXN0YXR1cykgewogICAgICAgIHRoaXMuY2FuY2VsKCk7CiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICB9CiAgICB9LAogICAgb3BlbkxhYmVsKHJvdykgewogICAgICB0aGlzLmxhYmVsU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMudXNlckxhYmVsLnVzZXJMYWJlbChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuaW5mb0RhdGEubGFiZWxJbmZvKSkpOwogICAgfSwKICAgIGNhbmNlbCgpIHt9LAogICAgYWN0aXZlRGF0YShkYXRhTGFiZWwpIHsKICAgICAgdGhpcy5sYWJlbFNob3cgPSBmYWxzZTsKICAgICAgdGhpcy5kYXRhTGFiZWwgPSBkYXRhTGFiZWw7CiAgICB9LAogICAgLy8g5qCH562+5by556qX5YWz6ZetCiAgICBsYWJlbENsb3NlKCkgewogICAgICB0aGlzLmxhYmVsU2hvdyA9IGZhbHNlOwogICAgfSwKICAgIGNsb3NlTGFiZWwobGFiZWwpIHsKICAgICAgbGV0IGluZGV4ID0gdGhpcy5kYXRhTGFiZWwuaW5kZXhPZih0aGlzLmRhdGFMYWJlbC5maWx0ZXIoKGQpID0+IGQuaWQgPT0gbGFiZWwuaWQpWzBdKTsKICAgICAgdGhpcy5kYXRhTGFiZWwuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5mb3JtSXRlbSA9IHsKICAgICAgICB1aWQ6ICcnLAogICAgICAgIHJlYWxfbmFtZTogJycsCiAgICAgICAgcGhvbmU6ICcnLAogICAgICAgIGJpcnRoZGF5OiAnJywKICAgICAgICBjYXJkX2lkOiAnJywKICAgICAgICBhZGRyZXM6ICcnLAogICAgICAgIG1hcms6ICcnLAogICAgICAgIHB3ZDogJycsCiAgICAgICAgdHJ1ZV9wd2Q6ICcnLAogICAgICAgIGxldmVsOiAnJywKICAgICAgICBncm91cF9pZDogJycsCiAgICAgICAgbGFiZWxfaWQ6IFtdLAogICAgICAgIHNwcmVhZF9vcGVuOiAxLAogICAgICAgIGlzX3Byb21vdGVyOiAwLAogICAgICAgIHN0YXR1czogMSwKICAgICAgfTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["userEdit.vue"],"names":[],"mappings":";AA+JA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userEdit.vue","sourceRoot":"src/pages/user/list/handle","sourcesContent":["<template>\n  <div class=\"pb-50\">\n    <el-form ref=\"formItem\" :rules=\"ruleValidate\" :model=\"formItem\" label-width=\"100px\" @submit.native.prevent>\n      <el-form-item label=\"用户ID：\" v-if=\"formItem.uid\">\n        <el-input\n          class=\"form-sty\"\n          disabled\n          v-model=\"formItem.uid\"\n          placeholder=\"请输入编号\"\n          style=\"width: 80%\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"真实姓名：\" prop=\"real_name\">\n        <el-input\n          class=\"form-sty\"\n          v-model.trim=\"formItem.real_name\"\n          placeholder=\"请输入真实姓名\"\n          style=\"width: 80%\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"手机号码：\" prop=\"phone\">\n        <el-input class=\"form-sty\" v-model=\"formItem.phone\" placeholder=\"请输入手机号码\" style=\"width: 80%\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"生日：\">\n        <el-date-picker\n          clearable\n          class=\"form-sty\"\n          type=\"date\"\n          v-model=\"formItem.birthday\"\n          placeholder=\"请选择生日\"\n          style=\"width: 80%\"\n          format=\"yyyy-MM-dd\"\n          value-format=\"yyyy-MM-dd\"\n        ></el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"身份证号：\">\n        <el-input\n          class=\"form-sty\"\n          v-model.trim=\"formItem.card_id\"\n          placeholder=\"请输入身份证号\"\n          style=\"width: 80%\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"用户地址：\">\n        <el-input class=\"form-sty\" v-model=\"formItem.addres\" placeholder=\"请输入用户地址\" style=\"width: 80%\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"用户备注：\">\n        <el-input class=\"form-sty\" v-model=\"formItem.mark\" placeholder=\"请输入用户备注\" style=\"width: 80%\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"登录密码：\" prop=\"pwd\">\n        <el-input\n          class=\"form-sty\"\n          type=\"password\"\n          v-model=\"formItem.pwd\"\n          placeholder=\"请输入登录密码（修改用户可不填写，不填写不修改原密码）\"\n          style=\"width: 80%\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"确认密码：\" prop=\"true_pwd\">\n        <el-input\n          class=\"form-sty\"\n          type=\"password\"\n          v-model=\"formItem.true_pwd\"\n          placeholder=\"请输入确认密码（修改用户可不填写，不填写不修改原密码）\"\n          style=\"width: 80%\"\n        ></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"用户等级：\">\n        <el-select v-model=\"formItem.level\" class=\"form-sty\" clearable>\n          <el-option\n            v-for=\"(item, index) in infoData.levelInfo\"\n            :key=\"index\"\n            :value=\"item.id\"\n            :label=\"item.name\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"用户分组：\">\n        <el-select v-model=\"formItem.group_id\" class=\"form-sty\" clearable>\n          <el-option\n            v-for=\"(item, index) in infoData.groupInfo\"\n            :key=\"index\"\n            :value=\"item.id\"\n            :label=\"item.group_name\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"用户标签：\">\n        <!-- <el-select v-model=\"formItem.label_id\">\n          <el-option\n            v-for=\"(item, index) in infoData.labelInfo\"\n            :key=\"index\"\n            :value=\"item.value\"\n            >{{ item.label }}</el-option\n          >\n        </el-select> -->\n        <div style=\"display: flex\">\n          <div class=\"labelInput acea-row row-between-wrapper\" v-db-click @click=\"openLabel\">\n            <div style=\"width: 90%\">\n              <div v-if=\"dataLabel.length\">\n                <el-tag\n                  closable\n                  v-for=\"(item, index) in dataLabel\"\n                  :key=\"index\"\n                  @close=\"closeLabel(item)\"\n                  class=\"mr10\"\n                  >{{ item.label_name }}</el-tag\n                >\n              </div>\n              <span class=\"span\" v-else>选择用户关联标签</span>\n            </div>\n            <div class=\"ivu-icon ivu-icon-ios-arrow-down\"></div>\n          </div>\n          <span class=\"addfont\" v-db-click @click=\"addLabel\">新增标签</span>\n        </div>\n      </el-form-item>\n      <el-form-item label=\"分销禁用：\">\n        <el-radio-group v-model=\"formItem.spread_open\" class=\"form-sty\">\n          <el-radio :label=\"0\">是</el-radio>\n          <el-radio :label=\"1\">否</el-radio>\n        </el-radio-group>\n        <div class=\"tip\">禁用用户的分销资格后，在任何分销模式下该用户都无分销权限</div>\n      </el-form-item>\n      <el-form-item label=\"分销权限：\" v-if=\"formItem.spread_open == 1\">\n        <el-radio-group v-model=\"formItem.is_promoter\" class=\"form-sty\">\n          <el-radio :label=\"1\">开启</el-radio>\n          <el-radio :label=\"0\">关闭</el-radio>\n        </el-radio-group>\n        <div class=\"tip\">手动开启或关闭用户的分销权限</div>\n      </el-form-item>\n      <el-form-item label=\"用户状态：\">\n        <el-radio-group v-model=\"formItem.status\" class=\"form-sty\">\n          <el-radio :label=\"1\">开启</el-radio>\n          <el-radio :label=\"0\">锁定</el-radio>\n        </el-radio-group>\n      </el-form-item>\n    </el-form>\n\n    <el-dialog\n      :visible.sync=\"labelShow\"\n      scrollable\n      title=\"请选择用户标签\"\n      :modal=\"false\"\n      :show-close=\"true\"\n      width=\"540px\"\n    >\n      <userLabel\n        v-if=\"labelShow\"\n        :only_get=\"true\"\n        :uid=\"formItem.uid\"\n        @close=\"labelClose\"\n        @activeData=\"activeData\"\n      ></userLabel>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport userLabel from '@/components/userLabel';\n\nimport { userLabelAddApi } from '@/api/user';\nexport default {\n  name: 'userEdit',\n  components: { userLabel },\n  props: {\n    // modals: {\n    //   default: false,\n    //   type: Boolean,\n    // },\n    userData: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  watch: {},\n  data() {\n    return {\n      modals: false,\n      labelShow: false,\n      formItem: {\n        uid: 0,\n        real_name: '',\n        phone: '',\n        birthday: '',\n        card_id: '',\n        addres: '',\n        mark: '',\n        pwd: '',\n        true_pwd: '',\n        level: '',\n        group_id: '',\n        label_id: [],\n        spread_open: 1,\n        is_promoter: 0,\n        status: 1,\n      },\n      groupInfo: [],\n      labelInfo: [],\n      levelInfo: [],\n      infoData: {\n        groupInfo: [],\n        labelInfo: [],\n        levelInfo: [],\n      },\n      ruleValidate: {\n        real_name: [{ required: true, message: ' ', trigger: 'blur' }],\n        phone: [{ required: true, message: ' ', trigger: 'blur' }],\n        pwd: [{ required: true, message: ' ', trigger: 'blur' }],\n        true_pwd: [{ required: true, message: ' ', trigger: 'blur' }],\n      },\n      dataLabel: [],\n    };\n  },\n  mounted() {\n    this.$set(this.infoData, 'groupInfo', this.userData.groupInfo);\n    this.$set(this.infoData, 'levelInfo', this.userData.levelInfo);\n    this.$set(this.infoData, 'labelInfo', this.userData.labelInfo);\n    let arr = Object.keys(this.formItem);\n    if (this.userData.userInfo) {\n      arr.map((i) => {\n        this.formItem[i] = this.userData.userInfo[i];\n      });\n      if (!this.formItem.birthday) this.formItem.birthday = '';\n      if (this.formItem.label_id.length) {\n        this.dataLabel = this.formItem.label_id;\n      }\n    } else {\n      this.reset();\n    }\n\n    // this.formItem = this.userData.userInfo;\n  },\n  methods: {\n    addLabel() {\n      this.$modalForm(userLabelAddApi(0)).then(() => {});\n    },\n    changeModal(status) {\n      if (!status) {\n        this.cancel();\n        this.reset();\n      }\n    },\n    openLabel(row) {\n      this.labelShow = true;\n      this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.infoData.labelInfo)));\n    },\n    cancel() {},\n    activeData(dataLabel) {\n      this.labelShow = false;\n      this.dataLabel = dataLabel;\n    },\n    // 标签弹窗关闭\n    labelClose() {\n      this.labelShow = false;\n    },\n    closeLabel(label) {\n      let index = this.dataLabel.indexOf(this.dataLabel.filter((d) => d.id == label.id)[0]);\n      this.dataLabel.splice(index, 1);\n    },\n    reset() {\n      this.formItem = {\n        uid: '',\n        real_name: '',\n        phone: '',\n        birthday: '',\n        card_id: '',\n        addres: '',\n        mark: '',\n        pwd: '',\n        true_pwd: '',\n        level: '',\n        group_id: '',\n        label_id: [],\n        spread_open: 1,\n        is_promoter: 0,\n        status: 1,\n      };\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.labelInput {\n  border: 1px solid #dcdee2;\n  width: 400px;\n  padding: 0 15px;\n  border-radius: 5px;\n  min-height: 30px;\n  cursor: pointer;\n  font-size: 12px;\n  .span {\n    color: #c5c8ce;\n  }\n  .iconxiayi {\n    font-size: 12px;\n  }\n}\n.ivu-form-item {\n  margin-bottom: 10px;\n}\n.form-sty {\n  width: 400px !important;\n}\n.addfont {\n  display: inline-block;\n  font-size: 12px;\n  font-weight: 400;\n  color: var(--prev-color-primary);\n  margin-left: 14px;\n  cursor: pointer;\n  margin-left: 10px;\n}\n.ivu-icon-ios-arrow-down {\n  font-size: 14px;\n}\n.tip {\n  color: #bbb;\n  font-size: 12px;\n  line-height: 12px;\n}\n.pb-50{\n  padding-bottom: 50px;\n}\n</style>\n"]}]}