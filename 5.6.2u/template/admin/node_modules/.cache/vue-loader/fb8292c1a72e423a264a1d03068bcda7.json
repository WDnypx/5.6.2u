{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\components\\userLabel.vue?vue&type=style&index=0&id=151a14ee&lang=scss&scoped=true","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\components\\userLabel.vue","mtime":1731313973056},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\css-loader\\index.js","mtime":1753254259822},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1753254262918},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1753254258547},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1753254255270},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5sYWJlbC13cmFwcGVyIHsKICAubGlzdCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC13cmFwOiB3cmFwOwoKICAgIC5sYWJlbC1pdGVtIHsKICAgICAgbWFyZ2luOiAxMHB4IDhweCAxMHB4IDA7CiAgICAgIHBhZGRpbmc6IDNweCA4cHg7CiAgICAgIGJhY2tncm91bmQ6ICNlZWVlZWU7CiAgICAgIGNvbG9yOiAjMzMzMzMzOwogICAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgZm9udC1zaXplOiAxMnB4OwoKICAgICAgJi5vbiB7CiAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJldi1jb2xvci1wcmltYXJ5KTsKICAgICAgfQogICAgfQogIH0KCiAgLmZvb3RlciB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKICAgIG1hcmdpbi10b3A6IDQwcHg7CgogICAgYnV0dG9uIHsKICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgICB9CiAgfQp9Ci5sYWJlbC1ib3ggewogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KLmJ0biB7CiAgd2lkdGg6IDYwcHg7CiAgaGVpZ2h0OiAyNHB4Owp9CgoudGl0bGUgewogIGZvbnQtc2l6ZTogMTNweDsKfQoKLm5vbmVmb250IHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgcGFkZGluZy10b3A6IDIwcHg7Cn0K"},{"version":3,"sources":["userLabel.vue"],"names":[],"mappings":";AAiJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"userLabel.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"label-wrapper\">\n    <div v-if=\"!labelList[0]\" class=\"nonefont\">暂无标签</div>\n    <div v-else class=\"label-box\" v-for=\"(item, index) in labelList\" :key=\"index\">\n      <div class=\"title\">{{ item.name }}</div>\n      <div class=\"list\">\n        <div\n          class=\"label-item\"\n          :class=\"{ on: label.disabled }\"\n          v-for=\"(label, j) in item.label\"\n          :key=\"j\"\n          v-db-click\n          @click=\"selectLabel(label)\"\n        >\n          {{ label.label_name }}\n        </div>\n      </div>\n    </div>\n    <div class=\"acea-row row-right mt20\">\n      <el-button v-db-click @click=\"cancel\">取 消</el-button>\n      <el-button type=\"primary\" v-db-click @click=\"subBtn\">确 定</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getUserLabel, putUserLabel } from '@/api/user';\nexport default {\n  name: 'userLabel',\n  props: {\n    uid: {\n      type: String | Number,\n      default: 0,\n    },\n    only_get: {\n      default: false,\n    },\n    selectDataLabel: {\n      type: Array,\n      default: () => {\n        [];\n      },\n    },\n  },\n  data() {\n    return {\n      labelList: [],\n      activeIds: [],\n      unLaberids: [],\n    };\n  },\n  watch: {\n    uid: {\n      handler(nVal, oVal) {\n        if (nVal != oVal) {\n          this.getList();\n        }\n      },\n      deep: true,\n    },\n  },\n  mounted() {\n    this.getList();\n  },\n  methods: {\n    getList() {\n      getUserLabel(this.uid || 0).then((res) => {\n        if (this.selectDataLabel && this.selectDataLabel.length) {\n          this.selectDataLabel.map((el) => {\n            res.data.map((re) => {\n              re.label.map((label) => {\n                if (label.id === el.id) {\n                  label.disabled = true;\n                }\n              });\n            });\n          });\n        }\n        res.data.map((el) => {\n          el.label.map((label) => {\n            if (label.disabled) {\n              this.activeIds.push(label.id);\n            }\n          });\n        });\n        this.labelList = res.data;\n      });\n    },\n    selectLabel(label) {\n      if (label.disabled) {\n        let index = this.activeIds.indexOf(label.id);\n        this.activeIds.splice(index, 1);\n        label.disabled = false;\n      } else {\n        this.activeIds.push(label.id);\n        label.disabled = true;\n      }\n    },\n    // 确定\n    subBtn() {\n      let unLaberids = [];\n      if (this.only_get) {\n        this.labelList.map((item) => {\n          item.label.map((i) => {\n            if (i.disabled == true) {\n              unLaberids.push({ id: i.id, label_name: i.label_name });\n            }\n          });\n        });\n        this.$emit('activeData', unLaberids);\n        return;\n      }\n      this.labelList.map((item) => {\n        item.label.map((i) => {\n          if (i.disabled == false) {\n            unLaberids.push(i.id);\n          }\n        });\n      });\n      this.unLaberids = unLaberids;\n      putUserLabel(this.uid, {\n        label_ids: this.activeIds,\n        un_label_ids: this.unLaberids,\n      })\n        .then((res) => {\n          this.$emit('onceGetList');\n          this.activeIds = [];\n          this.unLaberids = [];\n          this.$message.success(res.msg);\n          this.$emit('close');\n        })\n        .catch((error) => {\n          this.$message.error(error.msg);\n        });\n    },\n    cancel() {\n      this.activeIds = [];\n      this.unLaberids = [];\n      this.$emit('close');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.label-wrapper {\n  .list {\n    display: flex;\n    flex-wrap: wrap;\n\n    .label-item {\n      margin: 10px 8px 10px 0;\n      padding: 3px 8px;\n      background: #eeeeee;\n      color: #333333;\n      border-radius: 2px;\n      cursor: pointer;\n      font-size: 12px;\n\n      &.on {\n        color: #fff;\n        background: var(--prev-color-primary);\n      }\n    }\n  }\n\n  .footer {\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 40px;\n\n    button {\n      margin-left: 10px;\n    }\n  }\n}\n.label-box {\n  margin-bottom: 10px;\n}\n.btn {\n  width: 60px;\n  height: 24px;\n}\n\n.title {\n  font-size: 13px;\n}\n\n.nonefont {\n  text-align: center;\n  padding-top: 20px;\n}\n</style>\n"]}]}