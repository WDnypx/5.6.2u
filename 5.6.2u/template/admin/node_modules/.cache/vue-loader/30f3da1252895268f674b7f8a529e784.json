{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\productAdd\\components\\virtualTabel.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\productAdd\\components\\virtualTabel.vue","mtime":1750730640573},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gvdGhyb3R0bGUnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdlbC10YWJsZS12aXJ0dWFsLXNjcm9sbCcsCiAgcHJvcHM6IHsKICAgIGRhdGE6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKICAgIGhlaWdodDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDYwLAogICAgfSwKICAgIGJ1ZmZlcjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDUwMCwKICAgIH0sCiAgICBrZXlQcm9wOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2lkJywKICAgIH0sCiAgICB0aHJvdHRsZVRpbWU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxMDAsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNpemVzOiB7fSwgLy8g5bC65a+45pig5bCE77yI5L6d6LWW5ZON5bqU5byP77yJCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOiuoeeul+WHuuavj+S4qml0ZW3vvIjnmoRrZXnlgLzvvInliLDmu5rliqjlrrnlmajpobbpg6jnmoTot53nprsKICAgIG9mZnNldE1hcCh7IGtleVByb3AsIGhlaWdodCwgc2l6ZXMsIGRhdGEgfSkgewogICAgICBjb25zdCByZXMgPSB7fTsKICAgICAgbGV0IHRvdGFsID0gMDsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qga2V5ID0gZGF0YVtpXVtrZXlQcm9wXTsKICAgICAgICByZXNba2V5XSA9IHRvdGFsOwoKICAgICAgICBjb25zdCBjdXJTaXplID0gc2l6ZXNba2V5XTsKICAgICAgICBjb25zdCBzaXplID0gdHlwZW9mIGN1clNpemUgPT09ICdudW1iZXInID8gY3VyU2l6ZSA6IGhlaWdodDsKICAgICAgICB0b3RhbCArPSBzaXplOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Yid5aeL5YyW5pWw5o2uCiAgICBpbml0RGF0YSgpIHsKICAgICAgLy8g5Y+v6KeG6IyD5Zu05YaF5pi+56S65pWw5o2uCiAgICAgIHRoaXMucmVuZGVyRGF0YSA9IFtdOwogICAgICAvLyDpobXpnaLlj6/op4bojIPlm7Tpobbnq6/jgIHlupXpg6gKICAgICAgdGhpcy50b3AgPSB1bmRlZmluZWQ7CiAgICAgIHRoaXMuYm90dG9tID0gdW5kZWZpbmVkOwogICAgICAvLyDmiKrlj5bpobXpnaLlj6/op4bojIPlm7TlhoXmmL7npLrmlbDmja7nmoTlvIDlp4vlkoznu5PlsL7ntKLlvJUKICAgICAgdGhpcy5zdGFydCA9IDA7CiAgICAgIHRoaXMuZW5kID0gdW5kZWZpbmVkOwoKICAgICAgdGhpcy5zY3JvbGxlciA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5lbC10YWJsZV9fYm9keS13cmFwcGVyJyk7CgogICAgICAvLyDliJ3mrKHmiafooYwKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5oYW5kbGVTY3JvbGwoKTsKICAgICAgfSwgMTAwKTsKCiAgICAgIC8vIOebkeWQrOS6i+S7tgogICAgICB0aGlzLm9uU2Nyb2xsID0gdGhyb3R0bGUodGhpcy5oYW5kbGVTY3JvbGwsIHRoaXMudGhyb3R0bGVUaW1lKTsKICAgICAgdGhpcy5zY3JvbGxlci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZVNjcm9sbCk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uU2Nyb2xsKTsKICAgIH0sCgogICAgLy8g5pu05paw5bC65a+477yI6auY5bqm77yJCiAgICB1cGRhdGVTaXplcygpIHsKICAgICAgY29uc3Qgcm93cyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbC10YWJsZV9fYm9keSA+IHRib2R5ID4gLmVsLXRhYmxlX19yb3cnKTsKCiAgICAgIEFycmF5LmZyb20ocm93cykuZm9yRWFjaCgocm93LCBpbmRleCkgPT4gewogICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnJlbmRlckRhdGFbaW5kZXhdOwogICAgICAgIGlmICghaXRlbSkgcmV0dXJuOwoKICAgICAgICBjb25zdCBrZXkgPSBpdGVtW3RoaXMua2V5UHJvcF07CiAgICAgICAgY29uc3Qgb2Zmc2V0SGVpZ2h0ID0gcm93Lm9mZnNldEhlaWdodDsKCiAgICAgICAgaWYgKHRoaXMuc2l6ZXNba2V5XSAhPT0gb2Zmc2V0SGVpZ2h0KSB7CiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5zaXplcywga2V5LCBvZmZzZXRIZWlnaHQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOWkhOeQhua7muWKqOS6i+S7tgogICAgaGFuZGxlU2Nyb2xsKHNob3VsZFVwZGF0ZSA9IHRydWUpIHsKICAgICAgLy8g5pu05paw5b2T5YmN5bC65a+477yI6auY5bqm77yJCiAgICAgIHRoaXMudXBkYXRlU2l6ZXMoKTsKICAgICAgLy8g6K6h566XcmVuZGVyRGF0YQogICAgICB0aGlzLmNhbGNSZW5kZXJEYXRhKCk7CiAgICAgIC8vIOiuoeeul+S9jee9rgogICAgICB0aGlzLmNhbGNQb3NpdGlvbigpOwogICAgICBzaG91bGRVcGRhdGUgJiYgdGhpcy51cGRhdGVQb3NpdGlvbigpOwogICAgICAvLyDop6blj5Hkuovku7YKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdGhpcy5yZW5kZXJEYXRhLCB0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7CiAgICB9LAoKICAgIC8vIOiOt+WPluafkOadoeaVsOaNrm9mZnNldFRvcAogICAgZ2V0T2Zmc2V0VG9wKGluZGV4KSB7CiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmRhdGFbaW5kZXhdOwogICAgICBpZiAoaXRlbSkgewogICAgICAgIHJldHVybiB0aGlzLm9mZnNldE1hcFtpdGVtW3RoaXMua2V5UHJvcF1dIHx8IDA7CiAgICAgIH0KICAgICAgcmV0dXJuIDA7CiAgICB9LAoKICAgIC8vIOiOt+WPluafkOadoeaVsOaNrueahOWwuuWvuAogICAgZ2V0U2l6ZShpbmRleCkgewogICAgICBjb25zdCBpdGVtID0gdGhpcy5kYXRhW2luZGV4XTsKICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICBjb25zdCBrZXkgPSBpdGVtW3RoaXMua2V5UHJvcF07CiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZXNba2V5XSB8fCB0aGlzLmhlaWdodDsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CiAgICB9LAoKICAgIC8vIOiuoeeul+WPquWcqOinhuWbvuS4iua4suafk+eahOaVsOaNrgogICAgY2FsY1JlbmRlckRhdGEoKSB7CiAgICAgIGNvbnN0IHsgc2Nyb2xsZXIsIGRhdGEsIGJ1ZmZlciB9ID0gdGhpczsKICAgICAgLy8g6K6h566X5Y+v6KeG6IyD5Zu06aG26YOo44CB5bqV6YOoCiAgICAgIGNvbnN0IHRvcCA9IHNjcm9sbGVyLnNjcm9sbFRvcCAtIGJ1ZmZlcjsKICAgICAgY29uc3QgYm90dG9tID0gc2Nyb2xsZXIuc2Nyb2xsVG9wICsgc2Nyb2xsZXIub2Zmc2V0SGVpZ2h0ICsgYnVmZmVyOwoKICAgICAgLy8g5LqM5YiG5rOV6K6h566X5Y+v6KeG6IyD5Zu05YaF55qE5byA5aeL55qE56ys5LiA5Liq5YaF5a65CiAgICAgIGxldCBsID0gMDsKICAgICAgbGV0IHIgPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIGxldCBtaWQgPSAwOwogICAgICB3aGlsZSAobCA8PSByKSB7CiAgICAgICAgbWlkID0gTWF0aC5mbG9vcigobCArIHIpIC8gMik7CiAgICAgICAgY29uc3QgbWlkVmFsID0gdGhpcy5nZXRPZmZzZXRUb3AobWlkKTsKICAgICAgICBpZiAobWlkVmFsIDwgdG9wKSB7CiAgICAgICAgICBjb25zdCBtaWROZXh0VmFsID0gdGhpcy5nZXRPZmZzZXRUb3AobWlkICsgMSk7CiAgICAgICAgICBpZiAobWlkTmV4dFZhbCA+IHRvcCkgYnJlYWs7CiAgICAgICAgICBsID0gbWlkICsgMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgciA9IG1pZCAtIDE7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyDorqHnrpfmuLLmn5PlhoXlrrnnmoTlvIDlp4vjgIHnu5PmnZ/ntKLlvJUKICAgICAgbGV0IHN0YXJ0ID0gbWlkOwogICAgICBsZXQgZW5kID0gZGF0YS5sZW5ndGggLSAxOwogICAgICBmb3IgKGxldCBpID0gc3RhcnQgKyAxOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IG9mZnNldFRvcCA9IHRoaXMuZ2V0T2Zmc2V0VG9wKGkpOwogICAgICAgIGlmIChvZmZzZXRUb3AgPj0gYm90dG9tKSB7CiAgICAgICAgICBlbmQgPSBpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyDlvIDlp4vntKLlvJXlp4vnu4jkv53mjIHlgbbmlbDvvIzlpoLmnpzkuLrlpYfmlbDvvIzliJnliqAx5L2/5YW25L+d5oyB5YG25pWw44CQ56Gu5L+d6KGo5qC86KGM55qE5YG25pWw5pWw5LiA6Ie077yM5LiN5Lya5a+86Ie05paR6ams57q55Lmx5bqP5pi+56S644CRCiAgICAgIGlmIChzdGFydCAlIDIpIHsKICAgICAgICBzdGFydCA9IHN0YXJ0IC0gMTsKICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZyhzdGFydCwgZW5kLCAnc3RhcnQgZW5kJykKCiAgICAgIHRoaXMudG9wID0gdG9wOwogICAgICB0aGlzLmJvdHRvbSA9IGJvdHRvbTsKICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0OwogICAgICB0aGlzLmVuZCA9IGVuZDsKICAgICAgdGhpcy5yZW5kZXJEYXRhID0gZGF0YS5zbGljZShzdGFydCwgZW5kICsgMSk7CiAgICB9LAoKICAgIC8vIOiuoeeul+S9jee9rgogICAgY2FsY1Bvc2l0aW9uKCkgewogICAgICBjb25zdCBsYXN0ID0gdGhpcy5kYXRhLmxlbmd0aCAtIDE7CiAgICAgIC8vIOiuoeeul+WGheWuueaAu+mrmOW6pgogICAgICBjb25zdCB3cmFwSGVpZ2h0ID0gdGhpcy5nZXRPZmZzZXRUb3AobGFzdCkgKyB0aGlzLmdldFNpemUobGFzdCk7CiAgICAgIC8vIOiuoeeul+W9k+WJjea7muWKqOS9jee9rumcgOimgeaSkei1t+eahOmrmOW6pgogICAgICBjb25zdCBvZmZzZXRUb3AgPSB0aGlzLmdldE9mZnNldFRvcCh0aGlzLnN0YXJ0KTsKCiAgICAgIC8vIOiuvue9rmRvbeS9jee9rgogICAgICBjb25zdCBjbGFzc05hbWVzID0gWwogICAgICAgICcuZWwtdGFibGVfX2JvZHktd3JhcHBlcicsCiAgICAgICAgJy5lbC10YWJsZV9fZml4ZWQtcmlnaHQgLmVsLXRhYmxlX19maXhlZC1ib2R5LXdyYXBwZXInLAogICAgICAgICcuZWwtdGFibGVfX2ZpeGVkIC5lbC10YWJsZV9fZml4ZWQtYm9keS13cmFwcGVyJywKICAgICAgXTsKICAgICAgY2xhc3NOYW1lcy5mb3JFYWNoKChjbGFzc05hbWUpID0+IHsKICAgICAgICBjb25zdCBlbCA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoY2xhc3NOYW1lKTsKICAgICAgICBpZiAoIWVsKSByZXR1cm47CgogICAgICAgIC8vIOWIm+W7undyYXBFbOOAgWlubmVyRWwKICAgICAgICBpZiAoIWVsLndyYXBFbCkgewogICAgICAgICAgY29uc3Qgd3JhcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBjb25zdCBpbm5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICB3cmFwRWwuYXBwZW5kQ2hpbGQoaW5uZXJFbCk7CiAgICAgICAgICBpbm5lckVsLmFwcGVuZENoaWxkKGVsLmNoaWxkcmVuWzBdKTsKICAgICAgICAgIGVsLmluc2VydEJlZm9yZSh3cmFwRWwsIGVsLmZpcnN0Q2hpbGQpOwogICAgICAgICAgZWwud3JhcEVsID0gd3JhcEVsOwogICAgICAgICAgZWwuaW5uZXJFbCA9IGlubmVyRWw7CiAgICAgICAgfQoKICAgICAgICBpZiAoZWwud3JhcEVsKSB7CiAgICAgICAgICAvLyDorr7nva7pq5jluqYKICAgICAgICAgIGVsLndyYXBFbC5zdHlsZS5oZWlnaHQgPSB3cmFwSGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgIC8vIOiuvue9rnRyYW5zZm9ybeaSkei1t+mrmOW6pgogICAgICAgICAgZWwuaW5uZXJFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgke29mZnNldFRvcH1weClgOwogICAgICAgICAgLy8g6K6+572ucGFkZGluZ1RvcOaSkei1t+mrmOW6pgogICAgICAgICAgLy8gZWwuaW5uZXJFbC5zdHlsZS5wYWRkaW5nVG9wID0gYCR7b2Zmc2V0VG9wfXB4YAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOepuumXsuaXtuabtOaWsOS9jee9rgogICAgdXBkYXRlUG9zaXRpb24oKSB7CiAgICAgIHRoaXMudGltZXIgJiYgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOwogICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy50aW1lciAmJiBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7CiAgICAgICAgLy8g5Lyg5YWlZmFsc2XvvIzpgb/lhY3kuIDnm7Tlvqrnjq/osIPnlKgKICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbChmYWxzZSk7CiAgICAgIH0sIHRoaXMudGhyb3R0bGVUaW1lICsgMTApOwogICAgfSwKCiAgICAvLyDjgJDlpJbpg6josIPnlKjjgJHmm7TmlrAKICAgIHVwZGF0ZSgpIHsKICAgICAgdGhpcy5oYW5kbGVTY3JvbGwoKTsKICAgIH0sCgogICAgLy8g44CQ5aSW6YOo6LCD55So44CR5rua5Yqo5Yiw56ys5Yeg6KGMCiAgICBzY3JvbGxUbyhpbmRleCwgc3RvcCA9IGZhbHNlKSB7CiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmRhdGFbaW5kZXhdOwogICAgICBpZiAoaXRlbSAmJiB0aGlzLnNjcm9sbGVyKSB7CiAgICAgICAgdGhpcy51cGRhdGVTaXplcygpOwogICAgICAgIHRoaXMuY2FsY1JlbmRlckRhdGEoKTsKCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgY29uc3Qgb2Zmc2V0VG9wID0gdGhpcy5nZXRPZmZzZXRUb3AoaW5kZXgpOwogICAgICAgICAgdGhpcy5zY3JvbGxlci5zY3JvbGxUb3AgPSBvZmZzZXRUb3A7CgogICAgICAgICAgLy8g6LCD55So5Lik5qyhc2Nyb2xsVG/vvIznrKzkuIDmrKHmu5rliqjml7bvvIzlpoLmnpzooajmoLzooYzliJ3mrKHmuLLmn5Ppq5jluqblj5HnlJ/lj5jljJbml7bvvIzkvJrlr7zoh7Tmu5rliqjkvY3nva7mnInlgY/lt67vvIzmraTml7bpnIDopoHnrKzkuozmrKHmiafooYzmu5rliqjvvIznoa7kv53mu5rliqjkvY3nva7ml6Dor68KICAgICAgICAgIGlmICghc3RvcCkgewogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvKGluZGV4LCB0cnVlKTsKICAgICAgICAgICAgfSwgNTApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIC8vIOOAkOWklumDqOiwg+eUqOOAkemHjee9rgogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuc2l6ZXMgPSB7fTsKICAgICAgdGhpcy5zY3JvbGxUbygwLCBmYWxzZSk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGRhdGEoKSB7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgdGhpcy5pbml0RGF0YSgpOwogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKHRoaXMuc2Nyb2xsZXIpIHsKICAgICAgdGhpcy5zY3JvbGxlci5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uU2Nyb2xsKTsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25TY3JvbGwpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["virtualTabel.vue"],"names":[],"mappings":";AAOA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"virtualTabel.vue","sourceRoot":"src/pages/product/productAdd/components","sourcesContent":["<template>\n  <div>\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nimport throttle from 'lodash/throttle';\n\nexport default {\n  name: 'el-table-virtual-scroll',\n  props: {\n    data: {\n      type: Array,\n      required: true,\n    },\n    height: {\n      type: Number,\n      default: 60,\n    },\n    buffer: {\n      type: Number,\n      default: 500,\n    },\n    keyProp: {\n      type: String,\n      default: 'id',\n    },\n    throttleTime: {\n      type: Number,\n      default: 100,\n    },\n  },\n  data() {\n    return {\n      sizes: {}, // 尺寸映射（依赖响应式）\n    };\n  },\n  computed: {\n    // 计算出每个item（的key值）到滚动容器顶部的距离\n    offsetMap({ keyProp, height, sizes, data }) {\n      const res = {};\n      let total = 0;\n      for (let i = 0; i < data.length; i++) {\n        const key = data[i][keyProp];\n        res[key] = total;\n\n        const curSize = sizes[key];\n        const size = typeof curSize === 'number' ? curSize : height;\n        total += size;\n      }\n      return res;\n    },\n  },\n  methods: {\n    // 初始化数据\n    initData() {\n      // 可视范围内显示数据\n      this.renderData = [];\n      // 页面可视范围顶端、底部\n      this.top = undefined;\n      this.bottom = undefined;\n      // 截取页面可视范围内显示数据的开始和结尾索引\n      this.start = 0;\n      this.end = undefined;\n\n      this.scroller = this.$el.querySelector('.el-table__body-wrapper');\n\n      // 初次执行\n      setTimeout(() => {\n        this.handleScroll();\n      }, 100);\n\n      // 监听事件\n      this.onScroll = throttle(this.handleScroll, this.throttleTime);\n      this.scroller.addEventListener('scroll', this.handleScroll);\n      window.addEventListener('resize', this.onScroll);\n    },\n\n    // 更新尺寸（高度）\n    updateSizes() {\n      const rows = this.$el.querySelectorAll('.el-table__body > tbody > .el-table__row');\n\n      Array.from(rows).forEach((row, index) => {\n        const item = this.renderData[index];\n        if (!item) return;\n\n        const key = item[this.keyProp];\n        const offsetHeight = row.offsetHeight;\n\n        if (this.sizes[key] !== offsetHeight) {\n          this.$set(this.sizes, key, offsetHeight);\n        }\n      });\n    },\n\n    // 处理滚动事件\n    handleScroll(shouldUpdate = true) {\n      // 更新当前尺寸（高度）\n      this.updateSizes();\n      // 计算renderData\n      this.calcRenderData();\n      // 计算位置\n      this.calcPosition();\n      shouldUpdate && this.updatePosition();\n      // 触发事件\n      this.$emit('change', this.renderData, this.start, this.end);\n    },\n\n    // 获取某条数据offsetTop\n    getOffsetTop(index) {\n      const item = this.data[index];\n      if (item) {\n        return this.offsetMap[item[this.keyProp]] || 0;\n      }\n      return 0;\n    },\n\n    // 获取某条数据的尺寸\n    getSize(index) {\n      const item = this.data[index];\n      if (item) {\n        const key = item[this.keyProp];\n        return this.sizes[key] || this.height;\n      }\n      return this.height;\n    },\n\n    // 计算只在视图上渲染的数据\n    calcRenderData() {\n      const { scroller, data, buffer } = this;\n      // 计算可视范围顶部、底部\n      const top = scroller.scrollTop - buffer;\n      const bottom = scroller.scrollTop + scroller.offsetHeight + buffer;\n\n      // 二分法计算可视范围内的开始的第一个内容\n      let l = 0;\n      let r = data.length - 1;\n      let mid = 0;\n      while (l <= r) {\n        mid = Math.floor((l + r) / 2);\n        const midVal = this.getOffsetTop(mid);\n        if (midVal < top) {\n          const midNextVal = this.getOffsetTop(mid + 1);\n          if (midNextVal > top) break;\n          l = mid + 1;\n        } else {\n          r = mid - 1;\n        }\n      }\n\n      // 计算渲染内容的开始、结束索引\n      let start = mid;\n      let end = data.length - 1;\n      for (let i = start + 1; i < data.length; i++) {\n        const offsetTop = this.getOffsetTop(i);\n        if (offsetTop >= bottom) {\n          end = i;\n          break;\n        }\n      }\n\n      // 开始索引始终保持偶数，如果为奇数，则加1使其保持偶数【确保表格行的偶数数一致，不会导致斑马纹乱序显示】\n      if (start % 2) {\n        start = start - 1;\n      }\n      // console.log(start, end, 'start end')\n\n      this.top = top;\n      this.bottom = bottom;\n      this.start = start;\n      this.end = end;\n      this.renderData = data.slice(start, end + 1);\n    },\n\n    // 计算位置\n    calcPosition() {\n      const last = this.data.length - 1;\n      // 计算内容总高度\n      const wrapHeight = this.getOffsetTop(last) + this.getSize(last);\n      // 计算当前滚动位置需要撑起的高度\n      const offsetTop = this.getOffsetTop(this.start);\n\n      // 设置dom位置\n      const classNames = [\n        '.el-table__body-wrapper',\n        '.el-table__fixed-right .el-table__fixed-body-wrapper',\n        '.el-table__fixed .el-table__fixed-body-wrapper',\n      ];\n      classNames.forEach((className) => {\n        const el = this.$el.querySelector(className);\n        if (!el) return;\n\n        // 创建wrapEl、innerEl\n        if (!el.wrapEl) {\n          const wrapEl = document.createElement('div');\n          const innerEl = document.createElement('div');\n          wrapEl.appendChild(innerEl);\n          innerEl.appendChild(el.children[0]);\n          el.insertBefore(wrapEl, el.firstChild);\n          el.wrapEl = wrapEl;\n          el.innerEl = innerEl;\n        }\n\n        if (el.wrapEl) {\n          // 设置高度\n          el.wrapEl.style.height = wrapHeight + 'px';\n          // 设置transform撑起高度\n          el.innerEl.style.transform = `translateY(${offsetTop}px)`;\n          // 设置paddingTop撑起高度\n          // el.innerEl.style.paddingTop = `${offsetTop}px`\n        }\n      });\n    },\n\n    // 空闲时更新位置\n    updatePosition() {\n      this.timer && clearTimeout(this.timer);\n      this.timer = setTimeout(() => {\n        this.timer && clearTimeout(this.timer);\n        // 传入false，避免一直循环调用\n        this.handleScroll(false);\n      }, this.throttleTime + 10);\n    },\n\n    // 【外部调用】更新\n    update() {\n      this.handleScroll();\n    },\n\n    // 【外部调用】滚动到第几行\n    scrollTo(index, stop = false) {\n      const item = this.data[index];\n      if (item && this.scroller) {\n        this.updateSizes();\n        this.calcRenderData();\n\n        this.$nextTick(() => {\n          const offsetTop = this.getOffsetTop(index);\n          this.scroller.scrollTop = offsetTop;\n\n          // 调用两次scrollTo，第一次滚动时，如果表格行初次渲染高度发生变化时，会导致滚动位置有偏差，此时需要第二次执行滚动，确保滚动位置无误\n          if (!stop) {\n            setTimeout(() => {\n              this.scrollTo(index, true);\n            }, 50);\n          }\n        });\n      }\n    },\n\n    // 【外部调用】重置\n    reset() {\n      this.sizes = {};\n      this.scrollTo(0, false);\n    },\n  },\n  watch: {\n    data() {\n      this.update();\n    },\n  },\n  created() {\n    this.$nextTick(() => {\n      this.initData();\n    });\n  },\n  beforeDestroy() {\n    if (this.scroller) {\n      this.scroller.removeEventListener('scroll', this.onScroll);\n      window.removeEventListener('resize', this.onScroll);\n    }\n  },\n};\n</script>\n\n<style lang=\"less\" scoped></style>\n"]}]}