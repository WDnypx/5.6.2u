{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\live\\creat_live.vue?vue&type=style&index=0&id=16a54e28&lang=scss&scoped=true","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\live\\creat_live.vue","mtime":1731313973076},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\css-loader\\index.js","mtime":1753254259822},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1753254262918},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1753254258547},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1753254255270},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jb250ZW50X3dpZHRoIHsKICB3aWR0aDogNDYwcHg7Cn0KLlFScGljIHsKICB3aWR0aDogMTgwcHg7CiAgaGVpZ2h0OiAxODBweDsKCiAgaW1nIHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogIH0KfQouZGVzYyB7CiAgZm9udC1zaXplOiAxMnB4OwogIGNvbG9yOiAjOTk5Owp9Ci51cGxvYWQtYm94IHsKICB3aWR0aDogNThweDsKICBoZWlnaHQ6IDU4cHg7CiAgbGluZS1oZWlnaHQ6IDU4cHg7CiAgYm9yZGVyOiAxcHggZG90dGVkIHJnYmEoMCwgMCwgMCwgMC4xKTsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjAyKTsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KLmJveCB7CiAgd2lkdGg6IDYwcHg7CiAgaGVpZ2h0OiA2MHB4OwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBjdXJzb3I6IHBvaW50ZXI7CgogIGltZyB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICB9Cn0K"},{"version":3,"sources":["creat_live.vue"],"names":[],"mappings":";AAsaA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"creat_live.vue","sourceRoot":"src/pages/marketing/live","sourcesContent":["<template>\n  <div>\n    <pages-header\n      ref=\"pageHeader\"\n      :title=\"$route.meta.title\"\n      :backUrl=\"$routeProStr + '/marketing/live/live_room'\"\n    ></pages-header>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"mt16\">\n      <el-form\n        ref=\"formValidate\"\n        :model=\"formValidate\"\n        :label-width=\"labelWidth\"\n        :label-position=\"labelPosition\"\n        class=\"tabform\"\n        :rules=\"ruleValidate\"\n        @submit.native.prevent\n      >\n        <el-row :gutter=\"24\">\n          <el-col :span=\"24\">\n            <el-alert class=\"mb10\" type=\"warning\" show-icon :closable=\"false\">\n              <span slot=\"title\"\n                >必须前往微信小程序官方后台开通直播权限，关注<span\n                  style=\"color: red; cursor: pointer\"\n                  v-db-click\n                  @click=\"codeImg\"\n                  >【小程序直播】</span\n                >须知直播状态</span\n              >\n            </el-alert>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"选择主播：\" prop=\"anchor_wechat\">\n              <el-select\n                v-model=\"formValidate.anchor_wechat\"\n                filterable\n                clearable\n                class=\"content_width\"\n                @change=\"anchorName\"\n              >\n                <el-option\n                  v-for=\"(item, index) in liveList\"\n                  :value=\"item.wechat\"\n                  :key=\"index\"\n                  :label=\"item.wechat\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"直播间名称：\" prop=\"name\">\n              <el-input\n                enter-button\n                placeholder=\"请输入直播间名称\"\n                element-id=\"name\"\n                v-model=\"formValidate.name\"\n                class=\"content_width\"\n                maxlength=\"80\"\n                show-word-limit\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <div style=\"display: flex\">\n              <el-form-item label=\"背景图：\" prop=\"name\">\n                <div v-db-click @click=\"modalPicTap(0)\" class=\"box\">\n                  <img :src=\"formValidate.cover_img\" alt=\"\" v-if=\"formValidate.cover_img\" />\n                  <div class=\"upload-box acea-row row-center-wrapper\" v-else>\n                    <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                  </div>\n                </div>\n                <div class=\"desc\">尺寸：1080*1920px</div>\n              </el-form-item>\n            </div>\n          </el-col>\n          <el-col :span=\"24\">\n            <div style=\"display: flex\">\n              <el-form-item label=\"分享图：\" prop=\"name\">\n                <div v-db-click @click=\"modalPicTap(1)\" class=\"box\">\n                  <img :src=\"formValidate.share_img\" alt=\"\" v-if=\"formValidate.share_img\" />\n                  <div class=\"upload-box acea-row row-center-wrapper\" v-else>\n                    <i class=\"el-icon-picture-outline\" style=\"font-size: 24px\"></i>\n                  </div>\n                </div>\n                <div class=\"desc\">尺寸：800*640px</div>\n              </el-form-item>\n            </div>\n          </el-col>\n          <!--<el-col :span=\"24\">-->\n          <!--<el-form-item label=\"主播昵称：\">-->\n          <!--<el-input enter-button  placeholder=\"请输入主播昵称\" element-id=\"anchor_name\" v-model=\"formValidate.anchor_name\" style=\"width: 60%;\"/>-->\n          <!--</el-form-item>-->\n          <!--</el-col>-->\n          <el-col :span=\"24\">\n            <el-form-item label=\"联系电话：\">\n              <el-input\n                placeholder=\"请输入主播联系电话\"\n                v-model=\"formValidate.phone\"\n                class=\"content_width\"\n                maxlength=\"11\"\n                show-word-limit\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"直播时间：\" prop=\"name\">\n              <el-date-picker\n                clearable\n                type=\"datetimerange\"\n                format=\"yyyy-MM-dd HH:mm\"\n                placeholder=\"请选择直播时间\"\n                class=\"content_width\"\n                v-model=\"timeVal\"\n                @change=\"selectDate\"\n                value-format=\"yyyy-MM-dd HH:mm\"\n                range-separator=\"-\"\n                start-placeholder=\"开始日期\"\n                end-placeholder=\"结束日期\"\n              ></el-date-picker>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"排序：\">\n              <el-input type=\"number\" placeholder=\"0\" v-model=\"formValidate.sort\" class=\"content_width\" />\n            </el-form-item>\n          </el-col>\n          <!-- <el-col :span=\"24\">\n            <el-form-item label=\"显示样式：\">\n              <el-radio-group v-model=\"formValidate.screen_type\">\n                <el-radio :label=\"item.label\" v-for=\"(item, index) in screen_type\" :key=\"index\">\n                  <span>{{ item.value }}</span>\n                </el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col> -->\n          <el-col :span=\"24\">\n            <el-form-item label=\"直播间类型：\">\n              <el-radio-group v-model=\"formValidate.type\">\n                <el-radio :label=\"item.label\" v-for=\"(item, index) in type\" :key=\"index\">\n                  <span>{{ item.value }}</span>\n                </el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"直播间点赞：\">\n              <el-switch\n                class=\"defineSwitch\"\n                :active-value=\"1\"\n                :inactive-value=\"0\"\n                v-model=\"formValidate.close_like\"\n                size=\"large\"\n                active-text=\"开启\"\n                inactive-text=\"关闭\"\n              >\n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"直播卖货：\">\n              <el-switch\n                class=\"defineSwitch\"\n                :active-value=\"1\"\n                :inactive-value=\"0\"\n                v-model=\"formValidate.close_goods\"\n                size=\"large\"\n                active-text=\"开启\"\n                inactive-text=\"关闭\"\n              >\n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"直播间评论：\">\n              <el-switch\n                class=\"defineSwitch\"\n                :active-value=\"1\"\n                :inactive-value=\"0\"\n                v-model=\"formValidate.close_comment\"\n                size=\"large\"\n                active-text=\"开启\"\n                inactive-text=\"关闭\"\n              >\n              </el-switch>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row :gutter=\"24\">\n          <el-col v-bind=\"grid\" :span=\"24\">\n            <el-button\n              :loading=\"loading\"\n              type=\"primary\"\n              style=\"margin-left: 120px\"\n              v-db-click\n              @click=\"handleSubmit('formItem')\"\n            >\n              提交\n            </el-button>\n            <!-- <el-button\n              type=\"primary\"\n              v-db-click @click=\"handleSubmit('formItem')\"\n              style=\"width: 19%; margin-left: 99px\"\n              >提交</el-button\n            > -->\n          </el-col>\n        </el-row>\n      </el-form>\n    </el-card>\n    <div>\n      <el-dialog :visible.sync=\"modalPic\" width=\"950px\" title=\"上传商品图\" :close-on-click-modal=\"false\" :z-index=\"888\">\n        <uploadPictures\n          :isChoice=\"isChoice\"\n          @getPic=\"getPic\"\n          :gridBtn=\"gridBtn\"\n          :gridPic=\"gridPic\"\n          v-if=\"modalPic\"\n        ></uploadPictures>\n      </el-dialog>\n    </div>\n    <el-dialog :visible.sync=\"modal3\" title=\"二维码\">\n      <div class=\"acea-row row-around\">\n        <div v-viewer class=\"QRpic\">\n          <img src=\"https://res.wx.qq.com/op_res/9rSix1dhHfK4rR049JL0PHJ7TpOvkuZ3mE0z7Ou_Etvjf-w1J_jVX0rZqeStLfwh\" />\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport uploadPictures from '@/components/uploadPictures';\nimport { liveAdd, liveAuchorList } from '@/api/live';\nexport default {\n  name: 'creat_live',\n  components: {\n    uploadPictures,\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : '120px';\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  data() {\n    return {\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      grid: {\n        xl: 10,\n        lg: 16,\n        md: 18,\n        sm: 24,\n        xs: 24,\n      },\n      loading: false,\n      formValidate: {\n        name: '',\n        anchor_name: '',\n        anchor_wechat: '',\n        phone: '',\n        screen_type: 0,\n        close_like: 1,\n        close_goods: 1,\n        close_comment: 1,\n        cover_img: '',\n        share_img: '',\n        sort: 0,\n        type: 0,\n        start_time: '',\n      },\n      screen_type: [\n        {\n          value: '竖屏',\n          label: 0,\n        },\n        {\n          value: '横屏',\n          label: 1,\n        },\n      ],\n      type: [\n        // {\n        //     value:'推流',\n        //     label:1\n        // },\n        {\n          value: '手机直播',\n          label: 0,\n        },\n      ],\n      close_like: [\n        {\n          value: '开启',\n          label: 1,\n        },\n        {\n          value: '关闭',\n          label: 0,\n        },\n      ],\n      close_goods: [\n        {\n          value: '开启',\n          label: 1,\n        },\n        {\n          value: '关闭',\n          label: 0,\n        },\n      ],\n      close_comment: [\n        {\n          value: '开启',\n          label: 1,\n        },\n        {\n          value: '关闭',\n          label: 0,\n        },\n      ],\n      timeVal: '',\n      modalPic: false,\n      isChoice: '单选',\n      activeIndex: 0,\n      liveList: [],\n      modal3: false,\n      ruleValidate: {\n        anchor_wechat: [{ required: true, message: 'Please select the city', trigger: 'change' }],\n        name: [{ required: true, message: 'The name cannot be empty', trigger: 'blur' }],\n      },\n    };\n  },\n  mounted() {\n    this.getLive();\n  },\n  methods: {\n    cancel() {\n      this.modal3 = false;\n    },\n    codeImg() {\n      this.modal3 = true;\n    },\n    anchorName(e) {\n      this.liveList.filter((el, index) => {\n        if (el.wechat === e) {\n          this.formValidate.anchor_name = el.name;\n        }\n      });\n    },\n    //主播列表；\n    getLive() {\n      let formValidate = {\n        kerword: '',\n        page: '',\n        limit: '',\n      };\n      liveAuchorList(formValidate)\n        .then((res) => {\n          this.liveList = res.data.list;\n        })\n        .catch((error) => {\n          this.$message.error(error.msg);\n        });\n    },\n    // 点击图文封面\n    modalPicTap(type) {\n      this.activeIndex = type;\n      this.modalPic = true;\n    },\n    // 选择日期\n    selectDate(e) {\n      this.formValidate.start_time = e;\n    },\n    // 获取图片信息\n    getPic(pc) {\n      this.$nextTick(() => {\n        if (this.activeIndex == 0) {\n          this.formValidate.cover_img = pc.att_dir;\n        } else {\n          this.formValidate.share_img = pc.att_dir;\n        }\n        this.modalPic = false;\n      });\n    },\n    // 保存\n    handleSubmit(name) {\n      this.loading = true;\n      liveAdd(this.formValidate)\n        .then((res) => {\n          this.$message.success('添加成功');\n          setTimeout(() => {\n            this.loading = false;\n            this.$router.push({ path: this.$routeProStr + '/marketing/live/live_room' });\n          }, 500);\n        })\n        .catch((error) => {\n          setTimeout(() => {\n            this.loading = false;\n          }, 1000);\n          this.$message.error(error.msg);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.content_width {\n  width: 460px;\n}\n.QRpic {\n  width: 180px;\n  height: 180px;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n}\n.desc {\n  font-size: 12px;\n  color: #999;\n}\n.upload-box {\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n}\n.box {\n  width: 60px;\n  height: 60px;\n  border-radius: 4px;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n}\n</style>\n"]}]}