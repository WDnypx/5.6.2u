{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\layout\\navBars\\breadcrumb\\search.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\layout\\navBars\\breadcrumb\\search.vue","mtime":1730950963293},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1lbnVzU2VhcmNoIH0gZnJvbSAnQC9hcGkvc2V0dGluZyc7CmltcG9ydCB7IGdldEFsbFNpZGVyTWVudSB9IGZyb20gJ0AvbGlicy9zeXN0ZW0nOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdsYXlvdXRCcmVhZGNydW1iU2VhcmNoJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNTaG93U2VhcmNoOiBmYWxzZSwKICAgICAgbWVudVF1ZXJ5OiAnJywKICAgICAgdGFnc1ZpZXdMaXN0OiBbXSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmkJzntKLlvLnnqpfmiZPlvIAKICAgIG9wZW5TZWFyY2goKSB7CiAgICAgIHRoaXMubWVudVF1ZXJ5ID0gJyc7CiAgICAgIHRoaXMuaXNTaG93U2VhcmNoID0gdHJ1ZTsKICAgICAgdGhpcy5pbml0VGFnZVZpZXcoKTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMubGF5b3V0TWVudUF1dG9jb21wbGV0ZVJlZi5mb2N1cygpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmkJzntKLlvLnnqpflhbPpl60KICAgIGNsb3NlU2VhcmNoKCkgewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLiRlbWl0KCdjbG9zZScpOwogICAgICAgIHRoaXMuaXNTaG93U2VhcmNoID0gZmFsc2U7CiAgICAgIH0sIDE1MCk7CiAgICB9LAogICAgLy8g6I+c5Y2V5pCc57Si5pWw5o2u6L+H5rukCiAgICBtZW51U2VhcmNoKHF1ZXJ5U3RyaW5nLCBjYikgewogICAgICBpZiAoIXF1ZXJ5U3RyaW5nKSB7CiAgICAgICAgbGV0IHJlc3VsdHMgPSBxdWVyeVN0cmluZyA/IHRoaXMudGFnc1ZpZXdMaXN0LmZpbHRlcih0aGlzLmNyZWF0ZUZpbHRlcihxdWVyeVN0cmluZykpIDogdGhpcy50YWdzVmlld0xpc3Q7CiAgICAgICAgY2IocmVzdWx0cyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IHF1ZXJ5RGF0YSA9IHsKICAgICAgICAgIGtleXdvcmQ6IHF1ZXJ5U3RyaW5nLAogICAgICAgIH07CiAgICAgICAgbWVudXNTZWFyY2gocXVlcnlEYXRhKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNiKHJlcy5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOiPnOWNleaQnOe0oui/h+a7pAogICAgY3JlYXRlRmlsdGVyKHF1ZXJ5U3RyaW5nKSB7CiAgICAgIHJldHVybiAocmVzdGF1cmFudCkgPT4gewogICAgICAgIHJldHVybiAoCiAgICAgICAgICByZXN0YXVyYW50LnBhdGgudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5U3RyaW5nLnRvTG93ZXJDYXNlKCkpID4gLTEgfHwKICAgICAgICAgIHJlc3RhdXJhbnQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5U3RyaW5nLnRvTG93ZXJDYXNlKCkpID4gLTEgfHwKICAgICAgICAgIHRoaXMuJHQocmVzdGF1cmFudC50aXRsZSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5U3RyaW5nLnRvTG93ZXJDYXNlKCkpID4gLTEKICAgICAgICApOwogICAgICB9OwogICAgfSwKICAgIC8vIOWIneWni+WMluiPnOWNleaVsOaNrgogICAgaW5pdFRhZ2VWaWV3KCkgewogICAgICBpZiAodGhpcy50YWdzVmlld0xpc3QubGVuZ3RoID4gMCkgcmV0dXJuIGZhbHNlOwogICAgICB0aGlzLnRhZ3NWaWV3TGlzdCA9IGdldEFsbFNpZGVyTWVudSh0aGlzLiRzdG9yZS5zdGF0ZS5yb3V0ZXNMaXN0LnJvdXRlc0xpc3QpOwogICAgICAvLyB0aGlzLiRzdG9yZS5zdGF0ZS50YWdzVmlld1JvdXRlcy50YWdzVmlld1JvdXRlcy5tYXAoKHYpID0+IHsKICAgICAgLy8gCWlmICghdi5pc0hpZGUpIHRoaXMudGFnc1ZpZXdMaXN0LnB1c2goeyAuLi52IH0pOwogICAgICAvLyB9KTsKICAgIH0sCiAgICAvLyDlvZPliY3oj5zljZXpgInkuK3ml7YKICAgIG9uSGFuZGxlU2VsZWN0KGl0ZW0pIHsKICAgICAgbGV0IHsgcGF0aCwgcmVkaXJlY3QgfSA9IGl0ZW07CiAgICAgIGlmIChpdGVtLmlzTGluayAmJiAhaXRlbS5pc0lmcmFtZSkgd2luZG93Lm9wZW4oaXRlbS5pc0xpbmspOwogICAgICBlbHNlIGlmIChyZWRpcmVjdCkgdGhpcy4kcm91dGVyLnB1c2gocmVkaXJlY3QpOwogICAgICBlbHNlIHRoaXMuJHJvdXRlci5wdXNoKHBhdGgpOwogICAgICB0aGlzLmNsb3NlU2VhcmNoKCk7CiAgICB9LAogICAgLy8gaW5wdXQg5aSx5Y6754Sm54K55pe2CiAgICBvblNlYXJjaEJsdXIoKSB7CiAgICAgIHRoaXMuY2xvc2VTZWFyY2goKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["search.vue"],"names":[],"mappings":";AAmBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src/layout/navBars/breadcrumb","sourcesContent":["<template>\n  <div class=\"layout-search-dialog\">\n    <el-autocomplete\n      v-model=\"menuQuery\"\n      :fetch-suggestions=\"menuSearch\"\n      :placeholder=\"$t('message.user.searchPlaceholder')\"\n      prefix-icon=\"el-icon-search\"\n      ref=\"layoutMenuAutocompleteRef\"\n      @select=\"onHandleSelect\"\n      @blur=\"onSearchBlur\"\n    >\n      <template slot-scope=\"{ item }\">\n        <div><i :class=\"item.icon\" class=\"mr10\"></i>{{ $t(item.title) }}</div>\n      </template>\n    </el-autocomplete>\n  </div>\n</template>\n\n<script>\nimport { menusSearch } from '@/api/setting';\nimport { getAllSiderMenu } from '@/libs/system';\n\nexport default {\n  name: 'layoutBreadcrumbSearch',\n  data() {\n    return {\n      isShowSearch: false,\n      menuQuery: '',\n      tagsViewList: [],\n    };\n  },\n  methods: {\n    // 搜索弹窗打开\n    openSearch() {\n      this.menuQuery = '';\n      this.isShowSearch = true;\n      this.initTageView();\n      this.$nextTick(() => {\n        this.$refs.layoutMenuAutocompleteRef.focus();\n      });\n    },\n    // 搜索弹窗关闭\n    closeSearch() {\n      setTimeout(() => {\n        this.$emit('close');\n        this.isShowSearch = false;\n      }, 150);\n    },\n    // 菜单搜索数据过滤\n    menuSearch(queryString, cb) {\n      if (!queryString) {\n        let results = queryString ? this.tagsViewList.filter(this.createFilter(queryString)) : this.tagsViewList;\n        cb(results);\n      } else {\n        let queryData = {\n          keyword: queryString,\n        };\n        menusSearch(queryData).then((res) => {\n          cb(res.data);\n        });\n      }\n    },\n    // 菜单搜索过滤\n    createFilter(queryString) {\n      return (restaurant) => {\n        return (\n          restaurant.path.toLowerCase().indexOf(queryString.toLowerCase()) > -1 ||\n          restaurant.title.toLowerCase().indexOf(queryString.toLowerCase()) > -1 ||\n          this.$t(restaurant.title).toLowerCase().indexOf(queryString.toLowerCase()) > -1\n        );\n      };\n    },\n    // 初始化菜单数据\n    initTageView() {\n      if (this.tagsViewList.length > 0) return false;\n      this.tagsViewList = getAllSiderMenu(this.$store.state.routesList.routesList);\n      // this.$store.state.tagsViewRoutes.tagsViewRoutes.map((v) => {\n      // \tif (!v.isHide) this.tagsViewList.push({ ...v });\n      // });\n    },\n    // 当前菜单选中时\n    onHandleSelect(item) {\n      let { path, redirect } = item;\n      if (item.isLink && !item.isIframe) window.open(item.isLink);\n      else if (redirect) this.$router.push(redirect);\n      else this.$router.push(path);\n      this.closeSearch();\n    },\n    // input 失去焦点时\n    onSearchBlur() {\n      this.closeSearch();\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.layout-search-dialog {\n  ::v-deep .el-dialog {\n    box-shadow: unset !important;\n    border-radius: 0 !important;\n    background: rgba(0, 0, 0, 0.5);\n  }\n  ::v-deep .el-autocomplete {\n    width: 300px;\n    // position: absolute;\n    // top: 100px;\n    // left: 50%;\n    // transform: translateX(-50%);\n  }\n}\n::v-deep .el-dialog__header {\n  border: none !important;\n}\n::v-deep .el-input--small .el-input__inner {\n  height: 36px;\n  line-height: 36px;\n}\n</style>\n"]}]}