{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\user\\grade\\record\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\user\\grade\\record\\index.vue","mtime":1731313973106},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHVzZXJNZW1iZXJDYXJkLCBtZW1iZXJSZWNvcmQgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY2FyZCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRyZWVTZWxlY3Q6IFsKICAgICAgICB7CiAgICAgICAgICBpZDogJ2ZyZWUnLAogICAgICAgICAgbGFiZWw6ICfor5XnlKgnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6ICdjYXJkJywKICAgICAgICAgIGxhYmVsOiAn5Y2h5a+GJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAnbW9udGgnLAogICAgICAgICAgbGFiZWw6ICfmnIjljaEnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6ICdxdWFydGVyJywKICAgICAgICAgIGxhYmVsOiAn5a2j5Y2hJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAneWVhcicsCiAgICAgICAgICBsYWJlbDogJ+W5tOWNoScsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogJ2V2ZXInLAogICAgICAgICAgbGFiZWw6ICfmsLjkuYUnLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHBheUxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICB2YWw6ICdmcmVlJywKICAgICAgICAgIGxhYmVsOiAn5YWN6LS5JywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbDogJ3dlaXhpbicsCiAgICAgICAgICBsYWJlbDogJ+W+ruS/oScsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWw6ICdhbGlwYXknLAogICAgICAgICAgbGFiZWw6ICfmlK/ku5jlrp0nLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHRib2R5OiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRvdGFsOiAwLAogICAgICBmb3JtVmFsaWRhdGU6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBtZW1iZXJfdHlwZTogJycsCiAgICAgICAgcGF5X3R5cGU6ICcnLAogICAgICAgIGFkZF90aW1lOiAnJywKICAgICAgfSwKICAgICAgcGlja2VyT3B0aW9uczogdGhpcy4kdGltZU9wdGlvbnMsCiAgICAgIHRpbWVWYWw6IFtdLAogICAgICB0YWJsZVBhZ2U6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiAxNSwKICAgICAgfSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoJ21lZGlhJywgWydpc01vYmlsZSddKSwKICAgIGxhYmVsV2lkdGgoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogJzgwcHgnOwogICAgfSwKICAgIGxhYmVsUG9zaXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gJ3RvcCcgOiAncmlnaHQnOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldE1lbWJlclJlY29yZCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g55So5oi35ZCN5pCc57Si77ybCiAgICBzZWxDaGFuZ2UoKSB7CiAgICAgIHRoaXMudGFibGVQYWdlLnBhZ2UgPSAxOwogICAgICB0aGlzLmdldE1lbWJlclJlY29yZCgpOwogICAgfSwKICAgIC8v55So5oi357G75Z6L5pCc57Si77ybCiAgICB1c2VyU2VhcmNocygpIHsKICAgICAgdGhpcy50YWJsZVBhZ2UucGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0TWVtYmVyUmVjb3JkKCk7CiAgICB9LAogICAgLy/mlK/ku5jmlrnlvI/mkJzntKLvvJsKICAgIHBheVNlYXJjaHMoKSB7CiAgICAgIHRoaXMudGFibGVQYWdlLnBhZ2UgPSAxOwogICAgICB0aGlzLmdldE1lbWJlclJlY29yZCgpOwogICAgfSwKICAgIC8vIOWFt+S9k+aXpeacnwogICAgb25jaGFuZ2VUaW1lKGUpIHsKICAgICAgdGhpcy50aW1lVmFsID0gZSB8fCBbXTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuYWRkX3RpbWUgPSB0aGlzLnRpbWVWYWxbMF0gPyAodGhpcy50aW1lVmFsID8gdGhpcy50aW1lVmFsLmpvaW4oJy0nKSA6ICcnKSA6ICcnOwogICAgICB0aGlzLnRhYmxlUGFnZS5wYWdlID0gMTsKICAgICAgdGhpcy5nZXRNZW1iZXJSZWNvcmQoKTsKICAgIH0sCiAgICBnZXRNZW1iZXJSZWNvcmQoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIHBhZ2U6IHRoaXMudGFibGVQYWdlLnBhZ2UsCiAgICAgICAgbGltaXQ6IHRoaXMudGFibGVQYWdlLmxpbWl0LAogICAgICAgIG1lbWJlcl90eXBlOiB0aGlzLmZvcm1WYWxpZGF0ZS5tZW1iZXJfdHlwZSwKICAgICAgICBwYXlfdHlwZTogdGhpcy5mb3JtVmFsaWRhdGUucGF5X3R5cGUsCiAgICAgICAgYWRkX3RpbWU6IHRoaXMuZm9ybVZhbGlkYXRlLmFkZF90aW1lLAogICAgICAgIG5hbWU6IHRoaXMuZm9ybVZhbGlkYXRlLm5hbWUsCiAgICAgIH07CiAgICAgIG1lbWJlclJlY29yZChkYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgY29uc3QgeyBsaXN0LCBjb3VudCB9ID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLnRib2R5ID0gbGlzdDsKICAgICAgICAgIHRoaXMudG90YWwgPSBjb3VudDsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAoHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/user/grade/record","sourcesContent":["<template>\n  <div>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt\" :body-style=\"{ padding: 0 }\">\n      <div class=\"padding-add\">\n        <el-form\n          ref=\"formValidate\"\n          :model=\"formValidate\"\n          :label-width=\"labelWidth\"\n          :label-position=\"labelPosition\"\n          inline\n          @submit.native.prevent\n          class=\"tabform\"\n        >\n          <el-form-item label=\"会员类型：\">\n            <el-select v-model=\"formValidate.member_type\" clearable @change=\"userSearchs\" class=\"form_content_width\">\n              <el-option v-for=\"item in treeSelect\" :value=\"item.id\" :key=\"item.id\" :label=\"item.label\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"支付方式：\">\n            <el-select v-model=\"formValidate.pay_type\" clearable @change=\"paySearchs\" class=\"form_content_width\">\n              <el-option v-for=\"item in payList\" :value=\"item.val\" :key=\"item.val\" :label=\"item.label\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"购买时间：\">\n            <el-date-picker\n              clearable\n              v-model=\"timeVal\"\n              type=\"daterange\"\n              :editable=\"false\"\n              @change=\"onchangeTime\"\n              format=\"yyyy/MM/dd\"\n              value-format=\"yyyy/MM/dd\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              :picker-options=\"pickerOptions\"\n              style=\"width: 250px\"\n            ></el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"搜索：\">\n            <el-input\n              clearable\n              placeholder=\"请输入用户名称搜索\"\n              v-model=\"formValidate.name\"\n              class=\"form_content_width\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" v-db-click @click=\"userSearchs\">查询</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt mt16\">\n      <el-table\n        :data=\"tbody\"\n        ref=\"table\"\n        v-loading=\"loading\"\n        size=\"small\"\n        no-userFrom-text=\"暂无数据\"\n        no-filtered-userFrom-text=\"暂无筛选结果\"\n      >\n        <el-table-column label=\"订单号\" width=\"170\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.order_id }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"用户名\" min-width=\"80\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.user.nickname }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"手机号码\" min-width=\"80\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.user.phone || '--' }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"会员类型\" min-width=\"80\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.member_type }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"有效期限（天）\" min-width=\"80\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.vip_day === -1 ? '永久' : scope.row.vip_day }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"支付金额（元）\" min-width=\"50\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.pay_price }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"支付方式\" min-width=\"30\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.pay_type }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"购买时间\" min-width=\"80\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.pay_time }}</span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"acea-row row-right page\">\n        <pagination\n          v-if=\"total\"\n          :total=\"total\"\n          :page.sync=\"tablePage.page\"\n          :limit.sync=\"tablePage.limit\"\n          @pagination=\"getMemberRecord\"\n        />\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { userMemberCard, memberRecord } from '@/api/user';\nimport { mapState } from 'vuex';\n\nexport default {\n  name: 'card',\n  data() {\n    return {\n      treeSelect: [\n        {\n          id: 'free',\n          label: '试用',\n        },\n        {\n          id: 'card',\n          label: '卡密',\n        },\n        {\n          id: 'month',\n          label: '月卡',\n        },\n        {\n          id: 'quarter',\n          label: '季卡',\n        },\n        {\n          id: 'year',\n          label: '年卡',\n        },\n        {\n          id: 'ever',\n          label: '永久',\n        },\n      ],\n      payList: [\n        {\n          val: 'free',\n          label: '免费',\n        },\n        {\n          val: 'weixin',\n          label: '微信',\n        },\n        {\n          val: 'alipay',\n          label: '支付宝',\n        },\n      ],\n      tbody: [],\n      loading: false,\n      total: 0,\n      formValidate: {\n        name: '',\n        member_type: '',\n        pay_type: '',\n        add_time: '',\n      },\n      pickerOptions: this.$timeOptions,\n      timeVal: [],\n      tablePage: {\n        page: 1,\n        limit: 15,\n      },\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : '80px';\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  created() {\n    this.getMemberRecord();\n  },\n  methods: {\n    // 用户名搜索；\n    selChange() {\n      this.tablePage.page = 1;\n      this.getMemberRecord();\n    },\n    //用户类型搜索；\n    userSearchs() {\n      this.tablePage.page = 1;\n      this.getMemberRecord();\n    },\n    //支付方式搜索；\n    paySearchs() {\n      this.tablePage.page = 1;\n      this.getMemberRecord();\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e || [];\n      this.formValidate.add_time = this.timeVal[0] ? (this.timeVal ? this.timeVal.join('-') : '') : '';\n      this.tablePage.page = 1;\n      this.getMemberRecord();\n    },\n    getMemberRecord() {\n      this.loading = true;\n      let data = {\n        page: this.tablePage.page,\n        limit: this.tablePage.limit,\n        member_type: this.formValidate.member_type,\n        pay_type: this.formValidate.pay_type,\n        add_time: this.formValidate.add_time,\n        name: this.formValidate.name,\n      };\n      memberRecord(data)\n        .then((res) => {\n          this.loading = false;\n          const { list, count } = res.data;\n          this.tbody = list;\n          this.total = count;\n        })\n        .catch((err) => {\n          this.loading = false;\n          this.$message.error(err.msg);\n        });\n    },\n  },\n};\n</script>\n"]}]}