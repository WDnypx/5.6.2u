{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\components\\wangEditor\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\components\\wangEditor\\index.vue","mtime":1750815808574},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBtb25hY28gZnJvbSAnLi9tb25hY28nOwppbXBvcnQgRSBmcm9tICd3YW5nZWRpdG9yJzsKaW1wb3J0IEFsZXJ0TWVudSBmcm9tICcuL2VkaXRvcic7CmltcG9ydCBIdG1sTWVudSBmcm9tICcuL2h0bWwnOwppbXBvcnQgdXBsb2FkUGljdHVyZXMgZnJvbSAnQC9jb21wb25lbnRzL3VwbG9hZFBpY3R1cmVzJzsKaW1wb3J0IHVwbG9hZFZpZGVvIGZyb20gJ0AvY29tcG9uZW50cy91cGxvYWRWaWRlbzInOwppbXBvcnQgeyBnZXRDb29raWVzIH0gZnJvbSAnQC9saWJzL3V0aWwnOwoKaW1wb3J0IHV0aWwgZnJvbSAnLi4vLi4vdXRpbHMvYnVzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdJbmRleCcsCiAgY29tcG9uZW50czogewogICAgdXBsb2FkUGljdHVyZXMsCiAgICB1cGxvYWRWaWRlbywKICAgIG1vbmFjbywKICB9LAogIHByb3BzOiB7CiAgICBjb250ZW50OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycsCiAgICB9LAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb25hY29Cb3g6IGZhbHNlLAogICAgICB2YWx1ZTogJycsCiAgICAgIG1vZGFsUGljOiBmYWxzZSwKICAgICAgaXNDaG9pY2U6ICflpJrpgIknLAogICAgICBwaWNUaXQ6ICdkYW5Gcm9tJywKICAgICAgaW1nOiAnJywKICAgICAgbW9kYWxWaWRlbzogZmFsc2UsCiAgICAgIGVkaXRvcjogbnVsbCwKICAgICAgdXBsb2FkU2l6ZTogMiwKICAgICAgdmlkZW86ICcnLAoKICAgICAgLy8gaGVhZGVyOiB7CiAgICAgIC8vICAgIkF1dGhvcmktemF0aW9uIjogIkJlYXJlciAiICsgZ2V0Q29va2llcygidG9rZW4iKSwKICAgICAgLy8gfSwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgaW5pdEVkaXRvcih2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMuZWRpdG9yLnR4dC5odG1sKHRoaXMuY29udGVudCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lZGl0b3IudHh0Lmh0bWwoJycpOwogICAgICB9CiAgICB9LAogICAgCiAgfSwKICBjb21wdXRlZDogewogICAgaW5pdEVkaXRvcigpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGVudCAmJiB0aGlzLmVkaXRvcjsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gd2luZG93LmdldHZpZGVvaW50ID0gdGhpcy5nZXR2aWRlb2ludDsKICAgIC8vIHdpbmRvdy5nZXRIdG1saW50ID0gdGhpcy5nZXRIdG1saW50OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY3JlYXRlRWRpdG9yKCk7CiAgICB1dGlsLiRvbignVmlkZW8nLCAoVmlkZW8pID0+IHsKICAgICAgdGhpcy5nZXR2aWRlb2ludCgpOwogICAgfSk7CiAgICB1dGlsLiRvbignSHRtbCcsIChIdG1sKSA9PiB7CiAgICAgIHRoaXMuZ2V0SHRtbGludCgpOwogICAgfSk7CiAgfSwKCiAgbWV0aG9kczogewogICAgY2hhbmdlVmFsdWUodmFsdWUpIHsKICAgICAgdGhpcy5uZXdIdG1sID0gdmFsdWU7CiAgICAgIHRoaXMuJGVtaXQoJ2VkaXRvckNvbnRlbnQnLCB2YWx1ZSk7CgogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHZhbHVlKTsKICAgIH0sCiAgICAvLyDojrflj5blpJrlvKDlm77kv6Hmga8KICAgIGdldFBpYyhwYykgewogICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpcy5pbWcgPSBwYzsKICAgICAgX3RoaXMubW9kYWxQaWMgPSBmYWxzZTsKICAgICAgX3RoaXMuaW1nLm1hcCgoZCkgPT4gewogICAgICAgIHRoaXMuZWRpdG9yLmNtZC5kbygnaW5zZXJ0SFRNTCcsIGA8aW1nIHNyYz0iJHtkLmF0dF9kaXJ9IiBzdHlsZT0ibWF4LXdpZHRoOjEwMCU7Ii8+YCk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldGltZygpIHsKICAgICAgdGhpcy5tb2RhbFBpYyA9IHRydWU7CiAgICAgIHRoaXMuaXNDaG9pY2UgPSAn5aSa6YCJJzsKICAgIH0sCiAgICBnZXR2aWRlb2ludCgpIHsKICAgICAgLy8gdGhpcy5tb2RhbFZpZGVvID0gdHJ1ZTsKICAgICAgdGhpcy4kdmlkZW9Nb2RhbCgoZSkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICAgX3RoaXMubW9kYWxWaWRlbyA9IGZhbHNlOwogICAgICAgIHRoaXMudmlkZW8gPSBlOwogICAgICAgIGxldCB2aWRlb0hUTUwgPQogICAgICAgICAgJzx2aWRlbyBzcmM9IicgKyB0aGlzLnZpZGVvICsgJyIgY29udHJvbHMgc3R5bGU9Im1heC13aWR0aDoxMDAlO21pbi1oZWlnaHQ6NTAwcnB4Ij48L3ZpZGVvPjxwPjxicj48L3A+JzsKICAgICAgICB0aGlzLmVkaXRvci5jbWQuZG8oJ2luc2VydEhUTUwnLCB2aWRlb0hUTUwpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRIdG1saW50KCkgewogICAgICB0aGlzLm1vbmFjb0JveCA9ICF0aGlzLm1vbmFjb0JveDsKICAgICAgdGhpcy52YWx1ZSA9IHRoaXMubmV3SHRtbDsKICAgICAgaWYgKCF0aGlzLm1vbmFjb0JveCkgewogICAgICAgIHRoaXMuZWRpdG9yLnR4dC5odG1sKHRoaXMubmV3SHRtbCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXR2aWRlbyhkYXRhKSB7CiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLm1vZGFsVmlkZW8gPSBmYWxzZTsKICAgICAgdGhpcy52aWRlbyA9IGRhdGE7CiAgICAgIGxldCB2aWRlb0hUTUwgPQogICAgICAgICc8dmlkZW8gc3JjPSInICsgdGhpcy52aWRlbyArICciIGNvbnRyb2xzIHN0eWxlPSJtYXgtd2lkdGg6MTAwJTttaW4taGVpZ2h0OjUwMHJweCI+PC92aWRlbz48cD48YnI+PC9wPic7CiAgICAgIHRoaXMuZWRpdG9yLmNtZC5kbygnaW5zZXJ0SFRNTCcsIHZpZGVvSFRNTCk7CiAgICB9LAoKICAgIGNyZWF0ZUVkaXRvcigpIHsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgY29uc3QgbWVudUtleSA9ICdhbGVydE1lbnVLZXknOwogICAgICBjb25zdCBodG1sID0gJ2FsZXJ0SHRtbCc7CiAgICAgIHRoaXMuZWRpdG9yID0gbmV3IEUodGhpcy4kcmVmc1snd2FuZy1lZGl0b3InXSk7CgogICAgICB0aGlzLmVkaXRvci5tZW51cy5leHRlbmQobWVudUtleSwgQWxlcnRNZW51KTsKICAgICAgdGhpcy5lZGl0b3IubWVudXMuZXh0ZW5kKGh0bWwsIEh0bWxNZW51KTsKICAgICAgdGhpcy5lZGl0b3IuY29uZmlnLm1lbnVzID0gdGhpcy5lZGl0b3IuY29uZmlnLm1lbnVzLmNvbmNhdChodG1sKTsKICAgICAgdGhpcy5lZGl0b3IuY29uZmlnLm1lbnVzID0gdGhpcy5lZGl0b3IuY29uZmlnLm1lbnVzLmNvbmNhdChtZW51S2V5KTsKICAgICAgdGhpcy5lZGl0b3IuY29uZmlnLnNob3dMaW5rSW1nID0gZmFsc2U7CiAgICAgIHRoaXMuZWRpdG9yLmNvbmZpZy51cGxvYWRJbWdGcm9tTWVkaWEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuZ2V0aW1nKCk7CiAgICAgIH07CiAgICAgIC8vIHRoaXMuZWRpdG9yLmNvbmZpZy51cGxvYWRWaWRlb0hlYWRlcnMgPSBfdGhpcy5oZWFkZXI7CiAgICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5oZWlnaHQgPSA2MDA7CiAgICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5tZW51cyA9IFsKICAgICAgICAnYWxlcnRIdG1sJywKICAgICAgICAnaGVhZCcsCiAgICAgICAgJ2JvbGQnLAogICAgICAgICdmb250U2l6ZScsCiAgICAgICAgJ2ZvbnROYW1lJywKICAgICAgICAnaXRhbGljJywKICAgICAgICAndW5kZXJsaW5lJywKICAgICAgICAnc3RyaWtlVGhyb3VnaCcsCiAgICAgICAgJ2luZGVudCcsCiAgICAgICAgJ2xpbmVIZWlnaHQnLAogICAgICAgICdmb3JlQ29sb3InLAogICAgICAgICdiYWNrQ29sb3InLAogICAgICAgICdsaW5rJywKICAgICAgICAnbGlzdCcsCiAgICAgICAgLy8gInRvZG8iLAogICAgICAgICdqdXN0aWZ5JywKICAgICAgICAncXVvdGUnLAogICAgICAgICdlbW90aWNvbicsCiAgICAgICAgJ2ltYWdlJywKICAgICAgICAnYWxlcnRNZW51S2V5JywKICAgICAgICAvLyAidGFibGUiLAogICAgICAgICdjb2RlJywKICAgICAgICAnc3BsaXRMaW5lJywKICAgICAgXTsKICAgICAgLy8g6YWN572u5YWo5bGP5Yqf6IO95oyJ6ZKu5piv5ZCm5bGV56S6CiAgICAgIC8vICAgdGhpcy5lZGl0b3IuY29uZmlnLnNob3dGdWxsU2NyZWVuID0gZmFsc2UKICAgICAgdGhpcy5lZGl0b3IuY29uZmlnLnVwbG9hZEltZ1Nob3dCYXNlNjQgPSB0cnVlOwogICAgICAvLyAgIHRoaXMuZWRpdG9yLmNvbmZpZy51cGxvYWRJbWdBY2NlcHQgPSBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdnaWYnLCAnYm1wJywgJ3dlYnAnXQogICAgICB0aGlzLmVkaXRvci5jb25maWcuekluZGV4ID0gMDsKICAgICAgLy8gICB0aGlzLmVkaXRvci5jb25maWcudXBsb2FkSW1nTWF4U2l6ZSA9IHRoaXMudXBsb2FkU2l6ZSAqIDEwMjQgKiAxMDI0CiAgICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5jb21wYXRpYmxlTW9kZSA9ICgpID0+IHsKICAgICAgICAvLyDov5Tlm54gdHJ1ZSDooajnpLrkvb/nlKjlhbzlrrnmqKHlvI/vvJvov5Tlm54gZmFsc2Ug5L2/55So5qCH5YeG5qih5byPCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH07CiAgICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5vbmNoYW5nZSA9IChuZXdIdG1sKSA9PiB7CiAgICAgICAgdGhpcy5uZXdIdG1sID0gbmV3SHRtbDsKICAgICAgICB0aGlzLiRlbWl0KCdlZGl0b3JDb250ZW50JywgbmV3SHRtbCk7CiAgICAgIH07CiAgICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5vbmNoYW5nZVRpbWVvdXQgPSAzMDA7IC8vIGNoYW5nZeWQjuWkmuS5heabtOaWsOaVsOaNrgoKICAgICAgdGhpcy5lZGl0b3IuY3JlYXRlKCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/wangEditor","sourcesContent":["<template>\n  <div>\n    <div v-show=\"!monacoBox\">\n      <div ref=\"wang-editor\" class=\"wang-editor\" />\n    </div>\n    <div v-if=\"monacoBox\">\n      <el-button type=\"primary\" class=\"bottom\" v-db-click @click=\"getHtmlint\">可视化界面</el-button>\n      <monaco class=\"monaco-box\" @change=\"changeValue\" :value=\"newHtml\" />\n    </div>\n\n    <el-dialog :visible.sync=\"modalPic\" width=\"1024px\" title=\"上传图片\" :close-on-click-modal=\"false\">\n      <uploadPictures v-if=\"modalPic\" :isChoice=\"isChoice\" @getPic=\"getPic\"></uploadPictures>\n    </el-dialog>\n    <el-dialog :visible.sync=\"modalVideo\" width=\"1024px\" title=\"上传视频\" :close-on-click-modal=\"false\">\n      <uploadVideo v-if=\"modalVideo\" @getVideo=\"getvideo\"></uploadVideo>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport monaco from './monaco';\nimport E from 'wangeditor';\nimport AlertMenu from './editor';\nimport HtmlMenu from './html';\nimport uploadPictures from '@/components/uploadPictures';\nimport uploadVideo from '@/components/uploadVideo2';\nimport { getCookies } from '@/libs/util';\n\nimport util from '../../utils/bus';\nexport default {\n  name: 'Index',\n  components: {\n    uploadPictures,\n    uploadVideo,\n    monaco,\n  },\n  props: {\n    content: {\n      type: String,\n      default: '',\n    },\n  },\n\n  data() {\n    return {\n      monacoBox: false,\n      value: '',\n      modalPic: false,\n      isChoice: '多选',\n      picTit: 'danFrom',\n      img: '',\n      modalVideo: false,\n      editor: null,\n      uploadSize: 2,\n      video: '',\n\n      // header: {\n      //   \"Authori-zation\": \"Bearer \" + getCookies(\"token\"),\n      // },\n    };\n  },\n  watch: {\n    initEditor(val) {\n      if (val) {\n        this.editor.txt.html(this.content);\n      } else {\n        this.editor.txt.html('');\n      }\n    },\n    \n  },\n  computed: {\n    initEditor() {\n      return this.content && this.editor;\n    },\n  },\n  created() {\n    // window.getvideoint = this.getvideoint;\n    // window.getHtmlint = this.getHtmlint;\n  },\n  mounted() {\n    this.createEditor();\n    util.$on('Video', (Video) => {\n      this.getvideoint();\n    });\n    util.$on('Html', (Html) => {\n      this.getHtmlint();\n    });\n  },\n\n  methods: {\n    changeValue(value) {\n      this.newHtml = value;\n      this.$emit('editorContent', value);\n\n      this.$emit('input', value);\n    },\n    // 获取多张图信息\n    getPic(pc) {\n      let _this = this;\n      _this.img = pc;\n      _this.modalPic = false;\n      _this.img.map((d) => {\n        this.editor.cmd.do('insertHTML', `<img src=\"${d.att_dir}\" style=\"max-width:100%;\"/>`);\n      });\n    },\n    getimg() {\n      this.modalPic = true;\n      this.isChoice = '多选';\n    },\n    getvideoint() {\n      // this.modalVideo = true;\n      this.$videoModal((e) => {\n        console.log(e);\n        let _this = this;\n        _this.modalVideo = false;\n        this.video = e;\n        let videoHTML =\n          '<video src=\"' + this.video + '\" controls style=\"max-width:100%;min-height:500rpx\"></video><p><br></p>';\n        this.editor.cmd.do('insertHTML', videoHTML);\n      });\n    },\n    getHtmlint() {\n      this.monacoBox = !this.monacoBox;\n      this.value = this.newHtml;\n      if (!this.monacoBox) {\n        this.editor.txt.html(this.newHtml);\n      }\n    },\n    getvideo(data) {\n      let _this = this;\n      _this.modalVideo = false;\n      this.video = data;\n      let videoHTML =\n        '<video src=\"' + this.video + '\" controls style=\"max-width:100%;min-height:500rpx\"></video><p><br></p>';\n      this.editor.cmd.do('insertHTML', videoHTML);\n    },\n\n    createEditor() {\n      let _this = this;\n      const menuKey = 'alertMenuKey';\n      const html = 'alertHtml';\n      this.editor = new E(this.$refs['wang-editor']);\n\n      this.editor.menus.extend(menuKey, AlertMenu);\n      this.editor.menus.extend(html, HtmlMenu);\n      this.editor.config.menus = this.editor.config.menus.concat(html);\n      this.editor.config.menus = this.editor.config.menus.concat(menuKey);\n      this.editor.config.showLinkImg = false;\n      this.editor.config.uploadImgFromMedia = function () {\n        _this.getimg();\n      };\n      // this.editor.config.uploadVideoHeaders = _this.header;\n      this.editor.config.height = 600;\n      this.editor.config.menus = [\n        'alertHtml',\n        'head',\n        'bold',\n        'fontSize',\n        'fontName',\n        'italic',\n        'underline',\n        'strikeThrough',\n        'indent',\n        'lineHeight',\n        'foreColor',\n        'backColor',\n        'link',\n        'list',\n        // \"todo\",\n        'justify',\n        'quote',\n        'emoticon',\n        'image',\n        'alertMenuKey',\n        // \"table\",\n        'code',\n        'splitLine',\n      ];\n      // 配置全屏功能按钮是否展示\n      //   this.editor.config.showFullScreen = false\n      this.editor.config.uploadImgShowBase64 = true;\n      //   this.editor.config.uploadImgAccept = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp']\n      this.editor.config.zIndex = 0;\n      //   this.editor.config.uploadImgMaxSize = this.uploadSize * 1024 * 1024\n      this.editor.config.compatibleMode = () => {\n        // 返回 true 表示使用兼容模式；返回 false 使用标准模式\n        return true;\n      };\n      this.editor.config.onchange = (newHtml) => {\n        this.newHtml = newHtml;\n        this.$emit('editorContent', newHtml);\n      };\n      this.editor.config.onchangeTimeout = 300; // change后多久更新数据\n\n      this.editor.create();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.bottom {\n  margin-bottom: 10px;\n  cursor: pointer;\n}\n.monaco-box ::v-deep .el-textarea__inner {\n  height: 600px;\n}\n::v-deep .w-e-toolbar {\n  z-index: 2 !important;\n}\n</style>\n"]}]}