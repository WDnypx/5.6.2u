{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\productAttr\\addAttr.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\productAttr\\addAttr.vue","mtime":1740967163760},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHJ1bGVBZGRBcGksIHJ1bGVJbmZvQXBpIH0gZnJvbSAnQC9hcGkvcHJvZHVjdCc7CmltcG9ydCB2dWVkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhZGRBdHRyJywKICBjb21wb25lbnRzOiB7CiAgICBkcmFnZ2FibGU6IHZ1ZWRyYWdnYWJsZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNwaW5TaG93OiBmYWxzZSwKICAgICAgbW9kYWxfbG9hZGluZzogZmFsc2UsCiAgICAgIGdyaWQ6IHsKICAgICAgICB4bDogMywKICAgICAgICBsZzogMywKICAgICAgICBtZDogMTIsCiAgICAgICAgc206IDI0LAogICAgICAgIHhzOiAyNAogICAgICB9LAogICAgICBtb2RhbDogZmFsc2UsCiAgICAgIGluZGV4OiAxLAogICAgICBydWxlczogewogICAgICAgIHJ1bGVfbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeinhOagvOWQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBmb3JtRHluYW1pYzogewogICAgICAgIHJ1bGVfbmFtZTogJycsCiAgICAgICAgc3BlYzogW10KICAgICAgfSwKICAgICAgYXR0cnNOYW1lOiAnJywKICAgICAgYXR0cnNWYWw6ICcnLAogICAgICBmb3JtRHluYW1pY05hbWVEYXRhOiBbXSwKICAgICAgaXNCdG46IGZhbHNlLAogICAgICBmb3JtRHluYW1pY05hbWU6IFtdLAogICAgICByZXN1bHRzOiBbXSwKICAgICAgcmVzdWx0OiBbXSwKICAgICAgaWRzOiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVNob3dQb3A6IGZ1bmN0aW9uIGhhbmRsZVNob3dQb3AoaW5kZXgpIHsKICAgICAgdGhpcy4kcmVmc1snaW5wdXRSZWZfJyArIGluZGV4XVswXS5mb2N1cygpOwogICAgfSwKICAgIC8vIOWIoOmZpOinhOagvAogICAgaGFuZGxlUmVtb3ZlUm9sZTogZnVuY3Rpb24gaGFuZGxlUmVtb3ZlUm9sZShpbmRleCkgewogICAgICB0aGlzLmZvcm1EeW5hbWljLnNwZWMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgaWYgKCF0aGlzLmZvcm1EeW5hbWljLnNwZWMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5mb3JtRHluYW1pYy5zcGVjID0gW107CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVBZGRSb2xlOiBmdW5jdGlvbiBoYW5kbGVBZGRSb2xlKCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICB2YWx1ZTogdGhpcy5mb3JtRHluYW1pYy5hdHRyc05hbWUsCiAgICAgICAgZGV0YWlsOiBbXQogICAgICB9OwogICAgICB0aGlzLmZvcm1EeW5hbWljLnNwZWMucHVzaChkYXRhKTsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHRoaXMuaWRzID0gMDsKICAgICAgdGhpcy5jbGVhcigpOwogICAgfSwKICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7CiAgICAgIHRoaXMuaWRzID0gMDsKICAgICAgdGhpcy5jbGVhcigpOwogICAgICB0aGlzLm1vZGFsID0gZmFsc2U7CiAgICB9LAogICAgLy8g5re75Yqg5oyJ6ZKuCiAgICBhZGRCdG46IGZ1bmN0aW9uIGFkZEJ0bigpIHsKICAgICAgdGhpcy5pc0J0biA9IHRydWU7CiAgICB9LAogICAgLy8g6K+m5oOFCiAgICBnZXRJb2ZvOiBmdW5jdGlvbiBnZXRJb2ZvKHJvdykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5pZHMgPSByb3cuaWQ7CiAgICAgIHJ1bGVJbmZvQXBpKHJvdy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuZm9ybUR5bmFtaWMgPSByZXMuZGF0YS5pbmZvOwogICAgICAgIF90aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmj5DkuqQKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KG5hbWUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbbmFtZV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoX3RoaXMyLmZvcm1EeW5hbWljLnNwZWMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIuJG1lc3NhZ2Uud2FybmluZygn6K+36Iez5bCR5re75Yqg5LiA5p2h5ZWG5ZOB6KeE5qC877yBJyk7CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpczIubW9kYWxfbG9hZGluZyA9IHRydWU7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcnVsZUFkZEFwaShfdGhpczIuZm9ybUR5bmFtaWMsIF90aGlzMi5pZHMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXMyLm1vZGFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczIubW9kYWxfbG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuJGVtaXQoJ2dldExpc3QnKTsKICAgICAgICAgICAgICAgIF90aGlzMi5jbGVhcigpOwogICAgICAgICAgICAgIH0sIDYwMCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczIubW9kYWxfbG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LCAxMjAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgICB0aGlzLiRyZWZzWydmb3JtRHluYW1pYyddLnJlc2V0RmllbGRzKCk7CiAgICAgIHRoaXMuZm9ybUR5bmFtaWMuc3BlYyA9IFtdOwogICAgICB0aGlzLmlzQnRuID0gZmFsc2U7CiAgICAgIHRoaXMuYXR0cnNOYW1lID0gJyc7CiAgICAgIHRoaXMuYXR0cnNWYWwgPSAnJzsKICAgICAgdGhpcy5pZHMgPSAwOwogICAgfSwKICAgIC8vIOWPlua2iAogICAgb2ZmQXR0ck5hbWU6IGZ1bmN0aW9uIG9mZkF0dHJOYW1lKCkgewogICAgICB0aGlzLmlzQnRuID0gZmFsc2U7CiAgICB9LAogICAgLy8g5Yig6ZmkCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShpbmRleCkgewogICAgICB0aGlzLmZvcm1EeW5hbWljLnNwZWMuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDliKDpmaTlsZ7mgKcKICAgIGhhbmRsZVJlbW92ZTI6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZTIoaXRlbSwgaW5kZXgpIHsKICAgICAgaXRlbS5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIC8vIOa3u+WKoOinhOWImeWQjeensAogICAgY3JlYXRlQXR0ck5hbWU6IGZ1bmN0aW9uIGNyZWF0ZUF0dHJOYW1lKCkgewogICAgICBpZiAodGhpcy5hdHRyc05hbWUgJiYgdGhpcy5hdHRyc1ZhbCkgewogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgdmFsdWU6IHRoaXMuYXR0cnNOYW1lLAogICAgICAgICAgZGV0YWlsOiBbdGhpcy5hdHRyc1ZhbF0KICAgICAgICB9OwogICAgICAgIHRoaXMuZm9ybUR5bmFtaWMuc3BlYy5wdXNoKGRhdGEpOwogICAgICAgIHZhciBoYXNoID0ge307CiAgICAgICAgdGhpcy5mb3JtRHluYW1pYy5zcGVjID0gdGhpcy5mb3JtRHluYW1pYy5zcGVjLnJlZHVjZShmdW5jdGlvbiAoaXRlbSwgbmV4dCkgewogICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi8KICAgICAgICAgIGhhc2hbbmV4dC52YWx1ZV0gPyAnJyA6IGhhc2hbbmV4dC52YWx1ZV0gPSB0cnVlICYmIGl0ZW0ucHVzaChuZXh0KTsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0sIFtdKTsKICAgICAgICB0aGlzLmF0dHJzTmFtZSA9ICcnOwogICAgICAgIHRoaXMuYXR0cnNWYWwgPSAnJzsKICAgICAgICB0aGlzLmlzQnRuID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fmt7vliqDop4TmoLzlkI3np7DmiJbop4TmoLzlgLwnKTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOWxnuaApwogICAgY3JlYXRlQXR0cjogZnVuY3Rpb24gY3JlYXRlQXR0cihudW0sIGlkeCkgewogICAgICBpZiAobnVtKSB7CiAgICAgICAgdGhpcy5mb3JtRHluYW1pYy5zcGVjW2lkeF0uZGV0YWlsLnB1c2gobnVtKTsKICAgICAgICB2YXIgaGFzaCA9IHt9OwogICAgICAgIHRoaXMuZm9ybUR5bmFtaWMuc3BlY1tpZHhdLmRldGFpbCA9IHRoaXMuZm9ybUR5bmFtaWMuc3BlY1tpZHhdLmRldGFpbC5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHsKICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovCiAgICAgICAgICBoYXNoW25leHRdID8gJycgOiBoYXNoW25leHRdID0gdHJ1ZSAmJiBpdGVtLnB1c2gobmV4dCk7CiAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICB9LCBbXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fmt7vliqDlsZ7mgKcnKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["mapState","ruleAddApi","ruleInfoApi","vuedraggable","name","components","draggable","data","spinShow","modal_loading","grid","xl","lg","md","sm","xs","modal","index","rules","rule_name","required","message","trigger","formDynamic","spec","attrsName","attrsVal","formDynamicNameData","isBtn","formDynamicName","results","result","ids","computed","methods","handleShowPop","$refs","focus","handleRemoveRole","splice","length","handleAddRole","value","detail","push","onCancel","clear","onClose","addBtn","getIofo","row","_this","id","then","res","info","catch","$message","error","msg","handleSubmit","_this2","validate","valid","warning","setTimeout","success","$emit","resetFields","offAttrName","handleRemove","handleRemove2","item","createAttrName","hash","reduce","next","createAttr","num","idx"],"sources":["src/pages/product/productAttr/addAttr.vue"],"sourcesContent":["<template>\n  <el-dialog :visible.sync=\"modal\" @closed=\"onCancel\" title=\"商品规格\" width=\"1000px\" v-loading=\"spinShow\">\n    <el-form\n      ref=\"formDynamic\"\n      :model=\"formDynamic\"\n      :rules=\"rules\"\n      class=\"attrFrom\"\n      label-width=\"120px\"\n      label-position=\"right\"\n      @submit.native.prevent\n    >\n      <el-row :gutter=\"24\">\n        <el-col :span=\"24\">\n          <el-col :span=\"8\">\n            <el-form-item label=\"规格模板名称：\" prop=\"rule_name\">\n              <el-input placeholder=\"请输入标题名称\" :maxlength=\"20\" v-model.trim=\"formDynamic.rule_name\" />\n            </el-form-item>\n          </el-col>\n        </el-col>\n        <el-col :span=\"23\" class=\"noForm\" :key=\"index\">\n          <el-form-item label=\"\">\n            <div class=\"specifications\">\n              <draggable group=\"specifications\" :list=\"formDynamic.spec\" handle=\".move-icon\" animation=\"300\">\n                <div class=\"specifications-item active\" v-for=\"(item, index) in formDynamic.spec\" :key=\"index\">\n                  <div class=\"move-icon\">\n                    <span class=\"iconfont icondrag2\"></span>\n                  </div>\n                  <i class=\"del el-icon-error\" @click=\"handleRemoveRole(index)\"></i>\n                  <div class=\"specifications-item-box\">\n                    <div class=\"lineBox\"></div>\n                    <div class=\"specifications-item-name mb18\">\n                      <el-input\n                        v-model=\"item.value\"\n                        placeholder=\"规格名称\"\n                        class=\"specifications-item-name-input\"\n                        maxlength=\"30\"\n                        show-word-limit\n                      ></el-input>\n                    </div>\n                    <div class=\"rulesBox ml30\">\n                      <draggable class=\"item\" :list=\"item.detail\" handle=\".drag\">\n                        <div v-for=\"(j, indexn) in item.detail\" :key=\"indexn\" class=\"mr10 spec drag\">\n                          <i class=\"el-icon-error\" @click=\"handleRemove2(item.detail, indexn)\"></i>\n\n                          <el-input\n                            style=\"width: 120px\"\n                            v-model=\"item.detail[indexn]\"\n                            placeholder=\"规格值\"\n                            maxlength=\"30\"\n                          >\n                            <template slot=\"prefix\">\n                              <span class=\"iconfont icondrag2\"></span>\n                            </template>\n                          </el-input>\n                        </div>\n                        <el-popover\n                          :ref=\"'popoverRef_' + index\"\n                          placement=\"\"\n                          width=\"210\"\n                          trigger=\"click\"\n                          @after-enter=\"handleShowPop(index)\"\n                        >\n                          <el-input\n                            :ref=\"'inputRef_' + index\"\n                            placeholder=\"请输入规格值\"\n                            v-model=\"item.detail.attrsVal\"\n                            @keyup.enter.native=\"createAttr(item.detail.attrsVal, index)\"\n                            maxlength=\"30\"\n                            show-word-limit\n                          >\n                          </el-input>\n                          <div class=\"addfont\" slot=\"reference\" type=\"text\" v-db-click>添加规格值</div>\n                        </el-popover>\n                      </draggable>\n                    </div>\n                  </div>\n                </div>\n              </draggable>\n              <el-button v-if=\"formDynamic.spec.length < 4\" v-db-click @click=\"handleAddRole()\">添加新规格</el-button>\n            </div>\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button v-db-click @click=\"onClose\">取消</el-button>\n      <el-button type=\"primary\" :loading=\"modal_loading\" v-db-click @click=\"handleSubmit('formDynamic')\"\n        >确定</el-button\n      >\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { ruleAddApi, ruleInfoApi } from '@/api/product';\nimport vuedraggable from 'vuedraggable';\nexport default {\n  name: 'addAttr',\n  components: {\n    draggable: vuedraggable,\n  },\n  data() {\n    return {\n      spinShow: false,\n      modal_loading: false,\n      grid: {\n        xl: 3,\n        lg: 3,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      modal: false,\n      index: 1,\n      rules: {\n        rule_name: [{ required: true, message: '请输入规格名称', trigger: 'blur' }],\n      },\n      formDynamic: {\n        rule_name: '',\n        spec: [],\n      },\n      attrsName: '',\n      attrsVal: '',\n      formDynamicNameData: [],\n      isBtn: false,\n      formDynamicName: [],\n      results: [],\n      result: [],\n      ids: 0,\n    };\n  },\n  computed: {},\n  methods: {\n    handleShowPop(index) {\n      this.$refs['inputRef_' + index][0].focus();\n    },\n    // 删除规格\n    handleRemoveRole(index) {\n      this.formDynamic.spec.splice(index, 1);\n      if (!this.formDynamic.spec.length) {\n        this.formDynamic.spec = [];\n      }\n    },\n    handleAddRole() {\n      let data = {\n        value: this.formDynamic.attrsName,\n        detail: [],\n      };\n      this.formDynamic.spec.push(data);\n    },\n    onCancel() {\n      this.ids = 0;\n      this.clear();\n    },\n    onClose() {\n      this.ids = 0;\n      this.clear();\n      this.modal = false;\n    },\n    // 添加按钮\n    addBtn() {\n      this.isBtn = true;\n    },\n    // 详情\n    getIofo(row) {\n      this.spinShow = true;\n      this.ids = row.id;\n      ruleInfoApi(row.id)\n        .then((res) => {\n          this.formDynamic = res.data.info;\n          this.spinShow = false;\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$message.error(res.msg);\n        });\n    },\n    // 提交\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          if (this.formDynamic.spec.length === 0) {\n            return this.$message.warning('请至少添加一条商品规格！');\n          }\n          this.modal_loading = true;\n          setTimeout(() => {\n            ruleAddApi(this.formDynamic, this.ids)\n              .then((res) => {\n                this.$message.success(res.msg);\n                setTimeout(() => {\n                  this.modal = false;\n                  this.modal_loading = false;\n                }, 500);\n                setTimeout(() => {\n                  this.$emit('getList');\n                  this.clear();\n                }, 600);\n              })\n              .catch((res) => {\n                this.modal_loading = false;\n                this.$message.error(res.msg);\n              });\n          }, 1200);\n        } else {\n          return false;\n        }\n      });\n    },\n    clear() {\n      this.$refs['formDynamic'].resetFields();\n      this.formDynamic.spec = [];\n      this.isBtn = false;\n      this.attrsName = '';\n      this.attrsVal = '';\n      this.ids = 0;\n    },\n    // 取消\n    offAttrName() {\n      this.isBtn = false;\n    },\n    // 删除\n    handleRemove(index) {\n      this.formDynamic.spec.splice(index, 1);\n    },\n    // 删除属性\n    handleRemove2(item, index) {\n      item.splice(index, 1);\n    },\n    // 添加规则名称\n    createAttrName() {\n      if (this.attrsName && this.attrsVal) {\n        let data = {\n          value: this.attrsName,\n          detail: [this.attrsVal],\n        };\n        this.formDynamic.spec.push(data);\n        var hash = {};\n        this.formDynamic.spec = this.formDynamic.spec.reduce(function (item, next) {\n          /* eslint-disable */\n          hash[next.value] ? '' : (hash[next.value] = true && item.push(next));\n          return item;\n        }, []);\n        this.attrsName = '';\n        this.attrsVal = '';\n        this.isBtn = false;\n      } else {\n        this.$message.warning('请添加规格名称或规格值');\n      }\n    },\n    // 添加属性\n    createAttr(num, idx) {\n      if (num) {\n        this.formDynamic.spec[idx].detail.push(num);\n        var hash = {};\n        this.formDynamic.spec[idx].detail = this.formDynamic.spec[idx].detail.reduce(function (item, next) {\n          /* eslint-disable */\n          hash[next] ? '' : (hash[next] = true && item.push(next));\n          return item;\n        }, []);\n      } else {\n        this.$message.warning('请添加属性');\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.rulesBox {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.attrFrom {\n  ::v-deep .ivu-form-item {\n    margin-bottom: 0px !important;\n  }\n}\n.noForm {\n  margin-left: 12px;\n}\n.add {\n  margin-left: 132px;\n}\n.drag {\n  cursor: move;\n}\n.spec {\n  display: block;\n  margin: 5px 0;\n  position: relative;\n  .el-icon-error {\n    position: absolute;\n    display: none;\n    right: -3px;\n    top: -3px;\n    z-index: 9;\n  }\n}\n.spec:hover {\n  .el-icon-error {\n    display: block;\n    z-index: 999;\n    cursor: pointer;\n  }\n}\n.move-icon {\n  width: 30px;\n  cursor: move;\n  margin-right: 10px;\n}\n.move-icon .icondrag2 {\n  font-size: 26px;\n  color: #bbb;\n}\n.specifications {\n  .specifications-item:hover {\n    background-color: var(--prev-bg-menu-hover-ba-color);\n  }\n  .specifications-item:hover .del {\n    display: block;\n  }\n  .specifications-item:last-child {\n    margin-bottom: 14px;\n  }\n  .specifications-item {\n    position: relative;\n    display: flex;\n    align-items: center;\n    padding: 20px 15px;\n    transition: all 0.1s;\n    background-color: #fafafa;\n    margin-bottom: 10px;\n    border-radius: 4px;\n    .del {\n      display: none;\n      position: absolute;\n      right: 15px;\n      top: 15px;\n      font-size: 22px;\n      color: var(--prev-color-primary);\n      cursor: pointer;\n    }\n    .specifications-item-box {\n      position: relative;\n      .lineBox {\n        position: absolute;\n        left: 13px;\n        top: 24px;\n        width: 30px;\n        height: 45px;\n        border-radius: 6px;\n        border-left: 1px solid #dcdfe6;\n        border-bottom: 1px solid #dcdfe6;\n      }\n      .specifications-item-name-input {\n        width: 200px;\n      }\n    }\n  }\n  .rulesBox {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    .item {\n      display: flex;\n      flex-wrap: wrap;\n    }\n    .addfont {\n      margin-top: 5px;\n    }\n    ::v-deep .el-popover {\n      border: none;\n      box-shadow: none;\n      padding: 0;\n      margin-top: 5px;\n      line-height: 1.5;\n    }\n  }\n  .addfont {\n    display: inline-block;\n    font-size: 12px;\n    font-weight: 400;\n    color: var(--prev-color-primary);\n    margin-left: 14px;\n    cursor: pointer;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}