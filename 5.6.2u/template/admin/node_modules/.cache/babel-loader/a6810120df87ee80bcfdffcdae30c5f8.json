{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\components\\couponList\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\components\\couponList\\index.vue","mtime":1745474910930},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOi9wYy96bS9cdTY2MDZcdTY2MEVcdTk2MTRcdTdGRDRcdTc5RDFcdTYyODBcdTY3MDlcdTk2NTBcdTUxNkNcdTUzRjgvXHU2RTkwXHU3ODAxL0NSTUVCLUJaIHY1LjYuMigyMDI1MDYzMCkvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCB7IHJlbGVhc2VkTGlzdEFwaSB9IGZyb20gJ0AvYXBpL21hcmtldGluZyc7CmltcG9ydCB7IGZvcm1hdERhdGUgYXMgX2Zvcm1hdERhdGUgfSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdpbmRleCcsCiAgZmlsdGVyczogewogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZSh0aW1lKSB7CiAgICAgIGlmICh0aW1lICE9PSAwKSB7CiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lICogMTAwMCk7CiAgICAgICAgcmV0dXJuIF9mb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tJyk7CiAgICAgIH0KICAgIH0KICB9LAogIHByb3BzOiB7CiAgICBjb3Vwb25pZHM6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0sCiAgICB1cGRhdGVJZHM6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0sCiAgICB1cGRhdGVOYW1lOiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9LAogICAgbHVja0RyYXc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0ZW1wbGF0ZVJhZGlvOiAwLAogICAgICBjdXJyZW50aWQ6IDAsCiAgICAgIHByb2R1Y3RSb3c6IHt9LAogICAgICBpc1RlbXBsYXRlOiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRhYmxlRnJvbTogewogICAgICAgIHJlY2VpdmVfdHlwZTogMywKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiAxNQogICAgICB9LAogICAgICB0b3RhbDogMCwKICAgICAgaWRzOiBbXSwKICAgICAgdGV4dHM6IFtdLAogICAgICBjb3Vwb25MaXN0OiBbXSwKICAgICAgc2VsZWN0ZWRJZHM6IFtdLAogICAgICBzZWxlY3RlZE5hbWVzOiBbXSwKICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIHdhdGNoOiB7CiAgICB1cGRhdGVJZHM6IGZ1bmN0aW9uIHVwZGF0ZUlkcyhuZXdWYWwpIHsKICAgICAgdGhpcy5zZWxlY3RlZElkcyA9IG5ld1ZhbDsKICAgIH0sCiAgICB1cGRhdGVOYW1lOiBmdW5jdGlvbiB1cGRhdGVOYW1lKG5ld1ZhbCkgewogICAgICB0aGlzLnNlbGVjdGVkTmFtZXMgPSBuZXdWYWw7CiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSBuZXdWYWw7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgbWV0aG9kczogewogICAgZ2V0Um93S2V5OiBmdW5jdGlvbiBnZXRSb3dLZXkocm93KSB7CiAgICAgIHJldHVybiByb3cuaWQ7CiAgICB9LAogICAgZ2V0VGVtcGxhdGVSb3c6IGZ1bmN0aW9uIGdldFRlbXBsYXRlUm93KHJvdykgewogICAgICB0aGlzLmN1cnJlbnRpZCA9IHJvdy5pZDsKICAgICAgdGhpcy5wcm9kdWN0Um93ID0gcm93OwogICAgfSwKICAgIC8v5a+56LGh5pWw57uE5Y676YeN77ybCiAgICB1bmlxdWU6IGZ1bmN0aW9uIHVuaXF1ZShhcnIpIHsKICAgICAgdmFyIHJlcyA9IG5ldyBNYXAoKTsKICAgICAgcmV0dXJuIGFyci5maWx0ZXIoZnVuY3Rpb24gKGFycikgewogICAgICAgIHJldHVybiAhcmVzLmhhcyhhcnIuaWQpICYmIHJlcy5zZXQoYXJyLmlkLCAxKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlQ2hlY2tib3g6IGZ1bmN0aW9uIGNoYW5nZUNoZWNrYm94KHNlbGVjdGlvbikgewogICAgICB2YXIgdW5pcXVlQXJyID0gW107CiAgICAgIHZhciBjdXBzID0gW107CiAgICAgIHZhciBpZHMgPSBbXTsKICAgICAgdmFyIGFyciA9IHRoaXMudW5pcXVlKHNlbGVjdGlvbik7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBhcnJbaV07CiAgICAgICAgaWYgKCFpZHMuaW5jbHVkZXMoaXRlbS5pZCkpIHsKICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSwKICAgICAgICAgICAgZnVsbF9yZWR1Y3Rpb246IGl0ZW0uZnVsbF9yZWR1Y3Rpb24sCiAgICAgICAgICAgIC8vIOa7oQogICAgICAgICAgICB1c2VfbWluX3ByaWNlOiBpdGVtLnVzZV9taW5fcHJpY2UsCiAgICAgICAgICAgIC8vIOa7oQogICAgICAgICAgICBjb3Vwb25fcHJpY2U6IGl0ZW0uY291cG9uX3ByaWNlIC8vIOWHjwogICAgICAgICAgfTsKICAgICAgICAgIGN1cHMucHVzaChvYmopOwogICAgICAgICAgaWRzLnB1c2goaXRlbS5pZCk7CiAgICAgICAgICB1bmlxdWVBcnIucHVzaChpdGVtKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5zZWxlY3RlZElkcyA9IGlkczsKICAgICAgdGhpcy5zZWxlY3RlZE5hbWVzID0gY3VwczsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHVuaXF1ZUFycjsKICAgIH0sCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy5pc1RlbXBsYXRlID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLmx1Y2tEcmF3KSB7CiAgICAgICAgdGhpcy5jdXJyZW50aWQgPSAwOwogICAgICB9CiAgICB9LAogICAgdGFibGVMaXN0OiBmdW5jdGlvbiB0YWJsZUxpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHJlbGVhc2VkTGlzdEFwaSh0aGlzLnRhYmxlRnJvbSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKICAgICAgICBfdGhpcy5jb3Vwb25MaXN0ID0gZGF0YS5saXN0OwogICAgICAgIF90aGlzLnRvdGFsID0gZGF0YS5jb3VudDsKICAgICAgICBfdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgLy/noa7kv51kb23liqDovb3lrozmr5UKICAgICAgICAgIF90aGlzLnNlbGVjdGVkSWRzLmxlbmd0aCAmJiBfdGhpcy5zZXRDaGVja2VkKCk7CiAgICAgICAgICBfdGhpcy5zaG93U2VsZWN0RGF0YSgpOwogICAgICAgIH0pOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgc2V0Q2hlY2tlZDogZnVuY3Rpb24gc2V0Q2hlY2tlZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIC8v5bCGbmV3IFNldCgp6L2s5YyW5Li65pWw57uECiAgICAgIHZhciBpZHMgPSBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5zZWxlY3RlZElkcyk7CiAgICAgIHRoaXMuY291cG9uTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICBpZiAoaWRzLmluY2x1ZGVzKHJvdy5pZCkpIHsKICAgICAgICAgIF90aGlzMi4kcmVmcy5jb3Vwb25UYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24ocm93LCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9rOiBmdW5jdGlvbiBvaygpIHsKICAgICAgaWYgKHRoaXMubHVja0RyYXcpIHsKICAgICAgICB0aGlzLiRlbWl0KCdnZXRDb3Vwb25JZCcsIHRoaXMucHJvZHVjdFJvdyk7CiAgICAgICAgdGhpcy5jdXJyZW50aWQgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGVtaXQoJ25hbWVJZCcsIHRoaXMuc2VsZWN0ZWRJZHMsIHRoaXMuc2VsZWN0ZWROYW1lcyk7CiAgICAgIH0KICAgICAgdGhpcy5pc1RlbXBsYXRlID0gZmFsc2U7CiAgICB9LAogICAgcGFnZUNoYW5nZTogZnVuY3Rpb24gcGFnZUNoYW5nZShpbmRleCkgewogICAgICB0aGlzLnRhYmxlRnJvbS5wYWdlID0gaW5kZXg7CiAgICAgIHRoaXMudGFibGVMaXN0KCk7CiAgICB9LAogICAgbGltaXRDaGFuZ2U6IGZ1bmN0aW9uIGxpbWl0Q2hhbmdlKGxpbWl0KSB7CiAgICAgIHRoaXMudGFibGVGcm9tLmxpbWl0ID0gbGltaXQ7CiAgICAgIHRoaXMudGFibGVMaXN0KCk7CiAgICB9LAogICAgc2hvd1NlbGVjdERhdGE6IGZ1bmN0aW9uIHNob3dTZWxlY3REYXRhKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoID4gMCkgewogICAgICAgIC8vIOWIpOaWreaYr+WQpuWtmOWcqOWLvumAiei/h+eahOaVsOaNrgogICAgICAgIHRoaXMuY291cG9uTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICAgIC8vIOiOt+WPluaVsOaNruWIl+ihqOaOpeWPo+ivt+axguWIsOeahOaVsOaNrgogICAgICAgICAgX3RoaXMzLm11bHRpcGxlU2VsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgLy8g5Yu+6YCJ5Yiw55qE5pWw5o2uCiAgICAgICAgICAgIGlmIChyb3cuaWQgPT09IGl0ZW0uaWQpIHsKICAgICAgICAgICAgICAvLyB0aGlzLiRyZWZzLnRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihpdGVtLCB0cnVlKTsgLy8g6Iul5pyJ6YeN5ZCI77yM5YiZ5Zue5pi+6K+l5p2h5pWw5o2uCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["releasedListApi","formatDate","name","filters","time","date","Date","props","couponids","type","Array","updateIds","updateName","luckDraw","Boolean","default","data","templateRadio","currentid","productRow","isTemplate","loading","tableFrom","receive_type","page","limit","total","ids","texts","couponList","selectedIds","selectedNames","multipleSelection","mounted","watch","newVal","created","methods","getRowKey","row","id","getTemplateRow","unique","arr","res","Map","filter","has","set","changeCheckbox","selection","uniqueArr","cups","i","length","item","includes","obj","title","full_reduction","use_min_price","coupon_price","push","cancel","tableList","_this","then","list","count","$nextTick","setChecked","showSelectData","_this2","_toConsumableArray","forEach","$refs","couponTable","toggleRowSelection","ok","$emit","pageChange","index","limitChange","_this3"],"sources":["src/components/couponList/index.vue"],"sourcesContent":["<template>\n  <div>\n    <el-dialog :visible.sync=\"isTemplate\" title=\"优惠券列表\" append-to-body width=\"1000px\">\n      <el-table\n        :data=\"couponList\"\n        ref=\"couponTable\"\n        class=\"mt20\"\n        v-loading=\"loading\"\n        highlight-current-row\n        :row-key=\"getRowKey\"\n        no-userFrom-text=\"暂无数据\"\n        no-filtered-userFrom-text=\"暂无筛选结果\"\n        @selection-change=\"changeCheckbox\"\n      >\n        <el-table-column v-if=\"!luckDraw\" type=\"selection\" width=\"55\" :reserve-selection=\"true\"> </el-table-column>\n        <el-table-column v-else width=\"50\">\n          <template slot-scope=\"scope\">\n            <el-radio v-model=\"templateRadio\" :label=\"scope.row.id\" @change.native=\"getTemplateRow(scope.row)\"\n              >&nbsp;</el-radio\n            >\n          </template>\n        </el-table-column>\n        <el-table-column label=\"ID\" width=\"70\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.id }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"优惠券名称\" min-width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.title }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"优惠券类型\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.type === 1\">品类券</span>\n            <span v-else-if=\"scope.row.type === 2\">商品券</span>\n            <span v-else-if=\"scope.row.type === 3\">会员券</span>\n            <span v-else>通用券</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"面值\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.coupon_price }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"最低消费额\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.use_min_price }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"发布数量\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.is_permanent\">不限量</span>\n            <div v-else>\n              <span class=\"fa\">发布：{{ scope.row.total_count }}</span>\n              <span class=\"sheng ml10\">剩余：{{ scope.row.remain_count }}</span>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"有效期限\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <div v-if=\"scope.row.start_time\">\n              {{ scope.row.start_time | formatDate }} - {{ scope.row.end_time | formatDate }}\n            </div>\n            <span v-else>不限时</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"状态\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-tag size=\"medium\" v-show=\"scope.row.status === 1\">正常</el-tag>\n            <el-tag size=\"medium\" type=\"danger\" v-show=\"scope.row.status === 0\">未开启</el-tag>\n            <el-tag size=\"medium\" type=\"info\" v-show=\"scope.row.status === -1\">已失效</el-tag>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"acea-row row-right page\">\n        <pagination\n          v-if=\"total\"\n          :total=\"total\"\n          :page.sync=\"tableFrom.page\"\n          :limit.sync=\"tableFrom.limit\"\n          @pagination=\"tableList\"\n        />\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button v-db-click @click=\"cancel\">取 消</el-button>\n        <el-button type=\"primary\" v-db-click @click=\"ok\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { releasedListApi } from '@/api/marketing';\nimport { formatDate } from '@/utils/validate';\n\nexport default {\n  name: 'index',\n  filters: {\n    formatDate(time) {\n      if (time !== 0) {\n        let date = new Date(time * 1000);\n        return formatDate(date, 'yyyy-MM-dd hh:mm');\n      }\n    },\n  },\n  props: {\n    couponids: {\n      type: Array,\n    },\n    updateIds: {\n      type: Array,\n    },\n    updateName: {\n      type: Array,\n    },\n    luckDraw: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      templateRadio: 0,\n\n      currentid: 0,\n      productRow: {},\n      isTemplate: false,\n      loading: false,\n      tableFrom: {\n        receive_type: 3,\n        page: 1,\n        limit: 15,\n      },\n      total: 0,\n      ids: [],\n      texts: [],\n      couponList: [],\n      selectedIds: [],\n      selectedNames: [],\n      multipleSelection: [],\n    };\n  },\n  mounted() {},\n  watch: {\n    updateIds: function (newVal) {\n      this.selectedIds = newVal;\n    },\n    updateName: function (newVal) {\n      this.selectedNames = newVal;\n      this.multipleSelection = newVal;\n    },\n  },\n  created() {},\n  methods: {\n    getRowKey(row) {\n      return row.id;\n    },\n    getTemplateRow(row) {\n      this.currentid = row.id;\n      this.productRow = row;\n    },\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n    },\n    changeCheckbox(selection) {\n      let uniqueArr = [];\n      let cups = [];\n      let ids = [];\n      let arr = this.unique(selection);\n      for (let i = 0; i < arr.length; i++) {\n        const item = arr[i];\n        if (!ids.includes(item.id)) {\n          let obj = {\n            id: item.id,\n            title: item.title,\n            full_reduction: item.full_reduction, // 满\n            use_min_price: item.use_min_price, // 满\n            coupon_price: item.coupon_price, // 减\n          };\n          cups.push(obj);\n          ids.push(item.id);\n          uniqueArr.push(item);\n        }\n      }\n      this.selectedIds = ids;\n      this.selectedNames = cups;\n      this.multipleSelection = uniqueArr;\n    },\n    cancel() {\n      this.isTemplate = false;\n      if (this.luckDraw) {\n        this.currentid = 0;\n      }\n    },\n    tableList() {\n      this.loading = true;\n      releasedListApi(this.tableFrom).then((res) => {\n        let data = res.data;\n        this.couponList = data.list;\n        this.total = data.count;\n        this.$nextTick(() => {\n          //确保dom加载完毕\n          this.selectedIds.length && this.setChecked();\n          this.showSelectData();\n        });\n        this.loading = false;\n      });\n    },\n    setChecked() {\n      //将new Set()转化为数组\n      let ids = [...this.selectedIds];\n      this.couponList.forEach((row) => {\n        if (ids.includes(row.id)) {\n          this.$refs.couponTable.toggleRowSelection(row, true);\n        }\n      });\n    },\n    ok() {\n      if (this.luckDraw) {\n        this.$emit('getCouponId', this.productRow);\n        this.currentid = 0;\n      } else {\n        this.$emit('nameId', this.selectedIds, this.selectedNames);\n      }\n      this.isTemplate = false;\n    },\n    pageChange(index) {\n      this.tableFrom.page = index;\n      this.tableList();\n    },\n    limitChange(limit) {\n      this.tableFrom.limit = limit;\n      this.tableList();\n    },\n    showSelectData() {\n      if (this.multipleSelection.length > 0) {\n        // 判断是否存在勾选过的数据\n        this.couponList.forEach((row) => {\n          // 获取数据列表接口请求到的数据\n          this.multipleSelection.forEach((item) => {\n            // 勾选到的数据\n            if (row.id === item.id) {\n              // this.$refs.table.toggleRowSelection(item, true); // 若有重合，则回显该条数据\n            }\n          });\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"],"mappings":";;;;;;;;;;;;;AA6FA,SAAAA,eAAA;AACA,SAAAC,UAAA,IAAAA,WAAA;AAEA;EACAC,IAAA;EACAC,OAAA;IACAF,UAAA,WAAAA,WAAAG,IAAA;MACA,IAAAA,IAAA;QACA,IAAAC,IAAA,OAAAC,IAAA,CAAAF,IAAA;QACA,OAAAH,WAAA,CAAAI,IAAA;MACA;IACA;EACA;EACAE,KAAA;IACAC,SAAA;MACAC,IAAA,EAAAC;IACA;IACAC,SAAA;MACAF,IAAA,EAAAC;IACA;IACAE,UAAA;MACAH,IAAA,EAAAC;IACA;IACAG,QAAA;MACAJ,IAAA,EAAAK,OAAA;MACAC,OAAA;IACA;EACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,aAAA;MAEAC,SAAA;MACAC,UAAA;MACAC,UAAA;MACAC,OAAA;MACAC,SAAA;QACAC,YAAA;QACAC,IAAA;QACAC,KAAA;MACA;MACAC,KAAA;MACAC,GAAA;MACAC,KAAA;MACAC,UAAA;MACAC,WAAA;MACAC,aAAA;MACAC,iBAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;EACAC,KAAA;IACAvB,SAAA,WAAAA,UAAAwB,MAAA;MACA,KAAAL,WAAA,GAAAK,MAAA;IACA;IACAvB,UAAA,WAAAA,WAAAuB,MAAA;MACA,KAAAJ,aAAA,GAAAI,MAAA;MACA,KAAAH,iBAAA,GAAAG,MAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;EACAC,OAAA;IACAC,SAAA,WAAAA,UAAAC,GAAA;MACA,OAAAA,GAAA,CAAAC,EAAA;IACA;IACAC,cAAA,WAAAA,eAAAF,GAAA;MACA,KAAArB,SAAA,GAAAqB,GAAA,CAAAC,EAAA;MACA,KAAArB,UAAA,GAAAoB,GAAA;IACA;IACA;IACAG,MAAA,WAAAA,OAAAC,GAAA;MACA,IAAAC,GAAA,OAAAC,GAAA;MACA,OAAAF,GAAA,CAAAG,MAAA,WAAAH,GAAA;QAAA,QAAAC,GAAA,CAAAG,GAAA,CAAAJ,GAAA,CAAAH,EAAA,KAAAI,GAAA,CAAAI,GAAA,CAAAL,GAAA,CAAAH,EAAA;MAAA;IACA;IACAS,cAAA,WAAAA,eAAAC,SAAA;MACA,IAAAC,SAAA;MACA,IAAAC,IAAA;MACA,IAAAzB,GAAA;MACA,IAAAgB,GAAA,QAAAD,MAAA,CAAAQ,SAAA;MACA,SAAAG,CAAA,MAAAA,CAAA,GAAAV,GAAA,CAAAW,MAAA,EAAAD,CAAA;QACA,IAAAE,IAAA,GAAAZ,GAAA,CAAAU,CAAA;QACA,KAAA1B,GAAA,CAAA6B,QAAA,CAAAD,IAAA,CAAAf,EAAA;UACA,IAAAiB,GAAA;YACAjB,EAAA,EAAAe,IAAA,CAAAf,EAAA;YACAkB,KAAA,EAAAH,IAAA,CAAAG,KAAA;YACAC,cAAA,EAAAJ,IAAA,CAAAI,cAAA;YAAA;YACAC,aAAA,EAAAL,IAAA,CAAAK,aAAA;YAAA;YACAC,YAAA,EAAAN,IAAA,CAAAM,YAAA;UACA;UACAT,IAAA,CAAAU,IAAA,CAAAL,GAAA;UACA9B,GAAA,CAAAmC,IAAA,CAAAP,IAAA,CAAAf,EAAA;UACAW,SAAA,CAAAW,IAAA,CAAAP,IAAA;QACA;MACA;MACA,KAAAzB,WAAA,GAAAH,GAAA;MACA,KAAAI,aAAA,GAAAqB,IAAA;MACA,KAAApB,iBAAA,GAAAmB,SAAA;IACA;IACAY,MAAA,WAAAA,OAAA;MACA,KAAA3C,UAAA;MACA,SAAAP,QAAA;QACA,KAAAK,SAAA;MACA;IACA;IACA8C,SAAA,WAAAA,UAAA;MAAA,IAAAC,KAAA;MACA,KAAA5C,OAAA;MACArB,eAAA,MAAAsB,SAAA,EAAA4C,IAAA,WAAAtB,GAAA;QACA,IAAA5B,IAAA,GAAA4B,GAAA,CAAA5B,IAAA;QACAiD,KAAA,CAAApC,UAAA,GAAAb,IAAA,CAAAmD,IAAA;QACAF,KAAA,CAAAvC,KAAA,GAAAV,IAAA,CAAAoD,KAAA;QACAH,KAAA,CAAAI,SAAA;UACA;UACAJ,KAAA,CAAAnC,WAAA,CAAAwB,MAAA,IAAAW,KAAA,CAAAK,UAAA;UACAL,KAAA,CAAAM,cAAA;QACA;QACAN,KAAA,CAAA5C,OAAA;MACA;IACA;IACAiD,UAAA,WAAAA,WAAA;MAAA,IAAAE,MAAA;MACA;MACA,IAAA7C,GAAA,GAAA8C,kBAAA,MAAA3C,WAAA;MACA,KAAAD,UAAA,CAAA6C,OAAA,WAAAnC,GAAA;QACA,IAAAZ,GAAA,CAAA6B,QAAA,CAAAjB,GAAA,CAAAC,EAAA;UACAgC,MAAA,CAAAG,KAAA,CAAAC,WAAA,CAAAC,kBAAA,CAAAtC,GAAA;QACA;MACA;IACA;IACAuC,EAAA,WAAAA,GAAA;MACA,SAAAjE,QAAA;QACA,KAAAkE,KAAA,qBAAA5D,UAAA;QACA,KAAAD,SAAA;MACA;QACA,KAAA6D,KAAA,gBAAAjD,WAAA,OAAAC,aAAA;MACA;MACA,KAAAX,UAAA;IACA;IACA4D,UAAA,WAAAA,WAAAC,KAAA;MACA,KAAA3D,SAAA,CAAAE,IAAA,GAAAyD,KAAA;MACA,KAAAjB,SAAA;IACA;IACAkB,WAAA,WAAAA,YAAAzD,KAAA;MACA,KAAAH,SAAA,CAAAG,KAAA,GAAAA,KAAA;MACA,KAAAuC,SAAA;IACA;IACAO,cAAA,WAAAA,eAAA;MAAA,IAAAY,MAAA;MACA,SAAAnD,iBAAA,CAAAsB,MAAA;QACA;QACA,KAAAzB,UAAA,CAAA6C,OAAA,WAAAnC,GAAA;UACA;UACA4C,MAAA,CAAAnD,iBAAA,CAAA0C,OAAA,WAAAnB,IAAA;YACA;YACA,IAAAhB,GAAA,CAAAC,EAAA,KAAAe,IAAA,CAAAf,EAAA;cACA;YAAA;UAEA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}