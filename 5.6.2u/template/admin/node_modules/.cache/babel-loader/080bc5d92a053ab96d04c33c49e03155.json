{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\maintain\\systemFile\\login.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\maintain\\systemFile\\login.vue","mtime":1750843118516},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvciBmcm9tICJEOi9wYy96bS9cdTY2MDZcdTY2MEVcdTk2MTRcdTdGRDRcdTc5RDFcdTYyODBcdTY3MDlcdTk2NTBcdTUxNkNcdTUzRjgvXHU2RTkwXHU3ODAxL0NSTUVCLUJaIHY1LjYuMigyMDI1MDYzMCkvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L3BjL3ptL1x1NjYwNlx1NjYwRVx1OTYxNFx1N0ZENFx1NzlEMVx1NjI4MFx1NjcwOVx1OTY1MFx1NTE2Q1x1NTNGOC9cdTZFOTBcdTc4MDEvQ1JNRUItQlogdjUuNi4yKDIwMjUwNjMwKS90ZW1wbGF0ZS9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRlc3QuanMiOwppbXBvcnQgeyBvcGVuZGlyTG9naW5BcGkgfSBmcm9tICdAL2FwaS9zeXN0ZW0nOwppbXBvcnQgeyBzZXRDb29raWVzIH0gZnJvbSAnQC9saWJzL3V0aWwnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2ZpbGVfbG9naW4nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgdmFsaWRhdGVQaG9uZSA9IGZ1bmN0aW9uIHZhbGlkYXRlUGhvbmUocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCfor7floavlhpnmiYvmnLrlj7cnKSk7CiAgICAgIH0gZWxzZSBpZiAoIS9eMVszNDU2Nzg5XVxkezl9JC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+aJi+acuuWPt+agvOW8j+S4jeato+ehriEnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGZvcm1JbmxpbmU6IHsKICAgICAgICAvLyBhY2NvdW50OiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgcnVsZUlubGluZTogewogICAgICAgIC8vIGFjY291bnQ6IFt7IHJlcXVpcmVkOiB0cnVlLCB2YWxpZGF0b3I6IHZhbGlkYXRlUGhvbmUsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBkb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIga2V5ID0gd2luZG93LmV2ZW50LmtleUNvZGU7CiAgICAgIGlmIChrZXkgPT09IDEzKSB7CiAgICAgICAgX3RoaXMuaGFuZGxlU3VibWl0KCdmb3JtSW5saW5lJyk7CiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChuYW1lKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgb3BlbmRpckxvZ2luQXBpKF90aGlzMi5mb3JtSW5saW5lKS50aGVuKC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvcigpLm0oZnVuY3Rpb24gX2NhbGxlZShyZXMpIHsKICAgICAgICAgICAgICB2YXIgZXhwaXJlczsKICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yKCkudyhmdW5jdGlvbiAoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Lm4pIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKCfnmbvlvZXmiJDlip8hJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gICB0aGlzLiRlbWl0KCdvbi1Mb2dpbicsIHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICBleHBpcmVzID0gX3RoaXMyLmdldEV4cGlyZXNUaW1lKHJlcy5kYXRhLmV4cGlyZXNfdGltZSk7IC8vIOiusOW9leeUqOaIt+eZu+W9leS/oeaBrwogICAgICAgICAgICAgICAgICAgIHNldENvb2tpZXMoJ2ZpbGVfdG9rZW4nLCByZXMuZGF0YS50b2tlbiwgZXhwaXJlcyk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBfdGhpczIuJHJvdXRlUHJvU3RyICsgJy9zeXN0ZW0vbWFpbnRhaW4vc3lzdGVtX2ZpbGUvb3BlbmRpcicKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hKDIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+iuoeeul3Rva2Vu6L+H5pyf5pe26Ze0CiAgICBnZXRFeHBpcmVzVGltZTogZnVuY3Rpb24gZ2V0RXhwaXJlc1RpbWUoZXhwaXJlc1RpbWUpIHsKICAgICAgdmFyIG5vd1RpbWVOdW0gPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkgLyAxMDAwKTsKICAgICAgdmFyIGV4cGlyZXNUaW1lTnVtID0gZXhwaXJlc1RpbWUgLSBub3dUaW1lTnVtOwogICAgICByZXR1cm4gcGFyc2VGbG9hdChwYXJzZUZsb2F0KHBhcnNlRmxvYXQoZXhwaXJlc1RpbWVOdW0gLyA2MCkgLyA2MCkgLyAyNCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["opendirLoginApi","setCookies","name","data","validatePhone","rule","value","callback","Error","test","formInline","password","ruleInline","required","message","trigger","created","_this","document","onkeydown","e","key","window","event","keyCode","handleSubmit","methods","_this2","$refs","validate","valid","then","_ref","_asyncToGenerator","_regenerator","m","_callee","res","expires","w","_context","n","$message","success","getExpiresTime","expires_time","token","$router","push","path","$routeProStr","a","_x","apply","arguments","catch","error","msg","expiresTime","nowTimeNum","Math","round","Date","expiresTimeNum","parseFloat"],"sources":["src/pages/system/maintain/systemFile/login.vue"],"sourcesContent":["<template>\n  <div>\n    <el-row>\n      <el-col :span=\"24\">\n        <div class=\"index_from page-account-container\">\n          <div class=\"page-account-top\">\n            <span class=\"page-account-top-tit\">文件管理登录</span>\n          </div>\n          <el-form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\" @submit.native.prevent>\n            <!-- <el-form-item prop=\"sms_account\" class=\"maxInpt\">\n            <el-input type=\"text\" v-model=\"formInline.account\" prefix=\"ios-contact-outline\" placeholder=\"请输入手机号\" />\n          </el-form-item> -->\n            <el-form-item prop=\"sms_token\" class=\"maxInpt\">\n              <el-input\n                type=\"password\"\n                size=\"large\"\n                v-model=\"formInline.password\"\n                prefix=\"ios-lock-outline\"\n                placeholder=\"请输入密码\"\n              />\n              <div class=\"trip\">提示：密码配置在 /config/filesystem.php 文件中修改 'password' => '密码'</div>\n            </el-form-item>\n            <el-form-item class=\"maxInpt\">\n              <el-button type=\"primary\" long size=\"large\" v-db-click @click=\"handleSubmit('formInline')\" class=\"btn\"\n                >登录</el-button\n              >\n            </el-form-item>\n          </el-form>\n        </div>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { opendirLoginApi } from '@/api/system';\nimport { setCookies } from '@/libs/util';\n\nexport default {\n  name: 'file_login',\n  data() {\n    const validatePhone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请填写手机号'));\n      } else if (!/^1[3456789]\\d{9}$/.test(value)) {\n        callback(new Error('手机号格式不正确!'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      formInline: {\n        // account: '',\n        password: '',\n      },\n      ruleInline: {\n        // account: [{ required: true, validator: validatePhone, trigger: 'blur' }],\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n      },\n    };\n  },\n  created() {\n    var _this = this;\n    document.onkeydown = function (e) {\n      let key = window.event.keyCode;\n      if (key === 13) {\n        _this.handleSubmit('formInline');\n      }\n    };\n  },\n  methods: {\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          opendirLoginApi(this.formInline)\n            .then(async (res) => {\n              this.$message.success('登录成功!');\n              //   this.$emit('on-Login', res.data);\n              let expires = this.getExpiresTime(res.data.expires_time);\n              // 记录用户登录信息\n              setCookies('file_token', res.data.token, expires);\n              this.$router.push({\n                path: this.$routeProStr + '/system/maintain/system_file/opendir',\n              });\n            })\n            .catch((res) => {\n              this.$message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    //计算token过期时间\n    getExpiresTime(expiresTime) {\n      let nowTimeNum = Math.round(new Date() / 1000);\n      let expiresTimeNum = expiresTime - nowTimeNum;\n      return parseFloat(parseFloat(parseFloat(expiresTimeNum / 60) / 60) / 24);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.maxInpt {\n  max-width: 500px;\n  margin-left: auto;\n  margin-right: auto;\n}\n.index_from {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.trip {\n  width: 580px;\n  text-align: left;\n  color: #aaa;\n}\n.page-account-container {\n  text-align: center;\n  padding: 200px 0;\n}\n.page-account-top {\n  margin-bottom: 50px;\n}\n.page-account-top-tit {\n  font-size: 30px;\n  color: var(--prev-color-primary);\n  font-weight: 500;\n}\n.page-account-other {\n  text-align: center;\n  color: var(--prev-color-primary);\n  font-size: 12px;\n  span {\n    cursor: pointe;\n  }\n}\n::v-deep .btn {\n  font-size: 15px !important;\n}\n</style>\n"],"mappings":";;;;;;AAmCA,SAAAA,eAAA;AACA,SAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA,IAAAC,aAAA,YAAAA,cAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,KAAAD,KAAA;QACA,OAAAC,QAAA,KAAAC,KAAA;MACA,gCAAAC,IAAA,CAAAH,KAAA;QACAC,QAAA,KAAAC,KAAA;MACA;QACAD,QAAA;MACA;IACA;IACA;MACAG,UAAA;QACA;QACAC,QAAA;MACA;MACAC,UAAA;QACA;QACAD,QAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,IAAAC,KAAA;IACAC,QAAA,CAAAC,SAAA,aAAAC,CAAA;MACA,IAAAC,GAAA,GAAAC,MAAA,CAAAC,KAAA,CAAAC,OAAA;MACA,IAAAH,GAAA;QACAJ,KAAA,CAAAQ,YAAA;MACA;IACA;EACA;EACAC,OAAA;IACAD,YAAA,WAAAA,aAAAvB,IAAA;MAAA,IAAAyB,MAAA;MACA,KAAAC,KAAA,CAAA1B,IAAA,EAAA2B,QAAA,WAAAC,KAAA;QACA,IAAAA,KAAA;UACA9B,eAAA,CAAA2B,MAAA,CAAAjB,UAAA,EACAqB,IAAA;YAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,YAAA,GAAAC,CAAA,UAAAC,QAAAC,GAAA;cAAA,IAAAC,OAAA;cAAA,OAAAJ,YAAA,GAAAK,CAAA,WAAAC,QAAA;gBAAA,kBAAAA,QAAA,CAAAC,CAAA;kBAAA;oBACAd,MAAA,CAAAe,QAAA,CAAAC,OAAA;oBACA;oBACAL,OAAA,GAAAX,MAAA,CAAAiB,cAAA,CAAAP,GAAA,CAAAlC,IAAA,CAAA0C,YAAA,GACA;oBACA5C,UAAA,eAAAoC,GAAA,CAAAlC,IAAA,CAAA2C,KAAA,EAAAR,OAAA;oBACAX,MAAA,CAAAoB,OAAA,CAAAC,IAAA;sBACAC,IAAA,EAAAtB,MAAA,CAAAuB,YAAA;oBACA;kBAAA;oBAAA,OAAAV,QAAA,CAAAW,CAAA;gBAAA;cAAA,GAAAf,OAAA;YAAA,CACA;YAAA,iBAAAgB,EAAA;cAAA,OAAApB,IAAA,CAAAqB,KAAA,OAAAC,SAAA;YAAA;UAAA,KACAC,KAAA,WAAAlB,GAAA;YACAV,MAAA,CAAAe,QAAA,CAAAc,KAAA,CAAAnB,GAAA,CAAAoB,GAAA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAb,cAAA,WAAAA,eAAAc,WAAA;MACA,IAAAC,UAAA,GAAAC,IAAA,CAAAC,KAAA,KAAAC,IAAA;MACA,IAAAC,cAAA,GAAAL,WAAA,GAAAC,UAAA;MACA,OAAAK,UAAA,CAAAA,UAAA,CAAAA,UAAA,CAAAD,cAAA;IACA;EACA;AACA","ignoreList":[]}]}