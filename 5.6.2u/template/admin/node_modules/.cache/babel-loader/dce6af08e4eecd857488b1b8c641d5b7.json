{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\kefu\\pc\\components\\chatList.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\kefu\\pc\\components\\chatList.vue","mtime":1731313973072},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAnQC9saWJzL3NvY2tldCc7CmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7CmltcG9ydCB7IHJlY29yZCB9IGZyb20gJ0AvYXBpL2tlZnUnOwppbXBvcnQgeyBIYXBweVNjcm9sbCB9IGZyb20gJ3Z1ZS1oYXBweS1zY3JvbGwnOwppbXBvcnQgZW1wdHkgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9lbXB0eSc7CmltcG9ydCB7IGZvckVhY2ggfSBmcm9tICcuLi8uLi8uLi8uLi9saWJzL3Rvb2xzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjaGF0TGlzdCcsCiAgcHJvcHM6IHsKICAgIHVzZXJPbmxpbmU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCiAgICBuZXdSZWNvcmVkOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgc2VhcmNoRGF0YTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBIYXBweVNjcm9sbDogSGFwcHlTY3JvbGwsCiAgICBlbXB0eTogZW1wdHkKICB9LAogIHdhdGNoOiB7CiAgICB1c2VyT25saW5lOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoblZhbCwgb1ZhbCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgaWYgKG5WYWwuaGFzT3duUHJvcGVydHkoJ3RvX3VpZCcpKSB7CiAgICAgICAgICB0aGlzLnVzZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGVsLCBpbmRleCkgewogICAgICAgICAgICBpZiAoZWwudG9fdWlkID09IG5WYWwudG9fdWlkKSB7CiAgICAgICAgICAgICAgZWwub25saW5lID0gblZhbC5vbmxpbmU7CiAgICAgICAgICAgICAgaWYgKG5WYWwub25saW5lID09IDEpIHsKICAgICAgICAgICAgICAgIF90aGlzLiRub3RpZnkuaW5mbyh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5LiK57q/6YCa55+lJywKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIiIuY29uY2F0KGVsLm5pY2tuYW1lLCAiXHU0RTBBXHU3RUJGIikKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9LAogICAgc2VhcmNoRGF0YTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5WYWwsIG9WYWwpIHsKICAgICAgICBpZiAoblZhbCAhPSBvVmFsKSB7CiAgICAgICAgICB0aGlzLm5pY2tuYW1lID0gblZhbDsKICAgICAgICAgIHRoaXMucGFnZSA9IDE7CiAgICAgICAgICB0aGlzLmlzU2Nyb2xsID0gdHJ1ZTsKICAgICAgICAgIHRoaXMudXNlckxpc3QgPSBbXTsKICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhkVGFiQ3VyOiAwLAogICAgICBoZFRhYjogW3sKICAgICAgICBrZXk6IDAsCiAgICAgICAgdGl0bGU6ICfnlKjmiLfliJfooagnCiAgICAgIH1dLAogICAgICB1c2VyTGlzdDogW10sCiAgICAgIGN1cklkOiAnJywKICAgICAgcGFnZTogMSwKICAgICAgbGltaXQ6IDE1LAogICAgICBpc1Njcm9sbDogdHJ1ZSwKICAgICAgbmlja25hbWU6ICcnLAogICAgICBpc1NlYXJjaDogZmFsc2UsCiAgICAgIG9wczogewogICAgICAgIHZ1ZXNjcm9sbDogewogICAgICAgICAgbW9kZTogJ25hdGl2ZScsCiAgICAgICAgICBlbmFibGU6IGZhbHNlLAogICAgICAgICAgdGlwczogewogICAgICAgICAgICBkZWFjdGl2ZTogJ1B1c2ggdG8gTG9hZCcsCiAgICAgICAgICAgIGFjdGl2ZTogJ1JlbGVhc2UgdG8gTG9hZCcsCiAgICAgICAgICAgIHN0YXJ0OiAnTG9hZGluZy4uLicsCiAgICAgICAgICAgIGJlZm9yZURlYWN0aXZlOiAnTG9hZCBTdWNjZXNzZnVsbHkhJwogICAgICAgICAgfSwKICAgICAgICAgIGF1dG86IGZhbHNlLAogICAgICAgICAgYXV0b0xvYWREaXN0YW5jZTogMCwKICAgICAgICAgIHB1bGxSZWZyZXNoOiB7CiAgICAgICAgICAgIGVuYWJsZTogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICBwdXNoTG9hZDogewogICAgICAgICAgICBlbmFibGU6IHRydWUsCiAgICAgICAgICAgIGF1dG86IHRydWUsCiAgICAgICAgICAgIGF1dG9Mb2FkRGlzdGFuY2U6IDEwCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBiYXI6IHsKICAgICAgICAgIGJhY2tncm91bmQ6ICcjMzkzMjMyJywKICAgICAgICAgIG9wYWNpdHk6ICcuNScsCiAgICAgICAgICBzaXplOiAnNXB4JwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIGZpbHRlcnM6IHsKICAgIHRvRGF5OiBmdW5jdGlvbiB0b0RheSh2YWx1ZSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7CiAgICAgIHJldHVybiBkYXlqcy51bml4KHZhbHVlKS5mb3JtYXQoJ03mnIhE5pelIEhIOm1tJyk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICBTb2NrZXQudGhlbihmdW5jdGlvbiAod3MpIHsKICAgICAgLy/nlKjmiLfovazmjqUKICAgICAgd3MuJG9uKCd0cmFuc2ZlcicsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgdmFyIHN0YXR1cyA9IGZhbHNlOwogICAgICAgIHRoYXQudXNlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGluZGV4LCBhcnIpIHsKICAgICAgICAgIGlmIChkYXRhLnJlY29yZWQuaWQgPT0gZWwuaWQpIHsKICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKGRhdGEucmVjb3JlZC5pc190b3VyaXN0ID09IHRoYXQuaGRUYWJDdXIpIHsKICAgICAgICAgICAgICB2YXIgb2xkVmFsID0gZGF0YS5yZWNvcmVkOwogICAgICAgICAgICAgIGFyci5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgIGlmIChpbmRleCA9PSAwKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuJGVtaXQoJ3NldERhdGFJZCcsIG9sZFZhbCk7CiAgICAgICAgICAgICAgICBvbGRWYWwubXNzYWdlX251bSA9IDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFyci51bnNoaWZ0KG9sZFZhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3RoaXMyLiRub3RpZnkuaW5mbyh7CiAgICAgICAgICAgICAgdGl0bGU6ICfmgqjmnInkuIDmnaHovazmjqXmtojmga/vvIEnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmICghc3RhdHVzKSB7CiAgICAgICAgICBpZiAoZGF0YS5yZWNvcmVkLmlzX3RvdXJpc3QgPT0gX3RoaXMyLmhkVGFiQ3VyKSBfdGhpczIudXNlckxpc3QudW5zaGlmdChkYXRhLnJlY29yZWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHdzLiRvbignbXNzYWdlX251bScsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgaWYgKGRhdGEucmVjb3JlZC5pZCkgewogICAgICAgICAgdmFyIHN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgdGhhdC51c2VyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbCwgaW5kZXgsIGFycikgewogICAgICAgICAgICBpZiAoZGF0YS5yZWNvcmVkLmlkID09IGVsLmlkKSB7CiAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTsKICAgICAgICAgICAgICBpZiAoZGF0YS5yZWNvcmVkLmlzX3RvdXJpc3QgPT0gdGhhdC5oZFRhYkN1cikgewogICAgICAgICAgICAgICAgdmFyIG9sZFZhbCA9IGRhdGEucmVjb3JlZDsKICAgICAgICAgICAgICAgIGFyci5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgICAgYXJyLnVuc2hpZnQob2xkVmFsKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKCFzdGF0dXMpIHsKICAgICAgICAgICAgaWYgKGRhdGEucmVjb3JlZC5pc190b3VyaXN0ID09IF90aGlzMi5oZFRhYkN1cikgX3RoaXMyLnVzZXJMaXN0LnVuc2hpZnQoZGF0YS5yZWNvcmVkKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEucmVjb3JlZC5pc190b3VyaXN0ICE9IF90aGlzMi5oZFRhYkN1ciAmJiBkYXRhLnJlY29yZWQuaWQpIHsKICAgICAgICAgIF90aGlzMi4kbm90aWZ5LmluZm8oewogICAgICAgICAgICB0aXRsZTogX3RoaXMyLmhkVGFiQ3VyID8gJ+eUqOaIt+WPkeadpea2iOaBr+WVpu+8gScgOiAn5ri45a6i5Y+R5p2l5raI5oGv5ZWm77yBJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy5idXMuJG9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICBfdGhpczIubmlja25hbWUgPSBkYXRhOwogICAgfSk7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5YiH5o2iCiAgICBjaGFuZ2VUYWI6IGZ1bmN0aW9uIGNoYW5nZVRhYihpdGVtKSB7CiAgICAgIGlmICh0aGlzLmhkVGFiQ3VyID09IGl0ZW0ua2V5KSByZXR1cm47CiAgICAgIHRoaXMuaGRUYWJDdXIgPSBpdGVtLmtleTsKICAgICAgdGhpcy5pc1Njcm9sbCA9IHRydWU7CiAgICAgIHRoaXMucGFnZSA9IDE7CiAgICAgIHRoaXMudXNlckxpc3QgPSBbXTsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlVHlwZScsIGl0ZW0ua2V5KTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGlmICghdGhpcy5pc1Njcm9sbCkgcmV0dXJuOwogICAgICByZWNvcmQoewogICAgICAgIG5pY2tuYW1lOiB0aGlzLm5pY2tuYW1lLAogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBsaW1pdDogdGhpcy5saW1pdCwKICAgICAgICBpc190b3VyaXN0OiB0aGlzLmhkVGFiQ3VyCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICByZXMuZGF0YVswXS5tc3NhZ2VfbnVtID0gMDsKICAgICAgICAgIF90aGlzMy5pc1Njcm9sbCA9IHJlcy5kYXRhLmxlbmd0aCA+PSBfdGhpczMubGltaXQ7CiAgICAgICAgICBfdGhpczMudXNlckxpc3QgPSBfdGhpczMudXNlckxpc3QuY29uY2F0KHJlcy5kYXRhKTsKICAgICAgICAgIGlmIChfdGhpczMucGFnZSA9PSAxICYmIHJlcy5kYXRhLmxlbmd0aCA+IDAgJiYgIV90aGlzMy5pc1NlYXJjaCkgewogICAgICAgICAgICBfdGhpczMuY3VySWQgPSByZXMuZGF0YVswXS5pZDsKICAgICAgICAgICAgX3RoaXMzLiRlbWl0KCdzZXREYXRhSWQnLCByZXMuZGF0YVswXSk7CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpczMucGFnZSsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMuJGVtaXQoJ3NldERhdGFJZCcsIDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hhcnRSZWFjaEJvdHRvbTogZnVuY3Rpb24gY2hhcnRSZWFjaEJvdHRvbSgpIHsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgLy8g6YCJ5oup55So5oi3CiAgICBzZWxlY3RVc2VyOiBmdW5jdGlvbiBzZWxlY3RVc2VyKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuY3VySWQgPT0gaXRlbS5pZCkgcmV0dXJuOwogICAgICBpdGVtLm1zc2FnZV9udW0gPSAwOwogICAgICB0aGlzLmN1cklkID0gaXRlbS5pZDsKICAgICAgdGhpcy4kZW1pdCgnc2V0RGF0YUlkJywgaXRlbSk7CiAgICB9LAogICAgaGFuZGxlU2Nyb2xsOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGwodmVydGljYWwsIGhvcml6b250YWwsIG5hdGl2ZUV2ZW50KSB7CiAgICAgIGlmICh2ZXJ0aWNhbC5wcm9jZXNzID09IDEpIHsKICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["Socket","dayjs","record","HappyScroll","empty","forEach","name","props","userOnline","type","Object","default","newRecored","searchData","String","components","watch","handler","nVal","oVal","_this","hasOwnProperty","userList","el","index","to_uid","online","$notify","info","title","message","concat","nickname","deep","page","isScroll","getList","data","hdTabCur","hdTab","key","curId","limit","isSearch","ops","vuescroll","mode","enable","tips","deactive","active","start","beforeDeactive","auto","autoLoadDistance","pullRefresh","pushLoad","bar","background","opacity","size","filters","toDay","value","unix","format","mounted","_this2","that","then","ws","$on","status","arr","recored","id","is_tourist","oldVal","splice","$emit","mssage_num","unshift","bus","methods","changeTab","item","_this3","res","length","chartReachBottom","selectUser","handleScroll","vertical","horizontal","nativeEvent","process"],"sources":["src/pages/kefu/pc/components/chatList.vue"],"sourcesContent":["<template>\n  <div class=\"chatList\">\n    <!-- <div class=\"tab-head\">\n      <div\n        class=\"item\"\n        :class=\"{ active: item.key == hdTabCur }\"\n        v-for=\"(item, index) in hdTab\"\n        :key=\"index\"\n        v-db-click @click=\"changeTab(item)\"\n      >\n        {{ item.title }}\n      </div>\n    </div> -->\n    <div class=\"scroll-box\">\n      <vue-scroll :ops=\"ops\" @handle-scroll=\"handleScroll\" v-if=\"userList.length > 0\">\n        <div\n          class=\"chat-item\"\n          v-for=\"(item, index) in userList\"\n          :key=\"index\"\n          :class=\"{ active: curId == item.id }\"\n          v-db-click\n          @click=\"selectUser(item)\"\n        >\n          <div class=\"avatar\">\n            <img v-lazy=\"item.wx_avatar\" alt=\"\" />\n            <div class=\"status\" :class=\"{ off: item.online == 0 }\"></div>\n          </div>\n          <div class=\"user-info\">\n            <div class=\"hd\">\n              <span class=\"name line1\">{{ item.nickname }}</span>\n              <template v-if=\"item.type == 2\">\n                <span class=\"label\">小程序</span>\n              </template>\n              <template v-if=\"item.type == 3\">\n                <span class=\"label H5\">H5</span>\n              </template>\n              <template v-if=\"item.type == 1\">\n                <span class=\"label wechat\">公众号</span>\n              </template>\n              <template v-if=\"item.type == 0\">\n                <span class=\"label pc\">PC端</span>\n              </template>\n            </div>\n            <div class=\"bd line1\">\n              <template v-if=\"item.message_type <= 2\">{{ item.message }}</template>\n              <template v-if=\"item.message_type == 3\">[图片]</template>\n              <template v-if=\"item.message_type == 5\">[商品]</template>\n              <template v-if=\"item.message_type == 6\">[订单]</template>\n            </div>\n          </div>\n          <div class=\"right-box\">\n            <div class=\"time\">{{ item.update_time | toDay }}</div>\n            <div class=\"num\" v-if=\"item.mssage_num > 0\">\n              <el-badge :value=\"item.mssage_num\">\n                <a href=\"#\" class=\"demo-badge\"></a>\n              </el-badge>\n            </div>\n          </div>\n        </div>\n      </vue-scroll>\n      <empty v-else msg=\"暂无用户列表\" status=\"1\"></empty>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Socket } from '@/libs/socket';\nimport dayjs from 'dayjs';\nimport { record } from '@/api/kefu';\nimport { HappyScroll } from 'vue-happy-scroll';\nimport empty from '../../components/empty';\nimport { forEach } from '../../../../libs/tools';\nexport default {\n  name: 'chatList',\n  props: {\n    userOnline: {\n      type: Object,\n      default: function () {\n        return {};\n      },\n    },\n    newRecored: {\n      type: Object,\n      default: function () {\n        return {};\n      },\n    },\n    searchData: {\n      type: String,\n      default: '',\n    },\n  },\n  components: {\n    HappyScroll,\n    empty,\n  },\n  watch: {\n    userOnline: {\n      handler(nVal, oVal) {\n        if (nVal.hasOwnProperty('to_uid')) {\n          this.userList.forEach((el, index) => {\n            if (el.to_uid == nVal.to_uid) {\n              el.online = nVal.online;\n              if (nVal.online == 1) {\n                this.$notify.info({\n                  title: '上线通知',\n                  message: `${el.nickname}上线`,\n                });\n              }\n            }\n          });\n        }\n      },\n      deep: true,\n    },\n    searchData: {\n      handler(nVal, oVal) {\n        if (nVal != oVal) {\n          this.nickname = nVal;\n          this.page = 1;\n          this.isScroll = true;\n          this.userList = [];\n          this.getList();\n        }\n      },\n      deep: true,\n    },\n  },\n  data() {\n    return {\n      hdTabCur: 0,\n      hdTab: [\n        {\n          key: 0,\n          title: '用户列表',\n        },\n      ],\n      userList: [],\n      curId: '',\n      page: 1,\n      limit: 15,\n      isScroll: true,\n      nickname: '',\n      isSearch: false,\n      ops: {\n        vuescroll: {\n          mode: 'native',\n          enable: false,\n          tips: {\n            deactive: 'Push to Load',\n            active: 'Release to Load',\n            start: 'Loading...',\n            beforeDeactive: 'Load Successfully!',\n          },\n          auto: false,\n          autoLoadDistance: 0,\n          pullRefresh: {\n            enable: false,\n          },\n          pushLoad: {\n            enable: true,\n            auto: true,\n            autoLoadDistance: 10,\n          },\n        },\n        bar: {\n          background: '#393232',\n          opacity: '.5',\n          size: '5px',\n        },\n      },\n    };\n  },\n  filters: {\n    toDay: function (value) {\n      if (!value) return '';\n      return dayjs.unix(value).format('M月D日 HH:mm');\n    },\n  },\n  mounted() {\n    let that = this;\n    Socket.then((ws) => {\n      //用户转接\n      ws.$on('transfer', (data) => {\n        let status = false;\n        that.userList.forEach((el, index, arr) => {\n          if (data.recored.id == el.id) {\n            status = true;\n            if (data.recored.is_tourist == that.hdTabCur) {\n              let oldVal = data.recored;\n              arr.splice(index, 1);\n\n              if (index == 0) {\n                this.$emit('setDataId', oldVal);\n                oldVal.mssage_num = 0;\n              }\n              arr.unshift(oldVal);\n            }\n            this.$notify.info({\n              title: '您有一条转接消息！',\n            });\n          }\n        });\n        if (!status) {\n          if (data.recored.is_tourist == this.hdTabCur) this.userList.unshift(data.recored);\n        }\n      });\n      ws.$on('mssage_num', (data) => {\n        if (data.recored.id) {\n          let status = false;\n          that.userList.forEach((el, index, arr) => {\n            if (data.recored.id == el.id) {\n              status = true;\n              if (data.recored.is_tourist == that.hdTabCur) {\n                let oldVal = data.recored;\n                arr.splice(index, 1);\n                arr.unshift(oldVal);\n              }\n            }\n          });\n          if (!status) {\n            if (data.recored.is_tourist == this.hdTabCur) this.userList.unshift(data.recored);\n          }\n        }\n        if (data.recored.is_tourist != this.hdTabCur && data.recored.id) {\n          this.$notify.info({\n            title: this.hdTabCur ? '用户发来消息啦！' : '游客发来消息啦！',\n          });\n        }\n      });\n    });\n    this.bus.$on('change', (data) => {\n      this.nickname = data;\n    });\n    this.getList();\n  },\n  methods: {\n    //切换\n    changeTab(item) {\n      if (this.hdTabCur == item.key) return;\n      this.hdTabCur = item.key;\n      this.isScroll = true;\n      this.page = 1;\n      this.userList = [];\n      this.$emit('changeType', item.key);\n      this.getList();\n    },\n    getList() {\n      if (!this.isScroll) return;\n      record({\n        nickname: this.nickname,\n        page: this.page,\n        limit: this.limit,\n        is_tourist: this.hdTabCur,\n      }).then((res) => {\n        if (res.data.length > 0) {\n          res.data[0].mssage_num = 0;\n          this.isScroll = res.data.length >= this.limit;\n\n          this.userList = this.userList.concat(res.data);\n\n          if (this.page == 1 && res.data.length > 0 && !this.isSearch) {\n            this.curId = res.data[0].id;\n            this.$emit('setDataId', res.data[0]);\n          }\n          this.page++;\n        } else {\n          this.$emit('setDataId', 0);\n        }\n      });\n    },\n    chartReachBottom() {\n      this.getList();\n    },\n    // 选择用户\n    selectUser(item) {\n      if (this.curId == item.id) return;\n      item.mssage_num = 0;\n      this.curId = item.id;\n      this.$emit('setDataId', item);\n    },\n    handleScroll(vertical, horizontal, nativeEvent) {\n      if (vertical.process == 1) {\n        this.getList();\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.chatList {\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  height: 742px;\n  border-right: 1px solid #ececec;\n  .tab-head {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 50px;\n    flex-shrink: 0;\n    padding: 0 52px;\n    font-size: 14px;\n    color: #000000;\n    .item {\n      position: relative;\n      cursor: pointer;\n      &:after {\n        display: none;\n        content: ' ';\n        position: absolute;\n        left: 50%;\n        bottom: -15px;\n        transform: translateX(-50%);\n        height: 2px;\n        width: 100%;\n        background: var(--prev-color-primary);\n      }\n      &.active {\n        color: var(--prev-color-primary);\n        &:after {\n          display: block;\n        }\n      }\n    }\n  }\n  .scroll-box {\n    flex: 1;\n    height: 500px;\n    overflow: hidden;\n  }\n  .chat-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 12px 10px;\n    height: 74px;\n    box-sizing: border-box;\n    border-left: 3px solid transparent;\n    cursor: pointer;\n    &.active {\n      background: #eff0f1;\n      border-left: 3px solid var(--prev-color-primary);\n    }\n    .avatar {\n      position: relative;\n      width: 40px;\n      height: 40px;\n      img {\n        display: block;\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n      }\n      .status {\n        position: absolute;\n        right: 3px;\n        bottom: 0;\n        width: 8px;\n        height: 8px;\n        background: #48d452;\n        border: 1px solid #fff;\n        border-radius: 50%;\n        &.off {\n          background: #999999;\n        }\n      }\n    }\n    .user-info {\n      width: 155px;\n      margin-left: 12px;\n      margin-top: 5px;\n      font-size: 16px;\n      .hd {\n        display: flex;\n        align-items: center;\n        color: rgba(0, 0, 0, 0.65);\n        .name {\n          max-width: 67%;\n        }\n        .label {\n          margin-left: 5px;\n          color: #3875ea;\n          font-size: 12px;\n          background: #d8e5ff;\n          border-radius: 2px;\n          padding: 1px 5px;\n          &.H5 {\n            background: #faf1d0;\n            color: #dc9a04;\n          }\n          &.wechat {\n            background: rgba(64, 194, 73, 0.16);\n            color: #40c249;\n          }\n          &.pc {\n            background: rgba(100, 64, 194, 0.16);\n            color: #6440c2;\n          }\n        }\n      }\n      .bd {\n        margin-top: 3px;\n        font-size: 12px;\n        color: #8e959e;\n      }\n    }\n    .right-box {\n      position: relative;\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      align-items: flex-end;\n      color: #8e959e;\n      .num {\n        margin-right: 12px;\n      }\n    }\n  }\n}\n.chart-scroll {\n  margin-top: -10px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}