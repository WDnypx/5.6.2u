{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\utils\\modalForm.js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\utils\\modalForm.js","mtime":1710120507280},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovcGMvem0vXHU2NjA2XHU2NjBFXHU5NjE0XHU3RkQ0XHU3OUQxXHU2MjgwXHU2NzA5XHU5NjUwXHU1MTZDXHU1M0Y4L1x1NkU5MFx1NzgwMS9DUk1FQi1CWiB2NS42LjIoMjAyNTA2MzApL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC9saWJzL3JlcXVlc3QnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CnZhciBmQXBpOwp2YXIgdW5pcXVlID0gMTsKaW1wb3J0IGZvcm1DcmVhdGUgZnJvbSAnQGZvcm0tY3JlYXRlL2VsZW1lbnQtdWknOwp2YXIgdW5pcXVlSWQgPSBmdW5jdGlvbiB1bmlxdWVJZCgpIHsKICByZXR1cm4gKyt1bmlxdWU7Cn07CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1vZGFsRm9ybShmb3JtUmVxdWVzdFByb21pc2UpIHsKICB2YXIgX3RoaXMgPSB0aGlzOwogIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogIHZhciBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgZm9ybVJlcXVlc3RQcm9taXNlLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7CiAgICAgIGlmICghZGF0YS5jb25maWcpIGRhdGEuY29uZmlnID0ge307CiAgICAgIGRhdGEuY29uZmlnLnN1Ym1pdEJ0biA9IGZhbHNlOwogICAgICBkYXRhLmNvbmZpZy5yZXNldEJ0biA9IGZhbHNlOwogICAgICBpZiAoIWRhdGEuY29uZmlnLmZvcm0pIGRhdGEuY29uZmlnLmZvcm0gPSB7fTsKICAgICAgaWYgKCFkYXRhLmNvbmZpZy5mb3JtRGF0YSkgZGF0YS5jb25maWcuZm9ybURhdGEgPSB7fTsKICAgICAgZGF0YS5jb25maWcuZm9ybURhdGEgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGEuY29uZmlnLmZvcm1EYXRhKSwgY29uZmlnLmZvcm1EYXRhKTsKICAgICAgZGF0YS5jb25maWcuZm9ybS5sYWJlbFdpZHRoID0gJzEwNXB4JzsKICAgICAgZGF0YS5jb25maWcuZ2xvYmFsID0gewogICAgICAgIHVwbG9hZDogewogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbiBvblN1Y2Nlc3MocmVwLCBmaWxlKSB7CiAgICAgICAgICAgICAgaWYgKHJlcC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgZmlsZS51cmwgPSByZXAuZGF0YS5zcmM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmcmFtZTogewogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoZSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUsICdyZXAnKTsKICAgICAgICAgICAgICBlLmZBcGkgPSBmQXBpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBpbnB1dE51bWJlcjogewogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgY29udHJvbHM6IGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgICBkYXRhID0gVnVlLm9ic2VydmFibGUoZGF0YSk7CiAgICAgIGRhdGEucnVsZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGUudGl0bGUgKz0gJ++8mic7CiAgICAgIH0pOwogICAgICBfdGhpcy4kbXNnYm94KHsKICAgICAgICB0aXRsZTogZGF0YS50aXRsZSwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGN1c3RvbUNsYXNzOiBjb25maWcuY2xhc3MgfHwgJ21vZGFsLWZvcm0nLAogICAgICAgIG1hc2s6IGZhbHNlLAogICAgICAgIGNsb3NlT25DbGlja01vZGFsOiBmYWxzZSwKICAgICAgICBtZXNzYWdlOiBoKCdkaXYnLCB7CiAgICAgICAgICBjbGFzczogJ2NvbW1vbi1mb3JtLWNyZWF0ZScsCiAgICAgICAgICBrZXk6IHVuaXF1ZUlkKCkKICAgICAgICB9LCBbaCgnZm9ybUNyZWF0ZScsIHsKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIHJ1bGU6IGRhdGEucnVsZXMsCiAgICAgICAgICAgIG9wdGlvbjogZGF0YS5jb25maWcKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCRmKSB7CiAgICAgICAgICAgICAgZkFwaSA9ICRmOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSldKSwKICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24gYmVmb3JlQ2xvc2UoYWN0aW9uLCBpbnN0YW5jZSwgZG9uZSkgewogICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gZm4oKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGluc3RhbmNlLmNvbmZpcm1CdXR0b25Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICB9OwogICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgICAgIGluc3RhbmNlLmNvbmZpcm1CdXR0b25Mb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgZkFwaS5zdWJtaXQoZnVuY3Rpb24gKGZvcm1EYXRhKSB7CiAgICAgICAgICAgICAgcmVxdWVzdFtkYXRhLm1ldGhvZC50b0xvd2VyQ2FzZSgpXShkYXRhLmFjdGlvbiwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgZG9uZSgpOwogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnIHx8ICfmj5DkuqTmiJDlip8nKTsKICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIubXNnIHx8ICfmj5DkuqTlpLHotKUnKTsKICAgICAgICAgICAgICAgIC8vIHJlamVjdChlcnIpOwogICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZm4oKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmbigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZuKCk7CiAgICAgICAgICAgIGRvbmUoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoZS5tc2cgfHwgJy0tJyk7CiAgICB9KTsKICB9KTsKfQ=="},{"version":3,"names":["request","Vue","fApi","unique","formCreate","uniqueId","modalForm","formRequestPromise","_this","config","arguments","length","undefined","h","$createElement","Promise","resolve","reject","then","_ref","data","submitBtn","resetBtn","form","formData","_objectSpread","labelWidth","global","upload","props","onSuccess","rep","file","status","url","src","frame","onLoad","e","console","log","inputNumber","controls","observable","rules","forEach","title","$msgbox","showCancelButton","customClass","class","mask","closeOnClickModal","message","key","rule","option","on","mounted","$f","beforeClose","action","instance","done","fn","setTimeout","confirmButtonLoading","submit","method","toLowerCase","res","$message","success","msg","catch","err","error","finally"],"sources":["D:/pc/zm/昆明阔翔科技有限公司/源码/CRMEB-BZ v5.6.2(20250630)/template/admin/src/utils/modalForm.js"],"sourcesContent":["import request from '@/libs/request';\nimport Vue from 'vue';\n\nlet fApi;\nlet unique = 1;\nimport formCreate from '@form-create/element-ui';\n\nconst uniqueId = () => ++unique;\nexport default function modalForm(formRequestPromise, config = {}) {\n  const h = this.$createElement;\n  return new Promise((resolve, reject) => {\n    formRequestPromise\n      .then(({ data }) => {\n        if (!data.config) data.config = {};\n        data.config.submitBtn = false;\n        data.config.resetBtn = false;\n        if (!data.config.form) data.config.form = {};\n        if (!data.config.formData) data.config.formData = {};\n        data.config.formData = { ...data.config.formData, ...config.formData };\n        data.config.form.labelWidth = '105px';\n        data.config.global = {\n          upload: {\n            props: {\n              onSuccess(rep, file) {\n                if (rep.status === 200) {\n                  file.url = rep.data.src;\n                }\n              },\n            },\n          },\n          frame: {\n            props: {\n              onLoad(e) {\n                console.log(e, 'rep');\n                e.fApi = fApi;\n              },\n            },\n          },\n          inputNumber: {\n            props: {\n              controls: false,\n            },\n          },\n        };\n        data = Vue.observable(data);\n        data.rules.forEach((e) => {\n          e.title += '：';\n        });\n        this.$msgbox({\n          title: data.title,\n          showCancelButton: true,\n          customClass: config.class || 'modal-form',\n          mask: false,\n          closeOnClickModal: false,\n          message: h('div', { class: 'common-form-create', key: uniqueId() }, [\n            h('formCreate', {\n              props: {\n                rule: data.rules,\n                option: data.config,\n              },\n              on: {\n                mounted: ($f) => {\n                  fApi = $f;\n                },\n              },\n            }),\n          ]),\n          beforeClose: (action, instance, done) => {\n            const fn = () => {\n              setTimeout(() => {\n                instance.confirmButtonLoading = false;\n              }, 500);\n            };\n\n            if (action === 'confirm') {\n              instance.confirmButtonLoading = true;\n              fApi.submit(\n                (formData) => {\n                  request[data.method.toLowerCase()](data.action, formData)\n                    .then((res) => {\n                      done();\n                      this.$message.success(res.msg || '提交成功');\n                      resolve(res);\n                    })\n                    .catch((err) => {\n                      this.$message.error(err.msg || '提交失败');\n                      // reject(err);\n                    })\n                    .finally(() => {\n                      fn();\n                    });\n                },\n                () => fn(),\n              );\n            } else {\n              fn();\n              done();\n            }\n          },\n        });\n      })\n      .catch((e) => {\n        this.$message.error(e.msg || '--');\n      });\n  });\n}\n"],"mappings":"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","ignoreList":[]}]}