{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\components\\brokerageSet.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\components\\brokerageSet.vue","mtime":1740127155359},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovcGMvem0vXHU2NjA2XHU2NjBFXHU5NjE0XHU3RkQ0XHU3OUQxXHU2MjgwXHU2NzA5XHU5NjUwXHU1MTZDXHU1M0Y4L1x1NkU5MFx1NzgwMS9DUk1FQi1CWiB2NS42LjIoMjAyNTA2MzApL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgcHJvZHVjdEJyb2tlcmFnZSwgcHJvZHVjdEJyb2tlcmFnZVVwZGF0ZSB9IGZyb20gJ0AvYXBpL3Byb2R1Y3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2Jyb2tlcmFnZVNldCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgaXNfc3ViOiAwCiAgICAgIH0sCiAgICAgIGJyb2tlcmFnZTogJycsCiAgICAgIGJyb2tlcmFnZV90d286ICcnLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgYXR0ckRhdGE6IFtdLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIGJyb2tlcmFnZVNldFR5cGU6IDAsCiAgICAgIHN0b3JlX2Jyb2tlcmFnZV9yYXRpbzogJycsCiAgICAgIHN0b3JlX2Jyb2tlcmFnZV90d286ICcnLAogICAgICBzdG9yZUluZm86IHt9LAogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgZGVmYXVsdEF0dHJEYXRhOiBbXQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBwcm9kdWN0SWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmlzaWJsZTogZnVuY3Rpb24gdmlzaWJsZSh2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgbWV0aG9kczogewogICAgYnJva2VyYWdlUmVwbGFjZTogZnVuY3Rpb24gYnJva2VyYWdlUmVwbGFjZSh2YWx1ZSkgewogICAgICB0aGlzLmJyb2tlcmFnZSA9IHZhbHVlLnJlcGxhY2UoL14tfFxEL2csICcnKTsKICAgIH0sCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgaXNTdWNjZXNzID0gdHJ1ZSwKICAgICAgICBzdGVwID0gdHJ1ZTsKICAgICAgaWYgKHRoaXMuZm9ybURhdGEuaXNfc3ViKSB7CiAgICAgICAgdGhpcy5hdHRyRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBpZiAoaXRlbS5icm9rZXJhZ2UgPT0gMCB8fCBpdGVtLmJyb2tlcmFnZV90d28gPT0gMCkgewogICAgICAgICAgICBpc1N1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKE51bWJlcihpdGVtLmJyb2tlcmFnZSkgPiBOdW1iZXIoaXRlbS5wcmljZSkgfHwgTnVtYmVyKGl0ZW0uYnJva2VyYWdlX3R3bykgPiBOdW1iZXIoaXRlbS5wcmljZSkpIHsKICAgICAgICAgICAgc3RlcCA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICghaXNTdWNjZXNzKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5L2j6YeR5LiN5Y+v5Li6MCcpOwogICAgICBpZiAoIXN0ZXApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfkvaPph5HkuI3lj6/kuLrlpKfkuo7llK7ku7cnKTsKICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7CiAgICAgIHZhciBkYXRhID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmZvcm1EYXRhKSwge30sIHsKICAgICAgICBhdHRyX3ZhbHVlOiB0aGlzLmF0dHJEYXRhCiAgICAgIH0pOwogICAgICBwcm9kdWN0QnJva2VyYWdlVXBkYXRlKHRoaXMucHJvZHVjdElkLCAxLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgX3RoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgX3RoaXMuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgYnJva2VyYWdlT25lU2V0VXA6IGZ1bmN0aW9uIGJyb2tlcmFnZU9uZVNldFVwKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKHRoaXMuYnJva2VyYWdlID09IDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfku7fmoLzlkozmipjmiaPkuI3lj6/kuLowJyk7CiAgICAgIGlmICh0aGlzLmJyb2tlcmFnZVNldFR5cGUgPT0gMSAmJiB0aGlzLmJyb2tlcmFnZSA+IDEwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aKmOaJo+S4jeWPr+i2hei/hzEwMCcpOwogICAgICB0aGlzLmF0dHJEYXRhLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChfdGhpczIuYnJva2VyYWdlU2V0VHlwZSA9PSAwKSB7CiAgICAgICAgICBpdGVtLmJyb2tlcmFnZSA9IF90aGlzMi5icm9rZXJhZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGl0ZW0uYnJva2VyYWdlID0gKF90aGlzMi5icm9rZXJhZ2UgLyAxMDAgKiBpdGVtLnByaWNlKS50b0ZpeGVkKDIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuY2xvc2VQb3AoKTsKICAgIH0sCiAgICBicm9rZXJhZ2VUd29TZXRVcDogZnVuY3Rpb24gYnJva2VyYWdlVHdvU2V0VXAoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBpZiAodGhpcy5icm9rZXJhZ2VfdHdvID09IDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfku7fmoLzlkozmipjmiaPkuI3lj6/kuLowJyk7CiAgICAgIGlmICh0aGlzLmJyb2tlcmFnZVNldFR5cGUgPT0gMSAmJiB0aGlzLmJyb2tlcmFnZV90d28gPiAxMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfmipjmiaPkuI3lj6/otoXov4cxMDAnKTsKICAgICAgdGhpcy5hdHRyRGF0YS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoX3RoaXMzLmJyb2tlcmFnZVNldFR5cGUgPT0gMCkgewogICAgICAgICAgaXRlbS5icm9rZXJhZ2VfdHdvID0gX3RoaXMzLmJyb2tlcmFnZV90d287CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGl0ZW0uYnJva2VyYWdlX3R3byA9IChfdGhpczMuYnJva2VyYWdlX3R3byAvIDEwMCAqIGl0ZW0ucHJpY2UpLnRvRml4ZWQoMik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5jbG9zZVBvcCgpOwogICAgfSwKICAgIGJyb2tlcmFnZVJvd1JlcGxhY2U6IGZ1bmN0aW9uIGJyb2tlcmFnZVJvd1JlcGxhY2UoaXRlbSkgewogICAgICBpdGVtLmJyb2tlcmFnZSA9IGl0ZW0uYnJva2VyYWdlLnJlcGxhY2UoL14tfFxEL2csICcnKTsKICAgIH0sCiAgICBicm9rZXJhZ2VUd29Sb3dSZXBsYWNlOiBmdW5jdGlvbiBicm9rZXJhZ2VUd29Sb3dSZXBsYWNlKGl0ZW0pIHsKICAgICAgaXRlbS5icm9rZXJhZ2VfdHdvID0gaXRlbS5icm9rZXJhZ2VfdHdvLnJlcGxhY2UoL14tfFxEL2csICcnKTsKICAgIH0sCiAgICBjbG9zZVBvcDogZnVuY3Rpb24gY2xvc2VQb3AoKSB7CiAgICAgIHRoaXMuJHJlZnMucG9wb3ZlclJlZl9vbmUuZG9DbG9zZSgpOwogICAgICB0aGlzLiRyZWZzLnBvcG92ZXJSZWZfdHdvLmRvQ2xvc2UoKTsKICAgICAgdGhpcy5icm9rZXJhZ2VfdHdvID0gJyc7CiAgICAgIHRoaXMuYnJva2VyYWdlID0gJyc7CiAgICB9LAogICAgY2hhbmdlU3ViVHlwZTogZnVuY3Rpb24gY2hhbmdlU3ViVHlwZSh2YWwpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMuYXR0ckRhdGEubWFwKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICAgICAgaXRlbS5icm9rZXJhZ2UgPSB2YWwgPT0gMCA/IF90aGlzNC5zdG9yZUluZm8uc3RvcmVfYnJva2VyYWdlX3JhdGlvIDogX3RoaXM0LmRlZmF1bHRBdHRyRGF0YVtpXS5icm9rZXJhZ2U7CiAgICAgICAgaXRlbS5icm9rZXJhZ2VfdHdvID0gdmFsID09IDAgPyBfdGhpczQuc3RvcmVJbmZvLnN0b3JlX2Jyb2tlcmFnZV90d28gOiBfdGhpczQuZGVmYXVsdEF0dHJEYXRhW2ldLmJyb2tlcmFnZV90d287CiAgICAgIH0pOwogICAgfSwKICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIC8v6I635Y+W5Lqn5ZOB5bGe5oCnCiAgICAgIHByb2R1Y3RCcm9rZXJhZ2UodGhpcy5wcm9kdWN0SWQsIDEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBhcnIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLmF0dHJWYWx1ZSkpOwogICAgICAgIF90aGlzNS5kZWZhdWx0QXR0ckRhdGEgPSBPYmplY3QudmFsdWVzKGFycik7CiAgICAgICAgY29uc29sZS5sb2coX3RoaXM1LmRlZmF1bHRBdHRyRGF0YSwgJ3RoaXMuZGVmYXVsdEF0dHJEYXRhJyk7CiAgICAgICAgX3RoaXM1LmF0dHJEYXRhID0gT2JqZWN0LnZhbHVlcyhyZXMuZGF0YS5hdHRyVmFsdWUpOwogICAgICAgIF90aGlzNS5mb3JtRGF0YS5pc19zdWIgPSByZXMuZGF0YS5zdG9yZUluZm8uaXNfc3ViOwogICAgICAgIF90aGlzNS5zdG9yZUluZm8gPSByZXMuZGF0YS5zdG9yZUluZm87CiAgICAgICAgaWYgKF90aGlzNS5mb3JtRGF0YS5pc19zdWIgPT0gMCkgewogICAgICAgICAgX3RoaXM1LmF0dHJEYXRhLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLmJyb2tlcmFnZSA9IF90aGlzNS5zdG9yZUluZm8uc3RvcmVfYnJva2VyYWdlX3JhdGlvOwogICAgICAgICAgICBlLmJyb2tlcmFnZV90d28gPSBfdGhpczUuc3RvcmVJbmZvLnN0b3JlX2Jyb2tlcmFnZV90d287CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["productBrokerage","productBrokerageUpdate","name","data","formData","is_sub","brokerage","brokerage_two","loading","attrData","disabled","brokerageSetType","store_brokerage_ratio","store_brokerage_two","storeInfo","visible","defaultAttrData","props","productId","type","Number","default","watch","val","getData","created","methods","brokerageReplace","value","replace","submitForm","_this","isSuccess","step","forEach","item","price","$message","error","_objectSpread","attr_value","then","res","success","msg","catch","err","brokerageOneSetUp","_this2","map","toFixed","closePop","brokerageTwoSetUp","_this3","brokerageRowReplace","brokerageTwoRowReplace","$refs","popoverRef_one","doClose","popoverRef_two","changeSubType","_this4","i","onCancel","_this5","arr","JSON","parse","stringify","attrValue","Object","values","console","log","e"],"sources":["src/pages/product/components/brokerageSet.vue"],"sourcesContent":["<template>\n  <div>\n    <el-dialog :visible.sync=\"visible\" title=\"自定义佣金\" width=\"700\">\n      <el-form :model=\"formData\" label-width=\"80px\">\n        <el-form-item label=\"返佣设置：\">\n          <el-radio-group v-model=\"formData.is_sub\" @input=\"changeSubType\">\n            <el-radio :label=\"0\">默认比例</el-radio>\n            <el-radio :label=\"1\">自定义佣金</el-radio>\n          </el-radio-group>\n          <div class=\"fs-12 tips-info\" v-show=\"formData.is_sub\">\n            切换到默认比例时，表格中编辑的返佣金额会被清空，请谨慎操作\n          </div>\n        </el-form-item>\n        <el-form-item label-width=\"0\">\n          <el-table size=\"small\" border max-height=\"460\" :data=\"attrData\" style=\"width: 100%\">\n            <el-table-column prop=\"pic\" label=\"规格图\" min-width=\"90\" align=\"center\">\n              <template slot-scope=\"scope\">\n                <div class=\"tabBox_img m-auto\" v-viewer>\n                  <img v-lazy=\"scope.row.pic\" />\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"suk\" label=\"产品规格\" min-width=\"120\" align=\"center\"></el-table-column>\n            <el-table-column prop=\"price\" label=\"售价\" min-width=\"120\" align=\"center\"></el-table-column>\n            <el-table-column min-width=\"120\" align=\"center\">\n              <template slot=\"header\" slot-scope=\"scope\">\n                <span>一级返佣</span>\n                <el-popover\n                  ref=\"popoverRef_one\"\n                  placement=\"top\"\n                  width=\"280\"\n                  trigger=\"click\"\n                  v-if=\"formData.is_sub == 1\"\n                >\n                  <div class=\"pop-title\">批量设置一级返佣</div>\n                  <div class=\"mt-14\">\n                    <el-radio-group v-model=\"brokerageSetType\">\n                      <el-radio :label=\"0\">指定价格</el-radio>\n                      <el-radio :label=\"1\">比例</el-radio>\n                    </el-radio-group>\n                  </div>\n                  <div class=\"mt10 mb10 acea-row\">\n                    <el-input type=\"number\" class=\"popover-input\" v-model=\"brokerage\" @input=\"brokerageReplace\">\n                      <template slot=\"suffix\">\n                        <span>{{ brokerageSetType ? '%' : '元' }}</span>\n                      </template>\n                    </el-input>\n                    <div class=\"acea-row row-right row-middle ml14\">\n                      <el-button size=\"small\" @click=\"closePop\">取消</el-button>\n                      <el-button size=\"small\" type=\"primary\" @click=\"brokerageOneSetUp\">确认</el-button>\n                    </div>\n                  </div>\n                  <span class=\"iconfont iconbianji1\" slot=\"reference\"></span>\n                </el-popover>\n              </template>\n              <template slot-scope=\"scope\">\n                <el-input\n                  v-model=\"scope.row.brokerage\"\n                  @change=\"brokerageRowReplace(scope.row)\"\n                  :disabled=\"formData.is_sub == 0\"\n                >\n                  <template slot=\"suffix\">\n                    <span>{{ formData.is_sub ? '元' : '%' }}</span>\n                  </template>\n                </el-input>\n                <!-- <div class=\"flex-x-center\" v-show=\"formData.is_sub == 0\">一级返佣：{{ (scope.row.price * store_brokerage_ratio).toFixed(2) }}</div> -->\n                <!-- <div class=\"flex-x-center red\" v-show=\"formData.is_sub == 1 && scope.row.brokerage == 0\">\n                  佣金不可为0\n                </div> -->\n                <div\n                  class=\"flex-x-center red\"\n                  v-show=\"formData.is_sub == 1 && Number(scope.row.brokerage) > Number(scope.row.price)\"\n                >\n                  佣金不可大于售价\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column min-width=\"120\" align=\"center\">\n              <template slot=\"header\" slot-scope=\"scope\">\n                <span>二级返佣</span>\n                <el-popover\n                  ref=\"popoverRef_two\"\n                  placement=\"top\"\n                  width=\"280\"\n                  trigger=\"click\"\n                  v-if=\"formData.is_sub == 1\"\n                >\n                  <div class=\"pop-title\">批量设置二级返佣</div>\n                  <div class=\"mt-14\">\n                    <el-radio-group v-model=\"brokerageSetType\">\n                      <el-radio :label=\"0\">指定价格</el-radio>\n                      <el-radio :label=\"1\">比例</el-radio>\n                    </el-radio-group>\n                  </div>\n                  <div class=\"mt10 mb10 acea-row\">\n                    <el-input type=\"number\" class=\"popover-input\" v-model=\"brokerage_two\">\n                      <template slot=\"suffix\">\n                        <span>{{ brokerageSetType ? '%' : '元' }}</span>\n                      </template>\n                    </el-input>\n                    <div class=\"acea-row row-right row-middle ml14\">\n                      <el-button size=\"small\" @click=\"closePop\">取消</el-button>\n                      <el-button size=\"small\" type=\"primary\" @click=\"brokerageTwoSetUp\">确认</el-button>\n                    </div>\n                  </div>\n\n                  <span class=\"iconfont iconbianji1\" slot=\"reference\"></span>\n                </el-popover>\n              </template>\n              <template slot-scope=\"scope\">\n                <el-input\n                  type=\"number\"\n                  v-model=\"scope.row.brokerage_two\"\n                  @change=\"brokerageTwoRowReplace(scope.row)\"\n                  :disabled=\"formData.is_sub == 0\"\n                >\n                  <template slot=\"suffix\">\n                    <span>{{ formData.is_sub ? '元' : '%' }}</span>\n                  </template>\n                </el-input>\n                <!-- <div class=\"flex-x-center\" v-show=\"formData.is_sub == 0\">二级返佣：{{ (scope.row.price * store_brokerage_two).toFixed(2) }}</div> -->\n                <!-- <div class=\"flex-x-center red\" v-show=\"formData.is_sub == 1 && scope.row.brokerage_two == 0\">\n                  佣金不可为0\n                </div> -->\n                <div\n                  class=\"flex-x-center red\"\n                  v-show=\"formData.is_sub == 1 && Number(scope.row.brokerage_two) > Number(scope.row.price)\"\n                >\n                  佣金不可大于售价\n                </div>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"onCancel\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\" :disabled=\"disabled\" class=\"ml-14\">确认</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { productBrokerage, productBrokerageUpdate } from '@/api/product';\nexport default {\n  name: 'brokerageSet',\n  data() {\n    return {\n      formData: {\n        is_sub: 0,\n      },\n      brokerage: '',\n      brokerage_two: '',\n      loading: false,\n      attrData: [],\n      disabled: false,\n      brokerageSetType: 0,\n      store_brokerage_ratio: '',\n      store_brokerage_two: '',\n      storeInfo: {},\n      visible: false,\n      defaultAttrData: [],\n    };\n  },\n  props: {\n    productId: {\n      type: Number,\n      default: 0,\n    },\n  },\n  watch: {\n    visible(val) {\n      if (val) {\n        this.getData();\n      }\n    },\n  },\n  created() {},\n  methods: {\n    brokerageReplace(value) {\n      this.brokerage = value.replace(/^-|\\D/g, '');\n    },\n    submitForm() {\n      let isSuccess = true,\n        step = true;\n      if (this.formData.is_sub) {\n        this.attrData.forEach((item) => {\n          if (item.brokerage == 0 || item.brokerage_two == 0) {\n            isSuccess = true;\n          }\n          if (Number(item.brokerage) > Number(item.price) || Number(item.brokerage_two) > Number(item.price)) {\n            step = false;\n          }\n        });\n      }\n      if (!isSuccess) return this.$message.error('佣金不可为0');\n      if (!step) return this.$message.error('佣金不可为大于售价');\n      this.disabled = true;\n      let data = {\n        ...this.formData,\n        attr_value: this.attrData,\n      };\n      productBrokerageUpdate(this.productId, 1, data)\n        .then((res) => {\n          this.disabled = false;\n          this.$message.success(res.msg);\n          this.visible = false;\n        })\n        .catch((err) => {\n          this.$message.error(err.msg);\n          this.disabled = false;\n        });\n    },\n    brokerageOneSetUp() {\n      if (this.brokerage == 0) return this.$message.error('价格和折扣不可为0');\n      if (this.brokerageSetType == 1 && this.brokerage > 100) return this.$message.error('折扣不可超过100');\n      this.attrData.map((item) => {\n        if (this.brokerageSetType == 0) {\n          item.brokerage = this.brokerage;\n        } else {\n          item.brokerage = ((this.brokerage / 100) * item.price).toFixed(2);\n        }\n      });\n      this.closePop();\n    },\n    brokerageTwoSetUp() {\n      if (this.brokerage_two == 0) return this.$message.error('价格和折扣不可为0');\n      if (this.brokerageSetType == 1 && this.brokerage_two > 100) return this.$message.error('折扣不可超过100');\n      this.attrData.map((item) => {\n        if (this.brokerageSetType == 0) {\n          item.brokerage_two = this.brokerage_two;\n        } else {\n          item.brokerage_two = ((this.brokerage_two / 100) * item.price).toFixed(2);\n        }\n      });\n      this.closePop();\n    },\n    brokerageRowReplace(item) {\n      item.brokerage = item.brokerage.replace(/^-|\\D/g, '');\n    },\n    brokerageTwoRowReplace(item) {\n      item.brokerage_two = item.brokerage_two.replace(/^-|\\D/g, '');\n    },\n    closePop() {\n      this.$refs.popoverRef_one.doClose();\n      this.$refs.popoverRef_two.doClose();\n      this.brokerage_two = '';\n      this.brokerage = '';\n    },\n    changeSubType(val) {\n      this.attrData.map((item, i) => {\n        item.brokerage = val == 0 ? this.storeInfo.store_brokerage_ratio : this.defaultAttrData[i].brokerage;\n        item.brokerage_two = val == 0 ? this.storeInfo.store_brokerage_two : this.defaultAttrData[i].brokerage_two;\n      });\n    },\n    onCancel() {\n      this.visible = false;\n    },\n    getData() {\n      //获取产品属性\n      productBrokerage(this.productId, 1).then((res) => {\n        let arr = JSON.parse(JSON.stringify(res.data.attrValue));\n        this.defaultAttrData = Object.values(arr);\n        console.log(this.defaultAttrData, 'this.defaultAttrData');\n        this.attrData = Object.values(res.data.attrValue);\n        this.formData.is_sub = res.data.storeInfo.is_sub;\n        this.storeInfo = res.data.storeInfo;\n        if (this.formData.is_sub == 0) {\n          this.attrData.map((e) => {\n            e.brokerage = this.storeInfo.store_brokerage_ratio;\n            e.brokerage_two = this.storeInfo.store_brokerage_two;\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n.iconbianji1 {\n  font-size: 12px;\n  padding-left: 4px;\n  cursor: pointer;\n}\n.popover-input {\n  width: 100px;\n}\n.w-250 {\n  width: 250px;\n}\n.pop-title {\n  font-size: 14px;\n  font-weight: bold;\n  margin-bottom: 14px;\n}\n.red {\n  color: #e93323;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}