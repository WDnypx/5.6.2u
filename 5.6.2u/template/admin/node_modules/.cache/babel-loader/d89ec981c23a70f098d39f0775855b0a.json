{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\components\\vipPriceSet.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\product\\components\\vipPriceSet.vue","mtime":1740127155359},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovcGMvem0vXHU2NjA2XHU2NjBFXHU5NjE0XHU3RkQ0XHU3OUQxXHU2MjgwXHU2NzA5XHU5NjUwXHU1MTZDXHU1M0Y4L1x1NkU5MFx1NzgwMS9DUk1FQi1CWiB2NS42LjIoMjAyNTA2MzApL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgeyBwcm9kdWN0QnJva2VyYWdlLCBwcm9kdWN0QnJva2VyYWdlVXBkYXRlIH0gZnJvbSAnQC9hcGkvcHJvZHVjdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAndmlwUHJpY2VTZXQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtRGF0YTogewogICAgICAgIGlzX3ZpcDogMCwKICAgICAgICB2aXBfcHJvZHVjdDogMQogICAgICB9LAogICAgICBicm9rZXJhZ2U6ICcnLAogICAgICBicm9rZXJhZ2VfdHdvOiAnJywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGF0dHJEYXRhOiBbXSwKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICBsZXZlbExpc3Q6IFtdLAogICAgICB2aXBTZXRUeXBlOiAwLAogICAgICB2aXBTZXROdW06ICcnLAogICAgICBsZXZlbFNldFR5cGU6IDAsCiAgICAgIGxldmVsU2V0TnVtOiAnJywKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIHZpcFNldFBvcG92ZXJQb3B2ZXI6IGZhbHNlLAogICAgICBwb3BvdmVyVHdvOiBmYWxzZQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBwcm9kdWN0SWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmlzaWJsZTogZnVuY3Rpb24gdmlzaWJsZSh2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgbWV0aG9kczogewogICAgdmlwUHJpY2VSZXBsYWNlOiBmdW5jdGlvbiB2aXBQcmljZVJlcGxhY2UodmFsdWUpIHsKICAgICAgdGhpcy52aXBTZXROdW0gPSB2YWx1ZTsKICAgIH0sCiAgICBsZXZlbFByaWNlUmVwbGFjZTogZnVuY3Rpb24gbGV2ZWxQcmljZVJlcGxhY2UodmFsdWUpIHsKICAgICAgdGhpcy5sZXZlbFNldE51bSA9IHZhbHVlOwogICAgfSwKICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBpc1N1Y2Nlc3MgPSB0cnVlLAogICAgICAgIHN0ZXAgPSB0cnVlOwogICAgICBpZiAodGhpcy5mb3JtRGF0YS5pc192aXApIHsKICAgICAgICB0aGlzLmF0dHJEYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChpdGVtLnZpcF9wcmljZSA9PSAwICYmIF90aGlzLmZvcm1EYXRhLmlzX3ZpcCkgewogICAgICAgICAgICBpc1N1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChOdW1iZXIoaXRlbS52aXBfcHJpY2UpID4gTnVtYmVyKGl0ZW0ucHJpY2UpICYmIF90aGlzLmZvcm1EYXRhLmlzX3ZpcCkgewogICAgICAgICAgICBzdGVwID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKCFpc1N1Y2Nlc3MpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfkvJrlkZjku7fkuI3lj6/kuLowJyk7CiAgICAgIGlmICghc3RlcCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S8muWRmOS7t+S4jeWPr+Wkp+S6juWUruS7tycpOwogICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgdmFyIGRhdGEgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuZm9ybURhdGEpLCB7fSwgewogICAgICAgIGF0dHJfdmFsdWU6IHRoaXMuYXR0ckRhdGEKICAgICAgfSk7CiAgICAgIHByb2R1Y3RCcm9rZXJhZ2VVcGRhdGUodGhpcy5wcm9kdWN0SWQsIDIsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgX3RoaXMuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICBfdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIubXNnKTsKICAgICAgICBfdGhpcy5kaXNhYmxlZCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBjbG9zZVZpcFNldDogZnVuY3Rpb24gY2xvc2VWaXBTZXQoaSkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLiRyZWZzWyd2aXBTZXRQb3BvdmVyJ10uZG9DbG9zZSk7CiAgICAgIHRoaXMudmlwU2V0UG9wb3ZlclBvcHZlciA9IGZhbHNlOwogICAgICB0aGlzLiRyZWZzLnZpcFNldFBvcG92ZXIuZG9DbG9zZSgpOwogICAgICB0aGlzLnZpcFNldFR5cGUgPSAwOwogICAgICB0aGlzLnZpcFNldE51bSA9ICcnOwogICAgfSwKICAgIGNsb3NlTGV2ZWxTZXQ6IGZ1bmN0aW9uIGNsb3NlTGV2ZWxTZXQoaSkgewogICAgICB0aGlzLnBvcG92ZXJUd28gPSBmYWxzZTsKICAgICAgLy8gdGhpcy4kcmVmc1sncG9wb3ZlclJlZl8nICsgaV0uZG9DbG9zZSgpOyAvL+WFs+mXreeahAogICAgICB0aGlzLmxldmVsU2V0VHlwZSA9IDA7CiAgICAgIHRoaXMubGV2ZWxTZXROdW0gPSAnJzsKICAgIH0sCiAgICB2aXBTZXRDb25maXJtOiBmdW5jdGlvbiB2aXBTZXRDb25maXJtKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKHRoaXMudmlwU2V0TnVtID09IDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfkvJrlkZjku7fkuI3lj6/kuLowJyk7CiAgICAgIGlmICh0aGlzLnZpcFNldFR5cGUgPT0gMSAmJiB0aGlzLnZpcFNldE51bSA+IDEwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aKmOaJo+S4jeWPr+i2hei/hzEwMCcpOwogICAgICB0aGlzLmF0dHJEYXRhLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChfdGhpczIudmlwU2V0VHlwZSA9PSAwKSB7CiAgICAgICAgICBpdGVtLnZpcF9wcmljZSA9IF90aGlzMi52aXBTZXROdW07CiAgICAgICAgfSBlbHNlIGlmIChfdGhpczIudmlwU2V0VHlwZSA9PSAxKSB7CiAgICAgICAgICBpdGVtLnZpcF9wcmljZSA9IChfdGhpczIudmlwU2V0TnVtIC8gMTAwICogaXRlbS5wcmljZSkudG9GaXhlZCgyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaXRlbS52aXBfcHJpY2UgPSBpdGVtLnByaWNlIC0gX3RoaXMyLnZpcFNldE51bTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmNsb3NlVmlwU2V0KCk7CiAgICB9LAogICAgbGV2ZWxTZXRDb25maXJtOiBmdW5jdGlvbiBsZXZlbFNldENvbmZpcm0oaW5kZXgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGlmICh0aGlzLmxldmVsU2V0TnVtID09IDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfnrYnnuqfkvJrlkZjku7fkuI3lj6/kuLowJyk7CiAgICAgIGlmICh0aGlzLmxldmVsU2V0VHlwZSA9PSAxICYmIHRoaXMubGV2ZWxTZXROdW0gPiAxMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfmipjmiaPkuI3lj6/otoXov4cxMDAnKTsKICAgICAgdGhpcy5hdHRyRGF0YS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoX3RoaXMzLmxldmVsU2V0VHlwZSA9PSAwKSB7CiAgICAgICAgICBpdGVtLmxldmVsX3ByaWNlW2luZGV4XS5wcmljZSA9IF90aGlzMy5sZXZlbFNldE51bTsKICAgICAgICB9IGVsc2UgaWYgKF90aGlzMy5sZXZlbFNldFR5cGUgPT0gMSkgewogICAgICAgICAgaXRlbS5sZXZlbF9wcmljZVtpbmRleF0ucHJpY2UgPSAoX3RoaXMzLmxldmVsU2V0TnVtIC8gMTAwICogaXRlbS5wcmljZSkudG9GaXhlZCgyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaXRlbS5sZXZlbF9wcmljZVtpbmRleF0ucHJpY2UgPSBpdGVtLnByaWNlIC0gX3RoaXMzLmxldmVsU2V0TnVtOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuY2xvc2VMZXZlbFNldChpbmRleCk7CiAgICB9LAogICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkgewogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBjaGFuZ2VMZXZlbFR5cGU6IGZ1bmN0aW9uIGNoYW5nZUxldmVsVHlwZSh0eXBlKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLmF0dHJEYXRhLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIF90aGlzNC4kc2V0KGl0ZW0sICdsZXZlbF9wcmljZScsIF90aGlzNC5sZXZlbExpc3QubWFwKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiB2YWwuaWQsCiAgICAgICAgICAgIHByaWNlOiB0eXBlID09IDEgPyB2YWwuZGlzY291bnQgKiAxMDAgOiAwCiAgICAgICAgICB9OwogICAgICAgIH0pKTsKICAgICAgfSk7CiAgICB9LAogICAgdmlwUm93UmVwbGFjZTogZnVuY3Rpb24gdmlwUm93UmVwbGFjZShyb3cpIHsKICAgICAgLy8gcm93LnZpcF9wcmljZSA9IHJvdy52aXBfcHJpY2UucmVwbGFjZSgvXi18XEQvZywgJycpOwogICAgfSwKICAgIGxldmVsUm93UmVwbGFjZTogZnVuY3Rpb24gbGV2ZWxSb3dSZXBsYWNlKHJvdywgaSkgewogICAgICByb3cubGV2ZWxfcHJpY2VbaV0ucHJpY2UgPSByb3cubGV2ZWxfcHJpY2VbaV0ucHJpY2UucmVwbGFjZSgvXi18XEQvZywgJycpOwogICAgfSwKICAgIGdldERhdGE6IGZ1bmN0aW9uIGdldERhdGEoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICAvL+iOt+WPluS6p+WTgeWxnuaApwogICAgICBwcm9kdWN0QnJva2VyYWdlKHRoaXMucHJvZHVjdElkLCAyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczUuZm9ybURhdGEuaXNfdmlwID0gcmVzLmRhdGEuc3RvcmVJbmZvLmlzX3ZpcDsKICAgICAgICBfdGhpczUuZm9ybURhdGEudmlwX3Byb2R1Y3QgPSByZXMuZGF0YS5zdG9yZUluZm8udmlwX3Byb2R1Y3Q7CiAgICAgICAgX3RoaXM1LmF0dHJEYXRhID0gT2JqZWN0LnZhbHVlcyhyZXMuZGF0YS5hdHRyVmFsdWUpOwogICAgICAgIC8vIHRoaXMubGV2ZWxMaXN0ID0gcmVzLmRhdGEubGV2ZWxfbGlzdDsKICAgICAgICAvLyBpZiAocmVzLmRhdGEubGV2ZWxfbGlzdC5sZW5ndGgpIHsKICAgICAgICAvLyAgIHRoaXMuYXR0ckRhdGEubWFwKChpdGVtKSA9PiB7CiAgICAgICAgLy8gICAgIGlmICghaXRlbS5sZXZlbF9wcmljZS5sZW5ndGgpIHsKICAgICAgICAvLyAgICAgICB0aGlzLiRzZXQoCiAgICAgICAgLy8gICAgICAgICBpdGVtLAogICAgICAgIC8vICAgICAgICAgJ2xldmVsX3ByaWNlJywKICAgICAgICAvLyAgICAgICAgIHJlcy5kYXRhLmxldmVsX2xpc3QubWFwKCh2YWwpID0+IHsKICAgICAgICAvLyAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAvLyAgICAgICAgICAgICBpZDogdmFsLmlkLAogICAgICAgIC8vICAgICAgICAgICAgIHByaWNlOiByZXMuZGF0YS5zdG9yZUluZm8uaXNfdmlwID09IDEgPyB2YWwuZGlzY291bnQgKiAxMDAgOiAwLAogICAgICAgIC8vICAgICAgICAgICB9OwogICAgICAgIC8vICAgICAgICAgfSksCiAgICAgICAgLy8gICAgICAgKTsKICAgICAgICAvLyAgICAgfQogICAgICAgIC8vICAgfSk7CiAgICAgICAgLy8gfQogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VWaXA6IGZ1bmN0aW9uIGNoYW5nZVZpcChpc192aXApIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHRoaXMuYXR0ckRhdGEubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgX3RoaXM2LiRzZXQoaXRlbSwgJ3ZpcF9wcmljZScsIGlzX3ZpcCA9PSAxID8gaXRlbS5wcmljZSA6IDApOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["productBrokerage","productBrokerageUpdate","name","data","formData","is_vip","vip_product","brokerage","brokerage_two","loading","attrData","disabled","levelList","vipSetType","vipSetNum","levelSetType","levelSetNum","visible","vipSetPopoverPopver","popoverTwo","props","productId","type","Number","default","watch","val","getData","created","methods","vipPriceReplace","value","levelPriceReplace","submitForm","_this","isSuccess","step","forEach","item","vip_price","price","$message","error","_objectSpread","attr_value","then","res","success","msg","catch","err","closeVipSet","i","console","log","$refs","doClose","vipSetPopover","closeLevelSet","vipSetConfirm","_this2","map","toFixed","levelSetConfirm","index","_this3","level_price","onCancel","changeLevelType","_this4","$set","id","discount","vipRowReplace","row","levelRowReplace","replace","_this5","storeInfo","Object","values","attrValue","changeVip","_this6"],"sources":["src/pages/product/components/vipPriceSet.vue"],"sourcesContent":["<template>\n  <div>\n    <el-dialog :visible.sync=\"visible\" title=\"自定义会员价\" width=\"900\"\n      ><el-form :model=\"formData\" label-width=\"120px\">\n        <el-form-item label=\"付费会员专属：\">\n          <el-switch\n            v-model=\"formData.vip_product\"\n            :active-value=\"1\"\n            :inactive-value=\"0\"\n            active-text=\"开启\"\n            inactive-text=\"关闭\"\n            size=\"large\"\n            class=\"defineSwitch\"\n          >\n          </el-switch>\n        </el-form-item>\n        <el-form-item label=\"付费会员价：\">\n          <el-switch\n            v-model=\"formData.is_vip\"\n            :active-value=\"1\"\n            :inactive-value=\"0\"\n            active-text=\"开启\"\n            inactive-text=\"关闭\"\n            size=\"large\"\n            class=\"defineSwitch\"\n            @change=\"changeVip\"\n          >\n          </el-switch>\n        </el-form-item>\n        <el-form-item label-width=\"0px\">\n          <el-table size=\"small\" border max-height=\"460\" :data=\"attrData\" style=\"width: 100%\">\n            <el-table-column prop=\"pic\" label=\"规格图\" min-width=\"90\" align=\"center\">\n              <template slot-scope=\"scope\">\n                <div class=\"tabBox_img m-auto\" v-viewer>\n                  <img v-lazy=\"scope.row.pic\" />\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"suk\" label=\"产品规格\" min-width=\"120\" align=\"center\"></el-table-column>\n            <el-table-column prop=\"price\" label=\"售价\" min-width=\"120\" align=\"center\"></el-table-column>\n            <el-table-column min-width=\"140\" align=\"center\" v-if=\"formData.is_vip == 1\">\n              <template slot=\"header\" slot-scope=\"scope\">\n                <span>付费会员价</span>\n                <el-popover\n                  ref=\"vipSetPopover\"\n                  :value.sync=\"vipSetPopoverPopver\"\n                  placement=\"top\"\n                  width=\"290\"\n                  trigger=\"click\"\n                >\n                  <div class=\"pop-title\">批量修改本列</div>\n                  <div class=\"mt-14\">\n                    <el-radio-group v-model=\"vipSetType\">\n                      <el-radio :label=\"0\">指定价格</el-radio>\n                      <el-radio :label=\"1\">折扣</el-radio>\n                      <el-radio :label=\"2\">减现</el-radio>\n                    </el-radio-group>\n                  </div>\n                  <div class=\"mt10 mb10 acea-row row-middle\">\n                    <span class=\"mr5\" v-show=\"vipSetType == 2\">减</span>\n                    <el-input type=\"number\" class=\"popover-input\" v-model=\"vipSetNum\">\n                      <template slot=\"suffix\">\n                        <span v-show=\"vipSetType == 0\">元</span>\n                        <span v-show=\"vipSetType == 1\">%</span>\n                      </template>\n                    </el-input>\n                    <div class=\"acea-row row-right row-middle ml14\">\n                      <el-button size=\"small\" @click=\"closeVipSet\">取消</el-button>\n                      <el-button size=\"small\" type=\"primary\" class=\"ml-14\" @click=\"vipSetConfirm\">确认</el-button>\n                    </div>\n                  </div>\n                  <span class=\"iconfont iconbianji1\" slot=\"reference\" @click.stop=\"vipSetPopoverPopver = true\"></span>\n                </el-popover>\n              </template>\n              <template slot-scope=\"scope\">\n                <el-input type=\"number\" v-model=\"scope.row.vip_price\" @change=\"vipRowReplace(scope.row)\">\n                  <template slot=\"suffix\">\n                    <span>元</span>\n                  </template>\n                </el-input>\n                <div class=\"flex-x-center red\" v-show=\"scope.row.vip_price == 0\">会员价不可为0</div>\n                <div class=\"flex-x-center red\" v-show=\"Number(scope.row.vip_price) > Number(scope.row.price)\">\n                  会员价不可大于售价\n                </div>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"onCancel\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\" :disabled=\"disabled\" class=\"ml-14\">确认</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { productBrokerage, productBrokerageUpdate } from '@/api/product';\nexport default {\n  name: 'vipPriceSet',\n  data() {\n    return {\n      formData: {\n        is_vip: 0,\n        vip_product: 1,\n      },\n      brokerage: '',\n      brokerage_two: '',\n      loading: false,\n      attrData: [],\n      disabled: false,\n      levelList: [],\n      vipSetType: 0,\n      vipSetNum: '',\n      levelSetType: 0,\n      levelSetNum: '',\n      visible: false,\n      vipSetPopoverPopver: false,\n      popoverTwo: false,\n    };\n  },\n  props: {\n    productId: {\n      type: Number,\n      default: 0,\n    },\n  },\n  watch: {\n    visible(val) {\n      if (val) {\n        this.getData();\n      }\n    },\n  },\n  created() {},\n  methods: {\n    vipPriceReplace(value) {\n      this.vipSetNum = value;\n    },\n    levelPriceReplace(value) {\n      this.levelSetNum = value;\n    },\n    submitForm() {\n      let isSuccess = true,\n        step = true;\n      if (this.formData.is_vip) {\n        this.attrData.forEach((item) => {\n          if (item.vip_price == 0 && this.formData.is_vip) {\n            isSuccess = false;\n          }\n          if (Number(item.vip_price) > Number(item.price) && this.formData.is_vip) {\n            step = false;\n          }\n        });\n      }\n      if (!isSuccess) return this.$message.error('会员价不可为0');\n      if (!step) return this.$message.error('会员价不可大于售价');\n      this.disabled = true;\n      let data = {\n        ...this.formData,\n        attr_value: this.attrData,\n      };\n      productBrokerageUpdate(this.productId, 2, data)\n        .then((res) => {\n          this.$message.success(res.msg);\n          this.disabled = false;\n          this.visible = false;\n        })\n        .catch((err) => {\n          this.$message.error(err.msg);\n          this.disabled = false;\n        });\n    },\n    closeVipSet(i) {\n      console.log(this.$refs['vipSetPopover'].doClose);\n      this.vipSetPopoverPopver = false;\n      this.$refs.vipSetPopover.doClose();\n      this.vipSetType = 0;\n      this.vipSetNum = '';\n    },\n    closeLevelSet(i) {\n      this.popoverTwo = false;\n      // this.$refs['popoverRef_' + i].doClose(); //关闭的\n      this.levelSetType = 0;\n      this.levelSetNum = '';\n    },\n    vipSetConfirm() {\n      if (this.vipSetNum == 0) return this.$message.error('会员价不可为0');\n      if (this.vipSetType == 1 && this.vipSetNum > 100) return this.$message.error('折扣不可超过100');\n      this.attrData.map((item) => {\n        if (this.vipSetType == 0) {\n          item.vip_price = this.vipSetNum;\n        } else if (this.vipSetType == 1) {\n          item.vip_price = ((this.vipSetNum / 100) * item.price).toFixed(2);\n        } else {\n          item.vip_price = item.price - this.vipSetNum;\n        }\n      });\n      this.closeVipSet();\n    },\n    levelSetConfirm(index) {\n      if (this.levelSetNum == 0) return this.$message.error('等级会员价不可为0');\n      if (this.levelSetType == 1 && this.levelSetNum > 100) return this.$message.error('折扣不可超过100');\n      this.attrData.map((item) => {\n        if (this.levelSetType == 0) {\n          item.level_price[index].price = this.levelSetNum;\n        } else if (this.levelSetType == 1) {\n          item.level_price[index].price = ((this.levelSetNum / 100) * item.price).toFixed(2);\n        } else {\n          item.level_price[index].price = item.price - this.levelSetNum;\n        }\n      });\n      this.closeLevelSet(index);\n    },\n    onCancel() {\n      this.visible = false;\n    },\n    changeLevelType(type) {\n      this.attrData.map((item) => {\n        this.$set(\n          item,\n          'level_price',\n          this.levelList.map((val) => {\n            return {\n              id: val.id,\n              price: type == 1 ? val.discount * 100 : 0,\n            };\n          }),\n        );\n      });\n    },\n    vipRowReplace(row) {\n      // row.vip_price = row.vip_price.replace(/^-|\\D/g, '');\n    },\n    levelRowReplace(row, i) {\n      row.level_price[i].price = row.level_price[i].price.replace(/^-|\\D/g, '');\n    },\n    getData() {\n      //获取产品属性\n      productBrokerage(this.productId, 2).then((res) => {\n        this.formData.is_vip = res.data.storeInfo.is_vip;\n        this.formData.vip_product = res.data.storeInfo.vip_product;\n        this.attrData = Object.values(res.data.attrValue);\n        // this.levelList = res.data.level_list;\n        // if (res.data.level_list.length) {\n        //   this.attrData.map((item) => {\n        //     if (!item.level_price.length) {\n        //       this.$set(\n        //         item,\n        //         'level_price',\n        //         res.data.level_list.map((val) => {\n        //           return {\n        //             id: val.id,\n        //             price: res.data.storeInfo.is_vip == 1 ? val.discount * 100 : 0,\n        //           };\n        //         }),\n        //       );\n        //     }\n        //   });\n        // }\n      });\n    },\n    changeVip(is_vip) {\n      this.attrData.map((item) => {\n        this.$set(item, 'vip_price', is_vip == 1 ? item.price : 0);\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n.iconbianji1 {\n  font-size: 12px;\n  padding-left: 4px;\n  cursor: pointer;\n}\n\n.popover-input {\n  width: 100px;\n}\n\n.w-250 {\n  width: 250px;\n}\n\n.pop-title {\n  font-size: 14px;\n  font-weight: bold;\n  margin-bottom: 14px;\n}\n\n.red {\n  color: #e93323;\n}\n\n.h-23 {\n  height: 23px;\n}\n</style>\n"],"mappings":";;;;;;;;;;;;AAiGA,SAAAA,gBAAA,EAAAC,sBAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;QACAC,MAAA;QACAC,WAAA;MACA;MACAC,SAAA;MACAC,aAAA;MACAC,OAAA;MACAC,QAAA;MACAC,QAAA;MACAC,SAAA;MACAC,UAAA;MACAC,SAAA;MACAC,YAAA;MACAC,WAAA;MACAC,OAAA;MACAC,mBAAA;MACAC,UAAA;IACA;EACA;EACAC,KAAA;IACAC,SAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACAR,OAAA,WAAAA,QAAAS,GAAA;MACA,IAAAA,GAAA;QACA,KAAAC,OAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;EACAC,OAAA;IACAC,eAAA,WAAAA,gBAAAC,KAAA;MACA,KAAAjB,SAAA,GAAAiB,KAAA;IACA;IACAC,iBAAA,WAAAA,kBAAAD,KAAA;MACA,KAAAf,WAAA,GAAAe,KAAA;IACA;IACAE,UAAA,WAAAA,WAAA;MAAA,IAAAC,KAAA;MACA,IAAAC,SAAA;QACAC,IAAA;MACA,SAAAhC,QAAA,CAAAC,MAAA;QACA,KAAAK,QAAA,CAAA2B,OAAA,WAAAC,IAAA;UACA,IAAAA,IAAA,CAAAC,SAAA,SAAAL,KAAA,CAAA9B,QAAA,CAAAC,MAAA;YACA8B,SAAA;UACA;UACA,IAAAZ,MAAA,CAAAe,IAAA,CAAAC,SAAA,IAAAhB,MAAA,CAAAe,IAAA,CAAAE,KAAA,KAAAN,KAAA,CAAA9B,QAAA,CAAAC,MAAA;YACA+B,IAAA;UACA;QACA;MACA;MACA,KAAAD,SAAA,cAAAM,QAAA,CAAAC,KAAA;MACA,KAAAN,IAAA,cAAAK,QAAA,CAAAC,KAAA;MACA,KAAA/B,QAAA;MACA,IAAAR,IAAA,GAAAwC,aAAA,CAAAA,aAAA,KACA,KAAAvC,QAAA;QACAwC,UAAA,OAAAlC;MAAA,EACA;MACAT,sBAAA,MAAAoB,SAAA,KAAAlB,IAAA,EACA0C,IAAA,WAAAC,GAAA;QACAZ,KAAA,CAAAO,QAAA,CAAAM,OAAA,CAAAD,GAAA,CAAAE,GAAA;QACAd,KAAA,CAAAvB,QAAA;QACAuB,KAAA,CAAAjB,OAAA;MACA,GACAgC,KAAA,WAAAC,GAAA;QACAhB,KAAA,CAAAO,QAAA,CAAAC,KAAA,CAAAQ,GAAA,CAAAF,GAAA;QACAd,KAAA,CAAAvB,QAAA;MACA;IACA;IACAwC,WAAA,WAAAA,YAAAC,CAAA;MACAC,OAAA,CAAAC,GAAA,MAAAC,KAAA,kBAAAC,OAAA;MACA,KAAAtC,mBAAA;MACA,KAAAqC,KAAA,CAAAE,aAAA,CAAAD,OAAA;MACA,KAAA3C,UAAA;MACA,KAAAC,SAAA;IACA;IACA4C,aAAA,WAAAA,cAAAN,CAAA;MACA,KAAAjC,UAAA;MACA;MACA,KAAAJ,YAAA;MACA,KAAAC,WAAA;IACA;IACA2C,aAAA,WAAAA,cAAA;MAAA,IAAAC,MAAA;MACA,SAAA9C,SAAA,mBAAA2B,QAAA,CAAAC,KAAA;MACA,SAAA7B,UAAA,cAAAC,SAAA,oBAAA2B,QAAA,CAAAC,KAAA;MACA,KAAAhC,QAAA,CAAAmD,GAAA,WAAAvB,IAAA;QACA,IAAAsB,MAAA,CAAA/C,UAAA;UACAyB,IAAA,CAAAC,SAAA,GAAAqB,MAAA,CAAA9C,SAAA;QACA,WAAA8C,MAAA,CAAA/C,UAAA;UACAyB,IAAA,CAAAC,SAAA,IAAAqB,MAAA,CAAA9C,SAAA,SAAAwB,IAAA,CAAAE,KAAA,EAAAsB,OAAA;QACA;UACAxB,IAAA,CAAAC,SAAA,GAAAD,IAAA,CAAAE,KAAA,GAAAoB,MAAA,CAAA9C,SAAA;QACA;MACA;MACA,KAAAqC,WAAA;IACA;IACAY,eAAA,WAAAA,gBAAAC,KAAA;MAAA,IAAAC,MAAA;MACA,SAAAjD,WAAA,mBAAAyB,QAAA,CAAAC,KAAA;MACA,SAAA3B,YAAA,cAAAC,WAAA,oBAAAyB,QAAA,CAAAC,KAAA;MACA,KAAAhC,QAAA,CAAAmD,GAAA,WAAAvB,IAAA;QACA,IAAA2B,MAAA,CAAAlD,YAAA;UACAuB,IAAA,CAAA4B,WAAA,CAAAF,KAAA,EAAAxB,KAAA,GAAAyB,MAAA,CAAAjD,WAAA;QACA,WAAAiD,MAAA,CAAAlD,YAAA;UACAuB,IAAA,CAAA4B,WAAA,CAAAF,KAAA,EAAAxB,KAAA,IAAAyB,MAAA,CAAAjD,WAAA,SAAAsB,IAAA,CAAAE,KAAA,EAAAsB,OAAA;QACA;UACAxB,IAAA,CAAA4B,WAAA,CAAAF,KAAA,EAAAxB,KAAA,GAAAF,IAAA,CAAAE,KAAA,GAAAyB,MAAA,CAAAjD,WAAA;QACA;MACA;MACA,KAAA0C,aAAA,CAAAM,KAAA;IACA;IACAG,QAAA,WAAAA,SAAA;MACA,KAAAlD,OAAA;IACA;IACAmD,eAAA,WAAAA,gBAAA9C,IAAA;MAAA,IAAA+C,MAAA;MACA,KAAA3D,QAAA,CAAAmD,GAAA,WAAAvB,IAAA;QACA+B,MAAA,CAAAC,IAAA,CACAhC,IAAA,EACA,eACA+B,MAAA,CAAAzD,SAAA,CAAAiD,GAAA,WAAAnC,GAAA;UACA;YACA6C,EAAA,EAAA7C,GAAA,CAAA6C,EAAA;YACA/B,KAAA,EAAAlB,IAAA,QAAAI,GAAA,CAAA8C,QAAA;UACA;QACA,EACA;MACA;IACA;IACAC,aAAA,WAAAA,cAAAC,GAAA;MACA;IAAA,CACA;IACAC,eAAA,WAAAA,gBAAAD,GAAA,EAAAtB,CAAA;MACAsB,GAAA,CAAAR,WAAA,CAAAd,CAAA,EAAAZ,KAAA,GAAAkC,GAAA,CAAAR,WAAA,CAAAd,CAAA,EAAAZ,KAAA,CAAAoC,OAAA;IACA;IACAjD,OAAA,WAAAA,QAAA;MAAA,IAAAkD,MAAA;MACA;MACA7E,gBAAA,MAAAqB,SAAA,KAAAwB,IAAA,WAAAC,GAAA;QACA+B,MAAA,CAAAzE,QAAA,CAAAC,MAAA,GAAAyC,GAAA,CAAA3C,IAAA,CAAA2E,SAAA,CAAAzE,MAAA;QACAwE,MAAA,CAAAzE,QAAA,CAAAE,WAAA,GAAAwC,GAAA,CAAA3C,IAAA,CAAA2E,SAAA,CAAAxE,WAAA;QACAuE,MAAA,CAAAnE,QAAA,GAAAqE,MAAA,CAAAC,MAAA,CAAAlC,GAAA,CAAA3C,IAAA,CAAA8E,SAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAC,SAAA,WAAAA,UAAA7E,MAAA;MAAA,IAAA8E,MAAA;MACA,KAAAzE,QAAA,CAAAmD,GAAA,WAAAvB,IAAA;QACA6C,MAAA,CAAAb,IAAA,CAAAhC,IAAA,eAAAjC,MAAA,QAAAiC,IAAA,CAAAE,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}