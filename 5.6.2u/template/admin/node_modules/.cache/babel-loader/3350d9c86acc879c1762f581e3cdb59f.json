{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\setting\\notification\\notificationEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\setting\\notification\\notificationEdit.vue","mtime":1725344852908},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0IHsgZ2V0Tm90aWZpY2F0aW9uSW5mbywgZ2V0Tm90aWZpY2F0aW9uU2F2ZSB9IGZyb20gJ0AvYXBpL25vdGlmaWNhdGlvbi5qcyc7CmltcG9ydCBrZXlzTGlzdCBmcm9tICcuL2NvbXBvbmVudHMva2V5c0xpc3QudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIGtleXNMaXN0OiBrZXlzTGlzdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYnM6IFt7CiAgICAgICAgdGl0bGU6ICfns7vnu5/pgJrnn6UnLAogICAgICAgIHNsb3Q6ICdpc19zeXN0ZW0nCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogJ+efreS/oemAmuefpScsCiAgICAgICAgc2xvdDogJ2lzX3NtcycKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5b6u5L+h5qih5p2/5raI5oGvJywKICAgICAgICBzbG90OiAnaXNfd2VjaGF0JwogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICflvq7kv6HlsI/nqIvluo/mj5DphpInLAogICAgICAgIHNsb3Q6ICdpc19yb3V0aW5lJwogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICfkvIHkuJrlvq7kv6EnLAogICAgICAgIHNsb3Q6ICdpc19lbnRfd2VjaGF0JwogICAgICB9XSwKICAgICAgdGFic0xpc3Q6IFtdLAogICAgICBmb3JtRGF0YToge30sCiAgICAgIGlkOiAwLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICB0YWdOYW1lOiAnaXNfc3lzdGVtJywKICAgICAgcnVsZVZhbGlkYXRlOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemAmuefpeWcuuaZrycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICB0aXRsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemAmuefpeWcuuaZrycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBjb250ZW50OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6YCa55+l5YaF5a65JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGtleUxpc3Q6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgIHRoaXMuZ2V0RGF0YSh0aGlzLmlkLCB0aGlzLnRhZ05hbWUsIDEpOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ29udGVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ29udGVudENoYW5nZShlKSB7CiAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnR5cGVfbiA9PSAzKSB7CiAgICAgICAgdmFyIHJlZ2V4ID0gL3t7KC4qPylcLi9nOwogICAgICAgIHZhciBtYXRjaDsKICAgICAgICB0aGlzLmtleUxpc3QgPSBbXTsKICAgICAgICB3aGlsZSAobWF0Y2ggPSByZWdleC5leGVjKGUpKSB7CiAgICAgICAgICB0aGlzLmtleUxpc3QucHVzaCh7CiAgICAgICAgICAgIGtleTogbWF0Y2hbMV0sCiAgICAgICAgICAgIHZhbHVlOiAnJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoaW5kZXgpIHsKICAgICAgdGhpcy5rZXlMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgLy8g5paw5aKe5Y2h5a+GCiAgICBoYW5kbGVBZGQ6IGZ1bmN0aW9uIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy5rZXlMaXN0LnB1c2goewogICAgICAgIGtleTogJycsCiAgICAgICAgdmFsdWU6ICcnCiAgICAgIH0pOwogICAgfSwKICAgIGNoYW5nZVRhYnM6IGZ1bmN0aW9uIGNoYW5nZVRhYnMoKSB7CiAgICAgIHRoaXMuZ2V0RGF0YSh0aGlzLmlkLCB0aGlzLnRhZ05hbWUpOwogICAgfSwKICAgIGdldERhdGE6IGZ1bmN0aW9uIGdldERhdGEoaWQsIG5hbWUsIGluaXQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5mb3JtRGF0YSA9IHt9OwogICAgICBnZXROb3RpZmljYXRpb25JbmZvKGlkLCBuYW1lKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoIV90aGlzLnRhYnNMaXN0Lmxlbmd0aCkgewogICAgICAgICAgX3RoaXMudGFicy5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhW3Yuc2xvdF0pIHsKICAgICAgICAgICAgICBfdGhpcy50YWJzTGlzdC5wdXNoKHYpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKGluaXQpIF90aGlzLnRhZ05hbWUgPSBfdGhpcy50YWJzTGlzdFswXS5zbG90OwogICAgICAgIF90aGlzLmZvcm1EYXRhID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMuZm9ybURhdGEudHlwZV9uID0gcmVzLmRhdGEudHlwZTsgLy8gLSAtIQogICAgICAgIF90aGlzLmZvcm1EYXRhLnR5cGUgPSBuYW1lOyAvLyDnsbvlnovlkI3np7AKICAgICAgICBfdGhpcy5mb3JtRGF0YS5pZCA9IGlkOwogICAgICAgIF90aGlzLmtleUxpc3QgPSByZXMuZGF0YS5rZXlfbGlzdCB8fCBbXTsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIubXNnKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQobmFtZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5mb3JtRGF0YS5rZXlfbGlzdCA9IHRoaXMua2V5TGlzdDsKICAgICAgZ2V0Tm90aWZpY2F0aW9uU2F2ZSh0aGlzLmZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygn6K6+572u5oiQ5YqfJyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVzZXQ6IGZ1bmN0aW9uIGhhbmRsZVJlc2V0KG5hbWUpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnKTsKICAgIH0sCiAgICBjaGFuZ2VWYWx1ZTogZnVuY3Rpb24gY2hhbmdlVmFsdWUoZSwgbmFtZSkgewogICAgICAvLyDojrflj5Zkb23lhYPntKAKICAgICAgdmFyIHRleHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5hbWUpOwogICAgICAvLyDojrflj5blhYnmoIfliJ3lp4vntKLlvJUKICAgICAgdmFyIGluZGV4ID0gdGV4dElucHV0LnNlbGVjdGlvblN0YXJ0OwogICAgICAvLyDmi7zmjqXlrZfnrKbkuLLnmoTlvaLlvI/mnaXlvpfliLDpnIDopoHnmoTlhoXlrrkKICAgICAgdGhpcy5mb3JtRGF0YVtuYW1lXSA9IHRoaXMuZm9ybURhdGFbbmFtZV0uc3Vic3RyaW5nKDAsIGluZGV4KSArIGUgKyB0aGlzLmZvcm1EYXRhW25hbWVdLnN1YnN0cmluZyhpbmRleCk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICB0ZXh0SW5wdXQuc2VsZWN0aW9uU3RhcnQgPSBpbmRleCArIGUubGVuZ3RoOwogICAgICAgIHRleHRJbnB1dC5zZWxlY3Rpb25FbmQgPSBpbmRleCArIGUubGVuZ3RoOwogICAgICAgIHRleHRJbnB1dC5mb2N1cygpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["getNotificationInfo","getNotificationSave","keysList","components","data","tabs","title","slot","tabsList","formData","id","loading","tagName","ruleValidate","name","required","message","trigger","content","keyList","created","$route","query","getData","methods","handleContentChange","e","type_n","regex","match","exec","push","key","value","handleRemove","index","splice","handleAdd","changeTabs","init","_this","then","res","length","map","v","type","key_list","catch","err","$message","error","msg","handleSubmit","_this2","success","handleReset","$emit","changeValue","textInput","document","getElementById","selectionStart","substring","$nextTick","selectionEnd","focus"],"sources":["src/pages/setting/notification/notificationEdit.vue"],"sourcesContent":["<template>\n  <div class=\"edit\">\n    <pages-header\n      ref=\"pageHeader\"\n      :title=\"$route.meta.title\"\n      :backUrl=\"$routeProStr + '/setting/notification/index'\"\n    ></pages-header>\n    <div class=\"tabs mt16\">\n      <el-row :gutter=\"32\">\n        <el-col :span=\"32\" class=\"demo-tabs-style1\" style=\"padding: 16px\">\n          <el-tabs v-model=\"tagName\" @tab-click=\"changeTabs\">\n            <el-tab-pane v-for=\"(item, index) in tabsList\" :key=\"index\" :name=\"item.slot\" :label=\"item.title\">\n              <el-form class=\"form-sty\" ref=\"formData\" :model=\"formData\" :rules=\"ruleValidate\" label-width=\"85px\">\n                <div v-if=\"item.slot === 'is_system' && !loading\">\n                  <el-form-item label=\"通知标题：\">\n                    <el-input\n                      v-model=\"formData.system_title\"\n                      placeholder=\"请输入通知标题\"\n                      style=\"width: 500px\"\n                    ></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"通知内容：\">\n                    <div class=\"content\">\n                      <el-input\n                        ref=\"system_text\"\n                        id=\"system_text\"\n                        v-model=\"formData.system_text\"\n                        type=\"textarea\"\n                        :autosize=\"{ minRows: 5, maxRows: 8 }\"\n                        placeholder=\"请输入通知内容\"\n                        style=\"width: 500px\"\n                      >\n                      </el-input>\n                      <div class=\"value-list\" v-if=\"formData.type_n == 3\">\n                        <el-popover placement=\"right\" width=\"200\" trigger=\"click\">\n                          <div class=\"variable\">\n                            <div\n                              class=\"item\"\n                              v-db-click\n                              @click=\"changeValue(i.value, 'system_text')\"\n                              v-for=\"(i, index) in formData.custom_variable\"\n                              :key=\"index\"\n                            >\n                              {{ i.label }}\n                            </div>\n                          </div>\n\n                          <i class=\"el-icon-link\" slot=\"reference\"></i>\n                        </el-popover>\n                      </div>\n                    </div>\n                    <div class=\"tips-info\" v-if=\"formData.type_n == 3\">可点击右下角图标,插入自定义变量</div>\n                  </el-form-item>\n                  <el-form-item label=\"状态：\" prop=\"is_system\">\n                    <el-radio-group v-model=\"formData.is_system\">\n                      <el-radio :label=\"1\">开启</el-radio>\n                      <el-radio :label=\"2\">关闭</el-radio>\n                    </el-radio-group>\n                  </el-form-item>\n                </div>\n                <div v-if=\"item.slot === 'is_sms' && !loading\">\n                  <el-form-item label=\"短信模版ID：\">\n                    <el-input v-model=\"formData.sms_id\" placeholder=\"短信模版ID\" style=\"width: 500px\"></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"通知内容：\">\n                    <div class=\"content\">\n                      <el-input\n                        id=\"sms_text\"\n                        v-model=\"formData.sms_text\"\n                        type=\"textarea\"\n                        :disabled=\"formData.type_n != 3\"\n                        :autosize=\"{ minRows: 5, maxRows: 8 }\"\n                        placeholder=\"请输入通知内容\"\n                        style=\"width: 500px\"\n                      ></el-input>\n                      <div class=\"value-list\" v-if=\"formData.type_n == 3\">\n                        <el-popover placement=\"right\" width=\"200\" trigger=\"click\">\n                          <div class=\"variable\">\n                            <div\n                              class=\"item\"\n                              v-db-click\n                              @click=\"changeValue(i.value, 'sms_text')\"\n                              v-for=\"(i, index) in formData.custom_variable\"\n                              :key=\"index\"\n                            >\n                              {{ i.label }}\n                            </div>\n                          </div>\n\n                          <i class=\"el-icon-link\" slot=\"reference\"></i>\n                        </el-popover>\n                      </div>\n                    </div>\n                    <div class=\"tips-info\" v-if=\"formData.type_n == 3\">可点击右下角图标,插入自定义变量</div>\n                  </el-form-item>\n                  <el-form-item label=\"状态：\" prop=\"is_sms\">\n                    <el-radio-group v-model=\"formData.is_sms\">\n                      <el-radio :label=\"1\">开启</el-radio>\n                      <el-radio :label=\"2\">关闭</el-radio>\n                    </el-radio-group>\n                  </el-form-item>\n                </div>\n                <div v-else-if=\"item.slot === 'is_wechat' && !loading\">\n                  <el-form-item label=\"模板编号：\">\n                    <el-input\n                      v-model=\"formData.tempkey\"\n                      :disabled=\"formData.type_n !== 3\"\n                      placeholder=\"请输入通模板编号\"\n                      style=\"width: 500px\"\n                    ></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"模板ID：\">\n                    <el-input v-model=\"formData.tempid\" placeholder=\"请输入模板ID\" style=\"width: 500px\"></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"模板：\">\n                    <div class=\"content\">\n                      <el-input\n                        :disabled=\"formData.type_n !== 3\"\n                        v-model=\"formData.content\"\n                        type=\"textarea\"\n                        :autosize=\"{ minRows: 5, maxRows: 8 }\"\n                        placeholder=\"请输入模板\"\n                        style=\"width: 500px\"\n                        @input=\"handleContentChange\"\n                      ></el-input>\n                    </div>\n                  </el-form-item>\n                  <el-form-item label=\"字段：\" v-if=\"formData.type_n == 3 && keyList.length\">\n                    <div class=\"content\">\n                      <keys-list\n                        :key-list=\"keyList\"\n                        :variableList=\"formData.custom_variable\"\n                        @add=\"handleAdd\"\n                        @remove=\"handleRemove\"\n                      />\n                    </div>\n                  </el-form-item>\n                  <el-form-item label=\"跳转链接：\">\n                    <el-input\n                      v-model=\"formData.wechat_link\"\n                      placeholder=\"请输入模版跳转链接，可携带参数\"\n                      style=\"width: 500px\"\n                    ></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"跳转小程序：\" prop=\"wechat_to_routine\">\n                    <el-radio-group v-model=\"formData.wechat_to_routine\">\n                      <el-radio :label=\"1\">开启</el-radio>\n                      <el-radio :label=\"0\">关闭</el-radio>\n                    </el-radio-group>\n                    <div class=\"tips-info\">\n                      开启之后，点击模版消息，跳转小程序对应的页面，需要小程序已经审核上线才可使用\n                    </div>\n                  </el-form-item>\n                  <el-form-item label=\"状态：\" prop=\"is_wechat\">\n                    <el-radio-group v-model=\"formData.is_wechat\">\n                      <el-radio :label=\"1\">开启</el-radio>\n                      <el-radio :label=\"2\">关闭</el-radio>\n                    </el-radio-group>\n                  </el-form-item>\n                </div>\n                <div v-else-if=\"item.slot === 'is_routine' && !loading\">\n                  <el-form-item label=\"模板编号：\">\n                    <el-input\n                      v-model=\"formData.tempkey\"\n                      :disabled=\"formData.type_n !== 3\"\n                      placeholder=\"请输入通模板编号\"\n                      style=\"width: 500px\"\n                    ></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"模板ID：\">\n                    <el-input v-model=\"formData.tempid\" placeholder=\"请输入模板ID\" style=\"width: 500px\"></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"模板：\">\n                    <div class=\"content\">\n                      <el-input\n                        :disabled=\"formData.type_n !== 3\"\n                        v-model=\"formData.content\"\n                        type=\"textarea\"\n                        :autosize=\"{ minRows: 5, maxRows: 8 }\"\n                        placeholder=\"请输入模板\"\n                        style=\"width: 500px\"\n                        @input=\"handleContentChange\"\n                      ></el-input>\n                    </div>\n                  </el-form-item>\n                  <el-form-item label=\"字段：\" v-if=\"formData.type_n == 3 && keyList.length\">\n                    <div class=\"content\">\n                      <keys-list\n                        :key-list=\"keyList\"\n                        :variableList=\"formData.custom_variable\"\n                        @add=\"handleAdd\"\n                        @remove=\"handleRemove\"\n                      />\n                    </div>\n                  </el-form-item>\n                  <el-form-item label=\"跳转链接：\">\n                    <el-input\n                      v-model=\"formData.routine_link\"\n                      placeholder=\"请输入模版跳转链接，可携带参数\"\n                      style=\"width: 500px\"\n                    ></el-input>\n                  </el-form-item>\n                  <el-form-item label=\"状态：\" prop=\"is_routine\">\n                    <el-radio-group v-model=\"formData.is_routine\">\n                      <el-radio :label=\"1\">开启</el-radio>\n                      <el-radio :label=\"2\">关闭</el-radio>\n                    </el-radio-group>\n                  </el-form-item>\n                </div>\n\n                <div v-else-if=\"item.slot === 'is_ent_wechat' && !loading\">\n                  <el-form-item label=\"通知内容：\">\n                    <div class=\"content\">\n                      <el-input\n                        id=\"ent_wechat_text\"\n                        v-model=\"formData.ent_wechat_text\"\n                        type=\"textarea\"\n                        :autosize=\"{ minRows: 5, maxRows: 8 }\"\n                        placeholder=\"请输入通知内容\"\n                        style=\"width: 500px\"\n                      ></el-input>\n                      <div class=\"value-list\" v-if=\"formData.type_n == 3\">\n                        <el-popover placement=\"right\" width=\"200\" trigger=\"click\">\n                          <div class=\"variable\">\n                            <div\n                              class=\"item\"\n                              v-db-click\n                              @click=\"changeValue(i.value, 'ent_wechat_text')\"\n                              v-for=\"(i, index) in formData.custom_variable\"\n                              :key=\"index\"\n                            >\n                              {{ i.label }}\n                            </div>\n                          </div>\n\n                          <i class=\"el-icon-link\" slot=\"reference\"></i>\n                        </el-popover>\n                      </div>\n                    </div>\n                    <div class=\"tips-info\" v-if=\"formData.type_n == 3\">可点击右下角图标,插入自定义变量</div>\n                  </el-form-item>\n                  <el-form-item label=\"机器人链接：\">\n                    <div class=\"content\">\n                      <el-input v-model=\"formData.url\" placeholder=\"请输入机器人链接\" style=\"width: 500px\"></el-input>\n                    </div>\n                  </el-form-item>\n                  <el-form-item label=\"状态：\" prop=\"is_ent_wechat\">\n                    <el-radio-group v-model=\"formData.is_ent_wechat\">\n                      <el-radio :label=\"1\">开启</el-radio>\n                      <el-radio :label=\"2\">关闭</el-radio>\n                    </el-radio-group>\n                  </el-form-item>\n                </div>\n                <el-form-item>\n                  <el-button type=\"primary\" v-db-click @click=\"handleSubmit('formData')\">提交</el-button>\n                </el-form-item>\n              </el-form>\n            </el-tab-pane>\n          </el-tabs>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getNotificationInfo, getNotificationSave } from '@/api/notification.js';\nimport keysList from './components/keysList.vue';\nexport default {\n  components: { keysList },\n  data() {\n    return {\n      tabs: [\n        {\n          title: '系统通知',\n          slot: 'is_system',\n        },\n        {\n          title: '短信通知',\n          slot: 'is_sms',\n        },\n        {\n          title: '微信模板消息',\n          slot: 'is_wechat',\n        },\n        {\n          title: '微信小程序提醒',\n          slot: 'is_routine',\n        },\n        {\n          title: '企业微信',\n          slot: 'is_ent_wechat',\n        },\n      ],\n      tabsList: [],\n      formData: {},\n      id: 0,\n      loading: true,\n      tagName: 'is_system',\n      ruleValidate: {\n        name: [\n          {\n            required: true,\n            message: '请输入通知场景',\n            trigger: 'blur',\n          },\n        ],\n        title: [\n          {\n            required: true,\n            message: '请输入通知场景',\n            trigger: 'blur',\n          },\n        ],\n        content: [\n          {\n            required: true,\n            message: '请输入通知内容',\n            trigger: 'blur',\n          },\n        ],\n      },\n      keyList: [],\n    };\n  },\n  created() {\n    this.id = this.$route.query.id;\n    this.getData(this.id, this.tagName, 1);\n  },\n  methods: {\n    handleContentChange(e) {\n      if (this.formData.type_n == 3) {\n        const regex = /{{(.*?)\\./g;\n        let match;\n        this.keyList = [];\n        while ((match = regex.exec(e))) {\n          this.keyList.push({\n            key: match[1],\n            value: '',\n          });\n        }\n      }\n    },\n    handleRemove(index) {\n      this.keyList.splice(index, 1);\n    },\n    // 新增卡密\n    handleAdd() {\n      this.keyList.push({\n        key: '',\n        value: '',\n      });\n    },\n    changeTabs() {\n      this.getData(this.id, this.tagName);\n    },\n    getData(id, name, init) {\n      this.loading = true;\n      this.formData = {};\n      getNotificationInfo(id, name)\n        .then((res) => {\n          if (!this.tabsList.length) {\n            this.tabs.map((v) => {\n              if (res.data[v.slot]) {\n                this.tabsList.push(v);\n              }\n            });\n          }\n          if (init) this.tagName = this.tabsList[0].slot;\n          this.formData = res.data;\n          this.formData.type_n = res.data.type; // - -!\n          this.formData.type = name; // 类型名称\n          this.formData.id = id;\n          this.keyList = res.data.key_list || [];\n          this.loading = false;\n        })\n        .catch((err) => {\n          this.$message.error(err.msg);\n        });\n    },\n    handleSubmit(name) {\n      this.formData.key_list = this.keyList;\n      getNotificationSave(this.formData)\n        .then((res) => {\n          this.$message.success('设置成功');\n        })\n        .catch((err) => {\n          this.$message.error(err);\n        });\n    },\n    handleReset(name) {\n      this.$emit('close');\n    },\n    changeValue(e, name) {\n      // 获取dom元素\n      let textInput = document.getElementById(name);\n      // 获取光标初始索引\n      let index = textInput.selectionStart;\n      // 拼接字符串的形式来得到需要的内容\n      this.formData[name] = this.formData[name].substring(0, index) + e + this.formData[name].substring(index);\n      this.$nextTick(() => {\n        textInput.selectionStart = index + e.length;\n        textInput.selectionEnd = index + e.length;\n        textInput.focus();\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.edit {\n}\n.header_top {\n  margin-bottom: 10px;\n}\n.demo-tabs-style1 > .ivu-tabs-card > .ivu-tabs-content {\n  height: 120px;\n  margin-top: -16px;\n}\n\n.demo-tabs-style1 > .ivu-tabs-card > .ivu-tabs-content > .ivu-tabs-tabpane {\n  background: #fff;\n  padding: 16px;\n}\n\n.demo-tabs-style1 > .ivu-tabs.ivu-tabs-card > .ivu-tabs-bar .ivu-tabs-tab {\n  border-color: transparent;\n}\n\n.demo-tabs-style1 > .ivu-tabs-card > .ivu-tabs-bar .ivu-tabs-tab-active {\n  border-color: #fff;\n}\n\n.tabs {\n  padding: 0 30px;\n  background-color: #fff;\n}\n\n.trip {\n  color: rgb(146, 139, 139);\n  background-color: #f2f2f2;\n  margin-left: 80px;\n  border-radius: 4px;\n  padding: 15px;\n}\n\n.content {\n  display: flex;\n  position: relative;\n}\n\n.form-sty {\n  margin-top: 20px;\n}\n.value-list {\n  position: absolute;\n  right: 7px;\n  bottom: 7px;\n  width: 22px;\n  height: 22px;\n  line-height: 22px;\n  text-align: center;\n  background: var(--prev-color-primary);\n  color: #ededed;\n  cursor: pointer;\n  border-radius: 4px;\n}\n.variable {\n  .item {\n    cursor: pointer;\n    padding: 5px 10px;\n    transition: all 0.3s ease;\n  }\n  .item:hover {\n    background: var(--prev-color-primary-light-9);\n    color: var(--prev-color-primary);\n    border-radius: 4px;\n  }\n}\n// 滚动条样式\n.variable::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.variable::-webkit-scrollbar-thumb {\n  background: var(--prev-color-primary-light-9);\n  border-radius: 4px;\n}\n.variable::-webkit-scrollbar-track {\n  background: #f2f2f2;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}