{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\event\\createModal.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\event\\createModal.vue","mtime":1747793329706},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovcGMvem0vXHU2NjA2XHU2NjBFXHU5NjE0XHU3RkQ0XHU3OUQxXHU2MjgwXHU2NzA5XHU5NjUwXHU1MTZDXHU1M0Y4L1x1NkU5MFx1NzgwMS9DUk1FQi1CWiB2NS42LjIoMjAyNTA2MzApL3RlbXBsYXRlL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgKiBhcyBtb25hY28gZnJvbSAnbW9uYWNvLWVkaXRvcic7CmltcG9ydCB7IG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBldmVudFRhc2sgYXMgX2V2ZW50VGFzaywgZXZlbnRJbmZvIGFzIF9ldmVudEluZm8sIGV2ZW50U2F2ZSBhcyBfZXZlbnRTYXZlIH0gZnJvbSAnQC9hcGkvc3lzdGVtJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RhbDogZmFsc2UsCiAgICAgIHRhc2s6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybVZhbGlkYXRlOiB7CiAgICAgICAgbWFyazogJycsCiAgICAgICAgLy/plK4KICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBpc19vcGVuOiAwLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICBjdXN0b21Db2RlOiAnJwogICAgICB9LAogICAgICBjb3B5RGF0YTogJycsCiAgICAgIHRyaXA6ICcnLAogICAgICBlZGl0b3I6ICcnIC8v5b2T5YmN57yW6L6R5Zmo5a+56LGhCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZXZlbnRUYXNrKCk7CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucygnYWRtaW4vbGF5b3V0JywgWydzZXRDb3B5cmlnaHRTaG93J10pKSwge30sIHsKICAgIHRhc2tDaGFuZ2U6IGZ1bmN0aW9uIHRhc2tDaGFuZ2UoaXRlbSkgewogICAgICAvLyDojrflj5bpgInkuK3lgLzlr7nlupQgdGFzayDkuK3nmoTnmoRkYXRh55qE5YC8CiAgICAgIHZhciB0YXNrRGF0YSA9IHRoaXMudGFzay5maW5kKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIGkudmFsdWUgPT09IGl0ZW07CiAgICAgIH0pOwogICAgICB0aGlzLmNvcHlEYXRhID0gdGFza0RhdGEuZGF0YTsKICAgIH0sCiAgICAvKioKICAgICAqIOWIneWni+WMlue8lui+keWZqAogICAgICovCiAgICBpbml0RWRpdG9yOiBmdW5jdGlvbiBpbml0RWRpdG9yKCkgewogICAgICB2YXIgY29uZXRudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICAgIHRoYXQuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOWIneWni+WMlue8lui+keWZqO+8jOehruS/nWRvbeW3sue7j+a4suafkwogICAgICAgICAgdGhhdC5lZGl0b3IgPSBtb25hY28uZWRpdG9yLmNyZWF0ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyksIHsKICAgICAgICAgICAgdmFsdWU6IGNvbmV0bnQsCiAgICAgICAgICAgIC8v57yW6L6R5Zmo5Yid5aeL5pi+56S65paH5a2XCiAgICAgICAgICAgIGxhbmd1YWdlOiAncGhwJywKICAgICAgICAgICAgLy/or63oqIDmlK/mjIHoh6rooYzmn6XpmIVkZW1vCiAgICAgICAgICAgIGF1dG9tYXRpY0xheW91dDogdHJ1ZSwKICAgICAgICAgICAgLy/oh6rliqjluIPlsYAKICAgICAgICAgICAgdGhlbWU6ICd2cy1kYXJrJywKICAgICAgICAgICAgLy/lrpjmlrnoh6rluKbkuInnp43kuLvpoph2cywgaGMtYmxhY2ssIG9yIHZzLWRhcmsKICAgICAgICAgICAgZm9sZGluZ1N0cmF0ZWd5OiAnaW5kZW50YXRpb24nLAogICAgICAgICAgICAvLyDku6PnoIHlj6/liIblsI/mrrXmipjlj6AKICAgICAgICAgICAgb3ZlcnZpZXdSdWxlckJvcmRlcjogZmFsc2UsCiAgICAgICAgICAgIC8vIOS4jeimgea7muWKqOadoeeahOi+ueahhgogICAgICAgICAgICBtaW5pbWFwOiB7CiAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2Nyb2xsYmFyOiB7CiAgICAgICAgICAgICAgdmVydGljYWw6ICdoaWRkZW4nLAogICAgICAgICAgICAgIGhvcml6b250YWw6ICdoaWRkZW4nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdvcmRXcmFwOiAnb24nLAogICAgICAgICAgICBhdXRvSW5kZW50OiB0cnVlLAogICAgICAgICAgICAvLyDoh6rliqjluIPlsYAKICAgICAgICAgICAgdGFiU2l6ZTogNCwKICAgICAgICAgICAgLy8gdGFi57yp6L+b6ZW/5bqmCiAgICAgICAgICAgIGF1dG9DbG9zaW5nT3ZlcnR5cGU6ICdhbHdheXMnLAogICAgICAgICAgICByZWFkT25seTogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIGV2ZW50VGFzazogZnVuY3Rpb24gZXZlbnRUYXNrKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfZXZlbnRUYXNrKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMudGFzayA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBvbkNvcHkoY29weURhdGEpIHsKICAgIC8vICAgbGV0IGRhdGEgPSBgJGRhdGFbJyR7Y29weURhdGF9J11gOwogICAgLy8gICB0aGlzLiRjb3B5VGV4dChkYXRhKQogICAgLy8gICAgIC50aGVuKChtZXNzYWdlKSA9PiB7CiAgICAvLyAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WkjeWItuaIkOWKnycpOwogICAgLy8gICAgIH0pCiAgICAvLyAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgIC8vICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WkjeWItuWksei0pScpOwogICAgLy8gICAgIH0pOwogICAgLy8gfSwKICAgIGluaXREYXRhOiBmdW5jdGlvbiBpbml0RGF0YShzdGF0dXMpIHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgbWFyazogJycsCiAgICAgICAgaXNfb3BlbjogMCwKICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgY3VzdG9tQ29kZTogJycKICAgICAgfTsKICAgICAgdGhpcy5jb3B5RGF0YSA9ICcnOwogICAgICB0aGlzLm1vZGFsID0gZmFsc2U7CiAgICB9LAogICAgZXZlbnRJbmZvOiBmdW5jdGlvbiBldmVudEluZm8oaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGlmICghaWQpIHsKICAgICAgICB0aGlzLm1vZGFsID0gdHJ1ZTsKICAgICAgICB0aGlzLmluaXRFZGl0b3IoIjw/cGhwXG5cbi8v56S65L6L5Luj56CBXG4vL+WPguaVsOS9v+eUqOWunuS+iyAgJGRhdGFbJ3VpZCddXG5cbi8v55u05o6l5YaZ5YWl5pWw5o2u5bqTXG5cXHRoaW5rXFxmYWNhZGVcXERiOjpuYW1lKCdjYWNoZScpLT5pbnNlcnQoWydrZXknID0+ICdjdXN0b21fZXZlbnRfJyAuIHJhbmQoKSwgJ3Jlc3VsdCcgPT4gJGRhdGFbJ25pY2tuYW1lJ10gLiByYW5kKCksICdleHBpcmVfdGltZScgPT4gMF0pO1xuXG4vL+iwg+eUqOezu+e7n+aWueazlVxuYXBwKCktPm1ha2UoXFxhcHBcXHNlcnZpY2VzXFxvdGhlclxcQ2FjaGVTZXJ2aWNlczo6Y2xhc3MpLT5zZXREYkNhY2hlKCdjdXN0b21fZXZlbnRfJyAuIHJhbmQoKSwgJGRhdGFbJ25pY2tuYW1lJ10pOyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfZXZlbnRJbmZvKGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIubW9kYWwgPSB0cnVlOwogICAgICAgIF90aGlzMi5mb3JtVmFsaWRhdGUgPSByZXMuZGF0YTsKICAgICAgICB2YXIgdGFza0RhdGEgPSBfdGhpczIudGFzay5maW5kKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICByZXR1cm4gaS52YWx1ZSA9PT0gcmVzLmRhdGEubWFyazsKICAgICAgICB9KTsKICAgICAgICBfdGhpczIuY29weURhdGEgPSB0YXNrRGF0YS5kYXRhOwogICAgICAgIF90aGlzMi5pbml0RWRpdG9yKHJlcy5kYXRhLmN1c3RvbUNvZGUgfHwgJycpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmj5DkuqQKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KCkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jdXN0b21Db2RlID0gdGhpcy5lZGl0b3IuZ2V0VmFsdWUoKTsKICAgICAgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS5tYXJrKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeS6i+S7tuexu+WeiycsCiAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkgewogICAgICAgICAgICAvLyB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLmV2ZW50U2F2ZSh0aGlzLmZvcm1WYWxpZGF0ZSk7CiAgICB9LAogICAgZXZlbnRTYXZlOiBmdW5jdGlvbiBldmVudFNhdmUoZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgX2V2ZW50U2F2ZShkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMuJG1lc3NhZ2Uuc3VjY2Vzcyh7CiAgICAgICAgICBtZXNzYWdlOiByZXMubXNnCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMzLiRlbWl0KCdzdWJtaXRBc2snKTsKICAgICAgICBfdGhpczMubW9kYWwgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzMy4kbWVzc2FnZS5lcnJvcihlcnIubXNnKTsKICAgICAgfSk7CiAgICB9CiAgfSkKfTs="},{"version":3,"names":["monaco","mapMutations","eventTask","eventInfo","eventSave","data","modal","task","loading","formValidate","mark","content","is_open","name","password","customCode","copyData","trip","editor","created","methods","_objectSpread","taskChange","item","taskData","find","i","value","initEditor","conetnt","arguments","length","undefined","that","$nextTick","create","document","getElementById","language","automaticLayout","theme","foldingStrategy","overviewRulerBorder","minimap","enabled","scrollbar","vertical","horizontal","wordWrap","autoIndent","tabSize","autoClosingOvertype","readOnly","error","console","log","_this","then","res","initData","status","id","_this2","handleSubmit","getValue","$message","message","onClose","_this3","success","msg","$emit","catch","err"],"sources":["src/pages/system/event/createModal.vue"],"sourcesContent":["<template>\n  <div>\n    <el-drawer\n      :visible.sync=\"modal\"\n      :title=\"formValidate.id ? '编辑事件' : '添加事件'\"\n      size=\"1000px\"\n      @closed=\"initData\"\n    >\n      <el-form v-if=\"modal\" class=\"pb-20\" ref=\"formValidate\" :model=\"formValidate\" label-width=\"97px\" label-colon>\n        <el-form-item label=\"事件名称：\" required>\n          <el-row :gutter=\"16\">\n            <el-col :span=\"20\">\n              <el-input v-model=\"formValidate.name\" placeholder=\"请输入事件名称\"></el-input>\n            </el-col>\n          </el-row>\n        </el-form-item>\n        <el-form-item label=\"事件类型：\" required>\n          <el-row :gutter=\"16\">\n            <el-col :span=\"20\">\n              <el-select v-model=\"formValidate.mark\" @change=\"taskChange\">\n                <el-option v-for=\"(item, name) in task\" :key=\"name\" :value=\"item.value\" :label=\"item.label\"></el-option>\n              </el-select>\n            </el-col>\n          </el-row>\n        </el-form-item>\n        <el-form-item label=\"事件说明：\">\n          <el-row :gutter=\"10\">\n            <el-col :span=\"24\">\n              <el-input\n                v-model=\"formValidate.content\"\n                type=\"textarea\"\n                :autosize=\"{ minRows: 3, maxRows: 5 }\"\n                placeholder=\"请输入事件说明\"\n              ></el-input>\n            </el-col>\n          </el-row>\n        </el-form-item>\n        <el-form-item label=\"执行代码：\">\n          <el-row :gutter=\"10\">\n            <el-col :span=\"24\">\n              <div ref=\"container\" id=\"container\" class=\"monaco-editor\"></div>\n              <!-- <div class=\"copy-tag\">\n                <el-tag\n                  class=\"item\"\n                  size=\"small\"\n                  v-for=\"(i, k, index) in copyData\"\n                  :key=\"index\"\n                  v-db-click\n                  @click=\"onCopy(k)\"\n                >\n                  {{ i }}\n                </el-tag>\n              </div> -->\n            </el-col>\n          </el-row>\n        </el-form-item>\n        <el-form-item label=\"可用参数：\" v-if=\"copyData\">\n          <el-row :gutter=\"10\">\n            <el-col :span=\"24\">\n              <el-input\n                class=\"text-area\"\n                v-model=\"copyData\"\n                type=\"textarea\"\n                :autosize=\"{ minRows: 7, maxRows: 7 }\"\n                placeholder=\"请输入事件说明\"\n                readonly\n              ></el-input>\n              <!-- <span class=\"text-area\">{{ copyData }}</span> -->\n            </el-col>\n          </el-row>\n        </el-form-item>\n\n        <el-form-item label=\"开发密码：\" required>\n          <el-row :gutter=\"10\">\n            <el-col :span=\"24\">\n              <el-input v-model=\"formValidate.password\" type=\"password\" placeholder=\"请输入系统开发密码，开发密码在crmeb/config/filesystem.php中修改password\"></el-input>\n            </el-col>\n          </el-row>\n        </el-form-item>\n        <el-form-item label=\"是否开启：\">\n          <el-row :gutter=\"10\">\n            <el-col :span=\"12\">\n              <el-switch :active-value=\"1\" :inactive-value=\"0\" v-model=\"formValidate.is_open\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </el-switch>\n            </el-col>\n          </el-row>\n        </el-form-item>\n      </el-form>\n      <span class=\"dialog-footer\">\n        <el-button v-db-click @click=\"modal = false\">取 消</el-button>\n        <el-button type=\"primary\" v-db-click @click=\"handleSubmit\">提 交</el-button>\n      </span>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport * as monaco from 'monaco-editor';\nimport { mapMutations } from 'vuex';\nimport { eventTask, eventInfo, eventSave } from '@/api/system';\nexport default {\n  data() {\n    return {\n      modal: false,\n      task: [],\n      loading: false,\n      formValidate: {\n        mark: '', //键\n        content: '',\n        is_open: 0,\n        name: '',\n        password: '',\n        customCode: '',\n      },\n      copyData: '',\n      trip: '',\n      editor: '', //当前编辑器对象\n    };\n  },\n  created() {\n    this.eventTask();\n  },\n  methods: {\n    ...mapMutations('admin/layout', ['setCopyrightShow']),\n    taskChange(item) {\n      // 获取选中值对应 task 中的的data的值\n      let taskData = this.task.find((i) => i.value === item);\n      this.copyData = taskData.data;\n    },\n    /**\n     * 初始化编辑器\n     */\n    initEditor(conetnt = '') {\n      try {\n        let that = this;\n        that.$nextTick(() => {\n          // 初始化编辑器，确保dom已经渲染\n          that.editor = monaco.editor.create(document.getElementById('container'), {\n            value: conetnt, //编辑器初始显示文字\n            language: 'php', //语言支持自行查阅demo\n            automaticLayout: true, //自动布局\n            theme: 'vs-dark', //官方自带三种主题vs, hc-black, or vs-dark\n            foldingStrategy: 'indentation', // 代码可分小段折叠\n            overviewRulerBorder: false, // 不要滚动条的边框\n            minimap: { enabled: false },\n            scrollbar: {\n              vertical: 'hidden',\n              horizontal: 'hidden',\n            },\n            wordWrap: 'on',\n            autoIndent: true, // 自动布局\n            tabSize: 4, // tab缩进长度\n            autoClosingOvertype: 'always',\n            readOnly: false,\n          });\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    eventTask() {\n      eventTask().then((res) => {\n        this.task = res.data;\n      });\n    },\n    // onCopy(copyData) {\n    //   let data = `$data['${copyData}']`;\n    //   this.$copyText(data)\n    //     .then((message) => {\n    //       this.$message.success('复制成功');\n    //     })\n    //     .catch((err) => {\n    //       this.$message.error('复制失败');\n    //     });\n    // },\n    initData(status) {\n      this.formValidate = {\n        name: '',\n        mark: '',\n        is_open: 0,\n        content: '',\n        password: '',\n        customCode: '',\n      };\n      this.copyData = '';\n      this.modal = false;\n    },\n    eventInfo(id) {\n      if (!id) {\n        this.modal = true;\n        this.initEditor(\n          \"<?php\\n\\n//示例代码\\n//参数使用实例  $data['uid']\\n\\n//直接写入数据库\\n\\\\think\\\\facade\\\\Db::name('cache')->insert(['key' => 'custom_event_' . rand(), 'result' => $data['nickname'] . rand(), 'expire_time' => 0]);\\n\\n//调用系统方法\\napp()->make(\\\\app\\\\services\\\\other\\\\CacheServices::class)->setDbCache('custom_event_' . rand(), $data['nickname']);\",\n        );\n        return;\n      }\n      eventInfo(id).then((res) => {\n        this.modal = true;\n        this.formValidate = res.data;\n        let taskData = this.task.find((i) => i.value === res.data.mark);\n        this.copyData = taskData.data;\n        this.initEditor(res.data.customCode || '');\n      });\n    },\n    // 提交\n    handleSubmit() {\n      this.formValidate.customCode = this.editor.getValue();\n      if (!this.formValidate.mark) {\n        return this.$message.error({\n          message: '请选择事件类型',\n          onClose: () => {\n            // this.loading = false;\n          },\n        });\n      }\n      this.eventSave(this.formValidate);\n    },\n    eventSave(data) {\n      eventSave(data)\n        .then((res) => {\n          this.$message.success({\n            message: res.msg,\n          });\n          this.$emit('submitAsk');\n          this.modal = false;\n        })\n        .catch((err) => {\n          this.$message.error(err.msg);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.form-card {\n  margin-bottom: 74px;\n\n  ::v-deep .ivu-card-body {\n    padding: 30px 0;\n  }\n}\n\n.pb-20 {\n  padding-bottom: 20px;\n}\n\n.btn-card {\n  position: fixed;\n  right: 0;\n  bottom: 0;\n  left: 200px;\n  z-index: 2;\n  text-align: center;\n}\n\n.input-number-wrapper {\n  position: relative;\n  display: inline-block;\n  width: 100%;\n  vertical-align: middle;\n  line-height: normal;\n\n  .ivu-input-number {\n    width: 100%;\n    padding-right: 35px;\n  }\n\n  ::v-deep .ivu-input-number-handler-wrap {\n    right: 35px;\n  }\n\n  .suffix {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 1;\n    width: 35px;\n    height: 100%;\n    text-align: center;\n    font-size: 12px;\n    line-height: 33px;\n    color: #333333;\n  }\n}\n\n.trip {\n  padding-left: 15px;\n  color: #aaa;\n}\n\n::v-deep .el-input-number__increase,\n::v-deep .el-input-number__decrease {\n  display: none;\n}\n\n.ml30 {\n  margin-left: 30px;\n}\n\n.copy-tag {\n  display: flex;\n  flex-wrap: wrap;\n\n  .item {\n    margin: 5px;\n    cursor: pointer;\n  }\n}\n\n.dialog-footer {\n  // 固定在底部\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  padding: 10px 20px;\n  background-color: #fff;\n  border-top: 1px solid #e8e8e8;\n  display: flex;\n  justify-content: center;\n}\n\n.monaco-editor {\n  border: 1px solid var(--prev-border-color-base);\n  border-radius: 4px;\n  height: 400px;\n  overflow: hidden;\n}\n\n.text-area {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}