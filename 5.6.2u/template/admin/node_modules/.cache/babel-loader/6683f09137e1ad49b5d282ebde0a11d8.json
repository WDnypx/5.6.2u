{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\newuser\\gift.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\newuser\\gift.vue","mtime":1745474910907},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgY291cG9uTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvY291cG9uTGlzdCc7CmltcG9ydCB7IGVkaXROZXdiaWUsIGdldE5ld2JpZSB9IGZyb20gJ0AvYXBpL21hcmtldGluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTmV3VXNlckdpZnQnLAogIGNvbXBvbmVudHM6IHsKICAgIGNvdXBvbkxpc3Q6IGNvdXBvbkxpc3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzcGluU2hvdzogZmFsc2UsCiAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgcmV3YXJkX21vbmV5OiAwLAogICAgICAgIHJld2FyZF9pbnRlZ3JhbDogMCwKICAgICAgICByZXdhcmRfY291cG9uOiBbXSwKICAgICAgICB1cGRhdGVJZHM6IFtdCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRJbmZvKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WvueixoeaVsOe7hOWOu+mHje+8mwogICAgdW5pcXVlQXJyYXk6IGZ1bmN0aW9uIHVuaXF1ZUFycmF5KGFycikgewogICAgICB2YXIgc2VlbiA9IHt9OwogICAgICByZXR1cm4gYXJyLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pOwogICAgICAgIGl0ZW0udGl0bGUgPSBpdGVtLnVzZV9taW5fcHJpY2UgIT09ICcwLjAwJyA/ICIiLmNvbmNhdChpdGVtLnRpdGxlLCAiIHwgXHU2RUUxIikuY29uY2F0KGl0ZW0udXNlX21pbl9wcmljZSwgIlx1NTE0MyBcdTUxQ0YgIikuY29uY2F0KGl0ZW0uY291cG9uX3ByaWNlLCAiXHU1MTQzIikgOiAiIi5jb25jYXQoaXRlbS50aXRsZSwgIiB8ICIpLmNvbmNhdChpdGVtLmNvdXBvbl9wcmljZSwgIlx1NTE0MyBcdTY1RTBcdTk1RThcdTY5REJcdTUyMzgiKTsKICAgICAgICBkZWxldGUgaXRlbS51c2VfbWluX3ByaWNlOwogICAgICAgIGRlbGV0ZSBpdGVtLmNvdXBvbl9wcmljZTsKICAgICAgICB2YXIga2V5ID0gSlNPTi5zdHJpbmdpZnkoaXRlbSk7IC8vIOS9v+eUqCBKU09OLnN0cmluZ2lmeSDnlJ/miJDllK/kuIDplK4KICAgICAgICBpZiAoc2VlbltrZXldKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlZW5ba2V5XSA9IHRydWU7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPluS8mOaDoOWIuGlk5pWw5o2uCiAgICBuYW1lSWQ6IGZ1bmN0aW9uIG5hbWVJZChpZCwgbmFtZXMpIHsKICAgICAgdGhpcy5mb3JtRGF0YS5yZXdhcmRfY291cG9uID0gdGhpcy51bmlxdWVBcnJheShuYW1lcyk7CiAgICB9LAogICAgLy8g5re75Yqg5LyY5oOg5Yi4CiAgICBhZGRDb3Vwb246IGZ1bmN0aW9uIGFkZENvdXBvbigpIHsKICAgICAgdGhpcy4kcmVmcy5jb3Vwb25UZW1wbGF0ZXMuaXNUZW1wbGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuY291cG9uVGVtcGxhdGVzLnRhYmxlTGlzdCgpOwogICAgfSwKICAgIGhhbmRsZUNsb3NlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZShpbmRleCkgewogICAgICB0aGlzLmZvcm1EYXRhLnJld2FyZF9jb3Vwb24uc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgZ2V0TmV3YmllKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICBfdGhpcy5mb3JtRGF0YSA9IHJlcy5kYXRhOwogICAgICAgIF90aGlzLnVwZGF0ZUlkcyA9IHJlcy5kYXRhLnJld2FyZF9jb3Vwb24ubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5pZDsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluWksei0pScpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmj5DkuqTooajljZUKICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgZWRpdE5ld2JpZSh0aGlzLmZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygn5o+Q5Lqk5oiQ5YqfJyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczIuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoJ+aPkOS6pOWksei0pScpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["couponList","editNewbie","getNewbie","name","components","data","spinShow","formData","reward_money","reward_integral","reward_coupon","updateIds","created","getInfo","methods","uniqueArray","arr","seen","filter","item","console","log","title","use_min_price","concat","coupon_price","key","JSON","stringify","nameId","id","names","addCoupon","$refs","couponTemplates","isTemplate","tableList","handleClose","index","splice","_this","then","res","map","catch","err","$message","error","submitForm","_this2","success"],"sources":["src/pages/marketing/newuser/gift.vue"],"sourcesContent":["<template>\n  <div v-loading=\"spinShow\">\n    <div class=\"article-manager\">\n      <el-card :bordered=\"false\" shadow=\"never\" class=\"ivu-mt fromBox\">\n        <el-form ref=\"formRef\" :model=\"formData\" label-width=\"100px\">\n          <el-form-item label=\"赠送余额(元)：\">\n            <el-input-number\n              class=\"form-width\"\n              v-model=\"formData.reward_money\"\n              placeholder=\"请输入赠送余额\"\n              :min=\"0\"\n            ></el-input-number>\n            <div class=\"tips-info\">新用户奖励金额，必须大于等于0，0为不赠送</div>\n          </el-form-item>\n          <el-form-item label=\"赠送积分：\">\n            <el-input-number\n              class=\"form-width\"\n              v-model=\"formData.reward_integral\"\n              placeholder=\"请输入赠送积分数量\"\n              :min=\"0\"\n            ></el-input-number>\n            <div class=\"tips-info\">新用户奖励积分，必须大于等于0，0为不赠送</div>\n          </el-form-item>\n          <el-form-item label=\"赠送优惠券：\">\n            <div v-if=\"formData.reward_coupon.length\" class=\"mb10\">\n              <el-tag\n                class=\"mr10\"\n                closable\n                v-for=\"(item, index) in formData.reward_coupon\"\n                :key=\"index\"\n                @close=\"handleClose(index)\"\n                >{{ item.title }}</el-tag\n              >\n            </div>\n            <el-button v-db-click @click=\"addCoupon\">选择优惠券</el-button>\n          </el-form-item>\n          <el-form-item label=\"\">\n            <el-button type=\"primary\" v-db-click @click=\"submitForm\">确认</el-button>\n          </el-form-item>\n        </el-form>\n      </el-card>\n    </div>\n    <coupon-list ref=\"couponTemplates\" :updateIds=\"updateIds\" @nameId=\"nameId\"></coupon-list>\n  </div>\n</template>\n\n<script>\nimport couponList from '@/components/couponList';\nimport { editNewbie, getNewbie } from '@/api/marketing';\nexport default {\n  name: 'NewUserGift',\n  components: { couponList },\n  data() {\n    return {\n      spinShow: false,\n      formData: {\n        reward_money: 0,\n        reward_integral: 0,\n        reward_coupon: [],\n        updateIds: [],\n      },\n    };\n  },\n  created() {\n    this.getInfo();\n  },\n  methods: {\n    //对象数组去重；\n    uniqueArray(arr) {\n      const seen = {};\n      return arr.filter((item) => {\n        console.log(item)\n        item.title =\n          item.use_min_price !== '0.00'\n            ? `${item.title} | 满${item.use_min_price}元 减 ${item.coupon_price}元`\n            : `${item.title} | ${item.coupon_price}元 无门槛券`;\n        delete item.use_min_price;\n        delete item.coupon_price;\n        const key = JSON.stringify(item); // 使用 JSON.stringify 生成唯一键\n        if (seen[key]) {\n          return false;\n        } else {\n          seen[key] = true;\n          return true;\n        }\n      });\n    },\n    // 获取优惠券id数据\n    nameId(id, names) {\n      this.formData.reward_coupon = this.uniqueArray(names);\n    },\n    // 添加优惠券\n    addCoupon() {\n      this.$refs.couponTemplates.isTemplate = true;\n      this.$refs.couponTemplates.tableList();\n    },\n    handleClose(index) {\n      this.formData.reward_coupon.splice(index, 1);\n    },\n    getInfo() {\n      this.spinShow = true;\n      getNewbie()\n        .then((res) => {\n          this.spinShow = false;\n          this.formData = res.data;\n          this.updateIds = res.data.reward_coupon.map((item) => item.id);\n        })\n        .catch((err) => {\n          this.spinShow = false;\n          this.$message.error('获取失败');\n        });\n    },\n    // 提交表单\n    submitForm() {\n      this.spinShow = true;\n      editNewbie(this.formData)\n        .then((res) => {\n          this.spinShow = false;\n          this.$message.success('提交成功');\n        })\n        .catch((err) => {\n          this.spinShow = false;\n          this.$message.error('提交失败');\n        });\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped></style>\n"],"mappings":";;;;;;;;;AA+CA,OAAAA,UAAA;AACA,SAAAC,UAAA,EAAAC,SAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAJ,UAAA,EAAAA;EAAA;EACAK,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;QACAC,YAAA;QACAC,eAAA;QACAC,aAAA;QACAC,SAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACA;IACAC,WAAA,WAAAA,YAAAC,GAAA;MACA,IAAAC,IAAA;MACA,OAAAD,GAAA,CAAAE,MAAA,WAAAC,IAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,IAAA;QACAA,IAAA,CAAAG,KAAA,GACAH,IAAA,CAAAI,aAAA,iBAAAC,MAAA,CACAL,IAAA,CAAAG,KAAA,eAAAE,MAAA,CAAAL,IAAA,CAAAI,aAAA,oBAAAC,MAAA,CAAAL,IAAA,CAAAM,YAAA,iBAAAD,MAAA,CACAL,IAAA,CAAAG,KAAA,SAAAE,MAAA,CAAAL,IAAA,CAAAM,YAAA;QACA,OAAAN,IAAA,CAAAI,aAAA;QACA,OAAAJ,IAAA,CAAAM,YAAA;QACA,IAAAC,GAAA,GAAAC,IAAA,CAAAC,SAAA,CAAAT,IAAA;QACA,IAAAF,IAAA,CAAAS,GAAA;UACA;QACA;UACAT,IAAA,CAAAS,GAAA;UACA;QACA;MACA;IACA;IACA;IACAG,MAAA,WAAAA,OAAAC,EAAA,EAAAC,KAAA;MACA,KAAAxB,QAAA,CAAAG,aAAA,QAAAK,WAAA,CAAAgB,KAAA;IACA;IACA;IACAC,SAAA,WAAAA,UAAA;MACA,KAAAC,KAAA,CAAAC,eAAA,CAAAC,UAAA;MACA,KAAAF,KAAA,CAAAC,eAAA,CAAAE,SAAA;IACA;IACAC,WAAA,WAAAA,YAAAC,KAAA;MACA,KAAA/B,QAAA,CAAAG,aAAA,CAAA6B,MAAA,CAAAD,KAAA;IACA;IACAzB,OAAA,WAAAA,QAAA;MAAA,IAAA2B,KAAA;MACA,KAAAlC,QAAA;MACAJ,SAAA,GACAuC,IAAA,WAAAC,GAAA;QACAF,KAAA,CAAAlC,QAAA;QACAkC,KAAA,CAAAjC,QAAA,GAAAmC,GAAA,CAAArC,IAAA;QACAmC,KAAA,CAAA7B,SAAA,GAAA+B,GAAA,CAAArC,IAAA,CAAAK,aAAA,CAAAiC,GAAA,WAAAxB,IAAA;UAAA,OAAAA,IAAA,CAAAW,EAAA;QAAA;MACA,GACAc,KAAA,WAAAC,GAAA;QACAL,KAAA,CAAAlC,QAAA;QACAkC,KAAA,CAAAM,QAAA,CAAAC,KAAA;MACA;IACA;IACA;IACAC,UAAA,WAAAA,WAAA;MAAA,IAAAC,MAAA;MACA,KAAA3C,QAAA;MACAL,UAAA,MAAAM,QAAA,EACAkC,IAAA,WAAAC,GAAA;QACAO,MAAA,CAAA3C,QAAA;QACA2C,MAAA,CAAAH,QAAA,CAAAI,OAAA;MACA,GACAN,KAAA,WAAAC,GAAA;QACAI,MAAA,CAAA3C,QAAA;QACA2C,MAAA,CAAAH,QAAA,CAAAC,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}