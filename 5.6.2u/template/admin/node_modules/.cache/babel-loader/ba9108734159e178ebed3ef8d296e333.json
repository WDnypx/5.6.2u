{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\thread-loader\\dist\\cjs.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\maintain\\systemFile\\opendir.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\maintain\\systemFile\\opendir.vue","mtime":1731374761878},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1753254256661},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJEOi9wYy96bS9cdTY2MDZcdTY2MEVcdTk2MTRcdTdGRDRcdTc5RDFcdTYyODBcdTY3MDlcdTk2NTBcdTUxNkNcdTUzRjgvXHU2RTkwXHU3ODAxL0NSTUVCLUJaIHY1LjYuMigyMDI1MDYzMCkvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvciBmcm9tICJEOi9wYy96bS9cdTY2MDZcdTY2MEVcdTk2MTRcdTdGRDRcdTc5RDFcdTYyODBcdTY3MDlcdTk2NTBcdTUxNkNcdTUzRjgvXHU2RTkwXHU3ODAxL0NSTUVCLUJaIHY1LjYuMigyMDI1MDYzMCkvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L3BjL3ptL1x1NjYwNlx1NjYwRVx1OTYxNFx1N0ZENFx1NzlEMVx1NjI4MFx1NjcwOVx1OTY1MFx1NTE2Q1x1NTNGOC9cdTZFOTBcdTc4MDEvQ1JNRUItQlogdjUuNi4yKDIwMjUwNjMwKS90ZW1wbGF0ZS9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IG9wZW5kaXJMaXN0QXBpLCBvcGVuZmlsZUFwaSwgc2F2ZWZpbGVBcGksIG9wZW5kaXJMb2dpbkFwaSwgY3JlYXRlRm9sZGVyLCBjcmVhdGVGaWxlLCBkZWxGb2xkZXIsIHJlbmFtZSwgZmlsZU1hcmssIG1hcmtTYXZlIH0gZnJvbSAnQC9hcGkvc3lzdGVtJzsKaW1wb3J0IENvZGVNaXJyb3IgZnJvbSAnY29kZW1pcnJvci9saWIvY29kZW1pcnJvcic7CmltcG9ydCBsb2dpbkZyb20gZnJvbSAnLi9jb21wb25lbnRzL2xvZ2luRnJvbSc7CmltcG9ydCB7IHNldENvb2tpZXMsIGdldENvb2tpZXMsIHJlbW92ZUNvb2tpZXMgfSBmcm9tICdAL2xpYnMvdXRpbCc7Ci8vIGltcG9ydCBGdWxsc2NyZWVuIGZyb20gJ0AvbGF5b3V0L2NvbXBvbmVudHMvZnVsbHNjcmVlbic7CmltcG9ydCAqIGFzIG1vbmFjbyBmcm9tICdtb25hY28tZWRpdG9yJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdvcGVuZGlyJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kYWxzOiBmYWxzZSwKICAgICAgLy/nvJbovpHlmajlvIDlhbMKICAgICAgZWRpdG9yOiAnJywKICAgICAgLy/lvZPliY3nvJbovpHlmajlr7nosaEKICAgICAgZWRpdG9ySW5kZXg6IFsKICAgICAgLy/pgInpobnljaHmlbDnu4QKICAgICAgewogICAgICAgIHRhYjogdHJ1ZSwKICAgICAgICBpbmRleDogJzAnLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBpY29uOiAnJwogICAgICB9XSwKICAgICAgZWRpdG9yTGlzdDogW10sCiAgICAgIC8v57yW6L6R5Zmo5pWw57uECiAgICAgIGluZGV4RWRpdG9yOiAwLAogICAgICAvL+W9k+WJjee8lui+keWZqOe0ouW8lQogICAgICBjb2RlOiAnJywKICAgICAgLy/lvZPliY3mlofku7bmiZPlvIDml7bnmoTlhoXlrrkKICAgICAgbmF2TGlzdDogW10sCiAgICAgIC8v5bem5L6n5a+86Iiq5pWw5o2uCiAgICAgIG5hdkl0ZW06IHt9LAogICAgICAvL+W3puS+p+WvvOiIqueCueWHu+aYr+mAieS4reeahOaVsOaNrgogICAgICBjb250ZXh0RGF0YTogbnVsbCwKICAgICAgLy/lt6bkvqflr7zoiKrlj7PplK7ngrnlh7vmmK/kuqfnlJ/nmoTmlbDmja7lr7nosaEKCiAgICAgIGZpbGVUeXBlOiAnJywKICAgICAgLy8g5paH5Lu25pON5L2c57G75Z6LIGNyZWF0ZUZvbGRlcnzliJvlu7rmlofku7blpLkgY3JlYXRlRmlsZXzliJvlu7rmlofku7YgZGVsRm9sZGVyfOWIoOmZpOaWh+S7tuWkueaIluiAheaWh+S7tgogICAgICBjbGFzc05hbWU6ICcnLAogICAgICAvL+WFqOWxjyBjbGFzc+WQjQogICAgICAvLyBmdWxsc2NyZWVuOmZhbHNlLCAgLy8g5piv5ZCm5YWo5bGPCiAgICAgIGlzU2F2ZTogdHJ1ZSwKICAgICAgLy/lvZPliY3mlofku7bmmK/lkKbkv53lrZgKCiAgICAgIGlzU2hvd0xvZ246IGZhbHNlLAogICAgICAvLyDnmbvlvZUKICAgICAgaXNTaG93TGlzdDogZmFsc2UsCiAgICAgIC8vIOeZu+W9leS5i+WQjuWIl+ihqAoKICAgICAgc3BpblNob3c6IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdGFiTGlzdDogW10sCiAgICAgIGZvcm1JdGVtOiB7CiAgICAgICAgLy/orrDlvZXlvZPliY3ot6/lvoTkv6Hmga/vvIzojrflj5bmlofku7bliJfooajml7bkvb/nlKgKICAgICAgICBkaXI6ICcnLAogICAgICAgIHN1cGVyaW9yOiAwLAogICAgICAgIGZpbGVkaXI6ICcnLAogICAgICAgIGZpbGVUb2tlbjogZ2V0Q29va2llcygnZmlsZV90b2tlbicpCiAgICAgIH0sCiAgICAgIGRpcjogJycsCiAgICAgIC8v5b2T5YmN5a6M5pW05paH5Lu26Lev5b6ECiAgICAgIC8vIHJvd3M6IHt9LCAgLy8KICAgICAgcGF0aG5hbWU6ICcnLAogICAgICAvLyDlvZPliY3mlofku7bot6/lvoQKICAgICAgdGl0bGU6ICcnLAogICAgICAvL+W9k+WJjeaWh+S7tuagh+mimAoKICAgICAgZm9ybUZpbGU6IHsKICAgICAgICAvL+mHjeWRveWQjeihqOWNlQogICAgICAgIGZpbGVuYW1lOiAnJwogICAgICB9LAogICAgICBydWxlSW5saW5lOiB7CiAgICAgICAgZmlsZW5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlofku7bmiJbmlofku7blpLnnmoTlkI3lrZcnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgZm9ybVNob3c6IGZhbHNlLAogICAgICAvL+ihqOWNleW8gOWFswogICAgICBmb3JtVGl0bGU6ICcnLAogICAgICAvL+ihqOWNleagh+mimAogICAgICBmaWxlVG9rZW46IGdldENvb2tpZXMoJ2ZpbGVfdG9rZW4nKSwKICAgICAgcm91dGVMaXN0OiBbXSwKICAgICAgLy8gIOaJk+W8gOaWh+S7tui3r+W+hAogICAgICBwcm9wczogewogICAgICAgIGxhYmVsOiAndGl0bGUnLAogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgIGlzTGVhZjogJ2lzTGVhZicKICAgICAgfQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGxvZ2luRnJvbTogbG9naW5Gcm9tCiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8gdGhpcy5pbml0RWRpdG9yKCk7CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgcmVtb3ZlQ29va2llcygnZmlsZV90b2tlbicpOwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIC8vIOeCueWHu+ihjAogICAgY3VycmVudENoYW5nZTogZnVuY3Rpb24gY3VycmVudENoYW5nZShjdXJyZW50Um93KSB7CiAgICAgIGlmIChjdXJyZW50Um93LmlzRGlyKSB7CiAgICAgICAgdGhpcy5vcGVuKGN1cnJlbnRSb3cpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZWRpdChjdXJyZW50Um93KTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICog5paH5Lu25YiX6KGoCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVmcmVzaCAgIC8vIOaYr+WQpumHjeaWsOWKoOi9vSBib29sCiAgICAgKiBAcGFyYW0ge09iamVjdH0gaXNfZWRpdCAgIC8vIOaYr+WQpuaYr+e8lui+keWZqOS4reeahOWIt+aWsCBib29sCiAgICAgKi8KICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QocmVmcmVzaCwgaXNfZWRpdCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcGFyYW1zOwogICAgICBpZiAocmVmcmVzaCkgewogICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgIGRpcjogJycsCiAgICAgICAgICBzdXBlcmlvcjogMCwKICAgICAgICAgIGZpbGVkaXI6ICcnLAogICAgICAgICAgZmlsZVRva2VuOiB0aGlzLmZpbGVUb2tlbgogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFyYW1zID0gdGhpcy5mb3JtSXRlbTsKICAgICAgICBwYXJhbXMuZmlsZVRva2VuID0gdGhpcy5maWxlVG9rZW47CiAgICAgIH0KICAgICAgaWYgKCFpc19lZGl0KSB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBvcGVuZGlyTGlzdEFwaShwYXJhbXMpLnRoZW4oLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3IoKS5tKGZ1bmN0aW9uIF9jYWxsZWUocmVzKSB7CiAgICAgICAgICB2YXIgZGF0YTsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IoKS53KGZ1bmN0aW9uIChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5uKSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgX3RoaXMucm91dGVMaXN0ID0gZGF0YS5yb3V0ZUxpc3Q7CiAgICAgICAgICAgICAgICBpZiAoaXNfZWRpdCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5uYXZMaXN0ID0gZGF0YS5uYXZMaXN0OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMubmF2TGlzdEZvclRhYiA9IGRhdGEubmF2TGlzdDsKICAgICAgICAgICAgICAgICAgX3RoaXMudGFiTGlzdCA9IGRhdGEubGlzdDsKICAgICAgICAgICAgICAgICAgLy8gdGhpcy5uYXZMaXN0ID0gZGF0YS5uYXZMaXN0OwogICAgICAgICAgICAgICAgICBfdGhpcy5pc1Nob3dMaXN0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzLmRpciA9IGRhdGEuZGlyOwogICAgICAgICAgICAgICAgX3RoaXMuaXNTaG93TG9nbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hKDIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5jYXRjaEZ1bihyZXMpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+aWsOW7uuaWh+S7tuWQjumHjeaWsOWKoOi9veW3puS+p+WvvOiIqgogICAgZ2V0TGlzdEl0ZW06IGZ1bmN0aW9uIGdldExpc3RJdGVtKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIG9wZW5kaXJMaXN0QXBpKGRhdGEpLnRoZW4oLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yKCkubShmdW5jdGlvbiBfY2FsbGVlMihyZXMpIHsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IoKS53KGZ1bmN0aW9uIChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLm4pIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczIuJHNldChfdGhpczIuY29udGV4dERhdGEsICdjaGlsZHJlbicsIHJlcy5kYXRhLm5hdkxpc3QpOwogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYSgyKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgIH0pKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MikgewogICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLmNhdGNoRnVuKHJlcyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOi/lOWbnuS4iue6pwogICAgZ29CYWNrOiBmdW5jdGlvbiBnb0JhY2soaXNfZWRpdCkgewogICAgICB0aGlzLmZvcm1JdGVtID0gewogICAgICAgIGRpcjogdGhpcy5kaXIsCiAgICAgICAgc3VwZXJpb3I6IDEsCiAgICAgICAgZmlsZWRpcjogJycKICAgICAgfTsKICAgICAgdGhpcy5nZXRMaXN0KGZhbHNlLCBpc19lZGl0KTsKICAgIH0sCiAgICAvLyDmiZPlvIAKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4ocm93KSB7CiAgICAgIC8vIHRoaXMucm93cyA9IHJvdzsKICAgICAgdGhpcy5mb3JtSXRlbSA9IHsKICAgICAgICBkaXI6IHJvdy5wYXRoLAogICAgICAgIHN1cGVyaW9yOiAwLAogICAgICAgIGZpbGVkaXI6IHJvdy5maWxlbmFtZSwKICAgICAgICBmaWxlVG9rZW46IHRoaXMuZmlsZVRva2VuCiAgICAgIH07CiAgICAgIHRoaXMuZ2V0TGlzdChmYWxzZSwgZmFsc2UpOwogICAgfSwKICAgIGp1bXBSb3V0ZTogZnVuY3Rpb24ganVtcFJvdXRlKGl0ZW0pIHsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgcGF0aDogaXRlbS5yb3V0ZSwKICAgICAgICBmaWxlbmFtZTogJycKICAgICAgfTsKICAgICAgdGhpcy5vcGVuKGRhdGEpOwogICAgfSwKICAgIHJlZnJlc2hSb3V0ZTogZnVuY3Rpb24gcmVmcmVzaFJvdXRlKCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBwYXRoOiB0aGlzLnJvdXRlTGlzdFt0aGlzLnJvdXRlTGlzdC5sZW5ndGggLSAxXS5yb3V0ZSwKICAgICAgICBmaWxlbmFtZTogJycKICAgICAgfTsKICAgICAgdGhpcy5vcGVuKGRhdGEpOwogICAgfSwKICAgIC8vIOe8lui+kcOfCiAgICBlZGl0OiBmdW5jdGlvbiBlZGl0KHJvdykgewogICAgICB0aGlzLm5hdkl0ZW0gPSByb3c7CiAgICAgIHRoaXMuc3BpblNob3cgPSB0cnVlOwogICAgICB0aGlzLnBhdGhuYW1lID0gcm93LnBhdGhuYW1lOwogICAgICB0aGlzLnRpdGxlID0gcm93LmZpbGVuYW1lOwogICAgICB0aGlzLmVkaXRvckluZGV4WzBdLnRpdGxlID0gcm93LmZpbGVuYW1lOwogICAgICB0aGlzLmVkaXRvckluZGV4WzBdLnBhdGhuYW1lID0gcm93LnBhdGhuYW1lOwogICAgICB0aGlzLm5hdkxpc3QgPSB0aGlzLm5hdkxpc3RGb3JUYWI7CiAgICAgIHRoaXMuZGlyID0gcm93LnBhdGg7CiAgICAgIC8vIOWIm+W7uuS7o+eggeWuueWZqAogICAgICBpZiAodGhpcy5lZGl0b3JMaXN0Lmxlbmd0aCA8PSAwKSB7CiAgICAgICAgLy8gdGhpcy5pbml0RWRpdG9yKCk7CiAgICAgIH0KICAgICAgdGhpcy5vcGVuZmlsZShyb3cucGF0aG5hbWUsIGZhbHNlKTsKICAgIH0sCiAgICAvKioKICAgICAqIOWkh+azqAogICAgICovCiAgICBtYXJrOiBmdW5jdGlvbiBtYXJrKHJvdykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy4kbW9kYWxGb3JtKGZpbGVNYXJrKHsKICAgICAgICBwYXRoOiByb3cucGF0aG5hbWUsCiAgICAgICAgZmlsZVRva2VuOiB0aGlzLmZpbGVUb2tlbgogICAgICB9KSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5nZXRMaXN0KHRydWUsIGZhbHNlKTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDkv53lrZgKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbmRleCAgIC8vIOW9k+WJjee0ouW8lQogICAgICogQHBhcmFtIHtPYmplY3R9IHR5cGUgICAgLy8gdHJ1ZSDkuI3mm7TmlrDlvZPliY3mnKzlnLDmlbDmja7vvIxmYWxzZeaIluiAheS4uuepuiDmm7TmlrDlvZPliY3mlbDmja4KICAgICAqLwogICAgc2F2ZWZpbGU6IGZ1bmN0aW9uIHNhdmVmaWxlKGluZGV4LCB0eXBlKSB7CiAgICAgIHZhciBjb2RlID0gdGhpcy5lZGl0b3JMaXN0W2luZGV4XS5lZGl0b3IuZ2V0VmFsdWUoKTsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgY29tbWVudDogY29kZSwKICAgICAgICBmaWxlcGF0aDogdGhpcy5lZGl0b3JMaXN0W2luZGV4XS5wYXRoLAogICAgICAgIGZpbGVUb2tlbjogdGhpcy5maWxlVG9rZW4KICAgICAgfTsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICBzYXZlZmlsZUFwaShkYXRhKS50aGVuKC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvcigpLm0oZnVuY3Rpb24gX2NhbGxlZTMocmVzKSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yKCkudyhmdW5jdGlvbiAoX2NvbnRleHQzKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5uKSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCF0eXBlKSB7CiAgICAgICAgICAgICAgICAgIHRoYXQuY29kZSA9IGNvZGU7CiAgICAgICAgICAgICAgICAgIHRoYXQuaXNTYXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgdGhhdC5lZGl0b3JJbmRleFtpbmRleF0uaWNvbiA9ICcnOwogICAgICAgICAgICAgICAgICB0aGF0LmVkaXRvckxpc3RbaW5kZXhdLmlzU2F2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICAgICAgICB0aGF0LiRNb2RhbC5yZW1vdmUoKTsKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmEoMik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIHRoYXQuY2F0Y2hGdW4ocmVzKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yi35pawCiAgICByZWZyZXNoZmlsZTogZnVuY3Rpb24gcmVmcmVzaGZpbGUoKSB7CiAgICAgIC8vIOWIt+aWsOe8lui+keWZqAogICAgICBpZiAodGhpcy5lZGl0b3JMaXN0W3RoaXMuaW5kZXhFZGl0b3JdKSB0aGlzLm9wZW5maWxlKHRoaXMuZWRpdG9yTGlzdFt0aGlzLmluZGV4RWRpdG9yXS5wYXRoLCB0cnVlKTsKICAgIH0sCiAgICAvL+iuoeeul3Rva2Vu6L+H5pyf5pe26Ze0CiAgICBnZXRFeHBpcmVzVGltZTogZnVuY3Rpb24gZ2V0RXhwaXJlc1RpbWUoZXhwaXJlc1RpbWUpIHsKICAgICAgdmFyIG5vd1RpbWVOdW0gPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkgLyAxMDAwKTsKICAgICAgdmFyIGV4cGlyZXNUaW1lTnVtID0gZXhwaXJlc1RpbWUgLSBub3dUaW1lTnVtOwogICAgICByZXR1cm4gcGFyc2VGbG9hdChwYXJzZUZsb2F0KHBhcnNlRmxvYXQoZXhwaXJlc1RpbWVOdW0gLyA2MCkgLyA2MCkgLyAyNCk7CiAgICB9LAogICAgLy8g5L6n6L655qCP5byC5q2l5Yqg6L29CiAgICBsb2FkRGF0YTogZnVuY3Rpb24gbG9hZERhdGEoaXRlbSwgY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIGlmICghaXRlbS5kYXRhLmlzTGVhZikgewogICAgICAgIHRoaXMuZm9ybUl0ZW0gPSB7CiAgICAgICAgICBkaXI6IGl0ZW0uZGF0YS5wYXRoLAogICAgICAgICAgc3VwZXJpb3I6IDAsCiAgICAgICAgICBmaWxlZGlyOiBpdGVtLmRhdGEudGl0bGUsCiAgICAgICAgICBmaWxlVG9rZW46IHRoaXMuZmlsZVRva2VuCiAgICAgICAgfTsKICAgICAgICBvcGVuZGlyTGlzdEFwaSh0aGlzLmZvcm1JdGVtKS50aGVuKC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yKCkubShmdW5jdGlvbiBfY2FsbGVlNChyZXMpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcigpLncoZnVuY3Rpb24gKF9jb250ZXh0NCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5uKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcy5kYXRhLm5hdkxpc3QpOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmEoMik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICB9KSk7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NCkgewogICAgICAgICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH07CiAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAxMTAwMDgpIHsKICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICBfdGhpczQuaXNTaG93TG9nbiA9IHRydWU7CiAgICAgICAgICAgIF90aGlzNC5pc1Nob3dMaXN0ID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzNC5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczQuY2F0Y2hGdW4ocmVzKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOiHquWumuS5ieaYvuekugogICAgcmVuZGVyQ29udGVudDogZnVuY3Rpb24gcmVuZGVyQ29udGVudChoLCBfcmVmNSkgewogICAgICB2YXIgbm9kZSA9IF9yZWY1Lm5vZGUsCiAgICAgICAgZGF0YSA9IF9yZWY1LmRhdGEsCiAgICAgICAgcm9vdCA9IF9yZWY1LnJvb3Q7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgcmV0dXJuIGgoJ3NwYW4nLCB7CiAgICAgICAgc3R5bGU6IF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHsKICAgICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLAogICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsCiAgICAgICAgICB1c2VyU2VsZWN0OiAnbnVsbCcsCiAgICAgICAgICBjb2xvcjogJyNjY2NjY2MnCiAgICAgICAgfSwgImRpc3BsYXkiLCAnaW5saW5lLWJsb2NrJyksICJ3aWR0aCIsICcxMDAlJyksICJib3JkZXJSYWRpcyIsICc1cHgnKSwKICAgICAgICBvbjogewogICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICB0aGF0LmNsaWNrRGlyKGRhdGEsIHJvb3QsIG5vZGUpOwogICAgICAgICAgfSwKICAgICAgICAgIGNvbnRleHRtZW51OiBmdW5jdGlvbiBjb250ZXh0bWVudSgpIHsKICAgICAgICAgICAgLy8gdGhhdC5oYW5kbGVDb250ZXh0RGVsRm9sZGVyKGRhdGEscm9vdCxub2RlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIFtoKCdzcGFuJywgW2goJ0ljb24nLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHR5cGU6ICFkYXRhLmlzTGVhZiA/ICdtZC1mb2xkZXInIDogJ2lvcy1kb2N1bWVudC1vdXRsaW5lJwogICAgICAgIH0sCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIG1hcmdpblJpZ2h0OiAnOHB4JwogICAgICAgIH0KICAgICAgfSksIGgoJ3NwYW4nLCB7CiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlCiAgICAgICAgfQogICAgICB9LCBkYXRhLnRpdGxlKV0pXSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDkvqfovrnmoI/ngrnlh7vkuovku7YKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhCiAgICAgKi8KICAgIGNsaWNrRGlyOiBmdW5jdGlvbiBjbGlja0RpcihkYXRhLCByb290LCBub2RlKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5uYXZJdGVtID0gZGF0YTsKICAgICAgdGhhdC5wYXRobmFtZSA9IGRhdGEucGF0aG5hbWU7CiAgICAgIGlmICghZGF0YS5pc0RpcikgewogICAgICAgIHZhciBpID0gdGhhdC5lZGl0b3JJbmRleC5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBlLnBhdGhuYW1lID09PSBkYXRhLnBhdGhuYW1lOwogICAgICAgIH0pOwogICAgICAgIGlmIChpID4gLTEpIHsKICAgICAgICAgIHRoYXQuaW5kZXhFZGl0b3IgPSBpLnRvU3RyaW5nKCk7CiAgICAgICAgICB0aGF0LnRvZ2dsZUVkaXRvcigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgaW5kZXggPSB0aGF0LmVkaXRvckluZGV4Lmxlbmd0aDsKICAgICAgICAgIC8vIOWIm+W7unRhYnMKICAgICAgICAgIHRoYXQuZWRpdG9ySW5kZXgucHVzaCh7CiAgICAgICAgICAgIHRhYjogdHJ1ZSwKICAgICAgICAgICAgaW5kZXg6IGluZGV4LnRvU3RyaW5nKCksCiAgICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLAogICAgICAgICAgICBpY29uOiAnJywKICAgICAgICAgICAgcGF0aG5hbWU6IGRhdGEucGF0aG5hbWUKICAgICAgICAgIH0pOwogICAgICAgICAgdGhhdC5pbmRleEVkaXRvciA9IGluZGV4LnRvU3RyaW5nKCk7CiAgICAgICAgICAvLyDliJvlu7rku6PnoIHlrrnlmagKICAgICAgICAgIHRoYXQuaW5pdEVkaXRvcigpOwogICAgICAgICAgdGhhdC5vcGVuZmlsZShkYXRhLnBhdGhuYW1lLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvL+S+p+i+ueagj+WPs+mUrueCueWHu+S6i+S7tgogICAgaGFuZGxlQ29udGV4dE1lbnU6IGZ1bmN0aW9uIGhhbmRsZUNvbnRleHRNZW51KGRhdGEsIGV2ZW50LCBwb3NpdGlvbikgewogICAgICBwb3NpdGlvbi5sZWZ0ID0gTnVtYmVyKHBvc2l0aW9uLmxlZnQuc2xpY2UoMCwgLTIpKSArIDc1ICsgJ3B4JzsKICAgICAgdGhpcy5jb250ZXh0RGF0YSA9IGRhdGE7CiAgICB9LAogICAgLy8g5paH5Lu25pON5L2c57G75Z6LIGNyZWF0ZUZvbGRlcnzliJvlu7rmlofku7blpLkgY3JlYXRlRmlsZXzliJvlu7rmlofku7YgZGVsRm9sZGVyfOWIoOmZpOaWh+S7tuWkueaIluiAheaWh+S7tiByZW5hbWVGaWxlfOaWh+S7tumHjeWRveWQjQogICAgLy/liJvlu7rmlofku7blpLkKICAgIGhhbmRsZUNvbnRleHRDcmVhdGVGb2xkZXI6IGZ1bmN0aW9uIGhhbmRsZUNvbnRleHRDcmVhdGVGb2xkZXIoKSB7CiAgICAgIHRoaXMuZm9ybUZpbGUuZmlsZW5hbWUgPSAnJzsKICAgICAgdGhpcy5mb3JtVGl0bGUgPSAn5Yib5bu65paH5Lu25aS5JzsKICAgICAgdGhpcy5mb3JtU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuZmlsZVR5cGUgPSAnY3JlYXRlRm9sZGVyJzsKICAgIH0sCiAgICAvL+WIm+W7uuaWh+S7tgogICAgaGFuZGxlQ29udGV4dENyZWF0ZUZpbGU6IGZ1bmN0aW9uIGhhbmRsZUNvbnRleHRDcmVhdGVGaWxlKCkgewogICAgICB0aGlzLmZvcm1GaWxlLmZpbGVuYW1lID0gJyc7CiAgICAgIHRoaXMuZm9ybVRpdGxlID0gJ+WIm+W7uuaWh+S7tic7CiAgICAgIHRoaXMuZm9ybVNob3cgPSB0cnVlOwogICAgICB0aGlzLmZpbGVUeXBlID0gJ2NyZWF0ZUZpbGUnOwogICAgfSwKICAgIC8v5Yig6Zmk5paH5Lu2CiAgICBoYW5kbGVDb250ZXh0RGVsRm9sZGVyOiBmdW5jdGlvbiBoYW5kbGVDb250ZXh0RGVsRm9sZGVyKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGF0LiRNb2RhbC5jb25maXJtKHsKICAgICAgICB0aXRsZTogJ+WIoOmZpOaWh+S7tuWkueWSjOaWh+S7ticsCiAgICAgICAgY29udGVudDogJ+aCqOehruWumuimgeWIoOmZpOaUueaWh+S7tu+8nycsCiAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICBvbk9rOiBmdW5jdGlvbiBvbk9rKCkgewogICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgIHBhdGg6IHRoYXQuY29udGV4dERhdGEucGF0aG5hbWUsCiAgICAgICAgICAgIGZpbGVUb2tlbjogX3RoaXM1LmZpbGVUb2tlbgogICAgICAgICAgfTsKICAgICAgICAgIGRlbEZvbGRlcihkYXRhKS50aGVuKC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3IoKS5tKGZ1bmN0aW9uIF9jYWxsZWU1KHJlcykgewogICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IoKS53KGZ1bmN0aW9uIChfY29udGV4dDUpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5uKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICB0aGF0Lmxvb3BEZWwodGhhdC5uYXZMaXN0LCB0aGF0LmNvbnRleHREYXRhLm5vZGVLZXkpOwogICAgICAgICAgICAgICAgICAgIHRoYXQuJE1vZGFsLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmEoMik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g1KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9yZWY2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgdGhhdC5jYXRjaEZ1bihyZXMpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgICAgICB0aGF0LiRtZXNzYWdlLmluZm8oJ+WPlua2iOWIoOmZpCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/ph43lkb3lkI0KICAgIGhhbmRsZUNvbnRleHRSZW5hbWU6IGZ1bmN0aW9uIGhhbmRsZUNvbnRleHRSZW5hbWUoKSB7CiAgICAgIHRoaXMuZm9ybUZpbGUuZmlsZW5hbWUgPSB0aGlzLmNvbnRleHREYXRhLnRpdGxlOwogICAgICB0aGlzLmZvcm1UaXRsZSA9ICfph43lkb3lkI3mlofku7YnOwogICAgICB0aGlzLmZvcm1TaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5maWxlVHlwZSA9ICdyZW5hbWVGaWxlJzsKICAgIH0sCiAgICAvL+aJk+W8gOaWh+S7tgogICAgb3BlbmZpbGU6IGZ1bmN0aW9uIG9wZW5maWxlKHBhdGgsIGlzX2VkaXQpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICBmaWxlcGF0aDogcGF0aCwKICAgICAgICBmaWxlVG9rZW46IHRoaXMuZmlsZVRva2VuCiAgICAgIH07CiAgICAgIG9wZW5maWxlQXBpKHBhcmFtcykudGhlbigvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNyA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3IoKS5tKGZ1bmN0aW9uIF9jYWxsZWU2KHJlcykgewogICAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yKCkudyhmdW5jdGlvbiAoX2NvbnRleHQ2KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ni5uKSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFpc19lZGl0KSB7CiAgICAgICAgICAgICAgICAgIHRoYXQubW9kYWxzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgdGhhdC5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfdGhpczYuaW5pdEVkaXRvcigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgdGhhdC5jb2RlID0gZGF0YS5jb250ZW50OwogICAgICAgICAgICAgICAgLy8g5L+d5a2Y55u45a+55L+h5oGvCgogICAgICAgICAgICAgICAgdGhhdC5lZGl0b3JMaXN0W3RoYXQuaW5kZXhFZGl0b3JdLm9sZENvZGUgPSB0aGF0LmNvZGU7CiAgICAgICAgICAgICAgICBfdGhpczYuJG5leHRUaWNrKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHRoYXQuZWRpdG9yTGlzdFt0aGF0LmluZGV4RWRpdG9yIHx8IDBdLnBhdGggPSBwYXRoOwogICAgICAgICAgICAgICAgICB0aGF0LmVkaXRvckxpc3RbdGhhdC5pbmRleEVkaXRvciB8fCAwXS5wYXRobmFtZSA9IHBhdGg7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8v5pS55Y+Y5bGe5oCnCiAgICAgICAgICAgICAgICB0aGF0LmNoYW5nZU1vZGVsKGRhdGEubW9kZSwgdGhhdC5jb2RlKTsKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmEoMik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDYpIHsKICAgICAgICAgIHJldHVybiBfcmVmNy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIHRoYXQuY2F0Y2hGdW4ocmVzKTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDliJ3lp4vljJbnvJbovpHlmagKICAgICAqLwogICAgaW5pdEVkaXRvcjogZnVuY3Rpb24gaW5pdEVkaXRvcigpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOWIneWni+WMlue8lui+keWZqO+8jOehruS/nWRvbeW3sue7j+a4suafkwogICAgICAgIHRoYXQuZWRpdG9yID0gbW9uYWNvLmVkaXRvci5jcmVhdGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcl8nICsgdGhhdC5pbmRleEVkaXRvciksIHsKICAgICAgICAgIHZhbHVlOiB0aGF0LmNvZGUsCiAgICAgICAgICAvL+e8lui+keWZqOWIneWni+aYvuekuuaWh+WtlwogICAgICAgICAgbGFuZ3VhZ2U6ICdzcWwnLAogICAgICAgICAgLy/or63oqIDmlK/mjIHoh6rooYzmn6XpmIVkZW1vCiAgICAgICAgICBhdXRvbWF0aWNMYXlvdXQ6IHRydWUsCiAgICAgICAgICAvL+iHquWKqOW4g+WxgAogICAgICAgICAgdGhlbWU6ICd2cycsCiAgICAgICAgICAvL+WumOaWueiHquW4puS4ieenjeS4u+mimHZzLCBoYy1ibGFjaywgb3IgdnMtZGFyawogICAgICAgICAgZm9sZGluZ1N0cmF0ZWd5OiAnaW5kZW50YXRpb24nLAogICAgICAgICAgLy8g5Luj56CB5Y+v5YiG5bCP5q615oqY5Y+gCiAgICAgICAgICBvdmVydmlld1J1bGVyQm9yZGVyOiBmYWxzZSwKICAgICAgICAgIC8vIOS4jeimgea7muWKqOadoeeahOi+ueahhgogICAgICAgICAgc2Nyb2xsYmFyOiB7CiAgICAgICAgICAgIC8vIOa7muWKqOadoeiuvue9rgogICAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbGJhclNpemU6IDQsCiAgICAgICAgICAgIC8vIOerlua7muWKqOadoQogICAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsYmFyU2l6ZTogMTAgLy8g5qiq5rua5Yqo5p2hCiAgICAgICAgICB9LAogICAgICAgICAgYXV0b0luZGVudDogdHJ1ZSwKICAgICAgICAgIC8vIOiHquWKqOW4g+WxgAogICAgICAgICAgdGFiU2l6ZTogNCwKICAgICAgICAgIC8vIHRhYue8qei/m+mVv+W6pgogICAgICAgICAgYXV0b0Nsb3NpbmdPdmVydHlwZTogJ2Fsd2F5cycKICAgICAgICB9KTsKICAgICAgICAvL+a3u+WKoOaMiemUruebkeWQrAogICAgICAgIHRoYXQuZWRpdG9yLmFkZENvbW1hbmQobW9uYWNvLktleU1vZC5DdHJsQ21kIHwgbW9uYWNvLktleUNvZGUuS0VZX1MsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoYXQuc2F2ZWZpbGUodGhhdC5pbmRleEVkaXRvcik7CiAgICAgICAgfSk7CiAgICAgICAgdGhhdC5lZGl0b3Iub25LZXlVcChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyDlvZPplK7nm5jmjInkuIvvvIzliKTmlq3lvZPliY3nvJbovpHlmajmlofmnKzkuI7lt7Lkv53lrZjnmoTnvJbovpHlmajmlofmnKzmmK/lkKbkuIDoh7QKICAgICAgICAgIGlmICh0aGF0LmVkaXRvci5nZXRWYWx1ZSgpICE9IHRoYXQuY29kZSkgewogICAgICAgICAgICB0aGF0LmlzU2F2ZSA9IGZhbHNlOwogICAgICAgICAgICB0aGF0LmVkaXRvckluZGV4W3RoYXQuaW5kZXhFZGl0b3JdLmljb24gPSAnbWQtd2FybmluZyc7CiAgICAgICAgICAgIHRoYXQuZWRpdG9yTGlzdFt0aGF0LmluZGV4RWRpdG9yXS5pc1NhdmUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGF0LmVkaXRvckxpc3QucHVzaCh7CiAgICAgICAgICBlZGl0b3I6IHRoYXQuZWRpdG9yLAogICAgICAgICAgb2xkQ29kZTogdGhhdC5jb2RlLAogICAgICAgICAgcGF0aDogX3RoaXM3LnBhdGhuYW1lLAogICAgICAgICAgaXNTYXZlOiB0cnVlLAogICAgICAgICAgaW5kZXg6IHRoYXQuaW5kZXhFZGl0b3IKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDliIfmjaLor63oqIAKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtb2RlCiAgICAgKi8KICAgIGNoYW5nZU1vZGVsOiBmdW5jdGlvbiBjaGFuZ2VNb2RlbChtb2RlLCB2YWx1ZSkgewogICAgICB2YXIgb2xkTW9kZWwgPSB0aGlzLmVkaXRvckxpc3RbdGhpcy5pbmRleEVkaXRvcl0uZWRpdG9yLmdldE1vZGVsKCk7IC8v6I635Y+W5pen5qih5Z6LCiAgICAgIC8vIHZhciB2YWx1ZSA9IHRoaXMuZWRpdG9yLmdldFZhbHVlKCk7Ly/ojrflj5bml6fnmoTmlofmnKwKICAgICAgLy/liJvlu7rmlrDmqKHlnovvvIx2YWx1ZeS4uuaXp+aWh+acrO+8jGlk5Li6bW9kZUlk77yM5Y2z6K+t6KiA77yIbGFuZ3VhZ2UuaWTvvIkKICAgICAgLy9tb2Rlc0lkc+WNs+S4uuaUr+aMgeivreiogAogICAgICAvLyB2YXIgbW9kZXNJZHMgPSBtb25hY28ubGFuZ3VhZ2VzLmdldExhbmd1YWdlcygpLm1hcChmdW5jdGlvbihsYW5nKSB7IHJldHVybiBsYW5nLmlkOyB9KTsKICAgICAgaWYgKCFtb2RlKSBtb2RlID0gb2xkTW9kZWwuZ2V0TGFuZ3VhZ2VJZCgpOwogICAgICAvLyBpZighdmFsdWUpIHZhbHVlID0gdGhpcy5lZGl0b3IuZ2V0VmFsdWUoKTsKCiAgICAgIHZhciBuZXdNb2RlbCA9IG1vbmFjby5lZGl0b3IuY3JlYXRlTW9kZWwodmFsdWUsIG1vZGUpOwogICAgICAvL+WwhuaXp+aooeWei+mUgOavgQogICAgICBpZiAob2xkTW9kZWwpIHsKICAgICAgICBvbGRNb2RlbC5kaXNwb3NlKCk7CiAgICAgIH0KICAgICAgLy/orr7nva7mlrDmqKHlnosKICAgICAgdGhpcy5lZGl0b3JMaXN0W3RoaXMuaW5kZXhFZGl0b3JdLmVkaXRvci5zZXRNb2RlbChuZXdNb2RlbCk7CiAgICB9LAogICAgLy8g5paH5Lu25pON5L2c57G75Z6LIGNyZWF0ZUZvbGRlcnzliJvlu7rmlofku7blpLkgY3JlYXRlRmlsZXzliJvlu7rmlofku7YgZGVsRm9sZGVyfOWIoOmZpOaWh+S7tuWkueaIluiAheaWh+S7tgogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQobmFtZSkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB2YXIgZGF0YSA9ICcnOwogICAgICB2YXIgZGF0YUl0ZW0gPSAnJzsKICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHN3aXRjaCAodGhhdC5maWxlVHlwZSkgewogICAgICAgICAgICBjYXNlICdjcmVhdGVGb2xkZXInOgogICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICBwYXRoOiB0aGF0LmNvbnRleHREYXRhLnBhdGhuYW1lLAogICAgICAgICAgICAgICAgbmFtZTogdGhhdC5mb3JtRmlsZS5maWxlbmFtZSwKICAgICAgICAgICAgICAgIGZpbGVUb2tlbjogX3RoaXM4LmZpbGVUb2tlbgogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgY3JlYXRlRm9sZGVyKGRhdGEpLnRoZW4oLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmOCA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3IoKS5tKGZ1bmN0aW9uIF9jYWxsZWU3KHJlcykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yKCkudyhmdW5jdGlvbiAoX2NvbnRleHQ3KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ3Lm4pIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUl0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyOiB0aGF0LmNvbnRleHREYXRhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwZXJpb3I6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZWRpcjogdGhhdC5jb250ZXh0RGF0YS50aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlVG9rZW46IF90aGlzOC5maWxlVG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5nZXRMaXN0SXRlbShkYXRhSXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LmZvcm1TaG93KSB0aGF0LmZvcm1TaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yib5bu65oiQ5YqfJyk7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYSgyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g3KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIHRoYXQuY2F0Y2hGdW4ocmVzKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnY3JlYXRlRmlsZSc6CiAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHBhdGg6IHRoYXQuY29udGV4dERhdGEucGF0aG5hbWUsCiAgICAgICAgICAgICAgICBuYW1lOiB0aGF0LmZvcm1GaWxlLmZpbGVuYW1lLAogICAgICAgICAgICAgICAgZmlsZVRva2VuOiBfdGhpczguZmlsZVRva2VuCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBjcmVhdGVGaWxlKGRhdGEpLnRoZW4oLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmOSA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3IoKS5tKGZ1bmN0aW9uIF9jYWxsZWU4KHJlcykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yKCkudyhmdW5jdGlvbiAoX2NvbnRleHQ4KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ4Lm4pIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUl0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyOiB0aGF0LmNvbnRleHREYXRhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwZXJpb3I6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZWRpcjogdGhhdC5jb250ZXh0RGF0YS50aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlVG9rZW46IF90aGlzOC5maWxlVG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5nZXRMaXN0SXRlbShkYXRhSXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LmZvcm1TaG93KSB0aGF0LmZvcm1TaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yib5bu65oiQ5YqfJyk7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYSgyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g4KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIHRoYXQuY2F0Y2hGdW4ocmVzKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAncmVuYW1lRmlsZSc6CiAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgIG5ld25hbWU6IHRoYXQuY29udGV4dERhdGEucGF0aCArICdcXCcgKyB0aGF0LmZvcm1GaWxlLmZpbGVuYW1lLAogICAgICAgICAgICAgICAgb2xkbmFtZTogdGhhdC5jb250ZXh0RGF0YS5wYXRobmFtZSwKICAgICAgICAgICAgICAgIGZpbGVUb2tlbjogX3RoaXM4LmZpbGVUb2tlbgogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmVuYW1lKGRhdGEpLnRoZW4oLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMCA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3IoKS5tKGZ1bmN0aW9uIF9jYWxsZWU5KHJlcykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yKCkudyhmdW5jdGlvbiAoX2NvbnRleHQ5KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ5Lm4pIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kc2V0KHRoYXQuY29udGV4dERhdGEsICd0aXRsZScsIHRoYXQuZm9ybUZpbGUuZmlsZW5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5mb3JtU2hvdykgdGhhdC5mb3JtU2hvdyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmEoMik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94OSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICB0aGF0LmNhdGNoRnVuKHJlcyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzOC4kbWVzc2FnZS5lcnJvcignRmFpbCEnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog6YCA5Ye66KGo5Y2VCiAgICAgKi8KICAgIGZvcm1FeGl0OiBmdW5jdGlvbiBmb3JtRXhpdCgpIHsKICAgICAgdGhpcy5mb3JtU2hvdyA9IGZhbHNlOwogICAgfSwKICAgIC8qKgogICAgICog5aSE55CG5o6l5Y+j5Zue6LCDCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzCiAgICAgKi8KICAgIGNhdGNoRnVuOiBmdW5jdGlvbiBjYXRjaEZ1bihyZXMpIHsKICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSA0MDApIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMTEwMDA4KSB7CiAgICAgICAgICAvLyB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgdGhpcy5pc1Nob3dMb2duID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuaXNTaG93TGlzdCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aWh+S7tue8lueggeS4jeiiq+WFvOWuue+8jOaXoOazleato+ehruivu+WPluaWh+S7tiEnKTsKICAgICAgfQogICAgICAvL+WFs+mXreiSmeeJiOWxggogICAgICBpZiAodGhpcy5zcGluU2hvdykgdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAvLyDlhbPpl63mlofku7bliJfooajlsZXnpLoKICAgICAgaWYgKHRoaXMubG9hZGluZykgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgbG9vcERlbDogZnVuY3Rpb24gbG9vcERlbChkYXRhLCBub2RlS2V5KSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKGl0ZW0ubm9kZUtleSA9PT0gbm9kZUtleSkgewogICAgICAgICAgcmV0dXJuIGRhdGEuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICB9CiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgcmV0dXJuIF90aGlzOS5sb29wRGVsKGl0ZW0uY2hpbGRyZW4sIG5vZGVLZXkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDnqpflj6PmnIDlpKfljJYKICAgICAqLwogICAgd2luQ2hhbmdlczogZnVuY3Rpb24gd2luQ2hhbmdlcygpIHsKICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lKSB7CiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSAnJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNsYXNzTmFtZSA9ICdkaXktZnVsbHNjcmVlbic7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIOWIh+aNoumAiemhueWNoQogICAgICogQHBhcmFtIHtPYmplY3R9IGluZGV4CiAgICAgKi8KICAgIHRvZ2dsZUVkaXRvcjogZnVuY3Rpb24gdG9nZ2xlRWRpdG9yKCkgewogICAgICB2YXIgaW5kZXggPSBOdW1iZXIodGhpcy5pbmRleEVkaXRvcik7CiAgICAgIHRoaXMuY29kZSA9IHRoaXMuZWRpdG9yTGlzdFtpbmRleF0ub2xkQ29kZTsgLy/orr7nva7mlofku7bmiZPlvIDml7bnmoTku6PnoIEKICAgICAgdGhpcy5lZGl0b3IgPSB0aGlzLmVkaXRvckxpc3RbaW5kZXhdLmVkaXRvcjsgLy/orr7nva7nvJbovpHlmajlrp7kvosKICAgIH0sCiAgICBpc0VkaXRNYXJrOiBmdW5jdGlvbiBpc0VkaXRNYXJrKHJvdykgewogICAgICB2YXIgX3RoaXMwID0gdGhpczsKICAgICAgdHJ5IHsKICAgICAgICByb3cuaXNfZWRpdCA9IHRydWU7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIF90aGlzMC4kcmVmcy5tYXJrLmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgaXNFZGl0Qmx1cjogZnVuY3Rpb24gaXNFZGl0Qmx1cihyb3cpIHsKICAgICAgdmFyIF90aGlzMSA9IHRoaXM7CiAgICAgIHJvdy5pc19lZGl0ID0gZmFsc2U7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGZ1bGxfcGF0aDogcm93LnJlYWxfcGF0aCwKICAgICAgICBtYXJrOiByb3cubWFyawogICAgICB9OwogICAgICBtYXJrU2F2ZSh0aGlzLmZpbGVUb2tlbiwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMxLiRtZXNzYWdlLmVycm9yKGVyci5tc2cpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVUYWJSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVRhYlJlbW92ZShpbmRleCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CgogICAgICAvLyDlhbPpl63pgInpobnljaEKICAgICAgdGhhdC5lZGl0b3JJbmRleFtpbmRleF0udGFiID0gZmFsc2U7IC8vIOWFs+mXremAiemhueWNoQogICAgICAvLyDliKTmlq3lvZPliY3mlofku7bmnInmsqHmnInkv53lrZgKICAgICAgaWYgKCF0aGF0LmVkaXRvckxpc3RbaW5kZXhdLmlzU2F2ZSkgewogICAgICAgIHRoYXQuJE1vZGFsLmNvbmZpcm0oewogICAgICAgICAgdGl0bGU6ICfmlofku7bmnKrkv53lrZgnLAogICAgICAgICAgY29udGVudDogJ+aCqOaYr+WQpumcgOimgeS/neWtmOW9k+WJjeaWh+S7ticsCiAgICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgICAgb25PazogZnVuY3Rpb24gb25PaygpIHsKICAgICAgICAgICAgLy8g5L+d5a2Y5paH5Lu2CiAgICAgICAgICAgIHRoYXQuc2F2ZWZpbGUoaW5kZXgpOwogICAgICAgICAgfSwKICAgICAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHsKICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5pbmZvKCflj5bmtojkv53lrZgnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8v57yW6L6R5Zmo54q25oCB5Y+Y5YyWCiAgICBlZGl0TW9kYWxDaGFuZ2U6IGZ1bmN0aW9uIGVkaXRNb2RhbENoYW5nZSgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGF0LmVkaXRvckxpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7CiAgICAgICAgaWYgKHZhbHVlLmlzU2F2ZSA9PT0gZmFsc2UpIHsKICAgICAgICAgIGlmIChjb25maXJtKCIiLmNvbmNhdCh0aGF0LmVkaXRvckluZGV4W2luZGV4XS50aXRsZSwgIlx1NjU4N1x1NEVGNlx1NjcyQVx1NEZERFx1NUI1OCxcdTY2MkZcdTU0MjZcdTg5ODFcdTRGRERcdTVCNThcdThCRTVcdTY1ODdcdTRFRjYiKSkpIHsKICAgICAgICAgICAgLy8g5L+d5a2Y5b2T5YmN5paH5Lu2CiAgICAgICAgICAgIHRoYXQuc2F2ZWZpbGUoaW5kZXgsIHRydWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5pbmZvKCJcdTVERjJcdTUzRDZcdTZEODgiLmNvbmNhdCh0aGF0LmVkaXRvckluZGV4W2luZGV4XS50aXRsZSwgIlx1NjU4N1x1NEVGNlx1NEZERFx1NUI1OCIpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8g6ZSA5q+B5b2T5YmN57yW6L6R5ZmoCiAgICAgICAgdGhhdC5lZGl0b3JMaXN0W2luZGV4XS5lZGl0b3IuZGlzcG9zZSgpOwogICAgICAgIHRoYXQuZWRpdG9yTGlzdFtpbmRleF0uZWRpdG9yID0gbnVsbDsKICAgICAgfSk7CiAgICAgIC8vIOWIneWni+ivneaVsOaNrgogICAgICB0aGF0Lm1vZGFscyA9IGZhbHNlOyAvL+e8lui+keWZqOW8gOWFswogICAgICB0aGF0LmVkaXRvciA9ICcnOyAvL+W9k+WJjee8lui+keWZqOWvueixoQogICAgICB0aGF0LmVkaXRvckluZGV4ID0gWwogICAgICAvL+mAiemhueWNoeaVsOe7hAogICAgICB7CiAgICAgICAgdGFiOiB0cnVlLAogICAgICAgIGluZGV4OiAnMCcsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGljb246ICcnCiAgICAgIH1dOwogICAgICB0aGF0LmVkaXRvckxpc3QgPSBbXTsgLy/nvJbovpHlmajmlbDnu4QKICAgICAgdGhhdC5pbmRleEVkaXRvciA9ICcwJzsgLy/lvZPliY3nvJbovpHlmajntKLlvJUKICAgICAgdGhhdC5jb2RlID0gJyc7IC8v5b2T5YmN5paH5Lu25omT5byA5pe255qE5YaF5a65CiAgICAgIHRoYXQubmF2TGlzdCA9IFtdOyAvL+W3puS+p+WvvOiIquaVsOaNrgogICAgICB0aGF0Lm5hdkl0ZW0gPSB7fTsgLy/lt6bkvqflr7zoiKrngrnlh7vmmK/pgInkuK3nmoTmlbDmja4KICAgICAgdGhhdC5jb250ZXh0RGF0YSA9IG51bGw7IC8v5bem5L6n5a+86Iiq5Y+z6ZSu54K55Ye75piv5Lqn55Sf55qE5pWw5o2u5a+56LGhCiAgICB9CiAgfQp9Ow=="},null]}