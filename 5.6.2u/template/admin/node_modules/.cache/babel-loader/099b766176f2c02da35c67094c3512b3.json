{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\event\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\system\\event\\index.vue","mtime":1731313973103},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZXZlbnRJbmRleCwgZXZlbnRTaG93VGltZXIgfSBmcm9tICdAL2FwaS9zeXN0ZW0nOwppbXBvcnQgY3JlYXRUYXNrIGZyb20gJy4vY3JlYXRlTW9kYWwudnVlJzsKaW1wb3J0IHNldHRpbmcgZnJvbSAnQC9zZXR0aW5nJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzeXN0ZW1fZXZlbnQnLAogIGNvbXBvbmVudHM6IHsKICAgIGNyZWF0VGFzazogY3JlYXRUYXNrCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHBhZ2U6IDEsCiAgICAgIGxpbWl0OiAxNSwKICAgICAgdG90YWw6IDEsCiAgICAgIGFwaUJhc2VVUkw6ICcnLAogICAgICBoZWFkZXJMaXN0OiBbewogICAgICAgIGxhYmVsOiAn57O757uf5Lu75YqhJywKICAgICAgICB2YWx1ZTogJzAnCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ+iHquWumuS5ieS7u+WKoScsCiAgICAgICAgdmFsdWU6ICcxJwogICAgICB9XSwKICAgICAgY3VycmVudFRhYjogJzAnCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuYXBpQmFzZVVSTCA9IHNldHRpbmcuYXBpQmFzZVVSTDsKICAgIHRoaXMuZ2V0TGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5YiX6KGoCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBldmVudEluZGV4KHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgbGltaXQ6IHRoaXMubGltaXQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIHZhciBfcmVzJGRhdGEgPSByZXMuZGF0YSwKICAgICAgICAgIGNvdW50ID0gX3JlcyRkYXRhLmNvdW50LAogICAgICAgICAgbGlzdCA9IF9yZXMkZGF0YS5saXN0OwogICAgICAgIF90aGlzLnRvdGFsID0gY291bnQ7CiAgICAgICAgX3RoaXMudGFibGVEYXRhID0gbGlzdDsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkVGFzazogZnVuY3Rpb24gYWRkVGFzaygpIHsKICAgICAgdGhpcy4kcmVmcy5hZGRUYXNrLmV2ZW50SW5mbygpOwogICAgfSwKICAgIGVkaXQ6IGZ1bmN0aW9uIGVkaXQoaWQpIHsKICAgICAgdGhpcy4kcmVmcy5hZGRUYXNrLmV2ZW50SW5mbyhpZCk7CiAgICB9LAogICAgLy8g5Yig6ZmkCiAgICBoYW5kbGVEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShyb3csIHRpdCwgbnVtKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgZGVsZnJvbURhdGEgPSB7CiAgICAgICAgdGl0bGU6IHRpdCwKICAgICAgICBudW06IG51bSwKICAgICAgICB1cmw6ICJzeXN0ZW0vZXZlbnQvZGVsLyIuY29uY2F0KHJvdy5pZCksCiAgICAgICAgbWV0aG9kOiAnZGVsZXRlJywKICAgICAgICBpZHM6ICcnCiAgICAgIH07CiAgICAgIHRoaXMuJG1vZGFsU3VyZShkZWxmcm9tRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgX3RoaXMyLmdldExpc3QoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5piv5ZCm5byA5ZCvCiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShfcmVmKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgaWQgPSBfcmVmLmlkLAogICAgICAgIGlzX29wZW4gPSBfcmVmLmlzX29wZW47CiAgICAgIGV2ZW50U2hvd1RpbWVyKGlkLCBpc19vcGVuKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICBfdGhpczMuZ2V0TGlzdCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["eventIndex","eventShowTimer","creatTask","setting","name","components","data","loading","tableData","page","limit","total","apiBaseURL","headerList","label","value","currentTab","created","getList","methods","_this","then","res","_res$data","count","list","catch","$message","error","msg","addTask","$refs","eventInfo","edit","id","handleDelete","row","tit","num","_this2","delfromData","title","url","concat","method","ids","$modalSure","success","handleChange","_ref","_this3","is_open"],"sources":["src/pages/system/event/index.vue"],"sourcesContent":["<template>\n  <div>\n    <el-card :bordered=\"false\" shadow=\"never\">\n      <el-alert type=\"warning\" :closable=\"false\">\n        <template slot=\"title\">\n          自定义事件说明：<br />\n          1、新增的事件会在对应的事件类型相关的流程中触发，例：选择用户登录，则在用户登录时执行代码。<br />\n          2、可以使用对应事件类型中对应的参数，例：$data['nickname']、$data['phone']等。<br />\n          3、调用类的时候请写入完整路径，例：\\think\\facade\\Db、\\app\\services\\other\\CacheServices::class等。<br />\n        </template>\n      </el-alert>\n      <el-button type=\"primary\" v-db-click @click=\"addTask\" class=\"mt14\">新增系统事件</el-button>\n      <el-table :data=\"tableData\" v-loading=\"loading\" class=\"ivu-mt\">\n        <el-table-column label=\"编号\" min-width=\"100\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.id }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"事件名\" min-width=\"150\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.name }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"事件类型\" min-width=\"130\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.mark_name }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"是否开启\" min-width=\"130\">\n          <template slot-scope=\"scope\">\n            <el-switch\n              class=\"defineSwitch\"\n              :active-value=\"1\"\n              :inactive-value=\"0\"\n              v-model=\"scope.row.is_open\"\n              size=\"large\"\n              @change=\"handleChange(scope.row)\"\n              active-text=\"开启\"\n              inactive-text=\"关闭\"\n            >\n            </el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"创建时间\" min-width=\"130\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.add_time }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <a v-db-click @click=\"edit(scope.row.id)\">编辑</a>\n            <el-divider direction=\"vertical\"></el-divider>\n            <a v-permission=\"'seckill'\" v-db-click @click=\"handleDelete(scope.row, '删除自定事件', scope.$index)\"\n              >删除</a\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"acea-row row-right page\">\n        <pagination v-if=\"total\" :total=\"total\" :page.sync=\"page\" :limit.sync=\"limit\" @pagination=\"getList\" />\n      </div>\n      <creatTask ref=\"addTask\" :currentTab=\"currentTab\" @submitAsk=\"getList\"></creatTask>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { eventIndex, eventShowTimer } from '@/api/system';\nimport creatTask from './createModal.vue';\nimport setting from '@/setting';\nexport default {\n  name: 'system_event',\n  components: { creatTask },\n  data() {\n    return {\n      loading: false,\n      tableData: [],\n      page: 1,\n      limit: 15,\n      total: 1,\n      apiBaseURL: '',\n      headerList: [\n        { label: '系统任务', value: '0' },\n        { label: '自定义任务', value: '1' },\n      ],\n      currentTab: '0',\n    };\n  },\n  created() {\n    this.apiBaseURL = setting.apiBaseURL;\n    this.getList();\n  },\n  methods: {\n    // 列表\n    getList() {\n      this.loading = true;\n      eventIndex({\n        page: this.page,\n        limit: this.limit,\n      })\n        .then((res) => {\n          this.loading = false;\n          let { count, list } = res.data;\n          this.total = count;\n          this.tableData = list;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$message.error(res.msg);\n        });\n    },\n    addTask() {\n      this.$refs.addTask.eventInfo();\n    },\n    edit(id) {\n      this.$refs.addTask.eventInfo(id);\n    },\n    // 删除\n    handleDelete(row, tit, num) {\n      let delfromData = {\n        title: tit,\n        num: num,\n        url: `system/event/del/${row.id}`,\n        method: 'delete',\n        ids: '',\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$message.success(res.msg);\n          this.getList();\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n    // 是否开启\n    handleChange({ id, is_open }) {\n      eventShowTimer(id, is_open)\n        .then((res) => {\n          this.$message.success(res.msg);\n          this.getList();\n        })\n        .catch((res) => {\n          this.$message.error(res.msg);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.ivu-mt {\n  padding-top: 10px;\n}\n</style>\n"],"mappings":"AAmEA,SAAAA,UAAA,EAAAC,cAAA;AACA,OAAAC,SAAA;AACA,OAAAC,OAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAH,SAAA,EAAAA;EAAA;EACAI,IAAA,WAAAA,KAAA;IACA;MACAC,OAAA;MACAC,SAAA;MACAC,IAAA;MACAC,KAAA;MACAC,KAAA;MACAC,UAAA;MACAC,UAAA,GACA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,EACA;MACAC,UAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAL,UAAA,GAAAT,OAAA,CAAAS,UAAA;IACA,KAAAM,OAAA;EACA;EACAC,OAAA;IACA;IACAD,OAAA,WAAAA,QAAA;MAAA,IAAAE,KAAA;MACA,KAAAb,OAAA;MACAP,UAAA;QACAS,IAAA,OAAAA,IAAA;QACAC,KAAA,OAAAA;MACA,GACAW,IAAA,WAAAC,GAAA;QACAF,KAAA,CAAAb,OAAA;QACA,IAAAgB,SAAA,GAAAD,GAAA,CAAAhB,IAAA;UAAAkB,KAAA,GAAAD,SAAA,CAAAC,KAAA;UAAAC,IAAA,GAAAF,SAAA,CAAAE,IAAA;QACAL,KAAA,CAAAT,KAAA,GAAAa,KAAA;QACAJ,KAAA,CAAAZ,SAAA,GAAAiB,IAAA;MACA,GACAC,KAAA,WAAAJ,GAAA;QACAF,KAAA,CAAAb,OAAA;QACAa,KAAA,CAAAO,QAAA,CAAAC,KAAA,CAAAN,GAAA,CAAAO,GAAA;MACA;IACA;IACAC,OAAA,WAAAA,QAAA;MACA,KAAAC,KAAA,CAAAD,OAAA,CAAAE,SAAA;IACA;IACAC,IAAA,WAAAA,KAAAC,EAAA;MACA,KAAAH,KAAA,CAAAD,OAAA,CAAAE,SAAA,CAAAE,EAAA;IACA;IACA;IACAC,YAAA,WAAAA,aAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,WAAA;QACAC,KAAA,EAAAJ,GAAA;QACAC,GAAA,EAAAA,GAAA;QACAI,GAAA,sBAAAC,MAAA,CAAAP,GAAA,CAAAF,EAAA;QACAU,MAAA;QACAC,GAAA;MACA;MACA,KAAAC,UAAA,CAAAN,WAAA,EACAnB,IAAA,WAAAC,GAAA;QACAiB,MAAA,CAAAZ,QAAA,CAAAoB,OAAA,CAAAzB,GAAA,CAAAO,GAAA;QACAU,MAAA,CAAArB,OAAA;MACA,GACAQ,KAAA,WAAAJ,GAAA;QACAiB,MAAA,CAAAZ,QAAA,CAAAC,KAAA,CAAAN,GAAA,CAAAO,GAAA;MACA;IACA;IACA;IACAmB,YAAA,WAAAA,aAAAC,IAAA;MAAA,IAAAC,MAAA;MAAA,IAAAhB,EAAA,GAAAe,IAAA,CAAAf,EAAA;QAAAiB,OAAA,GAAAF,IAAA,CAAAE,OAAA;MACAlD,cAAA,CAAAiC,EAAA,EAAAiB,OAAA,EACA9B,IAAA,WAAAC,GAAA;QACA4B,MAAA,CAAAvB,QAAA,CAAAoB,OAAA,CAAAzB,GAAA,CAAAO,GAAA;QACAqB,MAAA,CAAAhC,OAAA;MACA,GACAQ,KAAA,WAAAJ,GAAA;QACA4B,MAAA,CAAAvB,QAAA,CAAAC,KAAA,CAAAN,GAAA,CAAAO,GAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}