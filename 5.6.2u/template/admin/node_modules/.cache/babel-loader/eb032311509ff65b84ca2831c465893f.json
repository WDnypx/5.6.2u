{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\storeCouponIssue\\create.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\marketing\\storeCouponIssue\\create.vue","mtime":1746771908482},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvciBmcm9tICJEOi9wYy96bS9cdTY2MDZcdTY2MEVcdTk2MTRcdTdGRDRcdTc5RDFcdTYyODBcdTY3MDlcdTk2NTBcdTUxNkNcdTUzRjgvXHU2RTkwXHU3ODAxL0NSTUVCLUJaIHY1LjYuMigyMDI1MDYzMCkvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L3BjL3ptL1x1NjYwNlx1NjYwRVx1OTYxNFx1N0ZENFx1NzlEMVx1NjI4MFx1NjcwOVx1OTY1MFx1NTE2Q1x1NTNGOC9cdTZFOTBcdTc4MDEvQ1JNRUItQlogdjUuNi4yKDIwMjUwNjMwKS90ZW1wbGF0ZS9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L3BjL3ptL1x1NjYwNlx1NjYwRVx1OTYxNFx1N0ZENFx1NzlEMVx1NjI4MFx1NjcwOVx1OTY1MFx1NTE2Q1x1NTNGOC9cdTZFOTBcdTc4MDEvQ1JNRUItQlogdjUuNi4yKDIwMjUwNjMwKS90ZW1wbGF0ZS9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAnQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCc7CmltcG9ydCB7IGNvdXBvblNhdmVBcGksIGNvdXBvbkRldGFpbEFwaSB9IGZyb20gJ0AvYXBpL21hcmtldGluZyc7CmltcG9ydCB7IGNhc2NhZGVyTGlzdEFwaSB9IGZyb20gJ0AvYXBpL3Byb2R1Y3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3N0b3JlQ291cG9uQ3JlYXRlJywKICBjb21wb25lbnRzOiB7CiAgICBnb29kc0xpc3Q6IGdvb2RzTGlzdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgZm9ybURhdGE6IHsKICAgICAgICBjb3Vwb25fdGl0bGU6ICcnLAogICAgICAgIGNvdXBvbl9wcmljZTogMCwKICAgICAgICB0eXBlOiAwLAogICAgICAgIHVzZV9taW5fcHJpY2U6IDAsCiAgICAgICAgY291cG9uX3RpbWU6IDAsCiAgICAgICAgc3RhcnRfdXNlX3RpbWU6IDAsCiAgICAgICAgZW5kX3VzZV90aW1lOiAwLAogICAgICAgIHN0YXJ0X3RpbWU6IDAsCiAgICAgICAgZW5kX3RpbWU6IDAsCiAgICAgICAgdXNlcl90eXBlOiAxLAogICAgICAgIHJlY2VpdmVfdHlwZTogMSwKICAgICAgICBpc19wZXJtYW5lbnQ6IDEsCiAgICAgICAgdG90YWxfY291bnQ6IDEsCiAgICAgICAgc29ydDogMCwKICAgICAgICBzdGF0dXM6IDEsCiAgICAgICAgcHJvZHVjdF9pZDogJycsCiAgICAgICAgY2F0ZWdvcnlfaWQ6IDAsCiAgICAgICAgcmVjZWl2ZV9saW1pdDogMQogICAgICB9LAogICAgICBjYXRlZ29yeUxpc3Q6IFtdLAogICAgICBwcm9kdWN0TGlzdDogW10sCiAgICAgIGlzTWluUHJpY2U6IDAsCiAgICAgIGlzQ291cG9uVGltZTogMSwKICAgICAgaXNSZWNlaXZlVGltZTogMCwKICAgICAgbW9kYWxzOiBmYWxzZSwKICAgICAgZGF0ZXRpbWUxOiBbJzIwMjMtMTAtMTggMDA6MDA6MDAnLCAnMjAyMy0xMS0yMiAwMDowMDowMCddLAogICAgICBkYXRldGltZTI6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoJ21lZGlhJywgWydpc01vYmlsZSddKSksIHt9LCB7CiAgICBpc0VkaXQ6IGZ1bmN0aW9uIGlzRWRpdCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy4kcm91dGUucGFyYW1zLmVkaXQ7CiAgICB9CiAgfSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q2F0ZWdvcnlMaXN0KCk7CiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgIHRoaXMuZm9ybURhdGEuaWQgPSB0aGlzLmlzRWRpdCAmJiBOdW1iZXIodGhpcy4kcm91dGUucGFyYW1zLmlkKSB8fCAwOwogICAgICB0aGlzLmdldENvdXBvbkRldGFpbCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlVXNlclR5cGU6IGZ1bmN0aW9uIGNoYW5nZVVzZXJUeXBlKCkgewogICAgICBpZiAodGhpcy5mb3JtRGF0YS51c2VyX3R5cGUgPT0gMikgewogICAgICAgIHRoaXMuZm9ybURhdGEucmVjZWl2ZV90eXBlID0gMTsKICAgICAgfQogICAgfSwKICAgIC8vIOWTgeexuwogICAgZ2V0Q2F0ZWdvcnlMaXN0OiBmdW5jdGlvbiBnZXRDYXRlZ29yeUxpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGNhc2NhZGVyTGlzdEFwaSgxKS50aGVuKC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yKCkubShmdW5jdGlvbiBfY2FsbGVlKHJlcykgewogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcigpLncoZnVuY3Rpb24gKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Lm4pIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5jYXRlZ29yeUxpc3QgPSByZXMuZGF0YTsKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYSgyKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0sCiAgICAvLyDkvJjmg6DliLgKICAgIGdldENvdXBvbkRldGFpbDogZnVuY3Rpb24gZ2V0Q291cG9uRGV0YWlsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgY291cG9uRGV0YWlsQXBpKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczIuZm9ybURhdGEuY291cG9uX3RpdGxlID0gZGF0YS5jb3Vwb25fdGl0bGU7CiAgICAgICAgX3RoaXMyLmZvcm1EYXRhLnR5cGUgPSBkYXRhLnR5cGU7CiAgICAgICAgX3RoaXMyLmZvcm1EYXRhLmNhdGVnb3J5X2lkID0gZGF0YS5jYXRlZ29yeV9pZDsKICAgICAgICBfdGhpczIuZm9ybURhdGEuY291cG9uX3ByaWNlID0gcGFyc2VGbG9hdChkYXRhLmNvdXBvbl9wcmljZSk7CiAgICAgICAgX3RoaXMyLmZvcm1EYXRhLnVzZV9taW5fcHJpY2UgPSBwYXJzZUZsb2F0KGRhdGEudXNlX21pbl9wcmljZSk7CiAgICAgICAgaWYgKF90aGlzMi5mb3JtRGF0YS51c2VfbWluX3ByaWNlKSB7CiAgICAgICAgICBfdGhpczIuaXNNaW5QcmljZSA9IDE7CiAgICAgICAgfQogICAgICAgIF90aGlzMi5mb3JtRGF0YS5jb3Vwb25fdGltZSA9IGRhdGEuY291cG9uX3RpbWU7CiAgICAgICAgX3RoaXMyLmZvcm1EYXRhLnJlY2VpdmVfdHlwZSA9IGRhdGEucmVjZWl2ZV90eXBlOwogICAgICAgIF90aGlzMi5mb3JtRGF0YS51c2VyX3R5cGUgPSBkYXRhLnVzZXJfdHlwZTsKICAgICAgICBfdGhpczIuZm9ybURhdGEuaXNfcGVybWFuZW50ID0gZGF0YS5pc19wZXJtYW5lbnQ7CiAgICAgICAgX3RoaXMyLmZvcm1EYXRhLnN0YXR1cyA9IGRhdGEuc3RhdHVzOwogICAgICAgIF90aGlzMi5mb3JtRGF0YS5wcm9kdWN0X2lkID0gZGF0YS5wcm9kdWN0X2lkOwogICAgICAgIF90aGlzMi5mb3JtRGF0YS5zdGFydF90aW1lID0gZGF0YS5zdGFydF90aW1lOwogICAgICAgIF90aGlzMi5mb3JtRGF0YS5lbmRfdGltZSA9IGRhdGEuZW5kX3RpbWU7CiAgICAgICAgX3RoaXMyLmZvcm1EYXRhLnRvdGFsX2NvdW50ID0gZGF0YS50b3RhbF9jb3VudDsKICAgICAgICBfdGhpczIuZm9ybURhdGEuc29ydCA9IGRhdGEuc29ydDsKICAgICAgICBfdGhpczIuZm9ybURhdGEucmVjZWl2ZV9saW1pdCA9IGRhdGEucmVjZWl2ZV9saW1pdDsKICAgICAgICBpZiAoJ3Byb2R1Y3RJbmZvJyBpbiBkYXRhKSB7CiAgICAgICAgICBfdGhpczIucHJvZHVjdExpc3QgPSBkYXRhLnByb2R1Y3RJbmZvOwogICAgICAgIH0KICAgICAgICBpZiAoIWRhdGEuY291cG9uX3RpbWUpIHsKICAgICAgICAgIF90aGlzMi5pc0NvdXBvblRpbWUgPSAwOwogICAgICAgICAgX3RoaXMyLmRhdGV0aW1lMSA9IFtfdGhpczIubWFrZURhdGUoZGF0YS5zdGFydF91c2VfdGltZSAqIDEwMDApLCBfdGhpczIubWFrZURhdGUoZGF0YS5lbmRfdXNlX3RpbWUgKiAxMDAwKV07CiAgICAgICAgICBfdGhpczIuZm9ybURhdGEuc3RhcnRfdXNlX3RpbWUgPSBfdGhpczIubWFrZURhdGUoZGF0YS5zdGFydF91c2VfdGltZSAqIDEwMDApOwogICAgICAgICAgX3RoaXMyLmZvcm1EYXRhLmVuZF91c2VfdGltZSA9IF90aGlzMi5tYWtlRGF0ZShkYXRhLmVuZF91c2VfdGltZSAqIDEwMDApOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YS5zdGFydF90aW1lKSB7CiAgICAgICAgICBfdGhpczIuaXNSZWNlaXZlVGltZSA9IDE7CiAgICAgICAgICBfdGhpczIuZGF0ZXRpbWUyID0gW2RhdGEuc3RhcnRfdGltZSAqIDEwMDAsIGRhdGEuZW5kX3RpbWUgKiAxMDAwXTsKICAgICAgICAgIF90aGlzMi5mb3JtRGF0YS5zdGFydF90aW1lID0gX3RoaXMyLm1ha2VEYXRlKGRhdGEuc3RhcnRfdGltZSAqIDEwMDApOwogICAgICAgICAgX3RoaXMyLmZvcm1EYXRhLmVuZF90aW1lID0gX3RoaXMyLm1ha2VEYXRlKGRhdGEuZW5kX3RpbWUgKiAxMDAwKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgIH0pOwogICAgfSwKICAgIG1ha2VEYXRlOiBmdW5jdGlvbiBtYWtlRGF0ZShkYXRhKSB7CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0YSk7CiAgICAgIHZhciBZWSA9IGRhdGUuZ2V0RnVsbFllYXIoKSArICctJzsKICAgICAgdmFyIE1NID0gKGRhdGUuZ2V0TW9udGgoKSArIDEgPCAxMCA/ICcwJyArIChkYXRlLmdldE1vbnRoKCkgKyAxKSA6IGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy0nOwogICAgICB2YXIgREQgPSBkYXRlLmdldERhdGUoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXREYXRlKCkgOiBkYXRlLmdldERhdGUoKTsKICAgICAgdmFyIGhoID0gKGRhdGUuZ2V0SG91cnMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRIb3VycygpIDogZGF0ZS5nZXRIb3VycygpKSArICc6JzsKICAgICAgdmFyIG1tID0gKGRhdGUuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpKSArICc6JzsKICAgICAgdmFyIHNzID0gZGF0ZS5nZXRTZWNvbmRzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0U2Vjb25kcygpIDogZGF0ZS5nZXRTZWNvbmRzKCk7CiAgICAgIHJldHVybiBZWSArIE1NICsgREQgKyAnICcgKyBoaCArIG1tICsgc3M7CiAgICB9LAogICAgLy8g5Yib5bu6CiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgaWYgKCF0aGlzLmZvcm1EYXRhLmNvdXBvbl90aXRsZSkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fovpPlhaXkvJjmg6DliLjlkI3np7AnKTsKICAgICAgfQogICAgICBpZiAodGhpcy5mb3JtRGF0YS50eXBlID09PSAyKSB7CiAgICAgICAgaWYgKCF0aGlzLmZvcm1EYXRhLnByb2R1Y3RfaWQpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fpgInmi6nllYblk4EnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZm9ybURhdGEudHlwZSA9PT0gMSkgewogICAgICAgIGlmICghdGhpcy5mb3JtRGF0YS5jYXRlZ29yeV9pZCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeWTgeexuycpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5mb3JtRGF0YS5jb3Vwb25fcHJpY2UgPD0gMCkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfkvJjmg6DliLjpnaLlgLzkuI3og73lsI/kuo4wJyk7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmlzTWluUHJpY2UpIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnVzZV9taW5fcHJpY2UgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnVzZV9taW5fcHJpY2UgPCAxKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5LyY5oOg5Yi45pyA5L2O5raI6LS55LiN6IO95bCP5LqOMCcpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5pc0NvdXBvblRpbWUpIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnN0YXJ0X3VzZV90aW1lID0gMDsKICAgICAgICB0aGlzLmZvcm1EYXRhLmVuZF91c2VfdGltZSA9IDA7CiAgICAgICAgaWYgKHRoaXMuZm9ybURhdGEuY291cG9uX3RpbWUgPCAxKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5L2/55So5pyJ5pWI5pyf6ZmQ5LiN6IO95bCP5LqOMeWkqScpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLmNvdXBvbl90aW1lID0gMDsKICAgICAgICBpZiAoIXRoaXMuZm9ybURhdGEuc3RhcnRfdXNlX3RpbWUpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fpgInmi6nkvb/nlKjmnInmlYjmnJ/pmZAnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaXNSZWNlaXZlVGltZSkgewogICAgICAgIGlmICghdGhpcy5mb3JtRGF0YS5zdGFydF90aW1lKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup6aKG5Y+W5pe26Ze0Jyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybURhdGEuc3RhcnRfdGltZSA9IDA7CiAgICAgICAgdGhpcy5mb3JtRGF0YS5lbmRfdGltZSA9IDA7CiAgICAgIH0KICAgICAgLy8gaWYgKHRoaXMuZm9ybURhdGEucmVjZWl2ZV90eXBlID09IDIgfHwgdGhpcy5mb3JtRGF0YS5yZWNlaXZlX3R5cGUgPT0gMykgewogICAgICAvLyAgIHRoaXMuZm9ybURhdGEuaXNfcGVybWFuZW50ID0gMTsKICAgICAgLy8gfQogICAgICBpZiAodGhpcy5mb3JtRGF0YS5pc19wZXJtYW5lbnQpIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnRvdGFsX2NvdW50ID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5mb3JtRGF0YS50b3RhbF9jb3VudCA8IDEpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCflj5HluIPmlbDph4/kuI3og73lsI/kuo4xJyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnJlY2VpdmVfbGltaXQgPCAxKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+avj+S4queUqOaIt+WPr+S7pemihuWPluaVsOmHj+S4jeiDveWwj+S6jjEnKTsKICAgICAgfQogICAgICBpZiAodGhpcy5mb3JtRGF0YS50eXBlID09IDApIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnByb2R1Y3RfaWQgPSAnJzsKICAgICAgICB0aGlzLmZvcm1EYXRhLmNhdGVnb3J5X2lkID0gJyc7CiAgICAgICAgdGhpcy5wcm9kdWN0TGlzdCA9IFtdOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybURhdGEudHlwZSA9PSAxKSB7CiAgICAgICAgdGhpcy5mb3JtRGF0YS5wcm9kdWN0X2lkID0gJyc7CiAgICAgICAgdGhpcy5wcm9kdWN0TGlzdCA9IFtdOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybURhdGEudHlwZSA9PSAyKSB7CiAgICAgICAgdGhpcy5mb3JtRGF0YS5jYXRlZ29yeV9pZCA9ICcnOwogICAgICB9CiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSByZXR1cm47CiAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlOwogICAgICBjb3Vwb25TYXZlQXBpKHRoaXMuZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMzLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICBfdGhpczMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogX3RoaXMzLiRyb3V0ZVByb1N0ciArICcvbWFya2V0aW5nL3N0b3JlX2NvdXBvbl9pc3N1ZS9pbmRleCcKICAgICAgICAgIH0pOwogICAgICAgIH0sIDEwMDApOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMzLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlLmVycm9yKGVyci5tc2cpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDkvb/nlKjmnInmlYjmnJ8tLeaXtumXtOautQogICAgZGF0ZUNoYW5nZTogZnVuY3Rpb24gZGF0ZUNoYW5nZSh0aW1lKSB7CiAgICAgIHRoaXMuZm9ybURhdGEuc3RhcnRfdXNlX3RpbWUgPSB0aW1lWzBdOwogICAgICB0aGlzLmZvcm1EYXRhLmVuZF91c2VfdGltZSA9IHRpbWVbMV07CiAgICB9LAogICAgLy8g6ZmQ5pe2CiAgICB0aW1lQ2hhbmdlOiBmdW5jdGlvbiB0aW1lQ2hhbmdlKHRpbWUpIHsKICAgICAgdGhpcy5mb3JtRGF0YS5zdGFydF90aW1lID0gdGltZVswXTsKICAgICAgdGhpcy5mb3JtRGF0YS5lbmRfdGltZSA9IHRpbWVbMV07CiAgICB9LAogICAgLy/lr7nosaHmlbDnu4Tljrvph43vvJsKICAgIHVuaXF1ZTogZnVuY3Rpb24gdW5pcXVlKGFycikgewogICAgICB2YXIgcmVzID0gbmV3IE1hcCgpOwogICAgICByZXR1cm4gYXJyLmZpbHRlcihmdW5jdGlvbiAoYXJyKSB7CiAgICAgICAgcmV0dXJuICFyZXMuaGFzKGFyci5wcm9kdWN0X2lkKSAmJiByZXMuc2V0KGFyci5wcm9kdWN0X2lkLCAxKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6YCJ5oup55qE5ZWG5ZOBCiAgICBnZXRQcm9kdWN0SWQ6IGZ1bmN0aW9uIGdldFByb2R1Y3RJZChwcm9kdWN0TGlzdCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdGhpcy5tb2RhbHMgPSBmYWxzZTsKICAgICAgdGhpcy5wcm9kdWN0TGlzdCA9IHRoaXMudW5pcXVlKHRoaXMucHJvZHVjdExpc3QuY29uY2F0KHByb2R1Y3RMaXN0KSk7CiAgICAgIHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCA9ICcnOwogICAgICB0aGlzLnByb2R1Y3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKF90aGlzNC5mb3JtRGF0YS5wcm9kdWN0X2lkKSB7CiAgICAgICAgICBfdGhpczQuZm9ybURhdGEucHJvZHVjdF9pZCArPSAiLCIuY29uY2F0KHZhbHVlLnByb2R1Y3RfaWQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczQuZm9ybURhdGEucHJvZHVjdF9pZCArPSAiIi5jb25jYXQodmFsdWUucHJvZHVjdF9pZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy5tb2RhbHMgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDliKDpmaTllYblk4EKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKHByb2R1Y3RJZCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucHJvZHVjdExpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaWYgKHRoaXMucHJvZHVjdExpc3RbaW5kZXhdLnByb2R1Y3RfaWQgPT0gcHJvZHVjdElkKSB7CiAgICAgICAgICB0aGlzLnByb2R1Y3RMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCA9ICcnOwogICAgICB0aGlzLnByb2R1Y3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKF90aGlzNS5mb3JtRGF0YS5wcm9kdWN0X2lkKSB7CiAgICAgICAgICBfdGhpczUuZm9ybURhdGEucHJvZHVjdF9pZCArPSAiLCIuY29uY2F0KHZhbHVlLnByb2R1Y3RfaWQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczUuZm9ybURhdGEucHJvZHVjdF9pZCArPSAiIi5jb25jYXQodmFsdWUucHJvZHVjdF9pZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["mapState","goodsList","couponSaveApi","couponDetailApi","cascaderListApi","name","components","data","disabled","formData","coupon_title","coupon_price","type","use_min_price","coupon_time","start_use_time","end_use_time","start_time","end_time","user_type","receive_type","is_permanent","total_count","sort","status","product_id","category_id","receive_limit","categoryList","productList","isMinPrice","isCouponTime","isReceiveTime","modals","datetime1","datetime2","computed","_objectSpread","isEdit","$route","params","edit","created","getCategoryList","id","Number","getCouponDetail","methods","changeUserType","_this","then","_ref","_asyncToGenerator","_regenerator","m","_callee","res","w","_context","n","a","_x","apply","arguments","_this2","parseFloat","productInfo","makeDate","catch","err","$message","error","msg","date","Date","YY","getFullYear","MM","getMonth","DD","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","save","_this3","success","setTimeout","$router","push","path","$routeProStr","dateChange","time","timeChange","unique","arr","Map","filter","has","set","getProductId","_this4","concat","forEach","value","cancel","remove","productId","_this5","index","length","splice"],"sources":["src/pages/marketing/storeCouponIssue/create.vue"],"sourcesContent":["<template>\n  <div>\n    <pages-header\n      ref=\"pageHeader\"\n      :title=\"$route.params.id ? '编辑优惠券' : '添加优惠券'\"\n      :backUrl=\"$routeProStr + '/marketing/store_coupon_issue/index'\"\n    ></pages-header>\n    <el-card :bordered=\"false\" shadow=\"never\" class=\"mt16\">\n      <el-form :model=\"formData\" label-width=\"160px\">\n        <el-form-item label=\"优惠券名称：\">\n          <el-input\n            v-model=\"formData.coupon_title\"\n            maxlength=\"18\"\n            show-word-limit\n            placeholder=\"请输入优惠券名称\"\n            class=\"content_width\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"优惠券面值：\">\n          <el-input-number\n            :controls=\"false\"\n            :min=\"1\"\n            :max=\"9999999999\"\n            v-model=\"formData.coupon_price\"\n            class=\"content_width input-number-unit-class\"\n            class-unit=\"元\"\n            :disabled=\"isEdit\"\n          ></el-input-number>\n        </el-form-item>\n        <el-form-item label=\"用户类型：\">\n          <el-radio-group v-model=\"formData.user_type\" :disabled=\"isEdit\" @input=\"changeUserType\">\n            <el-radio :label=\"1\">普通用户</el-radio>\n            <el-radio :label=\"2\">付费会员用户</el-radio>\n          </el-radio-group>\n          <div class=\"tip\">\n            普通用户：所有用户都能获取到的优惠券；<br />\n            付费会员用户：仅付费会员才能领取的优惠券；\n          </div>\n        </el-form-item>\n        <el-form-item label=\"发送方式：\" v-show=\"formData.user_type == 1\">\n          <el-radio-group v-model=\"formData.receive_type\" :disabled=\"isEdit\">\n            <el-radio :label=\"1\">用户领取</el-radio>\n            <el-radio :label=\"3\">系统赠送</el-radio>\n          </el-radio-group>\n          <div class=\"tip\">\n            用户领取：用户需要手动领取优惠券；<br />\n            系统赠送：1.后台发放指定用户。2.添加到商品里面用户购买该商品获得。3.设置新人礼页面新用户注册赠送优惠券；\n          </div>\n        </el-form-item>\n        <el-form-item label=\"优惠劵类型：\">\n          <el-radio-group v-model=\"formData.type\" :disabled=\"isEdit\">\n            <el-radio :label=\"0\">通用券</el-radio>\n            <el-radio :label=\"1\">品类券</el-radio>\n            <el-radio :label=\"2\">商品券</el-radio>\n            <!--                        <el-radio :label=\"3\">会员券</el-radio>-->\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item v-show=\"formData.type === 2\">\n          <template>\n            <div class=\"acea-row\">\n              <div v-for=\"(item, index) in productList\" :key=\"index\" class=\"pictrue\">\n                <img v-lazy=\"item.image\" />\n                <i  v-if=\"formData.type == 2 && !formData.id\" class=\"el-icon-error btndel\" v-db-click @click=\"remove(item.product_id)\"></i>\n              </div>\n              <div v-if=\"formData.type == 2 && !formData.id\" class=\"upLoad acea-row row-center-wrapper\" v-db-click @click=\"modals = true\">\n                <i class=\"el-icon-goods\" style=\"font-size: 24px\"></i>\n              </div>\n            </div>\n          </template>\n        </el-form-item>\n        <el-form-item v-show=\"formData.type === 1\">\n          <el-cascader\n            v-model=\"formData.category_id\"\n            size=\"small\"\n            :options=\"categoryList\"\n            :props=\"{ multiple: true, emitPath: false, checkStrictly: true }\"\n            clearable\n            style=\"width: 320px\"\n            :disabled=\"isEdit\"\n          ></el-cascader>\n          <div class=\"info\">选择商品的品类</div>\n        </el-form-item>\n        <el-form-item label=\"使用门槛：\">\n          <el-radio-group v-model=\"isMinPrice\" :disabled=\"isEdit\">\n            <el-radio :label=\"0\">无门槛</el-radio>\n            <el-radio :label=\"1\">有门槛</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item v-if=\"isMinPrice\">\n          <el-input-number\n            :controls=\"false\"\n            :min=\"0\"\n            :max=\"9999999999\"\n            v-model=\"formData.use_min_price\"\n            class=\"content_width input-number-unit-class\"\n            :disabled=\"isEdit\"\n            class-unit=\"元\"\n          ></el-input-number>\n          <div class=\"info\">填写优惠券的最低消费金额</div>\n        </el-form-item>\n        <el-form-item label=\"有效期：\">\n          <el-radio-group v-model=\"isCouponTime\" :disabled=\"isEdit\">\n            <el-radio :label=\"1\">天数</el-radio>\n            <el-radio :label=\"0\">时间段</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item v-show=\"isCouponTime\" label=\"\">\n          <el-input-number\n            :controls=\"false\"\n            :min=\"0\"\n            v-model=\"formData.coupon_time\"\n            :precision=\"0\"\n            class=\"content_width input-number-unit-class\"\n            :disabled=\"isEdit\"\n            class-unit=\"天\"\n          ></el-input-number>\n          <div class=\"info\">领取后多少天内有效</div>\n        </el-form-item>\n        <el-form-item v-show=\"!isCouponTime\" label=\"\">\n          <el-date-picker\n            v-model=\"datetime1\"\n            :disabled=\"isEdit\"\n            clearable\n            :editable=\"false\"\n            type=\"datetimerange\"\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\n            style=\"width: 380px\"\n            range-separator=\"-\"\n            start-placeholder=\"开始日期\"\n            end-placeholder=\"结束日期\"\n            @change=\"dateChange\"\n          ></el-date-picker>\n        </el-form-item>\n\n        <el-form-item label=\"领取时间：\" v-if=\"formData.receive_type != 2 && formData.receive_type != 3\">\n          <el-radio-group v-model=\"isReceiveTime\" :disabled=\"isEdit\">\n            <el-radio :label=\"1\">限时</el-radio>\n            <el-radio :label=\"0\">不限时</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item v-show=\"isReceiveTime\" label=\"\">\n          <el-date-picker\n            clearable\n            v-model=\"datetime2\"\n            type=\"datetimerange\"\n            value-format=\"yyyy/MM/dd HH:mm:ss\"\n            style=\"width: 380px\"\n            range-separator=\"-\"\n            start-placeholder=\"开始日期\"\n            end-placeholder=\"结束日期\"\n            @change=\"timeChange\"\n            :disabled=\"isEdit\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"优惠券发布数量：\" v-show=\"formData.receive_type == 1\">\n          <el-radio-group v-model=\"formData.is_permanent\" :disabled=\"isEdit\">\n            <el-radio :label=\"0\">限量</el-radio>\n            <el-radio :label=\"1\">不限量</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item v-show=\"!formData.is_permanent\" label=\"\">\n          <el-input-number\n            :controls=\"false\"\n            :min=\"isEdit ? formData.total_count : 1\"\n            :max=\"9999999999\"\n            v-model=\"formData.total_count\"\n            :precision=\"0\"\n            class=\"content_width input-number-unit-class\"\n            class-unit=\"张\"\n          ></el-input-number>\n          <div class=\"info\">填写优惠券的发布数量</div>\n        </el-form-item>\n        <el-form-item label=\"用户领取数量：\" v-if=\"formData.receive_type != 2 && formData.receive_type != 3\">\n          <el-input-number\n            :controls=\"false\"\n            :min=\"isEdit ? formData.receive_limit : 1\"\n            :max=\"9999999999\"\n            v-model=\"formData.receive_limit\"\n            :precision=\"0\"\n            class=\"content_width input-number-unit-class\"\n            class-unit=\"张\"\n          ></el-input-number>\n          <div class=\"info\">填写每个用户可以领取多少张</div>\n        </el-form-item>\n        <el-form-item label=\"状态：\">\n          <el-radio-group v-model=\"formData.status\">\n            <el-radio :label=\"1\">开启</el-radio>\n            <el-radio :label=\"0\">关闭</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" v-db-click @click=\"save\" :disabled=\"disabled\">{{\n            isEdit ? '立即保存' : '立即创建'\n          }}</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n    <el-dialog :visible.sync=\"modals\" title=\"商品列表\" class=\"paymentFooter\" width=\"1000px\">\n      <goods-list ref=\"goodslist\" v-if=\"modals\" :ischeckbox=\"true\" @getProductId=\"getProductId\"></goods-list>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport goodsList from '@/components/goodsList/index';\nimport { couponSaveApi, couponDetailApi } from '@/api/marketing';\nimport { cascaderListApi } from '@/api/product';\nexport default {\n  name: 'storeCouponCreate',\n  components: {\n    goodsList,\n  },\n  data() {\n    return {\n      disabled: false,\n      formData: {\n        coupon_title: '',\n        coupon_price: 0,\n        type: 0,\n        use_min_price: 0,\n        coupon_time: 0,\n        start_use_time: 0,\n        end_use_time: 0,\n        start_time: 0,\n        end_time: 0,\n        user_type: 1,\n        receive_type: 1,\n        is_permanent: 1,\n        total_count: 1,\n        sort: 0,\n        status: 1,\n        product_id: '',\n        category_id: 0,\n        receive_limit: 1,\n      },\n      categoryList: [],\n      productList: [],\n      isMinPrice: 0,\n      isCouponTime: 1,\n      isReceiveTime: 0,\n      modals: false,\n      datetime1: ['2023-10-18 00:00:00', '2023-11-22 00:00:00'],\n      datetime2: [],\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    isEdit() {\n      return !!this.$route.params.edit;\n    },\n  },\n  created() {\n    this.getCategoryList();\n    if (this.$route.params.id) {\n      this.formData.id = (this.isEdit && Number(this.$route.params.id)) || 0;\n      this.getCouponDetail();\n    }\n  },\n  methods: {\n    changeUserType() {\n      if (this.formData.user_type == 2) {\n        this.formData.receive_type = 1;\n      }\n    },\n    // 品类\n    getCategoryList() {\n      cascaderListApi(1).then(async (res) => {\n        this.categoryList = res.data;\n      });\n    },\n    // 优惠券\n    getCouponDetail() {\n      couponDetailApi(this.$route.params.id)\n        .then((res) => {\n          let data = res.data;\n          this.formData.coupon_title = data.coupon_title;\n          this.formData.type = data.type;\n          this.formData.category_id = data.category_id;\n          this.formData.coupon_price = parseFloat(data.coupon_price);\n          this.formData.use_min_price = parseFloat(data.use_min_price);\n          if (this.formData.use_min_price) {\n            this.isMinPrice = 1;\n          }\n          this.formData.coupon_time = data.coupon_time;\n          this.formData.receive_type = data.receive_type;\n          this.formData.user_type = data.user_type;\n          this.formData.is_permanent = data.is_permanent;\n          this.formData.status = data.status;\n          this.formData.product_id = data.product_id;\n          this.formData.start_time = data.start_time;\n          this.formData.end_time = data.end_time;\n          this.formData.total_count = data.total_count;\n          this.formData.sort = data.sort;\n          this.formData.receive_limit = data.receive_limit;\n          if ('productInfo' in data) {\n            this.productList = data.productInfo;\n          }\n          if (!data.coupon_time) {\n            this.isCouponTime = 0;\n            this.datetime1 = [this.makeDate(data.start_use_time * 1000), this.makeDate(data.end_use_time * 1000)];\n            this.formData.start_use_time = this.makeDate(data.start_use_time * 1000);\n            this.formData.end_use_time = this.makeDate(data.end_use_time * 1000);\n          }\n          if (data.start_time) {\n            this.isReceiveTime = 1;\n            this.datetime2 = [data.start_time * 1000, data.end_time * 1000];\n            this.formData.start_time = this.makeDate(data.start_time * 1000);\n            this.formData.end_time = this.makeDate(data.end_time * 1000);\n          }\n        })\n        .catch((err) => {\n          this.$message.error(err.msg);\n        });\n    },\n    makeDate(data) {\n      let date = new Date(data);\n      let YY = date.getFullYear() + '-';\n      let MM = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n      let DD = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\n      let hh = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\n      let mm = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) + ':';\n      let ss = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();\n      return YY + MM + DD + ' ' + hh + mm + ss;\n    },\n    // 创建\n    save() {\n      if (!this.formData.coupon_title) {\n        return this.$message.error('请输入优惠券名称');\n      }\n      if (this.formData.type === 2) {\n        if (!this.formData.product_id) {\n          return this.$message.error('请选择商品');\n        }\n      }\n      if (this.formData.type === 1) {\n        if (!this.formData.category_id) {\n          return this.$message.error('请选择品类');\n        }\n      }\n      if (this.formData.coupon_price <= 0) {\n        return this.$message.error('优惠券面值不能小于0');\n      }\n      if (!this.isMinPrice) {\n        this.formData.use_min_price = 0;\n      } else {\n        if (this.formData.use_min_price < 1) {\n          return this.$message.error('优惠券最低消费不能小于0');\n        }\n      }\n      if (this.isCouponTime) {\n        this.formData.start_use_time = 0;\n        this.formData.end_use_time = 0;\n        if (this.formData.coupon_time < 1) {\n          return this.$message.error('使用有效期限不能小于1天');\n        }\n      } else {\n        this.formData.coupon_time = 0;\n        if (!this.formData.start_use_time) {\n          return this.$message.error('请选择使用有效期限');\n        }\n      }\n      if (this.isReceiveTime) {\n        if (!this.formData.start_time) {\n          return this.$message.error('请选择领取时间');\n        }\n      } else {\n        this.formData.start_time = 0;\n        this.formData.end_time = 0;\n      }\n      // if (this.formData.receive_type == 2 || this.formData.receive_type == 3) {\n      //   this.formData.is_permanent = 1;\n      // }\n      if (this.formData.is_permanent) {\n        this.formData.total_count = 0;\n      } else {\n        if (this.formData.total_count < 1) {\n          return this.$message.error('发布数量不能小于1');\n        }\n      }\n      if (this.formData.receive_limit < 1) {\n        return this.$message.error('每个用户可以领取数量不能小于1');\n      }\n      if (this.formData.type == 0) {\n        this.formData.product_id = '';\n        this.formData.category_id = '';\n        this.productList = [];\n      } else if (this.formData.type == 1) {\n        this.formData.product_id = '';\n        this.productList = [];\n      } else if (this.formData.type == 2) {\n        this.formData.category_id = '';\n      }\n      if (this.disabled) return;\n      this.disabled = true;\n      couponSaveApi(this.formData)\n        .then((res) => {\n          this.$message.success(res.msg);\n          setTimeout(() => {\n            this.disabled = false;\n            this.$router.push({\n              path: this.$routeProStr + '/marketing/store_coupon_issue/index',\n            });\n          }, 1000);\n        })\n        .catch((err) => {\n          this.disabled = false;\n          this.$message.error(err.msg);\n        });\n    },\n    // 使用有效期--时间段\n    dateChange(time) {\n      this.formData.start_use_time = time[0];\n      this.formData.end_use_time = time[1];\n    },\n    // 限时\n    timeChange(time) {\n      this.formData.start_time = time[0];\n      this.formData.end_time = time[1];\n    },\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.product_id) && res.set(arr.product_id, 1));\n    },\n    // 选择的商品\n    getProductId(productList) {\n      this.modals = false;\n      this.productList = this.unique(this.productList.concat(productList));\n      this.formData.product_id = '';\n      this.productList.forEach((value) => {\n        if (this.formData.product_id) {\n          this.formData.product_id += `,${value.product_id}`;\n        } else {\n          this.formData.product_id += `${value.product_id}`;\n        }\n      });\n    },\n    cancel() {\n      this.modals = false;\n    },\n    // 删除商品\n    remove(productId) {\n      for (let index = 0; index < this.productList.length; index++) {\n        if (this.productList[index].product_id == productId) {\n          this.productList.splice(index, 1);\n        }\n      }\n      this.formData.product_id = '';\n      this.productList.forEach((value) => {\n        if (this.formData.product_id) {\n          this.formData.product_id += `,${value.product_id}`;\n        } else {\n          this.formData.product_id += `${value.product_id}`;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.content_width {\n  width: 414px;\n}\n\n.info {\n  color: #888;\n  font-size: 12px;\n}\n\n.pictrue {\n  width: 60px;\n  height: 60px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  margin-right: 15px;\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n\n  .btndel {\n    position: absolute;\n    z-index: 1;\n    width: 20px !important;\n    height: 20px !important;\n    left: 46px;\n    top: -4px;\n  }\n}\n\n.upLoad {\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n}\n\n.ivu-icon-ios-close-circle {\n  position: absolute;\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n}\n\n.tip {\n  color: #888;\n  font-size: 12px;\n  line-height: 16px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}