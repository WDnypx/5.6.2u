{"remainingRequest":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\notify\\smsConfig\\elecInvoice.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\src\\pages\\notify\\smsConfig\\elecInvoice.vue","mtime":1731313973084},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\babel.config.js","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\.babelrc","mtime":1679965410000},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1753254258567},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1753254255279},{"path":"D:\\pc\\zm\\昆明阔翔科技有限公司\\源码\\CRMEB-BZ v5.6.2(20250630)\\template\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1753254260598}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgaW52b2ljZUNhdGVnb3J5LCBzYXZlQmFzaWNzLCBpbnZvaWNlQ29uZmlnIH0gZnJvbSAnQC9hcGkvb3JkZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJycsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVWYWxpZGF0ZToge30sCiAgICAgIGZvcm1JdGVtOiB7CiAgICAgICAgZWxlY19pbnZvaWNlOiAwLAogICAgICAgIGF1dG9faW52b2ljZTogMCwKICAgICAgICBlbGVjX2ludm9pY2VfY2F0ZTogJycsCiAgICAgICAgZWxlY19pbnZvaWNlX3RheF9yYXRlOiBudWxsCiAgICAgIH0sCiAgICAgIG9wdGlvbnNDb25maWc6IHsKICAgICAgICBsYWJlbDogJ25hbWUnLAogICAgICAgIHZhbHVlOiAnaWQnCiAgICAgIH0sCiAgICAgIGdyaWQ6IHsKICAgICAgICB4bDogOCwKICAgICAgICBsZzogMTIsCiAgICAgICAgbWQ6IDE4LAogICAgICAgIHNtOiAxNiwKICAgICAgICB4czogMjQKICAgICAgfSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIG9wdGlvbnM6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0SW52b2ljZUNvbmZpZygpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIGdldEludm9pY2VDb25maWc6IGZ1bmN0aW9uIGdldEludm9pY2VDb25maWcoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGludm9pY2VDb25maWcoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5mb3JtSXRlbSA9IHJlcy5kYXRhOwogICAgICAgIF90aGlzLmZvcm1JdGVtLmVsZWNfaW52b2ljZV9jYXRlID0gcmVzLmRhdGEuZWxlY19pbnZvaWNlX2NhdGUgfHwgJyc7CiAgICAgICAgdmFyIF9yZXMkZGF0YSA9IHJlcy5kYXRhLAogICAgICAgICAgZWxlY19pbnZvaWNlX2NhdGUgPSBfcmVzJGRhdGEuZWxlY19pbnZvaWNlX2NhdGUsCiAgICAgICAgICBlbGVjX2ludm9pY2VfY2F0ZV9uYW1lID0gX3JlcyRkYXRhLmVsZWNfaW52b2ljZV9jYXRlX25hbWU7CiAgICAgICAgaWYgKGVsZWNfaW52b2ljZV9jYXRlKSB7CiAgICAgICAgICBfdGhpcy5vcHRpb25zID0gW3sKICAgICAgICAgICAgaWQ6IGVsZWNfaW52b2ljZV9jYXRlLAogICAgICAgICAgICBuYW1lOiBlbGVjX2ludm9pY2VfY2F0ZV9uYW1lCiAgICAgICAgICB9XTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdENoYW5nZTogZnVuY3Rpb24gc2VsZWN0Q2hhbmdlKGUpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmogPSB0aGlzLm9wdGlvbnMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlkID09PSBlOwogICAgICB9KTsKICAgICAgdGhpcy5mb3JtSXRlbS5lbGVjX2ludm9pY2VfY2F0ZV9uYW1lID0gb2JqLm5hbWU7CiAgICAgIHRoaXMuZm9ybUl0ZW0uZWxlY19pbnZvaWNlX3RheF9yYXRlID0gb2JqLnRheF9yYXRlX251bTsKICAgIH0sCiAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBzYXZlQmFzaWNzKF90aGlzMi5mb3JtSXRlbSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKCfkv53lrZjmiJDlip8nKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW90ZU1ldGhvZDogZnVuY3Rpb24gcmVtb3RlTWV0aG9kKHF1ZXJ5KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBpZiAocXVlcnkgIT09ICcnKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICBpbnZvaWNlQ2F0ZWdvcnkoewogICAgICAgICAgbmFtZTogcXVlcnkKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBfdGhpczMub3B0aW9ucyA9IHJlcy5kYXRhLmxpc3QuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpID4gLTE7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm9wdGlvbnMgPSBbXTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["invoiceCategory","saveBasics","invoiceConfig","name","data","ruleValidate","formItem","elec_invoice","auto_invoice","elec_invoice_cate","elec_invoice_tax_rate","optionsConfig","label","value","grid","xl","lg","md","sm","xs","loading","options","created","getInvoiceConfig","mounted","methods","_this","then","res","_res$data","elec_invoice_cate_name","id","selectChange","e","obj","find","item","tax_rate_num","handleSubmit","formName","_this2","$refs","validate","valid","$message","success","console","log","remoteMethod","query","_this3","list","filter","toLowerCase","indexOf"],"sources":["src/pages/notify/smsConfig/elecInvoice.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n    <div class=\"i-layout-page-header header-title\">\n      <span class=\"ivu-page-header-title\">{{ $route.meta.title }}</span>\n    </div>\n    <el-card :bordered=\"false\" shadow=\"never\">\n      <el-form\n        ref=\"formItem\"\n        :model=\"formItem\"\n        label-width=\"110px\"\n        label-position=\"right\"\n        :rules=\"ruleValidate\"\n        @submit.native.prevent\n      >\n        <el-row :gutter=\"24\">\n          <el-col :span=\"24\">\n            <el-col v-bind=\"grid\">\n              <el-form-item label=\"电子发票状态：\" prop=\"name\" label-for=\"name\">\n                <el-radio-group v-model=\"formItem.elec_invoice\">\n                  <el-radio :label=\"1\">开启</el-radio>\n                  <el-radio :label=\"0\">关闭</el-radio>\n                </el-radio-group>\n                <div class=\"tips-info\">是否开启电子发票</div>\n              </el-form-item>\n            </el-col>\n          </el-col>\n          <template v-if=\"formItem.elec_invoice === 1\">\n            <el-col :span=\"24\">\n              <el-col v-bind=\"grid\">\n                <el-form-item label=\"是否自动开票：\" prop=\"name\" label-for=\"name\">\n                  <div>\n                    <el-radio-group v-model=\"formItem.auto_invoice\">\n                      <el-radio :label=\"1\">开启</el-radio>\n                      <el-radio :label=\"0\">关闭</el-radio>\n                    </el-radio-group>\n                    <div class=\"tips-info\">是否开启自动开票功能</div>\n                  </div>\n                </el-form-item>\n              </el-col>\n            </el-col>\n            <template v-if=\"formItem.auto_invoice === 1 && formItem.elec_invoice === 1\">\n              <el-col :span=\"24\">\n                <el-col v-bind=\"grid\">\n                  <el-form-item label=\"电子发票分类：\">\n                    <el-select\n                      class=\"input-width\"\n                      v-model=\"formItem.elec_invoice_cate\"\n                      filterable\n                      remote\n                      reserve-keyword\n                      :remote-method=\"remoteMethod\"\n                      :loading=\"loading\"\n                      placeholder=\"请输入并选择电子发票的商品分类\"\n                      @change=\"selectChange\"\n                    >\n                      <el-option v-for=\"item in options\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\n                      </el-option>\n                    </el-select>\n                    <div class=\"tips-info\">电子发票需输入搜索并选择商品分类，如：电子产品、电子服务等</div>\n                  </el-form-item>\n                </el-col>\n              </el-col>\n              <el-col :span=\"24\">\n                <el-col v-bind=\"grid\">\n                  <el-form-item label=\"电子发票税率：\">\n                    <el-input\n                      type=\"number\"\n                      class=\"input-width\"\n                      v-model=\"formItem.elec_invoice_tax_rate\"\n                      placeholder=\"请输入电子发票税率\"\n                    />\n                    <div class=\"tips-info\">\n                      默认填充税率可能存在误差，请确认无误后再保存电子发票的税率，填写0-100直接的整数，如：13%的税率请填写13\n                    </div>\n                  </el-form-item>\n                </el-col>\n              </el-col>\n            </template>\n          </template>\n          <el-col :span=\"24\">\n            <el-col v-bind=\"grid\">\n              <el-form-item>\n                <el-button type=\"primary\" long v-db-click @click=\"handleSubmit('formItem')\">保存</el-button>\n              </el-form-item>\n            </el-col>\n          </el-col>\n        </el-row>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { invoiceCategory, saveBasics, invoiceConfig } from '@/api/order';\nexport default {\n  name: '',\n  data() {\n    return {\n      ruleValidate: {},\n      formItem: {\n        elec_invoice: 0,\n        auto_invoice: 0,\n        elec_invoice_cate: '',\n        elec_invoice_tax_rate: null,\n      },\n      optionsConfig: {\n        label: 'name',\n        value: 'id',\n      },\n      grid: {\n        xl: 8,\n        lg: 12,\n        md: 18,\n        sm: 16,\n        xs: 24,\n      },\n      loading: false,\n      options: [],\n    };\n  },\n  created() {\n    this.getInvoiceConfig();\n  },\n  mounted() {},\n  methods: {\n    getInvoiceConfig() {\n      invoiceConfig().then((res) => {\n        this.formItem = res.data;\n        this.formItem.elec_invoice_cate = res.data.elec_invoice_cate || '';\n        let { elec_invoice_cate, elec_invoice_cate_name } = res.data;\n        if (elec_invoice_cate) {\n          this.options = [{ id: elec_invoice_cate, name: elec_invoice_cate_name }];\n        }\n      });\n    },\n    selectChange(e) {\n      let obj = {};\n      obj = this.options.find((item) => {\n        return item.id === e;\n      });\n      this.formItem.elec_invoice_cate_name = obj.name;\n      this.formItem.elec_invoice_tax_rate = obj.tax_rate_num;\n    },\n    handleSubmit(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          saveBasics(this.formItem).then(() => {\n            this.$message.success('保存成功');\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    remoteMethod(query) {\n      if (query !== '') {\n        this.loading = true;\n        invoiceCategory({ name: query }).then((res) => {\n          this.loading = false;\n          this.options = res.data.list.filter((item) => {\n            return item.name.toLowerCase().indexOf(query.toLowerCase()) > -1;\n          });\n        });\n      } else {\n        this.options = [];\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.input-width {\n  width: 100%;\n}\n</style>\n"],"mappings":";;;;;;;AA6FA,SAAAA,eAAA,EAAAC,UAAA,EAAAC,aAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,YAAA;MACAC,QAAA;QACAC,YAAA;QACAC,YAAA;QACAC,iBAAA;QACAC,qBAAA;MACA;MACAC,aAAA;QACAC,KAAA;QACAC,KAAA;MACA;MACAC,IAAA;QACAC,EAAA;QACAC,EAAA;QACAC,EAAA;QACAC,EAAA;QACAC,EAAA;MACA;MACAC,OAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,gBAAA;EACA;EACAC,OAAA,WAAAA,QAAA;EACAC,OAAA;IACAF,gBAAA,WAAAA,iBAAA;MAAA,IAAAG,KAAA;MACAxB,aAAA,GAAAyB,IAAA,WAAAC,GAAA;QACAF,KAAA,CAAApB,QAAA,GAAAsB,GAAA,CAAAxB,IAAA;QACAsB,KAAA,CAAApB,QAAA,CAAAG,iBAAA,GAAAmB,GAAA,CAAAxB,IAAA,CAAAK,iBAAA;QACA,IAAAoB,SAAA,GAAAD,GAAA,CAAAxB,IAAA;UAAAK,iBAAA,GAAAoB,SAAA,CAAApB,iBAAA;UAAAqB,sBAAA,GAAAD,SAAA,CAAAC,sBAAA;QACA,IAAArB,iBAAA;UACAiB,KAAA,CAAAL,OAAA;YAAAU,EAAA,EAAAtB,iBAAA;YAAAN,IAAA,EAAA2B;UAAA;QACA;MACA;IACA;IACAE,YAAA,WAAAA,aAAAC,CAAA;MACA,IAAAC,GAAA;MACAA,GAAA,QAAAb,OAAA,CAAAc,IAAA,WAAAC,IAAA;QACA,OAAAA,IAAA,CAAAL,EAAA,KAAAE,CAAA;MACA;MACA,KAAA3B,QAAA,CAAAwB,sBAAA,GAAAI,GAAA,CAAA/B,IAAA;MACA,KAAAG,QAAA,CAAAI,qBAAA,GAAAwB,GAAA,CAAAG,YAAA;IACA;IACAC,YAAA,WAAAA,aAAAC,QAAA;MAAA,IAAAC,MAAA;MACA,KAAAC,KAAA,CAAAF,QAAA,EAAAG,QAAA,WAAAC,KAAA;QACA,IAAAA,KAAA;UACA1C,UAAA,CAAAuC,MAAA,CAAAlC,QAAA,EAAAqB,IAAA;YACAa,MAAA,CAAAI,QAAA,CAAAC,OAAA;UACA;QACA;UACAC,OAAA,CAAAC,GAAA;UACA;QACA;MACA;IACA;IACAC,YAAA,WAAAA,aAAAC,KAAA;MAAA,IAAAC,MAAA;MACA,IAAAD,KAAA;QACA,KAAA7B,OAAA;QACApB,eAAA;UAAAG,IAAA,EAAA8C;QAAA,GAAAtB,IAAA,WAAAC,GAAA;UACAsB,MAAA,CAAA9B,OAAA;UACA8B,MAAA,CAAA7B,OAAA,GAAAO,GAAA,CAAAxB,IAAA,CAAA+C,IAAA,CAAAC,MAAA,WAAAhB,IAAA;YACA,OAAAA,IAAA,CAAAjC,IAAA,CAAAkD,WAAA,GAAAC,OAAA,CAAAL,KAAA,CAAAI,WAAA;UACA;QACA;MACA;QACA,KAAAhC,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}