Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _comp=require("../../ui/src/comp"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_dom=require("../../ui/src/dom"),_util=require("./util");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _default2=exports.default=(0,_comp.defineVxeComponent)({name:"VxeWatermark",props:{width:String,height:String,imageUrl:String,rotate:{type:[Number,String],default:function(){return(0,_ui.getConfig)().watermark.rotate}},gap:{type:[Array,Number,String],default:function(){return _xeUtils.default.clone((0,_ui.getConfig)().watermark.gap,!0)}},content:[String,Array],font:Object,offset:Object,zIndex:[String,Number]},data:function(){return{xID:_xeUtils.default.uniqueId(),reactData:{markUrl:""}}},computed:{computeFontOpts:function(){return _xeUtils.default.assign({},_xeUtils.default.clone((0,_ui.getConfig)().watermark.font,!0),this.font)},computeWrapperStyle:function(){var t=this,e=this.reactData,r=t.width,n=t.height,t=t.zIndex,e=e.markUrl,i={};return r&&(i.width=(0,_dom.toCssUnit)(r)),n&&(i.height=(0,_dom.toCssUnit)(n)),e&&(i.backgroundImage="url(".concat(e,")")),t&&(i.zIndex=t),i}},methods:{dispatchEvent:function(t,e,r){this.$emit(t,(0,_ui.createEvent)(r,{$watermark:this},e))},updateMarkStyle:function(){var t=this,e=t.reactData,r=t.content,n=t.gap,i=t.rotate,a=t.offset,u=t.$refs.refElem,t=t.computeFontOpts;u&&r&&(0,_util.getContentUrl)(r,getComputedStyle(u).fontSize,{font:t,rotate:i,gap:n,offset:a}).then(function(t){e.markUrl=t})},renderVN:function(t){return t("div",{ref:"refElem",class:"vxe-watermark",style:this.computeWrapperStyle})}},watch:{imageUrl:function(){this.updateMarkStyle()},content:function(){this.updateMarkStyle()},gap:function(){this.updateMarkStyle()},rotate:function(){this.updateMarkStyle()},width:function(){this.updateMarkStyle()},height:function(){this.updateMarkStyle()},font:function(){this.updateMarkStyle()}},mounted:function(){var t=this;t.updateMarkStyle(),_ui.globalEvents.on(t,"resize",_xeUtils.default.throttle(function(){t.updateMarkStyle()},300,{trailing:!0,leading:!0}))},beforeDestroy:function(){_ui.globalEvents.off(this,"resize")},render:function(t){return this.renderVN(t)}});