Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _comp=require("../../ui/src/comp"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_dom=require("../../ui/src/dom"),_util=require("./util");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);i=i.call(t,e||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}var _default2=exports.default=(0,_comp.defineVxeComponent)({name:"VxeImage",mixins:[_ui.globalMixins.sizeMixin],props:{src:[String,Array],alt:[String,Number],loading:String,title:[String,Number],width:[String,Number],height:[String,Number],circle:Boolean,maskClosable:{type:Boolean,default:function(){return(0,_ui.getConfig)().image.maskClosable}},toolbarConfig:Object,showPreview:{type:Boolean,default:function(){return(0,_ui.getConfig)().image.showPreview}},showPrintButton:{type:Boolean,default:function(){return(0,_ui.getConfig)().image.showPrintButton}},showDownloadButton:{type:Boolean,default:function(){return(0,_ui.getConfig)().image.showDownloadButton}},size:{type:String,default:function(){return(0,_ui.getConfig)().image.size||(0,_ui.getConfig)().size}}},data:function(){return{xID:_xeUtils.default.uniqueId(),reactData:{}}},computed:Object.assign(Object.assign({},{}),{computeImgStyle:function(){var t=this.width,e=this.height,i={};return t&&e?(i.maxWidth=(0,_dom.toCssUnit)(t),i.maxHeight=(0,_dom.toCssUnit)(e)):(t&&(i.width=(0,_dom.toCssUnit)(t)),e&&(i.height=(0,_dom.toCssUnit)(e))),i},computeImgList:function(){var t=this.src;return t?(_xeUtils.default.isArray(t)?t:[t]).map(function(t){return _xeUtils.default.isString(t)?{url:t,alt:""}:{url:t.url,alt:t.alt}}):[]},computeImgItem:function(){return this.computeImgList[0]},computeImgUrl:function(){var t=this.computeImgItem;return t?"".concat(t.url||""):""}}),methods:{dispatchEvent:function(t,e,i){this.$emit(t,(0,_ui.createEvent)(i,{$image:this},e))},clickEvent:function(t){var e=this,i=e.$xeImageGroup,o=e.showPreview,r=e.toolbarConfig,n=e.showPrintButton,u=e.showDownloadButton,l=e.maskClosable,a=e.computeImgList,s=e.computeImgUrl;i?i.handleClickImgEvent(t,{url:s}):(o&&s&&(0,_util.openPreviewImage)({urlList:a,toolbarConfig:r,showPrintButton:n,showDownloadButton:u,maskClosable:l}),e.dispatchEvent("click",{url:s},t))},renderVN:function(t){var e=this,i=e.alt,o=e.loading,r=e.circle,n=e.computeImgStyle,u=e.computeImgUrl,l=e.computeSize;return t("img",{ref:"refElem",class:["vxe-image",_defineProperty(_defineProperty({},"size--".concat(l),l),"is--circle",r)],style:n,attrs:{src:u,alt:i,loading:o},on:{click:e.clickEvent}})}},render:function(t){return this.renderVN(t)}});