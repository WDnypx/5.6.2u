Object.defineProperty(exports,"__esModule",{value:!0}),exports.addClass=addClass,exports.getAbsolutePos=getAbsolutePos,exports.getDomNode=getDomNode,exports.getEventTargetNode=getEventTargetNode,exports.getOffsetPos=getOffsetPos,exports.getTpImg=getTpImg,exports.hasClass=hasClass,exports.hasControlKey=hasControlKey,exports.initTpImg=initTpImg,exports.isNodeElement=isNodeElement,exports.isPx=isPx,exports.isScale=isScale,exports.removeClass=removeClass,exports.scrollToView=scrollToView,exports.toCssUnit=toCssUnit,exports.triggerEvent=triggerEvent,exports.updatePanelPlacement=updatePanelPlacement;var tpImgEl,_xeUtils=_interopRequireDefault(require("xe-utils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function initTpImg(){return tpImgEl||((tpImgEl=new Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),tpImgEl}function getTpImg(){return tpImgEl||initTpImg()}var reClsMap={};function getClsRE(e){return reClsMap[e]||(reClsMap[e]=new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g")),reClsMap[e]}function getNodeOffset(e,t,o){if(e){var s=e.parentNode;if(o.top+=e.offsetTop,o.left+=e.offsetLeft,s&&s!==document.documentElement&&s!==document.body&&(o.top-=s.scrollTop,o.left-=s.scrollLeft),(!t||e!==t&&e.offsetParent!==t)&&e.offsetParent)return getNodeOffset(e.offsetParent,t,o)}return o}function isPx(e){return e&&/^\d+(px)?$/.test(e)}function isScale(e){return e&&/^\d+%$/.test(e)}function hasClass(e,t){return!!(e&&e.className&&e.className.match&&e.className.match(getClsRE(t)))}function removeClass(e,t){e&&hasClass(e,t)&&(e.className=e.className.replace(getClsRE(t),""))}function addClass(e,t){e&&!hasClass(e,t)&&(removeClass(e,t),e.className="".concat(e.className," ").concat(t))}function hasControlKey(e){return e.ctrlKey||e.metaKey}function toCssUnit(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"px";return _xeUtils.default.isNumber(e)||/^\d+$/.test("".concat(e))?"".concat(e).concat(t):"".concat(e||"")}function getDomNode(){var e=document.documentElement,t=document.body;return{scrollTop:e.scrollTop||t.scrollTop,scrollLeft:e.scrollLeft||t.scrollLeft,visibleHeight:e.clientHeight||t.clientHeight,visibleWidth:e.clientWidth||t.clientWidth}}function getEventTargetNode(e,t,o,s){for(var n,l=e.target.shadowRoot&&e.composed&&e.composedPath()[0]||e.target;l&&l.nodeType&&l!==document;){if(o&&hasClass(l,o)&&(!s||s(l)))n=l;else if(l===t)return{flag:!o||!!n,container:t,targetElem:n};l=l.parentNode}return{flag:!1}}function getOffsetPos(e,t){return getNodeOffset(e,t,{left:0,top:0})}function getAbsolutePos(e){var e=e.getBoundingClientRect(),t=e.top,e=e.left,o=getDomNode();return{boundingTop:t,top:o.scrollTop+t,boundingLeft:e,left:o.scrollLeft+e,visibleHeight:o.visibleHeight,visibleWidth:o.visibleWidth}}var scrollIntoViewIfNeeded="scrollIntoViewIfNeeded",scrollIntoView="scrollIntoView";function scrollToView(e){e&&(e[scrollIntoViewIfNeeded]?e[scrollIntoViewIfNeeded]():e[scrollIntoView]&&e[scrollIntoView]())}function triggerEvent(e,t){e&&e.dispatchEvent(new Event(t))}function isNodeElement(e){return e&&1===e.nodeType}function updatePanelPlacement(e,t,o){var s,n,l,i,r,a,c,o=Object.assign({teleportTo:!1,marginSize:5},o),f=o.placement,d=o.teleportTo,o=o.marginSize,u="bottom",p="",g="",m="",C="",h={};return t&&e&&(c=document.documentElement,s=document.body,n=e.offsetHeight,l=t.offsetHeight,t=t.offsetWidth,r=(i=e.getBoundingClientRect()).top,a=c.clientHeight||s.clientHeight,c=c.clientWidth||s.clientWidth,C=e.offsetWidth,d?(p=r+n,"top"===f?(u="top",p=r-l):f||(a<p+l+o&&(u="top",p=r-l),p<o&&(u="bottom",p=r+n)),c<(m=i.left)+t+o&&(m-=m+t+o-c),m<o&&(m=o)):"top"===f?(u="top",g=n):f||a<r+(p=n)+l&&o<r-n-l&&(u="top",p="",g=n),_xeUtils.default.isNumber(p)&&(h.top=toCssUnit(p)),_xeUtils.default.isNumber(g)&&(h.bottom=toCssUnit(g)),_xeUtils.default.isNumber(m)&&(h.left=toCssUnit(m)),_xeUtils.default.isNumber("")&&(h.right=toCssUnit("")),_xeUtils.default.isNumber(C))&&(h.minWidth=toCssUnit(C)),{top:p||0,bottom:g||0,left:m||0,right:0,style:h,placement:u}}