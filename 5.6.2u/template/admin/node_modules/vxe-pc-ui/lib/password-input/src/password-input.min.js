Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _comp=require("../../ui/src/comp"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_utils=require("../../ui/src/utils"),_vn=require("../../ui/src/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}var _default2=exports.default=(0,_comp.defineVxeComponent)({name:"VxePasswordInput",mixins:[_ui.globalMixins.sizeMixin],model:{prop:"value",event:"modelValue"},props:{value:String,immediate:{type:Boolean,default:!0},name:String,clearable:{type:Boolean,default:function(){return(0,_ui.getConfig)().passwordInput.clearable}},readonly:Boolean,disabled:Boolean,maxLength:[String,Number],placeholder:String,autoComplete:{type:String,default:"off"},className:String,size:{type:String,default:function(){return(0,_ui.getConfig)().passwordInput.size||(0,_ui.getConfig)().size}},prefixIcon:String,suffixIcon:String,controls:{type:Boolean,default:function(){return(0,_ui.getConfig)().passwordInput.controls}},autocomplete:String},inject:{$xeForm:{default:null},formItemInfo:{from:"xeFormItemInfo",default:null}},data:function(){return{xID:_xeUtils.default.uniqueId(),reactData:{showPwd:!1,isActivated:!1,inputValue:""}}},computed:Object.assign(Object.assign({},{}),{computeIsClearable:function(){return this.clearable},computeInpReadonly:function(){return this.readonly},computeInpPlaceholder:function(){var e=this.placeholder;return(e=e||(0,_ui.getConfig)().passwordInput.placeholder)?(0,_utils.getFuncText)(e):(0,_ui.getI18n)("vxe.base.pleaseInput")},computeInputType:function(){return this.reactData.showPwd?"text":"password"},computeInpImmediate:function(){return this.immediate}}),methods:{dispatchEvent:function(e,t,i){this.$emit(e,(0,_ui.createEvent)(i,{$passwordInput:this},t))},emitModel:function(e){var t=this,i=t._events;i&&i.modelValue?t.$emit("modelValue",e):t.$emit("model-value",e)},focus:function(){var e=this,t=e.reactData,i=e.$refs.refInputTarget;return t.isActivated=!0,i.focus(),e.$nextTick()},blur:function(){var e=this,t=e.reactData;return e.$refs.refInputTarget.blur(),t.isActivated=!1,e.$nextTick()},select:function(){var e=this.reactData;return this.$refs.refInputTarget.select(),e.isActivated=!1,this.$nextTick()},triggerEvent:function(e){var t=this.reactData.inputValue;this.dispatchEvent(e.type,{value:t},e)},emitInputEvent:function(e,t){var i=this.reactData,n=this.computeInpImmediate;i.inputValue=e,n?this.handleChange(e,t):this.dispatchEvent("input",{value:e},t)},inputEvent:function(e){var t=e.target.value;this.emitInputEvent(t,e)},handleChange:function(e,t){var i=this,n=i,r=i.reactData,a=i.$xeForm,o=i.formItemInfo;r.inputValue=e,i.emitModel(e),i.dispatchEvent("input",{value:e},t),_xeUtils.default.toValueString(n.value)!==e&&(i.dispatchEvent("change",{value:e},t),a)&&o&&a.triggerItemEvent(t,o.itemConfig.field,e)},changeEvent:function(e){var t=this.reactData,i=this.$xeForm,n=this.formItemInfo,t=(this.triggerEvent(e),t.inputValue);i&&n&&i.triggerItemEvent(e,n.itemConfig.field,t)},focusEvent:function(e){this.reactData.isActivated=!0,this.triggerEvent(e)},blurEvent:function(e){var t=this.reactData,i=this.$xeForm,n=this.formItemInfo,t=t.inputValue;this.dispatchEvent("blur",{value:t},e),i&&n&&i.triggerItemEvent(e,n.itemConfig.field,t)},passwordToggleEvent:function(e){var t=this.reactData,i=this.readonly,n=this.disabled,r=t.showPwd;n||i||(t.showPwd=!r),this.dispatchEvent("toggle-visible",{visible:t.showPwd},e)},clickEvent:function(e){this.triggerEvent(e)},clearValueEvent:function(e,t){this.focus(),this.handleChange("",e),this.dispatchEvent("clear",{value:t},e)},clickSuffixEvent:function(e){var t=this.reactData;this.disabled||(t=t.inputValue,this.dispatchEvent("suffix-click",{value:t},e))},clickPrefixEvent:function(e){var t=this.reactData;this.disabled||(t=t.inputValue,this.dispatchEvent("prefix-click",{value:t},e))},renderPasswordIcon:function(e){var t=this.reactData.showPwd;return e("div",{class:"vxe-password-input--control-icon",on:{click:this.passwordToggleEvent}},[e("i",{class:["vxe-password-input--password-icon",t?(0,_ui.getIcon)().PASSWORD_INPUT_SHOW_PWD:(0,_ui.getIcon)().PASSWORD_INPUT_HIDE_PWD]})])},renderPrefixIcon:function(e){var t=this.$scopedSlots,i=this.prefixIcon,t=t.prefix;return t||i?e("div",{class:"vxe-password-input--prefix",on:{click:this.clickPrefixEvent}},[e("div",{class:"vxe-password-input--prefix-icon"},t?(0,_vn.getSlotVNs)(t({})):[e("i",{class:i})])]):null},renderSuffixIcon:function(e){var t=this,i=t.$scopedSlots,n=t.disabled,r=t.suffixIcon,a=t.controls,o=t.reactData.inputValue,i=i.suffix,u=t.computeIsClearable;return u||a||i||r?e("div",{class:["vxe-password-input--suffix",{"is--clear":u&&!n&&!(""===o||_xeUtils.default.eqNull(o))}]},[u?e("div",{class:"vxe-password-input--clear-icon",on:{click:t.clearValueEvent}},[e("i",{class:(0,_ui.getIcon)().INPUT_CLEAR})]):(0,_ui.renderEmptyElement)(t),a?t.renderPasswordIcon(e):(0,_ui.renderEmptyElement)(t),i||r?e("div",{class:"vxe-password-input--suffix-icon",on:{click:t.clickSuffixEvent}},i?(0,_vn.getSlotVNs)(i({})):[e("i",{class:r})]):(0,_ui.renderEmptyElement)(t)]):null},renderVN:function(e){var t=this,i=t.reactData,n=t.className,r=t.name,a=t.disabled,o=t.readonly,u=t.autocomplete,s=t.autoComplete,l=t.maxLength,c=i.inputValue,i=i.isActivated,p=t.computeSize,f=t.computeInpReadonly,d=t.computeInputType,v=t.computeInpPlaceholder,m=t.computeIsClearable,h=t.renderPrefixIcon(e),g=t.renderSuffixIcon(e);return e("div",{ref:"refElem",class:["vxe-password-input",n,_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},"size--".concat(p),p),"is--prefix",!!h),"is--suffix",!!g),"is--readonly",o),"is--disabled",a),"is--active",i),"show--clear",m&&!a&&!(""===c||_xeUtils.default.eqNull(c)))],attrs:{spellcheck:!1}},[h||(0,_ui.renderEmptyElement)(t),e("div",{class:"vxe-password-input--wrapper"},[e("input",{ref:"refInputTarget",class:"vxe-password-input--inner",domProps:{value:c},attrs:{name:r,type:d,placeholder:v,readonly:f,disabled:a,autocomplete:u||s,maxlength:l},on:{click:t.clickEvent,input:t.inputEvent,change:t.changeEvent,focus:t.focusEvent,blur:t.blurEvent}})]),g||(0,_ui.renderEmptyElement)(t)])}},watch:{value:function(e){this.reactData.inputValue=e}},created:function(){this.reactData.inputValue=this.value},render:function(e){return this.renderVN(e)}});