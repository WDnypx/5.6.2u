function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VxeModal=exports.ModalController=exports.Modal=void 0;var _vue=_interopRequireDefault(require("vue")),_core=require("@vxe-ui/core"),_xeUtils=_interopRequireDefault(require("xe-utils")),_modal=_interopRequireWildcard(require("./src/modal")),_dynamics=require("../dynamics");function _getRequireWildcardCache(e){var o,t;return"function"!=typeof WeakMap?null:(o=new WeakMap,t=new WeakMap,(_getRequireWildcardCache=function(e){return e?t:o})(e))}function _interopRequireWildcard(e,o){if(!o&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};o=_getRequireWildcardCache(o);if(o&&o.has(e))return o.get(e);var t,n,r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((n=l?Object.getOwnPropertyDescriptor(e,t):null)&&(n.get||n.set)?Object.defineProperty(r,t,n):r[t]=e[t]);return r.default=e,o&&o.set(e,r),r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function handleModal(e){return(0,_dynamics.checkDynamic)(),new Promise(function(t){var n,r,o=Object.assign({},e);o.id&&_modal.allActiveModals.some(function(e){return e.id===o.id})?t("exist"):(n=Object.assign({},o.events),r={key:_xeUtils.default.uniqueId(),props:Object.assign(o,{value:!0}),on:Object.assign(Object.assign({},n),{hide:function(e){var o=_dynamics.dynamicStore.modals;n.hide&&n.hide.call(this,e),_dynamics.dynamicStore.modals=o.filter(function(e){return e.key!==r.key}),t(e.type)}})},_dynamics.dynamicStore.modals.push(r))})}function getModal(o){return _xeUtils.default.find(_modal.allActiveModals,function(e){return e.id===o})}function closeModal(e){var e=e?[getModal(e)]:_modal.allActiveModals,o=[];return e.forEach(function(e){e&&o.push(e.close())}),Promise.all(o)}function handleOpen(e,o,t,n){o=_xeUtils.default.isObject(o)?o:{content:_xeUtils.default.toValueString(o),title:t};return handleModal(Object.assign(Object.assign(Object.assign({},e),n),o))}function openModal(e){return handleOpen({type:"modal"},e)}function openAlert(e,o,t){return handleOpen({type:"alert",lockScroll:!0,showHeader:!0,showFooter:!0},e,o,t)}function openConfirm(e,o,t){return handleOpen({type:"confirm",status:"question",lockScroll:!0,showHeader:!0,showFooter:!0},e,o,t)}function openMessage(e,o){return handleOpen({type:"message",mask:!1,lockView:!1,lockScroll:!1,showHeader:!1},e,"",o)}function openNotification(e,o,t){return handleOpen({type:"notification",mask:!1,lockView:!1,lockScroll:!1,showHeader:!0,draggable:!1,position:"top-right",width:320},e,o,t)}var ModalController=exports.ModalController={get:getModal,close:closeModal,open:openModal,alert:openAlert,confirm:openConfirm,message:openMessage,notification:openNotification},VxeModal=exports.VxeModal=Object.assign(_modal.default,{install:function(e){e.component(_modal.default.name,_modal.default),_vue.default.prototype.$vxe?_vue.default.prototype.$vxe.modal=ModalController:_vue.default.prototype.$vxe={modal:ModalController}}}),Modal=(_core.VxeUI.modal=ModalController,_dynamics.dynamicApp.use(VxeModal),_core.VxeUI.component(_modal.default),exports.Modal=VxeModal),_default=exports.default=VxeModal;