Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _comp=require("../../ui/src/comp"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_utils=require("../../ui/src/utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}var _default2=exports.default=(0,_comp.defineVxeComponent)({name:"VxeSwitch",mixins:[_ui.globalMixins.sizeMixin,_ui.globalMixins.permissionMixin],props:{value:[String,Number,Boolean],disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},size:{type:String,default:function(){return(0,_ui.getConfig)().switch.size||(0,_ui.getConfig)().size}},openLabel:String,closeLabel:String,openValue:{type:[String,Number,Boolean],default:!0},closeValue:{type:[String,Number,Boolean],default:!1},openIcon:String,closeIcon:String,openActiveIcon:String,closeActiveIcon:String},inject:{$xeForm:{default:null},formItemInfo:{from:"xeFormItemInfo",default:null}},data:function(){return{xID:_xeUtils.default.uniqueId(),reactData:{isActivated:!1,hasAnimat:!1,offsetLeft:0},internalData:{}}},computed:Object.assign(Object.assign({},{}),{computeIsDisabled:function(){var e=this.$xeForm,t=this.disabled;return null===t?!!e&&(e.readonly||e.disabled):t},computeIsReadonly:function(){var e=this.$xeForm,t=this.readonly;return null===t?!!e&&(e.readonly||e.disabled):t},computeOnShowLabel:function(){return(0,_utils.getFuncText)(this.openLabel)},computeOffShowLabel:function(){return(0,_utils.getFuncText)(this.closeLabel)},computeIsChecked:function(){return this.value===this.openValue}}),methods:{dispatchEvent:function(e,t,i){this.$emit(e,(0,_ui.createEvent)(i,{$switch:this},t))},emitModel:function(e){var t=this,i=t._events;t.$emit("input",e),i&&i.modelValue?t.$emit("modelValue",e):t.$emit("model-value",e)},focus:function(){var e=this,t=e.reactData,i=e.$refs.refButton;return t.isActivated=!0,i&&i.focus(),e.$nextTick()},blur:function(){var e=this,t=e.reactData,i=e.$refs.refButton;return i&&i.blur(),t.isActivated=!1,e.$nextTick()},clickEvent:function(e){var t,i=this,n=i,o=i.reactData,r=i.internalData,u=i.$xeForm,a=i.formItemInfo;i.computeIsDisabled||i.computeIsReadonly||(t=i.computeIsChecked,clearTimeout(r.atTimeout),t=t?n.closeValue:n.openValue,o.hasAnimat=!0,i.emitModel(t),i.dispatchEvent("change",{value:t},e),u&&a&&u.triggerItemEvent(e,a.itemConfig.field,t),r.atTimeout=setTimeout(function(){o.hasAnimat=!1,r.atTimeout=void 0},400))},focusEvent:function(e){this.reactData.isActivated=!0,this.dispatchEvent("focus",{value:this.value},e)},blurEvent:function(e){this.reactData.isActivated=!1,this.dispatchEvent("blur",{value:this.value},e)},renderVN:function(e){var t=this,i=t.reactData,n=t.openIcon,o=t.closeIcon,r=t.openActiveIcon,u=t.closeActiveIcon,a=t.computeSize,l=t.computeIsChecked,s=t.computeOnShowLabel,c=t.computeOffShowLabel,f=t.computeIsDisabled,m=t.computeIsReadonly;return e("div",{class:["vxe-switch",l?"is--on":"is--off",_defineProperty(_defineProperty(_defineProperty(_defineProperty({},"size--".concat(a),a),"is--disabled",f),"is--readonly",m),"is--animat",i.hasAnimat)]},[e("button",{ref:"refButton",class:"vxe-switch--button",attrs:{type:"button",disabled:f||m},on:{click:t.clickEvent,focus:t.focusEvent,blur:t.blurEvent}},[e("span",{class:"vxe-switch--label vxe-switch--label-on"},[n?e("i",{class:["vxe-switch--label-icon",n]}):(0,_ui.renderEmptyElement)(t),s]),e("span",{class:"vxe-switch--label vxe-switch--label-off"},[o?e("i",{class:["vxe-switch--label-icon",o]}):(0,_ui.renderEmptyElement)(t),c]),e("span",{class:["vxe-switch--icon"]},r||u?[e("i",{class:l?r:u})]:[])])])}},render:function(e){return this.renderVN(e)}});