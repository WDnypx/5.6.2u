Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasHex=hasHex,exports.hasRgb=hasRgb,exports.hexToHsv=hexToHsv,exports.hexToRgb=hexToRgb,exports.hsvToRgb=hsvToRgb,exports.parseColor=parseColor,exports.rgbToHex=rgbToHex,exports.rgbToHsv=rgbToHsv,exports.toRgb=toRgb,exports.updateColorAlpha=updateColorAlpha;var _xeUtils=_interopRequireDefault(require("xe-utils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var hexAlphaKeyMaps={},hexAlphaNumMaps={},rgbRE=("FF,FC,FA,F7,F5,F2,F0,ED,EB,E8,E6,E3,E0,DE,DB,D9,D6,D4,D1,CF,CC,C9,C7,C4,C2,BF,BD,BA,B8,B5,B3,B0,AD,AB,A8,A6,A3,A1,9E,9C,99,96,94,91,8F,8C,8A,87,85,82,80,7D,7A,78,75,73,70,6E,6B,69,66,63,61,5E,5C,59,57,54,52,4F,4D,4A,47,45,42,40,3D,3B,38,36,33,30,2E,2B,29,26,24,21,1F,1C,1A,17,14,12,0F,0D,0A,08,05,03,00".split(",").forEach(function(e,a){a=(100-a)/100;hexAlphaKeyMaps[e]=a,hexAlphaNumMaps[a]=e}),/^rgb(a?)\((\d{1,3})[,\s]+(\d{1,3})[,\s]+(\d{1,3})([,//\s]+([0-9.]{1,4})(%?))?\)$/);function hasRgb(e){return e&&rgbRE.test(e)}var hexRE=/^(#?)([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;function hasHex(e){return e&&hexRE.test(e)}function parseColor(e){var a,r={value:"",type:"",hex:"",hexV:"",hexA:"",r:0,g:0,b:0,a:1};return e&&((a=e.match(hexRE))&&(r.value=e,r.type="hex",r.hex=e,r.hexV=a[2],r.hexA=a[3]||"",r.a=(a[3]?hexAlphaKeyMaps[a[3].toUpperCase()]:1)||1),a=e.match(rgbRE))&&(r.value=e,r.type=a[6]?"rgba":"rgb",r.r=parseInt(a[2]),r.g=parseInt(a[3]),r.b=parseInt(a[4]),r.a=a[7]?parseInt(a[6])/100:a[6]?parseFloat(a[6]):1),r}function updateColorAlpha(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,e=parseColor(e),r=e.type,t=e.hexV;return"rgb"===r||"rgba"===r?toRgb(e.r,e.g,e.b,a):"hex"===r?"#".concat(t).concat(1!==a&&hexAlphaNumMaps[a]||""):""}function toRgb(e,a,r,t){return _xeUtils.default.eqNull(t)?"rgb(".concat(e,",").concat(a,",").concat(r,")"):"rgba(".concat(e,",").concat(a,",").concat(r,",").concat(t,")")}function rgbToHex(e){var a,r,t;return e?(a=e.r,r=e.g,t=e.b,e=void 0===(e=e.a)?1:e,a=a.toString(16).padStart(2,"0"),r=r.toString(16).padStart(2,"0"),t=t.toString(16).padStart(2,"0"),e=1!==e&&hexAlphaNumMaps[e]||"","#".concat(a).concat(r).concat(t).concat(e).toUpperCase()):""}function rgbToHsv(e){var a,r,t,o,n,s,p,h,u;return e?(a=e.r/255,r=e.g/255,e=e.b/255,s=t=0,o=Math.max(a,r,e),u=function(e){return(o-e)/6/n+.5},0==(n=o-Math.min(a,r,e))?t=s=0:(s=n/o,p=u(a),h=u(r),u=u(e),a===o?t=u-h:r===o?t=1/3+p-u:e===o&&(t=2/3+h-p),t<0?t+=1:1<t&&--t),{h:Math.round(360*t),s:_xeUtils.default.round(s,2),v:_xeUtils.default.round(o,2)}):null}function hsvToRgb(e,a,r){var t=0,o=0,n=0,s=Math.floor(e/60),e=e/60-s,p=r*(1-a),h=r*(1-e*a),u=r*(1-(1-e)*a);switch(s){case 0:t=r,o=u,n=p;break;case 1:t=h,o=r,n=p;break;case 2:t=p,o=r,n=u;break;case 3:t=p,o=h,n=r;break;case 4:t=u,o=p,n=r;break;case 5:t=r,o=p,n=h}return{r:Math.round(255*t),g:Math.round(255*o),b:Math.round(255*n)}}function hexToHsv(e){e=hexToRgb(e);return e?rgbToHsv(e):null}function hexToRgb(e){if(e){e=e.match(/^(#?)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})?$/);if(e)return{r:parseInt(e[2],16),g:parseInt(e[3],16),b:parseInt(e[4],16),a:(e[5]?hexAlphaKeyMaps[e[5].toUpperCase()]:1)||1}}return null}