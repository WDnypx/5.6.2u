Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _comp=require("../../ui/src/comp"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_util=require("./util"),_vn=require("../../ui/src/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default2=exports.default=(0,_comp.defineVxeComponent)({name:"VxePrint",props:{align:{type:String,default:function(){return(0,_ui.getConfig)().print.align}},title:String,headerAlign:{type:String,default:function(){return(0,_ui.getConfig)().print.headerAlign}},footerAlign:{type:String,default:function(){return(0,_ui.getConfig)().print.footerAlign}},showPageNumber:{type:Boolean,default:function(){return(0,_ui.getConfig)().print.showPageNumber}},customLayout:Boolean,pageBreaks:Array,content:String,html:String,headerHtml:String,footerHtml:String,leftHtml:String,rightHtml:String,showAllPageTitle:{type:Boolean,default:function(){return(0,_ui.getConfig)().print.showAllPageTitle}},pageStyle:{type:Object,default:function(){return(0,_ui.getConfig)().print.pageStyle}},customStyle:{type:String,default:function(){return(0,_ui.getConfig)().print.customStyle}},beforeMethod:Function},provide:function(){return{$xePrint:this}},data:function(){return{xID:_xeUtils.default.uniqueId(),reactData:{staticPageBreaks:[]}}},methods:{dispatchEvent:function(e,t,r){this.$emit(e,(0,_ui.createEvent)(r,{$print:this},t))},print:function(){var e=this,t=e,r=e.reactData,e=e.$refs.refElem;return(0,_util.printHtml)(Object.assign({},t,{_pageBreaks:!!r.staticPageBreaks.length,html:(0,_util.trimHtml)(e?e.outerHTML:"")||t.html||t.content||""}))},renderPageConfigLayouts:function(s){var u=this,c=u,g=c.title,p=c.showPageNumber,d=c.showAllPageTitle,f=c.align,v=c.headerAlign,m=c.footerAlign,e=c.pageBreaks||[],h=e.length;return e.map(function(e,t){var r=e.bodyHtml,n=e.headerHtml||c.headerHtml,a=e.footerHtml||c.footerHtml,i=e.leftHtml||c.leftHtml,e=e.rightHtml||c.rightHtml,l=t+1,o={currentPage:l,pageCount:h};return s("div",{class:["vxe-print-page-break",f?"align--".concat(f):""]},[s("div",{class:["vxe-print-page-break--header",v?"align--".concat(v):""]},n?"".concat(_xeUtils.default.isFunction(n)?n(o):n||""):[!g||!d&&t?(0,_ui.renderEmptyElement)(u):s("div",{class:"vxe-print-page-break--header-title"},"".concat(g||""))]),s("div",{class:"vxe-print-page-break--body"},[s("div",{class:"vxe-print-page-break--left"},"".concat(_xeUtils.default.isFunction(i)?i(o):i||"")),s("div",{class:"vxe-print-page-break--content"},"".concat(_xeUtils.default.isFunction(r)?r(o):r||"")),s("div",{class:"vxe-print-page-break--right"},"".concat(_xeUtils.default.isFunction(e)?e(o):e||""))]),s("div",{class:["vxe-print-page-break--footer",m?"align--".concat(m):""]},a?"".concat(_xeUtils.default.isFunction(a)?a(o):a||""):[p?s("div",{class:"vxe-print-page-break--footer-page-number"},"".concat(l,"/").concat(h)):(0,_ui.renderEmptyElement)(u)])])})},renderPageStaticLayouts:function(s){var u=this,c=u.$scopedSlots,g=u.title,p=u.showPageNumber,d=u.showAllPageTitle,f=u.align,v=u.headerAlign,m=u.footerAlign,e=u.reactData.staticPageBreaks,h=e.length;return e.map(function(e,t){var e=e.slots||{},r=t+1,n=e.default,a=e.header||c.header,i=e.footer||c.footer,l=e.left||c.left,e=e.right||c.right,o={currentPage:r,pageCount:h};return s("div",{class:["vxe-print-page-break",f?"align--".concat(f):""]},[s("div",{class:["vxe-print-page-break--header",v?"align--".concat(v):""]},a?(0,_vn.getSlotVNs)(a(o)):[!g||!d&&t?(0,_ui.renderEmptyElement)(u):s("div",{class:"vxe-print-page-break--header-title"},"".concat(g||""))]),s("div",{class:"vxe-print-page-break--body"},[s("div",{class:"vxe-print-page-break--left"},l?(0,_vn.getSlotVNs)(l(o)):[]),s("div",{class:"vxe-print-page-break--content"},n?(0,_vn.getSlotVNs)(n(o)):[]),s("div",{class:"vxe-print-page-break--right"},e?(0,_vn.getSlotVNs)(e(o)):[])]),s("div",{class:["vxe-print-page-break--footer",m?"align--".concat(m):""]},i?(0,_vn.getSlotVNs)(i(o)):[p?s("div",{class:"vxe-print-page-break--footer-page-number"},"".concat(r,"/").concat(h)):(0,_ui.renderEmptyElement)(u)])])})},renderVN:function(e){var t=this,r=t.$scopedSlots,n=t.customLayout,a=t.reactData.staticPageBreaks,r=r.default;return e("div",{ref:"refElem",class:["vxe-print"]},n?r?(0,_vn.getSlotVNs)(r({})):[]:[e("div",{key:"slot",class:"vxe-print-slots"},r?(0,_vn.getSlotVNs)(r({})):[])].concat(a.length?t.renderPageStaticLayouts(e):t.renderPageConfigLayouts(e)))}},render:function(e){return this.renderVN(e)}});